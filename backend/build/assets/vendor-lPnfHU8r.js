var h1=Object.defineProperty;var w_=_e=>{throw TypeError(_e)};var f1=(_e,$,ht)=>$ in _e?h1(_e,$,{enumerable:!0,configurable:!0,writable:!0,value:ht}):_e[$]=ht;var Sr=(_e,$,ht)=>f1(_e,typeof $!="symbol"?$+"":$,ht),SE=(_e,$,ht)=>$.has(_e)||w_("Cannot "+ht);var St=(_e,$,ht)=>(SE(_e,$,"read from private field"),ht?ht.call(_e):$.get(_e)),Kt=(_e,$,ht)=>$.has(_e)?w_("Cannot add the same private member more than once"):$ instanceof WeakSet?$.add(_e):$.set(_e,ht),zt=(_e,$,ht,vt)=>(SE(_e,$,"write to private field"),vt?vt.call(_e,ht):$.set(_e,ht),ht),Ut=(_e,$,ht)=>(SE(_e,$,"access private method"),ht);var eo=(_e,$,ht,vt)=>({set _(bt){zt(_e,$,bt,ht)},get _(){return St(_e,$,vt)}});function _mergeNamespaces(_e,$){for(var ht=0;ht<$.length;ht++){const vt=$[ht];if(typeof vt!="string"&&!Array.isArray(vt)){for(const bt in vt)if(bt!=="default"&&!(bt in _e)){const Et=Object.getOwnPropertyDescriptor(vt,bt);Et&&Object.defineProperty(_e,bt,Et.get?Et:{enumerable:!0,get:()=>vt[bt]})}}}return Object.freeze(Object.defineProperty(_e,Symbol.toStringTag,{value:"Module"}))}function getDefaultExportFromCjs(_e){return _e&&_e.__esModule&&Object.prototype.hasOwnProperty.call(_e,"default")?_e.default:_e}function getAugmentedNamespace(_e){if(_e.__esModule)return _e;var $=_e.default;if(typeof $=="function"){var ht=function vt(){return this instanceof vt?Reflect.construct($,arguments,this.constructor):$.apply(this,arguments)};ht.prototype=$.prototype}else ht={};return Object.defineProperty(ht,"__esModule",{value:!0}),Object.keys(_e).forEach(function(vt){var bt=Object.getOwnPropertyDescriptor(_e,vt);Object.defineProperty(ht,vt,bt.get?bt:{enumerable:!0,get:function(){return _e[vt]}})}),ht}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$5=Symbol.for("react.portal"),p$6=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$3=Symbol.for("react.profiler"),t$5=Symbol.for("react.provider"),u$8=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$5=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$4(_e){return _e===null||typeof _e!="object"?null:(_e=z$2&&_e[z$2]||_e["@@iterator"],typeof _e=="function"?_e:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$5={};function E$2(_e,$,ht){this.props=_e,this.context=$,this.refs=D$5,this.updater=ht||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(_e,$){if(typeof _e!="object"&&typeof _e!="function"&&_e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_e,$,"setState")};E$2.prototype.forceUpdate=function(_e){this.updater.enqueueForceUpdate(this,_e,"forceUpdate")};function F$4(){}F$4.prototype=E$2.prototype;function G$3(_e,$,ht){this.props=_e,this.context=$,this.refs=D$5,this.updater=ht||B$2}var H$3=G$3.prototype=new F$4;H$3.constructor=G$3;C$2(H$3,E$2.prototype);H$3.isPureReactComponent=!0;var I$5=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$1={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$4(_e,$,ht){var vt,bt={},Et=null,At=null;if($!=null)for(vt in $.ref!==void 0&&(At=$.ref),$.key!==void 0&&(Et=""+$.key),$)J$2.call($,vt)&&!L$2.hasOwnProperty(vt)&&(bt[vt]=$[vt]);var _t=arguments.length-2;if(_t===1)bt.children=ht;else if(1<_t){for(var wt=Array(_t),Ct=0;Ct<_t;Ct++)wt[Ct]=arguments[Ct+2];bt.children=wt}if(_e&&_e.defaultProps)for(vt in _t=_e.defaultProps,_t)bt[vt]===void 0&&(bt[vt]=_t[vt]);return{$$typeof:l$3,type:_e,key:Et,ref:At,props:bt,_owner:K$1.current}}function N$4(_e,$){return{$$typeof:l$3,type:_e.type,key:$,ref:_e.ref,props:_e.props,_owner:_e._owner}}function O$3(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===l$3}function escape$1(_e){var $={"=":"=0",":":"=2"};return"$"+_e.replace(/[=:]/g,function(ht){return $[ht]})}var P$4=/\/+/g;function Q$1(_e,$){return typeof _e=="object"&&_e!==null&&_e.key!=null?escape$1(""+_e.key):$.toString(36)}function R$2(_e,$,ht,vt,bt){var Et=typeof _e;(Et==="undefined"||Et==="boolean")&&(_e=null);var At=!1;if(_e===null)At=!0;else switch(Et){case"string":case"number":At=!0;break;case"object":switch(_e.$$typeof){case l$3:case n$5:At=!0}}if(At)return At=_e,bt=bt(At),_e=vt===""?"."+Q$1(At,0):vt,I$5(bt)?(ht="",_e!=null&&(ht=_e.replace(P$4,"$&/")+"/"),R$2(bt,$,ht,"",function(Ct){return Ct})):bt!=null&&(O$3(bt)&&(bt=N$4(bt,ht+(!bt.key||At&&At.key===bt.key?"":(""+bt.key).replace(P$4,"$&/")+"/")+_e)),$.push(bt)),1;if(At=0,vt=vt===""?".":vt+":",I$5(_e))for(var _t=0;_t<_e.length;_t++){Et=_e[_t];var wt=vt+Q$1(Et,_t);At+=R$2(Et,$,ht,wt,bt)}else if(wt=A$4(_e),typeof wt=="function")for(_e=wt.call(_e),_t=0;!(Et=_e.next()).done;)Et=Et.value,wt=vt+Q$1(Et,_t++),At+=R$2(Et,$,ht,wt,bt);else if(Et==="object")throw $=String(_e),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return At}function S$5(_e,$,ht){if(_e==null)return _e;var vt=[],bt=0;return R$2(_e,vt,"","",function(Et){return $.call(ht,Et,bt++)}),vt}function T$4(_e){if(_e._status===-1){var $=_e._result;$=$(),$.then(function(ht){(_e._status===0||_e._status===-1)&&(_e._status=1,_e._result=ht)},function(ht){(_e._status===0||_e._status===-1)&&(_e._status=2,_e._result=ht)}),_e._status===-1&&(_e._status=0,_e._result=$)}if(_e._status===1)return _e._result.default;throw _e._result}var U$3={current:null},V$2={transition:null},W$3={ReactCurrentDispatcher:U$3,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$1};function X$2(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$5,forEach:function(_e,$,ht){S$5(_e,function(){$.apply(this,arguments)},ht)},count:function(_e){var $=0;return S$5(_e,function(){$++}),$},toArray:function(_e){return S$5(_e,function($){return $})||[]},only:function(_e){if(!O$3(_e))throw Error("React.Children.only expected to receive a single React element child.");return _e}};react_production_min.Component=E$2;react_production_min.Fragment=p$6;react_production_min.Profiler=r$3;react_production_min.PureComponent=G$3;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$3;react_production_min.act=X$2;react_production_min.cloneElement=function(_e,$,ht){if(_e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_e+".");var vt=C$2({},_e.props),bt=_e.key,Et=_e.ref,At=_e._owner;if($!=null){if($.ref!==void 0&&(Et=$.ref,At=K$1.current),$.key!==void 0&&(bt=""+$.key),_e.type&&_e.type.defaultProps)var _t=_e.type.defaultProps;for(wt in $)J$2.call($,wt)&&!L$2.hasOwnProperty(wt)&&(vt[wt]=$[wt]===void 0&&_t!==void 0?_t[wt]:$[wt])}var wt=arguments.length-2;if(wt===1)vt.children=ht;else if(1<wt){_t=Array(wt);for(var Ct=0;Ct<wt;Ct++)_t[Ct]=arguments[Ct+2];vt.children=_t}return{$$typeof:l$3,type:_e.type,key:bt,ref:Et,props:vt,_owner:At}};react_production_min.createContext=function(_e){return _e={$$typeof:u$8,_currentValue:_e,_currentValue2:_e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_e.Provider={$$typeof:t$5,_context:_e},_e.Consumer=_e};react_production_min.createElement=M$4;react_production_min.createFactory=function(_e){var $=M$4.bind(null,_e);return $.type=_e,$};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_e){return{$$typeof:v$2,render:_e}};react_production_min.isValidElement=O$3;react_production_min.lazy=function(_e){return{$$typeof:y$5,_payload:{_status:-1,_result:_e},_init:T$4}};react_production_min.memo=function(_e,$){return{$$typeof:x$1,type:_e,compare:$===void 0?null:$}};react_production_min.startTransition=function(_e){var $=V$2.transition;V$2.transition={};try{_e()}finally{V$2.transition=$}};react_production_min.unstable_act=X$2;react_production_min.useCallback=function(_e,$){return U$3.current.useCallback(_e,$)};react_production_min.useContext=function(_e){return U$3.current.useContext(_e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(_e){return U$3.current.useDeferredValue(_e)};react_production_min.useEffect=function(_e,$){return U$3.current.useEffect(_e,$)};react_production_min.useId=function(){return U$3.current.useId()};react_production_min.useImperativeHandle=function(_e,$,ht){return U$3.current.useImperativeHandle(_e,$,ht)};react_production_min.useInsertionEffect=function(_e,$){return U$3.current.useInsertionEffect(_e,$)};react_production_min.useLayoutEffect=function(_e,$){return U$3.current.useLayoutEffect(_e,$)};react_production_min.useMemo=function(_e,$){return U$3.current.useMemo(_e,$)};react_production_min.useReducer=function(_e,$,ht){return U$3.current.useReducer(_e,$,ht)};react_production_min.useRef=function(_e){return U$3.current.useRef(_e)};react_production_min.useState=function(_e){return U$3.current.useState(_e)};react_production_min.useSyncExternalStore=function(_e,$,ht){return U$3.current.useSyncExternalStore(_e,$,ht)};react_production_min.useTransition=function(){return U$3.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),t$4=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$6=reactExports,k=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$5=Object.prototype.hasOwnProperty,n$4=f$6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$5={key:!0,ref:!0,__self:!0,__source:!0};function q$1(_e,$,ht){var vt,bt={},Et=null,At=null;ht!==void 0&&(Et=""+ht),$.key!==void 0&&(Et=""+$.key),$.ref!==void 0&&(At=$.ref);for(vt in $)m$5.call($,vt)&&!p$5.hasOwnProperty(vt)&&(bt[vt]=$[vt]);if(_e&&_e.defaultProps)for(vt in $=_e.defaultProps,$)bt[vt]===void 0&&(bt[vt]=$[vt]);return{$$typeof:k,type:_e,key:Et,ref:At,props:bt,_owner:n$4.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_e){function $(hn,nn){var mn=hn.length;hn.push(nn);e:for(;0<mn;){var xn=mn-1>>>1,rn=hn[xn];if(0<bt(rn,nn))hn[xn]=nn,hn[mn]=rn,mn=xn;else break e}}function ht(hn){return hn.length===0?null:hn[0]}function vt(hn){if(hn.length===0)return null;var nn=hn[0],mn=hn.pop();if(mn!==nn){hn[0]=mn;e:for(var xn=0,rn=hn.length,qt=rn>>>1;xn<qt;){var Yt=2*(xn+1)-1,tn=hn[Yt],dn=Yt+1,cn=hn[dn];if(0>bt(tn,mn))dn<rn&&0>bt(cn,tn)?(hn[xn]=cn,hn[dn]=mn,xn=dn):(hn[xn]=tn,hn[Yt]=mn,xn=Yt);else if(dn<rn&&0>bt(cn,mn))hn[xn]=cn,hn[dn]=mn,xn=dn;else break e}}return nn}function bt(hn,nn){var mn=hn.sortIndex-nn.sortIndex;return mn!==0?mn:hn.id-nn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Et=performance;_e.unstable_now=function(){return Et.now()}}else{var At=Date,_t=At.now();_e.unstable_now=function(){return At.now()-_t}}var wt=[],Ct=[],xt=1,Pt=null,Rt=3,kt=!1,Mt=!1,Lt=!1,Ot=typeof setTimeout=="function"?setTimeout:null,Ft=typeof clearTimeout=="function"?clearTimeout:null,Dt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $t(hn){for(var nn=ht(Ct);nn!==null;){if(nn.callback===null)vt(Ct);else if(nn.startTime<=hn)vt(Ct),nn.sortIndex=nn.expirationTime,$(wt,nn);else break;nn=ht(Ct)}}function Bt(hn){if(Lt=!1,$t(hn),!Mt)if(ht(wt)!==null)Mt=!0,En(Nt);else{var nn=ht(Ct);nn!==null&&un(Bt,nn.startTime-hn)}}function Nt(hn,nn){Mt=!1,Lt&&(Lt=!1,Ft(jt),jt=-1),kt=!0;var mn=Rt;try{for($t(nn),Pt=ht(wt);Pt!==null&&(!(Pt.expirationTime>nn)||hn&&!Gt());){var xn=Pt.callback;if(typeof xn=="function"){Pt.callback=null,Rt=Pt.priorityLevel;var rn=xn(Pt.expirationTime<=nn);nn=_e.unstable_now(),typeof rn=="function"?Pt.callback=rn:Pt===ht(wt)&&vt(wt),$t(nn)}else vt(wt);Pt=ht(wt)}if(Pt!==null)var qt=!0;else{var Yt=ht(Ct);Yt!==null&&un(Bt,Yt.startTime-nn),qt=!1}return qt}finally{Pt=null,Rt=mn,kt=!1}}var Ht=!1,Vt=null,jt=-1,Xt=5,Jt=-1;function Gt(){return!(_e.unstable_now()-Jt<Xt)}function en(){if(Vt!==null){var hn=_e.unstable_now();Jt=hn;var nn=!0;try{nn=Vt(!0,hn)}finally{nn?on():(Ht=!1,Vt=null)}}else Ht=!1}var on;if(typeof Dt=="function")on=function(){Dt(en)};else if(typeof MessageChannel<"u"){var _n=new MessageChannel,ln=_n.port2;_n.port1.onmessage=en,on=function(){ln.postMessage(null)}}else on=function(){Ot(en,0)};function En(hn){Vt=hn,Ht||(Ht=!0,on())}function un(hn,nn){jt=Ot(function(){hn(_e.unstable_now())},nn)}_e.unstable_IdlePriority=5,_e.unstable_ImmediatePriority=1,_e.unstable_LowPriority=4,_e.unstable_NormalPriority=3,_e.unstable_Profiling=null,_e.unstable_UserBlockingPriority=2,_e.unstable_cancelCallback=function(hn){hn.callback=null},_e.unstable_continueExecution=function(){Mt||kt||(Mt=!0,En(Nt))},_e.unstable_forceFrameRate=function(hn){0>hn||125<hn?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Xt=0<hn?Math.floor(1e3/hn):5},_e.unstable_getCurrentPriorityLevel=function(){return Rt},_e.unstable_getFirstCallbackNode=function(){return ht(wt)},_e.unstable_next=function(hn){switch(Rt){case 1:case 2:case 3:var nn=3;break;default:nn=Rt}var mn=Rt;Rt=nn;try{return hn()}finally{Rt=mn}},_e.unstable_pauseExecution=function(){},_e.unstable_requestPaint=function(){},_e.unstable_runWithPriority=function(hn,nn){switch(hn){case 1:case 2:case 3:case 4:case 5:break;default:hn=3}var mn=Rt;Rt=hn;try{return nn()}finally{Rt=mn}},_e.unstable_scheduleCallback=function(hn,nn,mn){var xn=_e.unstable_now();switch(typeof mn=="object"&&mn!==null?(mn=mn.delay,mn=typeof mn=="number"&&0<mn?xn+mn:xn):mn=xn,hn){case 1:var rn=-1;break;case 2:rn=250;break;case 5:rn=1073741823;break;case 4:rn=1e4;break;default:rn=5e3}return rn=mn+rn,hn={id:xt++,callback:nn,priorityLevel:hn,startTime:mn,expirationTime:rn,sortIndex:-1},mn>xn?(hn.sortIndex=mn,$(Ct,hn),ht(wt)===null&&hn===ht(Ct)&&(Lt?(Ft(jt),jt=-1):Lt=!0,un(Bt,mn-xn))):(hn.sortIndex=rn,$(wt,hn),Mt||kt||(Mt=!0,En(Nt))),hn},_e.unstable_shouldYield=Gt,_e.unstable_wrapCallback=function(hn){var nn=Rt;return function(){var mn=Rt;Rt=nn;try{return hn.apply(this,arguments)}finally{Rt=mn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$4(_e){for(var $="https://reactjs.org/docs/error-decoder.html?invariant="+_e,ht=1;ht<arguments.length;ht++)$+="&args[]="+encodeURIComponent(arguments[ht]);return"Minified React error #"+_e+"; visit "+$+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(_e,$){ha(_e,$),ha(_e+"Capture",$)}function ha(_e,$){for(ea[_e]=$,_e=0;_e<$.length;_e++)da.add($[_e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(_e){return ja.call(ma,_e)?!0:ja.call(la,_e)?!1:ka.test(_e)?ma[_e]=!0:(la[_e]=!0,!1)}function pa(_e,$,ht,vt){if(ht!==null&&ht.type===0)return!1;switch(typeof $){case"function":case"symbol":return!0;case"boolean":return vt?!1:ht!==null?!ht.acceptsBooleans:(_e=_e.toLowerCase().slice(0,5),_e!=="data-"&&_e!=="aria-");default:return!1}}function qa(_e,$,ht,vt){if($===null||typeof $>"u"||pa(_e,$,ht,vt))return!0;if(vt)return!1;if(ht!==null)switch(ht.type){case 3:return!$;case 4:return $===!1;case 5:return isNaN($);case 6:return isNaN($)||1>$}return!1}function v$1(_e,$,ht,vt,bt,Et,At){this.acceptsBooleans=$===2||$===3||$===4,this.attributeName=vt,this.attributeNamespace=bt,this.mustUseProperty=ht,this.propertyName=_e,this.type=$,this.sanitizeURL=Et,this.removeEmptyString=At}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_e){z$1[_e]=new v$1(_e,0,!1,_e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_e){var $=_e[0];z$1[$]=new v$1($,1,!1,_e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_e){z$1[_e]=new v$1(_e,2,!1,_e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_e){z$1[_e]=new v$1(_e,2,!1,_e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_e){z$1[_e]=new v$1(_e,3,!1,_e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_e){z$1[_e]=new v$1(_e,3,!0,_e,null,!1,!1)});["capture","download"].forEach(function(_e){z$1[_e]=new v$1(_e,4,!1,_e,null,!1,!1)});["cols","rows","size","span"].forEach(function(_e){z$1[_e]=new v$1(_e,6,!1,_e,null,!1,!1)});["rowSpan","start"].forEach(function(_e){z$1[_e]=new v$1(_e,5,!1,_e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(_e){return _e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_e){var $=_e.replace(ra,sa);z$1[$]=new v$1($,1,!1,_e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_e){var $=_e.replace(ra,sa);z$1[$]=new v$1($,1,!1,_e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_e){var $=_e.replace(ra,sa);z$1[$]=new v$1($,1,!1,_e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_e){z$1[_e]=new v$1(_e,1,!1,_e.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_e){z$1[_e]=new v$1(_e,1,!1,_e.toLowerCase(),null,!0,!0)});function ta(_e,$,ht,vt){var bt=z$1.hasOwnProperty($)?z$1[$]:null;(bt!==null?bt.type!==0:vt||!(2<$.length)||$[0]!=="o"&&$[0]!=="O"||$[1]!=="n"&&$[1]!=="N")&&(qa($,ht,bt,vt)&&(ht=null),vt||bt===null?oa($)&&(ht===null?_e.removeAttribute($):_e.setAttribute($,""+ht)):bt.mustUseProperty?_e[bt.propertyName]=ht===null?bt.type===3?!1:"":ht:($=bt.attributeName,vt=bt.attributeNamespace,ht===null?_e.removeAttribute($):(bt=bt.type,ht=bt===3||bt===4&&ht===!0?"":""+ht,vt?_e.setAttributeNS(vt,$,ht):_e.setAttribute($,ht))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(_e){return _e===null||typeof _e!="object"?null:(_e=Ja&&_e[Ja]||_e["@@iterator"],typeof _e=="function"?_e:null)}var A$3=Object.assign,La;function Ma(_e){if(La===void 0)try{throw Error()}catch(ht){var $=ht.stack.trim().match(/\n( *(at )?)/);La=$&&$[1]||""}return`
`+La+_e}var Na=!1;function Oa(_e,$){if(!_e||Na)return"";Na=!0;var ht=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if($)if($=function(){throw Error()},Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(Ct){var vt=Ct}Reflect.construct(_e,[],$)}else{try{$.call()}catch(Ct){vt=Ct}_e.call($.prototype)}else{try{throw Error()}catch(Ct){vt=Ct}_e()}}catch(Ct){if(Ct&&vt&&typeof Ct.stack=="string"){for(var bt=Ct.stack.split(`
`),Et=vt.stack.split(`
`),At=bt.length-1,_t=Et.length-1;1<=At&&0<=_t&&bt[At]!==Et[_t];)_t--;for(;1<=At&&0<=_t;At--,_t--)if(bt[At]!==Et[_t]){if(At!==1||_t!==1)do if(At--,_t--,0>_t||bt[At]!==Et[_t]){var wt=`
`+bt[At].replace(" at new "," at ");return _e.displayName&&wt.includes("<anonymous>")&&(wt=wt.replace("<anonymous>",_e.displayName)),wt}while(1<=At&&0<=_t);break}}}finally{Na=!1,Error.prepareStackTrace=ht}return(_e=_e?_e.displayName||_e.name:"")?Ma(_e):""}function Pa(_e){switch(_e.tag){case 5:return Ma(_e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return _e=Oa(_e.type,!1),_e;case 11:return _e=Oa(_e.type.render,!1),_e;case 1:return _e=Oa(_e.type,!0),_e;default:return""}}function Qa(_e){if(_e==null)return null;if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e;switch(_e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof _e=="object")switch(_e.$$typeof){case Ca:return(_e.displayName||"Context")+".Consumer";case Ba:return(_e._context.displayName||"Context")+".Provider";case Da:var $=_e.render;return _e=_e.displayName,_e||(_e=$.displayName||$.name||"",_e=_e!==""?"ForwardRef("+_e+")":"ForwardRef"),_e;case Ga:return $=_e.displayName||null,$!==null?$:Qa(_e.type)||"Memo";case Ha:$=_e._payload,_e=_e._init;try{return Qa(_e($))}catch{}}return null}function Ra(_e){var $=_e.type;switch(_e.tag){case 24:return"Cache";case 9:return($.displayName||"Context")+".Consumer";case 10:return($._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _e=$.render,_e=_e.displayName||_e.name||"",$.displayName||(_e!==""?"ForwardRef("+_e+")":"ForwardRef");case 7:return"Fragment";case 5:return $;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa($);case 8:return $===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof $=="function")return $.displayName||$.name||null;if(typeof $=="string")return $}return null}function Sa(_e){switch(typeof _e){case"boolean":case"number":case"string":case"undefined":return _e;case"object":return _e;default:return""}}function Ta(_e){var $=_e.type;return(_e=_e.nodeName)&&_e.toLowerCase()==="input"&&($==="checkbox"||$==="radio")}function Ua(_e){var $=Ta(_e)?"checked":"value",ht=Object.getOwnPropertyDescriptor(_e.constructor.prototype,$),vt=""+_e[$];if(!_e.hasOwnProperty($)&&typeof ht<"u"&&typeof ht.get=="function"&&typeof ht.set=="function"){var bt=ht.get,Et=ht.set;return Object.defineProperty(_e,$,{configurable:!0,get:function(){return bt.call(this)},set:function(At){vt=""+At,Et.call(this,At)}}),Object.defineProperty(_e,$,{enumerable:ht.enumerable}),{getValue:function(){return vt},setValue:function(At){vt=""+At},stopTracking:function(){_e._valueTracker=null,delete _e[$]}}}}function Va(_e){_e._valueTracker||(_e._valueTracker=Ua(_e))}function Wa(_e){if(!_e)return!1;var $=_e._valueTracker;if(!$)return!0;var ht=$.getValue(),vt="";return _e&&(vt=Ta(_e)?_e.checked?"true":"false":_e.value),_e=vt,_e!==ht?($.setValue(_e),!0):!1}function Xa(_e){if(_e=_e||(typeof document<"u"?document:void 0),typeof _e>"u")return null;try{return _e.activeElement||_e.body}catch{return _e.body}}function Ya(_e,$){var ht=$.checked;return A$3({},$,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:ht??_e._wrapperState.initialChecked})}function Za(_e,$){var ht=$.defaultValue==null?"":$.defaultValue,vt=$.checked!=null?$.checked:$.defaultChecked;ht=Sa($.value!=null?$.value:ht),_e._wrapperState={initialChecked:vt,initialValue:ht,controlled:$.type==="checkbox"||$.type==="radio"?$.checked!=null:$.value!=null}}function ab(_e,$){$=$.checked,$!=null&&ta(_e,"checked",$,!1)}function bb(_e,$){ab(_e,$);var ht=Sa($.value),vt=$.type;if(ht!=null)vt==="number"?(ht===0&&_e.value===""||_e.value!=ht)&&(_e.value=""+ht):_e.value!==""+ht&&(_e.value=""+ht);else if(vt==="submit"||vt==="reset"){_e.removeAttribute("value");return}$.hasOwnProperty("value")?cb(_e,$.type,ht):$.hasOwnProperty("defaultValue")&&cb(_e,$.type,Sa($.defaultValue)),$.checked==null&&$.defaultChecked!=null&&(_e.defaultChecked=!!$.defaultChecked)}function db(_e,$,ht){if($.hasOwnProperty("value")||$.hasOwnProperty("defaultValue")){var vt=$.type;if(!(vt!=="submit"&&vt!=="reset"||$.value!==void 0&&$.value!==null))return;$=""+_e._wrapperState.initialValue,ht||$===_e.value||(_e.value=$),_e.defaultValue=$}ht=_e.name,ht!==""&&(_e.name=""),_e.defaultChecked=!!_e._wrapperState.initialChecked,ht!==""&&(_e.name=ht)}function cb(_e,$,ht){($!=="number"||Xa(_e.ownerDocument)!==_e)&&(ht==null?_e.defaultValue=""+_e._wrapperState.initialValue:_e.defaultValue!==""+ht&&(_e.defaultValue=""+ht))}var eb=Array.isArray;function fb(_e,$,ht,vt){if(_e=_e.options,$){$={};for(var bt=0;bt<ht.length;bt++)$["$"+ht[bt]]=!0;for(ht=0;ht<_e.length;ht++)bt=$.hasOwnProperty("$"+_e[ht].value),_e[ht].selected!==bt&&(_e[ht].selected=bt),bt&&vt&&(_e[ht].defaultSelected=!0)}else{for(ht=""+Sa(ht),$=null,bt=0;bt<_e.length;bt++){if(_e[bt].value===ht){_e[bt].selected=!0,vt&&(_e[bt].defaultSelected=!0);return}$!==null||_e[bt].disabled||($=_e[bt])}$!==null&&($.selected=!0)}}function gb(_e,$){if($.dangerouslySetInnerHTML!=null)throw Error(p$4(91));return A$3({},$,{value:void 0,defaultValue:void 0,children:""+_e._wrapperState.initialValue})}function hb(_e,$){var ht=$.value;if(ht==null){if(ht=$.children,$=$.defaultValue,ht!=null){if($!=null)throw Error(p$4(92));if(eb(ht)){if(1<ht.length)throw Error(p$4(93));ht=ht[0]}$=ht}$==null&&($=""),ht=$}_e._wrapperState={initialValue:Sa(ht)}}function ib(_e,$){var ht=Sa($.value),vt=Sa($.defaultValue);ht!=null&&(ht=""+ht,ht!==_e.value&&(_e.value=ht),$.defaultValue==null&&_e.defaultValue!==ht&&(_e.defaultValue=ht)),vt!=null&&(_e.defaultValue=""+vt)}function jb(_e){var $=_e.textContent;$===_e._wrapperState.initialValue&&$!==""&&$!==null&&(_e.value=$)}function kb(_e){switch(_e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(_e,$){return _e==null||_e==="http://www.w3.org/1999/xhtml"?kb($):_e==="http://www.w3.org/2000/svg"&&$==="foreignObject"?"http://www.w3.org/1999/xhtml":_e}var mb,nb=function(_e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function($,ht,vt,bt){MSApp.execUnsafeLocalFunction(function(){return _e($,ht,vt,bt)})}:_e}(function(_e,$){if(_e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _e)_e.innerHTML=$;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+$.valueOf().toString()+"</svg>",$=mb.firstChild;_e.firstChild;)_e.removeChild(_e.firstChild);for(;$.firstChild;)_e.appendChild($.firstChild)}});function ob(_e,$){if($){var ht=_e.firstChild;if(ht&&ht===_e.lastChild&&ht.nodeType===3){ht.nodeValue=$;return}}_e.textContent=$}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(_e){qb.forEach(function($){$=$+_e.charAt(0).toUpperCase()+_e.substring(1),pb[$]=pb[_e]})});function rb(_e,$,ht){return $==null||typeof $=="boolean"||$===""?"":ht||typeof $!="number"||$===0||pb.hasOwnProperty(_e)&&pb[_e]?(""+$).trim():$+"px"}function sb(_e,$){_e=_e.style;for(var ht in $)if($.hasOwnProperty(ht)){var vt=ht.indexOf("--")===0,bt=rb(ht,$[ht],vt);ht==="float"&&(ht="cssFloat"),vt?_e.setProperty(ht,bt):_e[ht]=bt}}var tb=A$3({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(_e,$){if($){if(tb[_e]&&($.children!=null||$.dangerouslySetInnerHTML!=null))throw Error(p$4(137,_e));if($.dangerouslySetInnerHTML!=null){if($.children!=null)throw Error(p$4(60));if(typeof $.dangerouslySetInnerHTML!="object"||!("__html"in $.dangerouslySetInnerHTML))throw Error(p$4(61))}if($.style!=null&&typeof $.style!="object")throw Error(p$4(62))}}function vb(_e,$){if(_e.indexOf("-")===-1)return typeof $.is=="string";switch(_e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(_e){return _e=_e.target||_e.srcElement||window,_e.correspondingUseElement&&(_e=_e.correspondingUseElement),_e.nodeType===3?_e.parentNode:_e}var yb=null,zb=null,Ab=null;function Bb(_e){if(_e=Cb(_e)){if(typeof yb!="function")throw Error(p$4(280));var $=_e.stateNode;$&&($=Db($),yb(_e.stateNode,_e.type,$))}}function Eb(_e){zb?Ab?Ab.push(_e):Ab=[_e]:zb=_e}function Fb(){if(zb){var _e=zb,$=Ab;if(Ab=zb=null,Bb(_e),$)for(_e=0;_e<$.length;_e++)Bb($[_e])}}function Gb(_e,$){return _e($)}function Hb(){}var Ib=!1;function Jb(_e,$,ht){if(Ib)return _e($,ht);Ib=!0;try{return Gb(_e,$,ht)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(_e,$){var ht=_e.stateNode;if(ht===null)return null;var vt=Db(ht);if(vt===null)return null;ht=vt[$];e:switch($){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(vt=!vt.disabled)||(_e=_e.type,vt=!(_e==="button"||_e==="input"||_e==="select"||_e==="textarea")),_e=!vt;break e;default:_e=!1}if(_e)return null;if(ht&&typeof ht!="function")throw Error(p$4(231,$,typeof ht));return ht}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(_e,$,ht,vt,bt,Et,At,_t,wt){var Ct=Array.prototype.slice.call(arguments,3);try{$.apply(ht,Ct)}catch(xt){this.onError(xt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(_e){Ob=!0,Pb=_e}};function Tb(_e,$,ht,vt,bt,Et,At,_t,wt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(_e,$,ht,vt,bt,Et,At,_t,wt){if(Tb.apply(this,arguments),Ob){if(Ob){var Ct=Pb;Ob=!1,Pb=null}else throw Error(p$4(198));Qb||(Qb=!0,Rb=Ct)}}function Vb(_e){var $=_e,ht=_e;if(_e.alternate)for(;$.return;)$=$.return;else{_e=$;do $=_e,$.flags&4098&&(ht=$.return),_e=$.return;while(_e)}return $.tag===3?ht:null}function Wb(_e){if(_e.tag===13){var $=_e.memoizedState;if($===null&&(_e=_e.alternate,_e!==null&&($=_e.memoizedState)),$!==null)return $.dehydrated}return null}function Xb(_e){if(Vb(_e)!==_e)throw Error(p$4(188))}function Yb(_e){var $=_e.alternate;if(!$){if($=Vb(_e),$===null)throw Error(p$4(188));return $!==_e?null:_e}for(var ht=_e,vt=$;;){var bt=ht.return;if(bt===null)break;var Et=bt.alternate;if(Et===null){if(vt=bt.return,vt!==null){ht=vt;continue}break}if(bt.child===Et.child){for(Et=bt.child;Et;){if(Et===ht)return Xb(bt),_e;if(Et===vt)return Xb(bt),$;Et=Et.sibling}throw Error(p$4(188))}if(ht.return!==vt.return)ht=bt,vt=Et;else{for(var At=!1,_t=bt.child;_t;){if(_t===ht){At=!0,ht=bt,vt=Et;break}if(_t===vt){At=!0,vt=bt,ht=Et;break}_t=_t.sibling}if(!At){for(_t=Et.child;_t;){if(_t===ht){At=!0,ht=Et,vt=bt;break}if(_t===vt){At=!0,vt=Et,ht=bt;break}_t=_t.sibling}if(!At)throw Error(p$4(189))}}if(ht.alternate!==vt)throw Error(p$4(190))}if(ht.tag!==3)throw Error(p$4(188));return ht.stateNode.current===ht?_e:$}function Zb(_e){return _e=Yb(_e),_e!==null?$b(_e):null}function $b(_e){if(_e.tag===5||_e.tag===6)return _e;for(_e=_e.child;_e!==null;){var $=$b(_e);if($!==null)return $;_e=_e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(_e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,_e,void 0,(_e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(_e){return _e>>>=0,_e===0?32:31-(pc(_e)/qc|0)|0}var rc=64,sc=4194304;function tc(_e){switch(_e&-_e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _e}}function uc(_e,$){var ht=_e.pendingLanes;if(ht===0)return 0;var vt=0,bt=_e.suspendedLanes,Et=_e.pingedLanes,At=ht&268435455;if(At!==0){var _t=At&~bt;_t!==0?vt=tc(_t):(Et&=At,Et!==0&&(vt=tc(Et)))}else At=ht&~bt,At!==0?vt=tc(At):Et!==0&&(vt=tc(Et));if(vt===0)return 0;if($!==0&&$!==vt&&!($&bt)&&(bt=vt&-vt,Et=$&-$,bt>=Et||bt===16&&(Et&4194240)!==0))return $;if(vt&4&&(vt|=ht&16),$=_e.entangledLanes,$!==0)for(_e=_e.entanglements,$&=vt;0<$;)ht=31-oc($),bt=1<<ht,vt|=_e[ht],$&=~bt;return vt}function vc(_e,$){switch(_e){case 1:case 2:case 4:return $+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return $+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(_e,$){for(var ht=_e.suspendedLanes,vt=_e.pingedLanes,bt=_e.expirationTimes,Et=_e.pendingLanes;0<Et;){var At=31-oc(Et),_t=1<<At,wt=bt[At];wt===-1?(!(_t&ht)||_t&vt)&&(bt[At]=vc(_t,$)):wt<=$&&(_e.expiredLanes|=_t),Et&=~_t}}function xc(_e){return _e=_e.pendingLanes&-1073741825,_e!==0?_e:_e&1073741824?1073741824:0}function yc(){var _e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),_e}function zc(_e){for(var $=[],ht=0;31>ht;ht++)$.push(_e);return $}function Ac(_e,$,ht){_e.pendingLanes|=$,$!==536870912&&(_e.suspendedLanes=0,_e.pingedLanes=0),_e=_e.eventTimes,$=31-oc($),_e[$]=ht}function Bc(_e,$){var ht=_e.pendingLanes&~$;_e.pendingLanes=$,_e.suspendedLanes=0,_e.pingedLanes=0,_e.expiredLanes&=$,_e.mutableReadLanes&=$,_e.entangledLanes&=$,$=_e.entanglements;var vt=_e.eventTimes;for(_e=_e.expirationTimes;0<ht;){var bt=31-oc(ht),Et=1<<bt;$[bt]=0,vt[bt]=-1,_e[bt]=-1,ht&=~Et}}function Cc(_e,$){var ht=_e.entangledLanes|=$;for(_e=_e.entanglements;ht;){var vt=31-oc(ht),bt=1<<vt;bt&$|_e[vt]&$&&(_e[vt]|=$),ht&=~bt}}var C$1=0;function Dc(_e){return _e&=-_e,1<_e?4<_e?_e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(_e,$){switch(_e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete($.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete($.pointerId)}}function Tc(_e,$,ht,vt,bt,Et){return _e===null||_e.nativeEvent!==Et?(_e={blockedOn:$,domEventName:ht,eventSystemFlags:vt,nativeEvent:Et,targetContainers:[bt]},$!==null&&($=Cb($),$!==null&&Fc($)),_e):(_e.eventSystemFlags|=vt,$=_e.targetContainers,bt!==null&&$.indexOf(bt)===-1&&$.push(bt),_e)}function Uc(_e,$,ht,vt,bt){switch($){case"focusin":return Lc=Tc(Lc,_e,$,ht,vt,bt),!0;case"dragenter":return Mc=Tc(Mc,_e,$,ht,vt,bt),!0;case"mouseover":return Nc=Tc(Nc,_e,$,ht,vt,bt),!0;case"pointerover":var Et=bt.pointerId;return Oc.set(Et,Tc(Oc.get(Et)||null,_e,$,ht,vt,bt)),!0;case"gotpointercapture":return Et=bt.pointerId,Pc.set(Et,Tc(Pc.get(Et)||null,_e,$,ht,vt,bt)),!0}return!1}function Vc(_e){var $=Wc(_e.target);if($!==null){var ht=Vb($);if(ht!==null){if($=ht.tag,$===13){if($=Wb(ht),$!==null){_e.blockedOn=$,Ic(_e.priority,function(){Gc(ht)});return}}else if($===3&&ht.stateNode.current.memoizedState.isDehydrated){_e.blockedOn=ht.tag===3?ht.stateNode.containerInfo:null;return}}}_e.blockedOn=null}function Xc(_e){if(_e.blockedOn!==null)return!1;for(var $=_e.targetContainers;0<$.length;){var ht=Yc(_e.domEventName,_e.eventSystemFlags,$[0],_e.nativeEvent);if(ht===null){ht=_e.nativeEvent;var vt=new ht.constructor(ht.type,ht);wb=vt,ht.target.dispatchEvent(vt),wb=null}else return $=Cb(ht),$!==null&&Fc($),_e.blockedOn=ht,!1;$.shift()}return!0}function Zc(_e,$,ht){Xc(_e)&&ht.delete($)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(_e,$){_e.blockedOn===$&&(_e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(_e){function $(bt){return ad(bt,_e)}if(0<Kc.length){ad(Kc[0],_e);for(var ht=1;ht<Kc.length;ht++){var vt=Kc[ht];vt.blockedOn===_e&&(vt.blockedOn=null)}}for(Lc!==null&&ad(Lc,_e),Mc!==null&&ad(Mc,_e),Nc!==null&&ad(Nc,_e),Oc.forEach($),Pc.forEach($),ht=0;ht<Qc.length;ht++)vt=Qc[ht],vt.blockedOn===_e&&(vt.blockedOn=null);for(;0<Qc.length&&(ht=Qc[0],ht.blockedOn===null);)Vc(ht),ht.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(_e,$,ht,vt){var bt=C$1,Et=cd.transition;cd.transition=null;try{C$1=1,fd(_e,$,ht,vt)}finally{C$1=bt,cd.transition=Et}}function gd(_e,$,ht,vt){var bt=C$1,Et=cd.transition;cd.transition=null;try{C$1=4,fd(_e,$,ht,vt)}finally{C$1=bt,cd.transition=Et}}function fd(_e,$,ht,vt){if(dd){var bt=Yc(_e,$,ht,vt);if(bt===null)hd(_e,$,vt,id$2,ht),Sc(_e,vt);else if(Uc(bt,_e,$,ht,vt))vt.stopPropagation();else if(Sc(_e,vt),$&4&&-1<Rc.indexOf(_e)){for(;bt!==null;){var Et=Cb(bt);if(Et!==null&&Ec(Et),Et=Yc(_e,$,ht,vt),Et===null&&hd(_e,$,vt,id$2,ht),Et===bt)break;bt=Et}bt!==null&&vt.stopPropagation()}else hd(_e,$,vt,null,ht)}}var id$2=null;function Yc(_e,$,ht,vt){if(id$2=null,_e=xb(vt),_e=Wc(_e),_e!==null)if($=Vb(_e),$===null)_e=null;else if(ht=$.tag,ht===13){if(_e=Wb($),_e!==null)return _e;_e=null}else if(ht===3){if($.stateNode.current.memoizedState.isDehydrated)return $.tag===3?$.stateNode.containerInfo:null;_e=null}else $!==_e&&(_e=null);return id$2=_e,null}function jd(_e){switch(_e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var _e,$=ld,ht=$.length,vt,bt="value"in kd?kd.value:kd.textContent,Et=bt.length;for(_e=0;_e<ht&&$[_e]===bt[_e];_e++);var At=ht-_e;for(vt=1;vt<=At&&$[ht-vt]===bt[Et-vt];vt++);return md=bt.slice(_e,1<vt?1-vt:void 0)}function od(_e){var $=_e.keyCode;return"charCode"in _e?(_e=_e.charCode,_e===0&&$===13&&(_e=13)):_e=$,_e===10&&(_e=13),32<=_e||_e===13?_e:0}function pd(){return!0}function qd(){return!1}function rd(_e){function $(ht,vt,bt,Et,At){this._reactName=ht,this._targetInst=bt,this.type=vt,this.nativeEvent=Et,this.target=At,this.currentTarget=null;for(var _t in _e)_e.hasOwnProperty(_t)&&(ht=_e[_t],this[_t]=ht?ht(Et):Et[_t]);return this.isDefaultPrevented=(Et.defaultPrevented!=null?Et.defaultPrevented:Et.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$3($.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ht=this.nativeEvent;ht&&(ht.preventDefault?ht.preventDefault():typeof ht.returnValue!="unknown"&&(ht.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var ht=this.nativeEvent;ht&&(ht.stopPropagation?ht.stopPropagation():typeof ht.cancelBubble!="unknown"&&(ht.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),$}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_e){return _e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$3({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$3({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(_e){return _e.relatedTarget===void 0?_e.fromElement===_e.srcElement?_e.toElement:_e.fromElement:_e.relatedTarget},movementX:function(_e){return"movementX"in _e?_e.movementX:(_e!==yd&&(yd&&_e.type==="mousemove"?(wd=_e.screenX-yd.screenX,xd=_e.screenY-yd.screenY):xd=wd=0,yd=_e),wd)},movementY:function(_e){return"movementY"in _e?_e.movementY:xd}}),Bd=rd(Ad),Cd=A$3({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$3({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$3({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$3({},sd,{clipboardData:function(_e){return"clipboardData"in _e?_e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$3({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_e){var $=this.nativeEvent;return $.getModifierState?$.getModifierState(_e):(_e=Od[_e])?!!$[_e]:!1}function zd(){return Pd}var Qd=A$3({},ud,{key:function(_e){if(_e.key){var $=Md[_e.key]||_e.key;if($!=="Unidentified")return $}return _e.type==="keypress"?(_e=od(_e),_e===13?"Enter":String.fromCharCode(_e)):_e.type==="keydown"||_e.type==="keyup"?Nd[_e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(_e){return _e.type==="keypress"?od(_e):0},keyCode:function(_e){return _e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0},which:function(_e){return _e.type==="keypress"?od(_e):_e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0}}),Rd=rd(Qd),Sd=A$3({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$3({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$3({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$3({},Ad,{deltaX:function(_e){return"deltaX"in _e?_e.deltaX:"wheelDeltaX"in _e?-_e.wheelDeltaX:0},deltaY:function(_e){return"deltaY"in _e?_e.deltaY:"wheelDeltaY"in _e?-_e.wheelDeltaY:"wheelDelta"in _e?-_e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$1,de=ia&&(!ae||be$1&&8<be$1&&11>=be$1),ee=" ",fe=!1;function ge(_e,$){switch(_e){case"keyup":return $d.indexOf($.keyCode)!==-1;case"keydown":return $.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(_e){return _e=_e.detail,typeof _e=="object"&&"data"in _e?_e.data:null}var ie=!1;function je(_e,$){switch(_e){case"compositionend":return he($);case"keypress":return $.which!==32?null:(fe=!0,ee);case"textInput":return _e=$.data,_e===ee&&fe?null:_e;default:return null}}function ke(_e,$){if(ie)return _e==="compositionend"||!ae&&ge(_e,$)?(_e=nd(),md=ld=kd=null,ie=!1,_e):null;switch(_e){case"paste":return null;case"keypress":if(!($.ctrlKey||$.altKey||$.metaKey)||$.ctrlKey&&$.altKey){if($.char&&1<$.char.length)return $.char;if($.which)return String.fromCharCode($.which)}return null;case"compositionend":return de&&$.locale!=="ko"?null:$.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(_e){var $=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return $==="input"?!!le[_e.type]:$==="textarea"}function ne(_e,$,ht,vt){Eb(vt),$=oe($,"onChange"),0<$.length&&(ht=new td("onChange","change",null,ht,vt),_e.push({event:ht,listeners:$}))}var pe$1=null,qe$1=null;function re(_e){se(_e,0)}function te$1(_e){var $=ue(_e);if(Wa($))return _e}function ve$1(_e,$){if(_e==="change")return $}var we=!1;if(ia){var xe$1;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe$1=ye$1}else xe$1=!1;we=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe$1=pe$1=null)}function Be(_e){if(_e.propertyName==="value"&&te$1(qe$1)){var $=[];ne($,qe$1,_e,xb(_e)),Jb(re,$)}}function Ce(_e,$,ht){_e==="focusin"?(Ae(),pe$1=$,qe$1=ht,pe$1.attachEvent("onpropertychange",Be)):_e==="focusout"&&Ae()}function De(_e){if(_e==="selectionchange"||_e==="keyup"||_e==="keydown")return te$1(qe$1)}function Ee(_e,$){if(_e==="click")return te$1($)}function Fe$1(_e,$){if(_e==="input"||_e==="change")return te$1($)}function Ge(_e,$){return _e===$&&(_e!==0||1/_e===1/$)||_e!==_e&&$!==$}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(_e,$){if(He(_e,$))return!0;if(typeof _e!="object"||_e===null||typeof $!="object"||$===null)return!1;var ht=Object.keys(_e),vt=Object.keys($);if(ht.length!==vt.length)return!1;for(vt=0;vt<ht.length;vt++){var bt=ht[vt];if(!ja.call($,bt)||!He(_e[bt],$[bt]))return!1}return!0}function Je$1(_e){for(;_e&&_e.firstChild;)_e=_e.firstChild;return _e}function Ke(_e,$){var ht=Je$1(_e);_e=0;for(var vt;ht;){if(ht.nodeType===3){if(vt=_e+ht.textContent.length,_e<=$&&vt>=$)return{node:ht,offset:$-_e};_e=vt}e:{for(;ht;){if(ht.nextSibling){ht=ht.nextSibling;break e}ht=ht.parentNode}ht=void 0}ht=Je$1(ht)}}function Le(_e,$){return _e&&$?_e===$?!0:_e&&_e.nodeType===3?!1:$&&$.nodeType===3?Le(_e,$.parentNode):"contains"in _e?_e.contains($):_e.compareDocumentPosition?!!(_e.compareDocumentPosition($)&16):!1:!1}function Me(){for(var _e=window,$=Xa();$ instanceof _e.HTMLIFrameElement;){try{var ht=typeof $.contentWindow.location.href=="string"}catch{ht=!1}if(ht)_e=$.contentWindow;else break;$=Xa(_e.document)}return $}function Ne(_e){var $=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return $&&($==="input"&&(_e.type==="text"||_e.type==="search"||_e.type==="tel"||_e.type==="url"||_e.type==="password")||$==="textarea"||_e.contentEditable==="true")}function Oe(_e){var $=Me(),ht=_e.focusedElem,vt=_e.selectionRange;if($!==ht&&ht&&ht.ownerDocument&&Le(ht.ownerDocument.documentElement,ht)){if(vt!==null&&Ne(ht)){if($=vt.start,_e=vt.end,_e===void 0&&(_e=$),"selectionStart"in ht)ht.selectionStart=$,ht.selectionEnd=Math.min(_e,ht.value.length);else if(_e=($=ht.ownerDocument||document)&&$.defaultView||window,_e.getSelection){_e=_e.getSelection();var bt=ht.textContent.length,Et=Math.min(vt.start,bt);vt=vt.end===void 0?Et:Math.min(vt.end,bt),!_e.extend&&Et>vt&&(bt=vt,vt=Et,Et=bt),bt=Ke(ht,Et);var At=Ke(ht,vt);bt&&At&&(_e.rangeCount!==1||_e.anchorNode!==bt.node||_e.anchorOffset!==bt.offset||_e.focusNode!==At.node||_e.focusOffset!==At.offset)&&($=$.createRange(),$.setStart(bt.node,bt.offset),_e.removeAllRanges(),Et>vt?(_e.addRange($),_e.extend(At.node,At.offset)):($.setEnd(At.node,At.offset),_e.addRange($)))}}for($=[],_e=ht;_e=_e.parentNode;)_e.nodeType===1&&$.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof ht.focus=="function"&&ht.focus(),ht=0;ht<$.length;ht++)_e=$[ht],_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re$1=null,Se=null,Te=!1;function Ue(_e,$,ht){var vt=ht.window===ht?ht.document:ht.nodeType===9?ht:ht.ownerDocument;Te||Qe==null||Qe!==Xa(vt)||(vt=Qe,"selectionStart"in vt&&Ne(vt)?vt={start:vt.selectionStart,end:vt.selectionEnd}:(vt=(vt.ownerDocument&&vt.ownerDocument.defaultView||window).getSelection(),vt={anchorNode:vt.anchorNode,anchorOffset:vt.anchorOffset,focusNode:vt.focusNode,focusOffset:vt.focusOffset}),Se&&Ie(Se,vt)||(Se=vt,vt=oe(Re$1,"onSelect"),0<vt.length&&($=new td("onSelect","select",null,$,ht),_e.push({event:$,listeners:vt}),$.target=Qe)))}function Ve$1(_e,$){var ht={};return ht[_e.toLowerCase()]=$.toLowerCase(),ht["Webkit"+_e]="webkit"+$,ht["Moz"+_e]="moz"+$,ht}var We={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe$1={},Ye$1={};ia&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze$1(_e){if(Xe$1[_e])return Xe$1[_e];if(!We[_e])return _e;var $=We[_e],ht;for(ht in $)if($.hasOwnProperty(ht)&&ht in Ye$1)return Xe$1[_e]=$[ht];return _e}var $e$1=Ze$1("animationend"),af=Ze$1("animationiteration"),bf=Ze$1("animationstart"),cf=Ze$1("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(_e,$){df.set(_e,$),fa($,[_e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(_e,$,ht){var vt=_e.type||"unknown-event";_e.currentTarget=ht,Ub(vt,$,void 0,_e),_e.currentTarget=null}function se(_e,$){$=($&4)!==0;for(var ht=0;ht<_e.length;ht++){var vt=_e[ht],bt=vt.event;vt=vt.listeners;e:{var Et=void 0;if($)for(var At=vt.length-1;0<=At;At--){var _t=vt[At],wt=_t.instance,Ct=_t.currentTarget;if(_t=_t.listener,wt!==Et&&bt.isPropagationStopped())break e;nf(bt,_t,Ct),Et=wt}else for(At=0;At<vt.length;At++){if(_t=vt[At],wt=_t.instance,Ct=_t.currentTarget,_t=_t.listener,wt!==Et&&bt.isPropagationStopped())break e;nf(bt,_t,Ct),Et=wt}}}if(Qb)throw _e=Rb,Qb=!1,Rb=null,_e}function D$4(_e,$){var ht=$[of];ht===void 0&&(ht=$[of]=new Set);var vt=_e+"__bubble";ht.has(vt)||(pf($,_e,2,!1),ht.add(vt))}function qf(_e,$,ht){var vt=0;$&&(vt|=4),pf(ht,_e,vt,$)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(_e){if(!_e[rf]){_e[rf]=!0,da.forEach(function(ht){ht!=="selectionchange"&&(mf.has(ht)||qf(ht,!1,_e),qf(ht,!0,_e))});var $=_e.nodeType===9?_e:_e.ownerDocument;$===null||$[rf]||($[rf]=!0,qf("selectionchange",!1,$))}}function pf(_e,$,ht,vt){switch(jd($)){case 1:var bt=ed;break;case 4:bt=gd;break;default:bt=fd}ht=bt.bind(null,$,ht,_e),bt=void 0,!Lb||$!=="touchstart"&&$!=="touchmove"&&$!=="wheel"||(bt=!0),vt?bt!==void 0?_e.addEventListener($,ht,{capture:!0,passive:bt}):_e.addEventListener($,ht,!0):bt!==void 0?_e.addEventListener($,ht,{passive:bt}):_e.addEventListener($,ht,!1)}function hd(_e,$,ht,vt,bt){var Et=vt;if(!($&1)&&!($&2)&&vt!==null)e:for(;;){if(vt===null)return;var At=vt.tag;if(At===3||At===4){var _t=vt.stateNode.containerInfo;if(_t===bt||_t.nodeType===8&&_t.parentNode===bt)break;if(At===4)for(At=vt.return;At!==null;){var wt=At.tag;if((wt===3||wt===4)&&(wt=At.stateNode.containerInfo,wt===bt||wt.nodeType===8&&wt.parentNode===bt))return;At=At.return}for(;_t!==null;){if(At=Wc(_t),At===null)return;if(wt=At.tag,wt===5||wt===6){vt=Et=At;continue e}_t=_t.parentNode}}vt=vt.return}Jb(function(){var Ct=Et,xt=xb(ht),Pt=[];e:{var Rt=df.get(_e);if(Rt!==void 0){var kt=td,Mt=_e;switch(_e){case"keypress":if(od(ht)===0)break e;case"keydown":case"keyup":kt=Rd;break;case"focusin":Mt="focus",kt=Fd;break;case"focusout":Mt="blur",kt=Fd;break;case"beforeblur":case"afterblur":kt=Fd;break;case"click":if(ht.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":kt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":kt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":kt=Vd;break;case $e$1:case af:case bf:kt=Hd;break;case cf:kt=Xd;break;case"scroll":kt=vd;break;case"wheel":kt=Zd;break;case"copy":case"cut":case"paste":kt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":kt=Td}var Lt=($&4)!==0,Ot=!Lt&&_e==="scroll",Ft=Lt?Rt!==null?Rt+"Capture":null:Rt;Lt=[];for(var Dt=Ct,$t;Dt!==null;){$t=Dt;var Bt=$t.stateNode;if($t.tag===5&&Bt!==null&&($t=Bt,Ft!==null&&(Bt=Kb(Dt,Ft),Bt!=null&&Lt.push(tf(Dt,Bt,$t)))),Ot)break;Dt=Dt.return}0<Lt.length&&(Rt=new kt(Rt,Mt,null,ht,xt),Pt.push({event:Rt,listeners:Lt}))}}if(!($&7)){e:{if(Rt=_e==="mouseover"||_e==="pointerover",kt=_e==="mouseout"||_e==="pointerout",Rt&&ht!==wb&&(Mt=ht.relatedTarget||ht.fromElement)&&(Wc(Mt)||Mt[uf]))break e;if((kt||Rt)&&(Rt=xt.window===xt?xt:(Rt=xt.ownerDocument)?Rt.defaultView||Rt.parentWindow:window,kt?(Mt=ht.relatedTarget||ht.toElement,kt=Ct,Mt=Mt?Wc(Mt):null,Mt!==null&&(Ot=Vb(Mt),Mt!==Ot||Mt.tag!==5&&Mt.tag!==6)&&(Mt=null)):(kt=null,Mt=Ct),kt!==Mt)){if(Lt=Bd,Bt="onMouseLeave",Ft="onMouseEnter",Dt="mouse",(_e==="pointerout"||_e==="pointerover")&&(Lt=Td,Bt="onPointerLeave",Ft="onPointerEnter",Dt="pointer"),Ot=kt==null?Rt:ue(kt),$t=Mt==null?Rt:ue(Mt),Rt=new Lt(Bt,Dt+"leave",kt,ht,xt),Rt.target=Ot,Rt.relatedTarget=$t,Bt=null,Wc(xt)===Ct&&(Lt=new Lt(Ft,Dt+"enter",Mt,ht,xt),Lt.target=$t,Lt.relatedTarget=Ot,Bt=Lt),Ot=Bt,kt&&Mt)t:{for(Lt=kt,Ft=Mt,Dt=0,$t=Lt;$t;$t=vf($t))Dt++;for($t=0,Bt=Ft;Bt;Bt=vf(Bt))$t++;for(;0<Dt-$t;)Lt=vf(Lt),Dt--;for(;0<$t-Dt;)Ft=vf(Ft),$t--;for(;Dt--;){if(Lt===Ft||Ft!==null&&Lt===Ft.alternate)break t;Lt=vf(Lt),Ft=vf(Ft)}Lt=null}else Lt=null;kt!==null&&wf(Pt,Rt,kt,Lt,!1),Mt!==null&&Ot!==null&&wf(Pt,Ot,Mt,Lt,!0)}}e:{if(Rt=Ct?ue(Ct):window,kt=Rt.nodeName&&Rt.nodeName.toLowerCase(),kt==="select"||kt==="input"&&Rt.type==="file")var Nt=ve$1;else if(me(Rt))if(we)Nt=Fe$1;else{Nt=De;var Ht=Ce}else(kt=Rt.nodeName)&&kt.toLowerCase()==="input"&&(Rt.type==="checkbox"||Rt.type==="radio")&&(Nt=Ee);if(Nt&&(Nt=Nt(_e,Ct))){ne(Pt,Nt,ht,xt);break e}Ht&&Ht(_e,Rt,Ct),_e==="focusout"&&(Ht=Rt._wrapperState)&&Ht.controlled&&Rt.type==="number"&&cb(Rt,"number",Rt.value)}switch(Ht=Ct?ue(Ct):window,_e){case"focusin":(me(Ht)||Ht.contentEditable==="true")&&(Qe=Ht,Re$1=Ct,Se=null);break;case"focusout":Se=Re$1=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(Pt,ht,xt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(Pt,ht,xt)}var Vt;if(ae)e:{switch(_e){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else ie?ge(_e,ht)&&(jt="onCompositionEnd"):_e==="keydown"&&ht.keyCode===229&&(jt="onCompositionStart");jt&&(de&&ht.locale!=="ko"&&(ie||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&ie&&(Vt=nd()):(kd=xt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Ht=oe(Ct,jt),0<Ht.length&&(jt=new Ld(jt,_e,null,ht,xt),Pt.push({event:jt,listeners:Ht}),Vt?jt.data=Vt:(Vt=he(ht),Vt!==null&&(jt.data=Vt)))),(Vt=ce$1?je(_e,ht):ke(_e,ht))&&(Ct=oe(Ct,"onBeforeInput"),0<Ct.length&&(xt=new Ld("onBeforeInput","beforeinput",null,ht,xt),Pt.push({event:xt,listeners:Ct}),xt.data=Vt))}se(Pt,$)})}function tf(_e,$,ht){return{instance:_e,listener:$,currentTarget:ht}}function oe(_e,$){for(var ht=$+"Capture",vt=[];_e!==null;){var bt=_e,Et=bt.stateNode;bt.tag===5&&Et!==null&&(bt=Et,Et=Kb(_e,ht),Et!=null&&vt.unshift(tf(_e,Et,bt)),Et=Kb(_e,$),Et!=null&&vt.push(tf(_e,Et,bt))),_e=_e.return}return vt}function vf(_e){if(_e===null)return null;do _e=_e.return;while(_e&&_e.tag!==5);return _e||null}function wf(_e,$,ht,vt,bt){for(var Et=$._reactName,At=[];ht!==null&&ht!==vt;){var _t=ht,wt=_t.alternate,Ct=_t.stateNode;if(wt!==null&&wt===vt)break;_t.tag===5&&Ct!==null&&(_t=Ct,bt?(wt=Kb(ht,Et),wt!=null&&At.unshift(tf(ht,wt,_t))):bt||(wt=Kb(ht,Et),wt!=null&&At.push(tf(ht,wt,_t)))),ht=ht.return}At.length!==0&&_e.push({event:$,listeners:At})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(_e){return(typeof _e=="string"?_e:""+_e).replace(xf,`
`).replace(yf,"")}function Af(_e,$,ht){if($=zf($),zf(_e)!==$&&ht)throw Error(p$4(425))}function Bf(){}var Cf=null,Df=null;function Ef(_e,$){return _e==="textarea"||_e==="noscript"||typeof $.children=="string"||typeof $.children=="number"||typeof $.dangerouslySetInnerHTML=="object"&&$.dangerouslySetInnerHTML!==null&&$.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(_e){return Hf.resolve(null).then(_e).catch(If)}:Ff;function If(_e){setTimeout(function(){throw _e})}function Kf(_e,$){var ht=$,vt=0;do{var bt=ht.nextSibling;if(_e.removeChild(ht),bt&&bt.nodeType===8)if(ht=bt.data,ht==="/$"){if(vt===0){_e.removeChild(bt),bd($);return}vt--}else ht!=="$"&&ht!=="$?"&&ht!=="$!"||vt++;ht=bt}while(ht);bd($)}function Lf(_e){for(;_e!=null;_e=_e.nextSibling){var $=_e.nodeType;if($===1||$===3)break;if($===8){if($=_e.data,$==="$"||$==="$!"||$==="$?")break;if($==="/$")return null}}return _e}function Mf(_e){_e=_e.previousSibling;for(var $=0;_e;){if(_e.nodeType===8){var ht=_e.data;if(ht==="$"||ht==="$!"||ht==="$?"){if($===0)return _e;$--}else ht==="/$"&&$++}_e=_e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(_e){var $=_e[Of];if($)return $;for(var ht=_e.parentNode;ht;){if($=ht[uf]||ht[Of]){if(ht=$.alternate,$.child!==null||ht!==null&&ht.child!==null)for(_e=Mf(_e);_e!==null;){if(ht=_e[Of])return ht;_e=Mf(_e)}return $}_e=ht,ht=_e.parentNode}return null}function Cb(_e){return _e=_e[Of]||_e[uf],!_e||_e.tag!==5&&_e.tag!==6&&_e.tag!==13&&_e.tag!==3?null:_e}function ue(_e){if(_e.tag===5||_e.tag===6)return _e.stateNode;throw Error(p$4(33))}function Db(_e){return _e[Pf]||null}var Sf=[],Tf=-1;function Uf(_e){return{current:_e}}function E$1(_e){0>Tf||(_e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$2(_e,$){Tf++,Sf[Tf]=_e.current,_e.current=$}var Vf={},H$2=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(_e,$){var ht=_e.type.contextTypes;if(!ht)return Vf;var vt=_e.stateNode;if(vt&&vt.__reactInternalMemoizedUnmaskedChildContext===$)return vt.__reactInternalMemoizedMaskedChildContext;var bt={},Et;for(Et in ht)bt[Et]=$[Et];return vt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=$,_e.__reactInternalMemoizedMaskedChildContext=bt),bt}function Zf(_e){return _e=_e.childContextTypes,_e!=null}function $f(){E$1(Wf),E$1(H$2)}function ag(_e,$,ht){if(H$2.current!==Vf)throw Error(p$4(168));G$2(H$2,$),G$2(Wf,ht)}function bg(_e,$,ht){var vt=_e.stateNode;if($=$.childContextTypes,typeof vt.getChildContext!="function")return ht;vt=vt.getChildContext();for(var bt in vt)if(!(bt in $))throw Error(p$4(108,Ra(_e)||"Unknown",bt));return A$3({},ht,vt)}function cg(_e){return _e=(_e=_e.stateNode)&&_e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$2.current,G$2(H$2,_e),G$2(Wf,Wf.current),!0}function dg(_e,$,ht){var vt=_e.stateNode;if(!vt)throw Error(p$4(169));ht?(_e=bg(_e,$,Xf),vt.__reactInternalMemoizedMergedChildContext=_e,E$1(Wf),E$1(H$2),G$2(H$2,_e)):E$1(Wf),G$2(Wf,ht)}var eg=null,fg=!1,gg=!1;function hg(_e){eg===null?eg=[_e]:eg.push(_e)}function ig(_e){fg=!0,hg(_e)}function jg(){if(!gg&&eg!==null){gg=!0;var _e=0,$=C$1;try{var ht=eg;for(C$1=1;_e<ht.length;_e++){var vt=ht[_e];do vt=vt(!0);while(vt!==null)}eg=null,fg=!1}catch(bt){throw eg!==null&&(eg=eg.slice(_e+1)),ac(fc,jg),bt}finally{C$1=$,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(_e,$){kg[lg++]=ng,kg[lg++]=mg,mg=_e,ng=$}function ug(_e,$,ht){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=_e;var vt=rg;_e=sg;var bt=32-oc(vt)-1;vt&=~(1<<bt),ht+=1;var Et=32-oc($)+bt;if(30<Et){var At=bt-bt%5;Et=(vt&(1<<At)-1).toString(32),vt>>=At,bt-=At,rg=1<<32-oc($)+bt|ht<<bt|vt,sg=Et+_e}else rg=1<<Et|ht<<bt|vt,sg=_e}function vg(_e){_e.return!==null&&(tg(_e,1),ug(_e,1,0))}function wg(_e){for(;_e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;_e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$4=!1,zg=null;function Ag(_e,$){var ht=Bg(5,null,null,0);ht.elementType="DELETED",ht.stateNode=$,ht.return=_e,$=_e.deletions,$===null?(_e.deletions=[ht],_e.flags|=16):$.push(ht)}function Cg(_e,$){switch(_e.tag){case 5:var ht=_e.type;return $=$.nodeType!==1||ht.toLowerCase()!==$.nodeName.toLowerCase()?null:$,$!==null?(_e.stateNode=$,xg=_e,yg=Lf($.firstChild),!0):!1;case 6:return $=_e.pendingProps===""||$.nodeType!==3?null:$,$!==null?(_e.stateNode=$,xg=_e,yg=null,!0):!1;case 13:return $=$.nodeType!==8?null:$,$!==null?(ht=qg!==null?{id:rg,overflow:sg}:null,_e.memoizedState={dehydrated:$,treeContext:ht,retryLane:1073741824},ht=Bg(18,null,null,0),ht.stateNode=$,ht.return=_e,_e.child=ht,xg=_e,yg=null,!0):!1;default:return!1}}function Dg(_e){return(_e.mode&1)!==0&&(_e.flags&128)===0}function Eg(_e){if(I$4){var $=yg;if($){var ht=$;if(!Cg(_e,$)){if(Dg(_e))throw Error(p$4(418));$=Lf(ht.nextSibling);var vt=xg;$&&Cg(_e,$)?Ag(vt,ht):(_e.flags=_e.flags&-4097|2,I$4=!1,xg=_e)}}else{if(Dg(_e))throw Error(p$4(418));_e.flags=_e.flags&-4097|2,I$4=!1,xg=_e}}}function Fg(_e){for(_e=_e.return;_e!==null&&_e.tag!==5&&_e.tag!==3&&_e.tag!==13;)_e=_e.return;xg=_e}function Gg(_e){if(_e!==xg)return!1;if(!I$4)return Fg(_e),I$4=!0,!1;var $;if(($=_e.tag!==3)&&!($=_e.tag!==5)&&($=_e.type,$=$!=="head"&&$!=="body"&&!Ef(_e.type,_e.memoizedProps)),$&&($=yg)){if(Dg(_e))throw Hg(),Error(p$4(418));for(;$;)Ag(_e,$),$=Lf($.nextSibling)}if(Fg(_e),_e.tag===13){if(_e=_e.memoizedState,_e=_e!==null?_e.dehydrated:null,!_e)throw Error(p$4(317));e:{for(_e=_e.nextSibling,$=0;_e;){if(_e.nodeType===8){var ht=_e.data;if(ht==="/$"){if($===0){yg=Lf(_e.nextSibling);break e}$--}else ht!=="$"&&ht!=="$!"&&ht!=="$?"||$++}_e=_e.nextSibling}yg=null}}else yg=xg?Lf(_e.stateNode.nextSibling):null;return!0}function Hg(){for(var _e=yg;_e;)_e=Lf(_e.nextSibling)}function Ig(){yg=xg=null,I$4=!1}function Jg(_e){zg===null?zg=[_e]:zg.push(_e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(_e,$,ht){if(_e=ht.ref,_e!==null&&typeof _e!="function"&&typeof _e!="object"){if(ht._owner){if(ht=ht._owner,ht){if(ht.tag!==1)throw Error(p$4(309));var vt=ht.stateNode}if(!vt)throw Error(p$4(147,_e));var bt=vt,Et=""+_e;return $!==null&&$.ref!==null&&typeof $.ref=="function"&&$.ref._stringRef===Et?$.ref:($=function(At){var _t=bt.refs;At===null?delete _t[Et]:_t[Et]=At},$._stringRef=Et,$)}if(typeof _e!="string")throw Error(p$4(284));if(!ht._owner)throw Error(p$4(290,_e))}return _e}function Mg(_e,$){throw _e=Object.prototype.toString.call($),Error(p$4(31,_e==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":_e))}function Ng(_e){var $=_e._init;return $(_e._payload)}function Og(_e){function $(Ft,Dt){if(_e){var $t=Ft.deletions;$t===null?(Ft.deletions=[Dt],Ft.flags|=16):$t.push(Dt)}}function ht(Ft,Dt){if(!_e)return null;for(;Dt!==null;)$(Ft,Dt),Dt=Dt.sibling;return null}function vt(Ft,Dt){for(Ft=new Map;Dt!==null;)Dt.key!==null?Ft.set(Dt.key,Dt):Ft.set(Dt.index,Dt),Dt=Dt.sibling;return Ft}function bt(Ft,Dt){return Ft=Pg(Ft,Dt),Ft.index=0,Ft.sibling=null,Ft}function Et(Ft,Dt,$t){return Ft.index=$t,_e?($t=Ft.alternate,$t!==null?($t=$t.index,$t<Dt?(Ft.flags|=2,Dt):$t):(Ft.flags|=2,Dt)):(Ft.flags|=1048576,Dt)}function At(Ft){return _e&&Ft.alternate===null&&(Ft.flags|=2),Ft}function _t(Ft,Dt,$t,Bt){return Dt===null||Dt.tag!==6?(Dt=Qg($t,Ft.mode,Bt),Dt.return=Ft,Dt):(Dt=bt(Dt,$t),Dt.return=Ft,Dt)}function wt(Ft,Dt,$t,Bt){var Nt=$t.type;return Nt===ya?xt(Ft,Dt,$t.props.children,Bt,$t.key):Dt!==null&&(Dt.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===Ha&&Ng(Nt)===Dt.type)?(Bt=bt(Dt,$t.props),Bt.ref=Lg(Ft,Dt,$t),Bt.return=Ft,Bt):(Bt=Rg($t.type,$t.key,$t.props,null,Ft.mode,Bt),Bt.ref=Lg(Ft,Dt,$t),Bt.return=Ft,Bt)}function Ct(Ft,Dt,$t,Bt){return Dt===null||Dt.tag!==4||Dt.stateNode.containerInfo!==$t.containerInfo||Dt.stateNode.implementation!==$t.implementation?(Dt=Sg($t,Ft.mode,Bt),Dt.return=Ft,Dt):(Dt=bt(Dt,$t.children||[]),Dt.return=Ft,Dt)}function xt(Ft,Dt,$t,Bt,Nt){return Dt===null||Dt.tag!==7?(Dt=Tg($t,Ft.mode,Bt,Nt),Dt.return=Ft,Dt):(Dt=bt(Dt,$t),Dt.return=Ft,Dt)}function Pt(Ft,Dt,$t){if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number")return Dt=Qg(""+Dt,Ft.mode,$t),Dt.return=Ft,Dt;if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case va:return $t=Rg(Dt.type,Dt.key,Dt.props,null,Ft.mode,$t),$t.ref=Lg(Ft,null,Dt),$t.return=Ft,$t;case wa:return Dt=Sg(Dt,Ft.mode,$t),Dt.return=Ft,Dt;case Ha:var Bt=Dt._init;return Pt(Ft,Bt(Dt._payload),$t)}if(eb(Dt)||Ka(Dt))return Dt=Tg(Dt,Ft.mode,$t,null),Dt.return=Ft,Dt;Mg(Ft,Dt)}return null}function Rt(Ft,Dt,$t,Bt){var Nt=Dt!==null?Dt.key:null;if(typeof $t=="string"&&$t!==""||typeof $t=="number")return Nt!==null?null:_t(Ft,Dt,""+$t,Bt);if(typeof $t=="object"&&$t!==null){switch($t.$$typeof){case va:return $t.key===Nt?wt(Ft,Dt,$t,Bt):null;case wa:return $t.key===Nt?Ct(Ft,Dt,$t,Bt):null;case Ha:return Nt=$t._init,Rt(Ft,Dt,Nt($t._payload),Bt)}if(eb($t)||Ka($t))return Nt!==null?null:xt(Ft,Dt,$t,Bt,null);Mg(Ft,$t)}return null}function kt(Ft,Dt,$t,Bt,Nt){if(typeof Bt=="string"&&Bt!==""||typeof Bt=="number")return Ft=Ft.get($t)||null,_t(Dt,Ft,""+Bt,Nt);if(typeof Bt=="object"&&Bt!==null){switch(Bt.$$typeof){case va:return Ft=Ft.get(Bt.key===null?$t:Bt.key)||null,wt(Dt,Ft,Bt,Nt);case wa:return Ft=Ft.get(Bt.key===null?$t:Bt.key)||null,Ct(Dt,Ft,Bt,Nt);case Ha:var Ht=Bt._init;return kt(Ft,Dt,$t,Ht(Bt._payload),Nt)}if(eb(Bt)||Ka(Bt))return Ft=Ft.get($t)||null,xt(Dt,Ft,Bt,Nt,null);Mg(Dt,Bt)}return null}function Mt(Ft,Dt,$t,Bt){for(var Nt=null,Ht=null,Vt=Dt,jt=Dt=0,Xt=null;Vt!==null&&jt<$t.length;jt++){Vt.index>jt?(Xt=Vt,Vt=null):Xt=Vt.sibling;var Jt=Rt(Ft,Vt,$t[jt],Bt);if(Jt===null){Vt===null&&(Vt=Xt);break}_e&&Vt&&Jt.alternate===null&&$(Ft,Vt),Dt=Et(Jt,Dt,jt),Ht===null?Nt=Jt:Ht.sibling=Jt,Ht=Jt,Vt=Xt}if(jt===$t.length)return ht(Ft,Vt),I$4&&tg(Ft,jt),Nt;if(Vt===null){for(;jt<$t.length;jt++)Vt=Pt(Ft,$t[jt],Bt),Vt!==null&&(Dt=Et(Vt,Dt,jt),Ht===null?Nt=Vt:Ht.sibling=Vt,Ht=Vt);return I$4&&tg(Ft,jt),Nt}for(Vt=vt(Ft,Vt);jt<$t.length;jt++)Xt=kt(Vt,Ft,jt,$t[jt],Bt),Xt!==null&&(_e&&Xt.alternate!==null&&Vt.delete(Xt.key===null?jt:Xt.key),Dt=Et(Xt,Dt,jt),Ht===null?Nt=Xt:Ht.sibling=Xt,Ht=Xt);return _e&&Vt.forEach(function(Gt){return $(Ft,Gt)}),I$4&&tg(Ft,jt),Nt}function Lt(Ft,Dt,$t,Bt){var Nt=Ka($t);if(typeof Nt!="function")throw Error(p$4(150));if($t=Nt.call($t),$t==null)throw Error(p$4(151));for(var Ht=Nt=null,Vt=Dt,jt=Dt=0,Xt=null,Jt=$t.next();Vt!==null&&!Jt.done;jt++,Jt=$t.next()){Vt.index>jt?(Xt=Vt,Vt=null):Xt=Vt.sibling;var Gt=Rt(Ft,Vt,Jt.value,Bt);if(Gt===null){Vt===null&&(Vt=Xt);break}_e&&Vt&&Gt.alternate===null&&$(Ft,Vt),Dt=Et(Gt,Dt,jt),Ht===null?Nt=Gt:Ht.sibling=Gt,Ht=Gt,Vt=Xt}if(Jt.done)return ht(Ft,Vt),I$4&&tg(Ft,jt),Nt;if(Vt===null){for(;!Jt.done;jt++,Jt=$t.next())Jt=Pt(Ft,Jt.value,Bt),Jt!==null&&(Dt=Et(Jt,Dt,jt),Ht===null?Nt=Jt:Ht.sibling=Jt,Ht=Jt);return I$4&&tg(Ft,jt),Nt}for(Vt=vt(Ft,Vt);!Jt.done;jt++,Jt=$t.next())Jt=kt(Vt,Ft,jt,Jt.value,Bt),Jt!==null&&(_e&&Jt.alternate!==null&&Vt.delete(Jt.key===null?jt:Jt.key),Dt=Et(Jt,Dt,jt),Ht===null?Nt=Jt:Ht.sibling=Jt,Ht=Jt);return _e&&Vt.forEach(function(en){return $(Ft,en)}),I$4&&tg(Ft,jt),Nt}function Ot(Ft,Dt,$t,Bt){if(typeof $t=="object"&&$t!==null&&$t.type===ya&&$t.key===null&&($t=$t.props.children),typeof $t=="object"&&$t!==null){switch($t.$$typeof){case va:e:{for(var Nt=$t.key,Ht=Dt;Ht!==null;){if(Ht.key===Nt){if(Nt=$t.type,Nt===ya){if(Ht.tag===7){ht(Ft,Ht.sibling),Dt=bt(Ht,$t.props.children),Dt.return=Ft,Ft=Dt;break e}}else if(Ht.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===Ha&&Ng(Nt)===Ht.type){ht(Ft,Ht.sibling),Dt=bt(Ht,$t.props),Dt.ref=Lg(Ft,Ht,$t),Dt.return=Ft,Ft=Dt;break e}ht(Ft,Ht);break}else $(Ft,Ht);Ht=Ht.sibling}$t.type===ya?(Dt=Tg($t.props.children,Ft.mode,Bt,$t.key),Dt.return=Ft,Ft=Dt):(Bt=Rg($t.type,$t.key,$t.props,null,Ft.mode,Bt),Bt.ref=Lg(Ft,Dt,$t),Bt.return=Ft,Ft=Bt)}return At(Ft);case wa:e:{for(Ht=$t.key;Dt!==null;){if(Dt.key===Ht)if(Dt.tag===4&&Dt.stateNode.containerInfo===$t.containerInfo&&Dt.stateNode.implementation===$t.implementation){ht(Ft,Dt.sibling),Dt=bt(Dt,$t.children||[]),Dt.return=Ft,Ft=Dt;break e}else{ht(Ft,Dt);break}else $(Ft,Dt);Dt=Dt.sibling}Dt=Sg($t,Ft.mode,Bt),Dt.return=Ft,Ft=Dt}return At(Ft);case Ha:return Ht=$t._init,Ot(Ft,Dt,Ht($t._payload),Bt)}if(eb($t))return Mt(Ft,Dt,$t,Bt);if(Ka($t))return Lt(Ft,Dt,$t,Bt);Mg(Ft,$t)}return typeof $t=="string"&&$t!==""||typeof $t=="number"?($t=""+$t,Dt!==null&&Dt.tag===6?(ht(Ft,Dt.sibling),Dt=bt(Dt,$t),Dt.return=Ft,Ft=Dt):(ht(Ft,Dt),Dt=Qg($t,Ft.mode,Bt),Dt.return=Ft,Ft=Dt),At(Ft)):ht(Ft,Dt)}return Ot}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(_e){var $=Wg.current;E$1(Wg),_e._currentValue=$}function bh(_e,$,ht){for(;_e!==null;){var vt=_e.alternate;if((_e.childLanes&$)!==$?(_e.childLanes|=$,vt!==null&&(vt.childLanes|=$)):vt!==null&&(vt.childLanes&$)!==$&&(vt.childLanes|=$),_e===ht)break;_e=_e.return}}function ch(_e,$){Xg=_e,Zg=Yg=null,_e=_e.dependencies,_e!==null&&_e.firstContext!==null&&(_e.lanes&$&&(dh=!0),_e.firstContext=null)}function eh(_e){var $=_e._currentValue;if(Zg!==_e)if(_e={context:_e,memoizedValue:$,next:null},Yg===null){if(Xg===null)throw Error(p$4(308));Yg=_e,Xg.dependencies={lanes:0,firstContext:_e}}else Yg=Yg.next=_e;return $}var fh=null;function gh(_e){fh===null?fh=[_e]:fh.push(_e)}function hh(_e,$,ht,vt){var bt=$.interleaved;return bt===null?(ht.next=ht,gh($)):(ht.next=bt.next,bt.next=ht),$.interleaved=ht,ih(_e,vt)}function ih(_e,$){_e.lanes|=$;var ht=_e.alternate;for(ht!==null&&(ht.lanes|=$),ht=_e,_e=_e.return;_e!==null;)_e.childLanes|=$,ht=_e.alternate,ht!==null&&(ht.childLanes|=$),ht=_e,_e=_e.return;return ht.tag===3?ht.stateNode:null}var jh=!1;function kh(_e){_e.updateQueue={baseState:_e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(_e,$){_e=_e.updateQueue,$.updateQueue===_e&&($.updateQueue={baseState:_e.baseState,firstBaseUpdate:_e.firstBaseUpdate,lastBaseUpdate:_e.lastBaseUpdate,shared:_e.shared,effects:_e.effects})}function mh(_e,$){return{eventTime:_e,lane:$,tag:0,payload:null,callback:null,next:null}}function nh(_e,$,ht){var vt=_e.updateQueue;if(vt===null)return null;if(vt=vt.shared,K&2){var bt=vt.pending;return bt===null?$.next=$:($.next=bt.next,bt.next=$),vt.pending=$,ih(_e,ht)}return bt=vt.interleaved,bt===null?($.next=$,gh(vt)):($.next=bt.next,bt.next=$),vt.interleaved=$,ih(_e,ht)}function oh(_e,$,ht){if($=$.updateQueue,$!==null&&($=$.shared,(ht&4194240)!==0)){var vt=$.lanes;vt&=_e.pendingLanes,ht|=vt,$.lanes=ht,Cc(_e,ht)}}function ph(_e,$){var ht=_e.updateQueue,vt=_e.alternate;if(vt!==null&&(vt=vt.updateQueue,ht===vt)){var bt=null,Et=null;if(ht=ht.firstBaseUpdate,ht!==null){do{var At={eventTime:ht.eventTime,lane:ht.lane,tag:ht.tag,payload:ht.payload,callback:ht.callback,next:null};Et===null?bt=Et=At:Et=Et.next=At,ht=ht.next}while(ht!==null);Et===null?bt=Et=$:Et=Et.next=$}else bt=Et=$;ht={baseState:vt.baseState,firstBaseUpdate:bt,lastBaseUpdate:Et,shared:vt.shared,effects:vt.effects},_e.updateQueue=ht;return}_e=ht.lastBaseUpdate,_e===null?ht.firstBaseUpdate=$:_e.next=$,ht.lastBaseUpdate=$}function qh(_e,$,ht,vt){var bt=_e.updateQueue;jh=!1;var Et=bt.firstBaseUpdate,At=bt.lastBaseUpdate,_t=bt.shared.pending;if(_t!==null){bt.shared.pending=null;var wt=_t,Ct=wt.next;wt.next=null,At===null?Et=Ct:At.next=Ct,At=wt;var xt=_e.alternate;xt!==null&&(xt=xt.updateQueue,_t=xt.lastBaseUpdate,_t!==At&&(_t===null?xt.firstBaseUpdate=Ct:_t.next=Ct,xt.lastBaseUpdate=wt))}if(Et!==null){var Pt=bt.baseState;At=0,xt=Ct=wt=null,_t=Et;do{var Rt=_t.lane,kt=_t.eventTime;if((vt&Rt)===Rt){xt!==null&&(xt=xt.next={eventTime:kt,lane:0,tag:_t.tag,payload:_t.payload,callback:_t.callback,next:null});e:{var Mt=_e,Lt=_t;switch(Rt=$,kt=ht,Lt.tag){case 1:if(Mt=Lt.payload,typeof Mt=="function"){Pt=Mt.call(kt,Pt,Rt);break e}Pt=Mt;break e;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=Lt.payload,Rt=typeof Mt=="function"?Mt.call(kt,Pt,Rt):Mt,Rt==null)break e;Pt=A$3({},Pt,Rt);break e;case 2:jh=!0}}_t.callback!==null&&_t.lane!==0&&(_e.flags|=64,Rt=bt.effects,Rt===null?bt.effects=[_t]:Rt.push(_t))}else kt={eventTime:kt,lane:Rt,tag:_t.tag,payload:_t.payload,callback:_t.callback,next:null},xt===null?(Ct=xt=kt,wt=Pt):xt=xt.next=kt,At|=Rt;if(_t=_t.next,_t===null){if(_t=bt.shared.pending,_t===null)break;Rt=_t,_t=Rt.next,Rt.next=null,bt.lastBaseUpdate=Rt,bt.shared.pending=null}}while(!0);if(xt===null&&(wt=Pt),bt.baseState=wt,bt.firstBaseUpdate=Ct,bt.lastBaseUpdate=xt,$=bt.shared.interleaved,$!==null){bt=$;do At|=bt.lane,bt=bt.next;while(bt!==$)}else Et===null&&(bt.shared.lanes=0);rh|=At,_e.lanes=At,_e.memoizedState=Pt}}function sh(_e,$,ht){if(_e=$.effects,$.effects=null,_e!==null)for($=0;$<_e.length;$++){var vt=_e[$],bt=vt.callback;if(bt!==null){if(vt.callback=null,vt=ht,typeof bt!="function")throw Error(p$4(191,bt));bt.call(vt)}}}var th={},uh=Uf(th),vh$1=Uf(th),wh=Uf(th);function xh(_e){if(_e===th)throw Error(p$4(174));return _e}function yh(_e,$){switch(G$2(wh,$),G$2(vh$1,_e),G$2(uh,th),_e=$.nodeType,_e){case 9:case 11:$=($=$.documentElement)?$.namespaceURI:lb(null,"");break;default:_e=_e===8?$.parentNode:$,$=_e.namespaceURI||null,_e=_e.tagName,$=lb($,_e)}E$1(uh),G$2(uh,$)}function zh(){E$1(uh),E$1(vh$1),E$1(wh)}function Ah(_e){xh(wh.current);var $=xh(uh.current),ht=lb($,_e.type);$!==ht&&(G$2(vh$1,_e),G$2(uh,ht))}function Bh(_e){vh$1.current===_e&&(E$1(uh),E$1(vh$1))}var L$1=Uf(0);function Ch(_e){for(var $=_e;$!==null;){if($.tag===13){var ht=$.memoizedState;if(ht!==null&&(ht=ht.dehydrated,ht===null||ht.data==="$?"||ht.data==="$!"))return $}else if($.tag===19&&$.memoizedProps.revealOrder!==void 0){if($.flags&128)return $}else if($.child!==null){$.child.return=$,$=$.child;continue}if($===_e)break;for(;$.sibling===null;){if($.return===null||$.return===_e)return null;$=$.return}$.sibling.return=$.return,$=$.sibling}return null}var Dh=[];function Eh(){for(var _e=0;_e<Dh.length;_e++)Dh[_e]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$3=null,N$3=null,O$2=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$3(){throw Error(p$4(321))}function Mh(_e,$){if($===null)return!1;for(var ht=0;ht<$.length&&ht<_e.length;ht++)if(!He(_e[ht],$[ht]))return!1;return!0}function Nh(_e,$,ht,vt,bt,Et){if(Hh=Et,M$3=$,$.memoizedState=null,$.updateQueue=null,$.lanes=0,Fh.current=_e===null||_e.memoizedState===null?Oh:Ph,_e=ht(vt,bt),Jh){Et=0;do{if(Jh=!1,Kh=0,25<=Et)throw Error(p$4(301));Et+=1,O$2=N$3=null,$.updateQueue=null,Fh.current=Qh,_e=ht(vt,bt)}while(Jh)}if(Fh.current=Rh,$=N$3!==null&&N$3.next!==null,Hh=0,O$2=N$3=M$3=null,Ih=!1,$)throw Error(p$4(300));return _e}function Sh(){var _e=Kh!==0;return Kh=0,_e}function Th(){var _e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$2===null?M$3.memoizedState=O$2=_e:O$2=O$2.next=_e,O$2}function Uh(){if(N$3===null){var _e=M$3.alternate;_e=_e!==null?_e.memoizedState:null}else _e=N$3.next;var $=O$2===null?M$3.memoizedState:O$2.next;if($!==null)O$2=$,N$3=_e;else{if(_e===null)throw Error(p$4(310));N$3=_e,_e={memoizedState:N$3.memoizedState,baseState:N$3.baseState,baseQueue:N$3.baseQueue,queue:N$3.queue,next:null},O$2===null?M$3.memoizedState=O$2=_e:O$2=O$2.next=_e}return O$2}function Vh(_e,$){return typeof $=="function"?$(_e):$}function Wh(_e){var $=Uh(),ht=$.queue;if(ht===null)throw Error(p$4(311));ht.lastRenderedReducer=_e;var vt=N$3,bt=vt.baseQueue,Et=ht.pending;if(Et!==null){if(bt!==null){var At=bt.next;bt.next=Et.next,Et.next=At}vt.baseQueue=bt=Et,ht.pending=null}if(bt!==null){Et=bt.next,vt=vt.baseState;var _t=At=null,wt=null,Ct=Et;do{var xt=Ct.lane;if((Hh&xt)===xt)wt!==null&&(wt=wt.next={lane:0,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null}),vt=Ct.hasEagerState?Ct.eagerState:_e(vt,Ct.action);else{var Pt={lane:xt,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null};wt===null?(_t=wt=Pt,At=vt):wt=wt.next=Pt,M$3.lanes|=xt,rh|=xt}Ct=Ct.next}while(Ct!==null&&Ct!==Et);wt===null?At=vt:wt.next=_t,He(vt,$.memoizedState)||(dh=!0),$.memoizedState=vt,$.baseState=At,$.baseQueue=wt,ht.lastRenderedState=vt}if(_e=ht.interleaved,_e!==null){bt=_e;do Et=bt.lane,M$3.lanes|=Et,rh|=Et,bt=bt.next;while(bt!==_e)}else bt===null&&(ht.lanes=0);return[$.memoizedState,ht.dispatch]}function Xh(_e){var $=Uh(),ht=$.queue;if(ht===null)throw Error(p$4(311));ht.lastRenderedReducer=_e;var vt=ht.dispatch,bt=ht.pending,Et=$.memoizedState;if(bt!==null){ht.pending=null;var At=bt=bt.next;do Et=_e(Et,At.action),At=At.next;while(At!==bt);He(Et,$.memoizedState)||(dh=!0),$.memoizedState=Et,$.baseQueue===null&&($.baseState=Et),ht.lastRenderedState=Et}return[Et,vt]}function Yh(){}function Zh(_e,$){var ht=M$3,vt=Uh(),bt=$(),Et=!He(vt.memoizedState,bt);if(Et&&(vt.memoizedState=bt,dh=!0),vt=vt.queue,$h(ai.bind(null,ht,vt,_e),[_e]),vt.getSnapshot!==$||Et||O$2!==null&&O$2.memoizedState.tag&1){if(ht.flags|=2048,bi(9,ci.bind(null,ht,vt,bt,$),void 0,null),Q===null)throw Error(p$4(349));Hh&30||di(ht,$,bt)}return bt}function di(_e,$,ht){_e.flags|=16384,_e={getSnapshot:$,value:ht},$=M$3.updateQueue,$===null?($={lastEffect:null,stores:null},M$3.updateQueue=$,$.stores=[_e]):(ht=$.stores,ht===null?$.stores=[_e]:ht.push(_e))}function ci(_e,$,ht,vt){$.value=ht,$.getSnapshot=vt,ei($)&&fi(_e)}function ai(_e,$,ht){return ht(function(){ei($)&&fi(_e)})}function ei(_e){var $=_e.getSnapshot;_e=_e.value;try{var ht=$();return!He(_e,ht)}catch{return!0}}function fi(_e){var $=ih(_e,1);$!==null&&gi($,_e,1,-1)}function hi(_e){var $=Th();return typeof _e=="function"&&(_e=_e()),$.memoizedState=$.baseState=_e,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:_e},$.queue=_e,_e=_e.dispatch=ii.bind(null,M$3,_e),[$.memoizedState,_e]}function bi(_e,$,ht,vt){return _e={tag:_e,create:$,destroy:ht,deps:vt,next:null},$=M$3.updateQueue,$===null?($={lastEffect:null,stores:null},M$3.updateQueue=$,$.lastEffect=_e.next=_e):(ht=$.lastEffect,ht===null?$.lastEffect=_e.next=_e:(vt=ht.next,ht.next=_e,_e.next=vt,$.lastEffect=_e)),_e}function ji(){return Uh().memoizedState}function ki(_e,$,ht,vt){var bt=Th();M$3.flags|=_e,bt.memoizedState=bi(1|$,ht,void 0,vt===void 0?null:vt)}function li(_e,$,ht,vt){var bt=Uh();vt=vt===void 0?null:vt;var Et=void 0;if(N$3!==null){var At=N$3.memoizedState;if(Et=At.destroy,vt!==null&&Mh(vt,At.deps)){bt.memoizedState=bi($,ht,Et,vt);return}}M$3.flags|=_e,bt.memoizedState=bi(1|$,ht,Et,vt)}function mi(_e,$){return ki(8390656,8,_e,$)}function $h(_e,$){return li(2048,8,_e,$)}function ni(_e,$){return li(4,2,_e,$)}function oi(_e,$){return li(4,4,_e,$)}function pi(_e,$){if(typeof $=="function")return _e=_e(),$(_e),function(){$(null)};if($!=null)return _e=_e(),$.current=_e,function(){$.current=null}}function qi(_e,$,ht){return ht=ht!=null?ht.concat([_e]):null,li(4,4,pi.bind(null,$,_e),ht)}function ri(){}function si(_e,$){var ht=Uh();$=$===void 0?null:$;var vt=ht.memoizedState;return vt!==null&&$!==null&&Mh($,vt[1])?vt[0]:(ht.memoizedState=[_e,$],_e)}function ti(_e,$){var ht=Uh();$=$===void 0?null:$;var vt=ht.memoizedState;return vt!==null&&$!==null&&Mh($,vt[1])?vt[0]:(_e=_e(),ht.memoizedState=[_e,$],_e)}function ui(_e,$,ht){return Hh&21?(He(ht,$)||(ht=yc(),M$3.lanes|=ht,rh|=ht,_e.baseState=!0),$):(_e.baseState&&(_e.baseState=!1,dh=!0),_e.memoizedState=ht)}function vi(_e,$){var ht=C$1;C$1=ht!==0&&4>ht?ht:4,_e(!0);var vt=Gh.transition;Gh.transition={};try{_e(!1),$()}finally{C$1=ht,Gh.transition=vt}}function wi(){return Uh().memoizedState}function xi(_e,$,ht){var vt=yi(_e);if(ht={lane:vt,action:ht,hasEagerState:!1,eagerState:null,next:null},zi(_e))Ai($,ht);else if(ht=hh(_e,$,ht,vt),ht!==null){var bt=R$1();gi(ht,_e,vt,bt),Bi(ht,$,vt)}}function ii(_e,$,ht){var vt=yi(_e),bt={lane:vt,action:ht,hasEagerState:!1,eagerState:null,next:null};if(zi(_e))Ai($,bt);else{var Et=_e.alternate;if(_e.lanes===0&&(Et===null||Et.lanes===0)&&(Et=$.lastRenderedReducer,Et!==null))try{var At=$.lastRenderedState,_t=Et(At,ht);if(bt.hasEagerState=!0,bt.eagerState=_t,He(_t,At)){var wt=$.interleaved;wt===null?(bt.next=bt,gh($)):(bt.next=wt.next,wt.next=bt),$.interleaved=bt;return}}catch{}finally{}ht=hh(_e,$,bt,vt),ht!==null&&(bt=R$1(),gi(ht,_e,vt,bt),Bi(ht,$,vt))}}function zi(_e){var $=_e.alternate;return _e===M$3||$!==null&&$===M$3}function Ai(_e,$){Jh=Ih=!0;var ht=_e.pending;ht===null?$.next=$:($.next=ht.next,ht.next=$),_e.pending=$}function Bi(_e,$,ht){if(ht&4194240){var vt=$.lanes;vt&=_e.pendingLanes,ht|=vt,$.lanes=ht,Cc(_e,ht)}}var Rh={readContext:eh,useCallback:P$3,useContext:P$3,useEffect:P$3,useImperativeHandle:P$3,useInsertionEffect:P$3,useLayoutEffect:P$3,useMemo:P$3,useReducer:P$3,useRef:P$3,useState:P$3,useDebugValue:P$3,useDeferredValue:P$3,useTransition:P$3,useMutableSource:P$3,useSyncExternalStore:P$3,useId:P$3,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(_e,$){return Th().memoizedState=[_e,$===void 0?null:$],_e},useContext:eh,useEffect:mi,useImperativeHandle:function(_e,$,ht){return ht=ht!=null?ht.concat([_e]):null,ki(4194308,4,pi.bind(null,$,_e),ht)},useLayoutEffect:function(_e,$){return ki(4194308,4,_e,$)},useInsertionEffect:function(_e,$){return ki(4,2,_e,$)},useMemo:function(_e,$){var ht=Th();return $=$===void 0?null:$,_e=_e(),ht.memoizedState=[_e,$],_e},useReducer:function(_e,$,ht){var vt=Th();return $=ht!==void 0?ht($):$,vt.memoizedState=vt.baseState=$,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_e,lastRenderedState:$},vt.queue=_e,_e=_e.dispatch=xi.bind(null,M$3,_e),[vt.memoizedState,_e]},useRef:function(_e){var $=Th();return _e={current:_e},$.memoizedState=_e},useState:hi,useDebugValue:ri,useDeferredValue:function(_e){return Th().memoizedState=_e},useTransition:function(){var _e=hi(!1),$=_e[0];return _e=vi.bind(null,_e[1]),Th().memoizedState=_e,[$,_e]},useMutableSource:function(){},useSyncExternalStore:function(_e,$,ht){var vt=M$3,bt=Th();if(I$4){if(ht===void 0)throw Error(p$4(407));ht=ht()}else{if(ht=$(),Q===null)throw Error(p$4(349));Hh&30||di(vt,$,ht)}bt.memoizedState=ht;var Et={value:ht,getSnapshot:$};return bt.queue=Et,mi(ai.bind(null,vt,Et,_e),[_e]),vt.flags|=2048,bi(9,ci.bind(null,vt,Et,ht,$),void 0,null),ht},useId:function(){var _e=Th(),$=Q.identifierPrefix;if(I$4){var ht=sg,vt=rg;ht=(vt&~(1<<32-oc(vt)-1)).toString(32)+ht,$=":"+$+"R"+ht,ht=Kh++,0<ht&&($+="H"+ht.toString(32)),$+=":"}else ht=Lh++,$=":"+$+"r"+ht.toString(32)+":";return _e.memoizedState=$},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(_e){var $=Uh();return ui($,N$3.memoizedState,_e)},useTransition:function(){var _e=Wh(Vh)[0],$=Uh().memoizedState;return[_e,$]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(_e){var $=Uh();return N$3===null?$.memoizedState=_e:ui($,N$3.memoizedState,_e)},useTransition:function(){var _e=Xh(Vh)[0],$=Uh().memoizedState;return[_e,$]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(_e,$){if(_e&&_e.defaultProps){$=A$3({},$),_e=_e.defaultProps;for(var ht in _e)$[ht]===void 0&&($[ht]=_e[ht]);return $}return $}function Di(_e,$,ht,vt){$=_e.memoizedState,ht=ht(vt,$),ht=ht==null?$:A$3({},$,ht),_e.memoizedState=ht,_e.lanes===0&&(_e.updateQueue.baseState=ht)}var Ei={isMounted:function(_e){return(_e=_e._reactInternals)?Vb(_e)===_e:!1},enqueueSetState:function(_e,$,ht){_e=_e._reactInternals;var vt=R$1(),bt=yi(_e),Et=mh(vt,bt);Et.payload=$,ht!=null&&(Et.callback=ht),$=nh(_e,Et,bt),$!==null&&(gi($,_e,bt,vt),oh($,_e,bt))},enqueueReplaceState:function(_e,$,ht){_e=_e._reactInternals;var vt=R$1(),bt=yi(_e),Et=mh(vt,bt);Et.tag=1,Et.payload=$,ht!=null&&(Et.callback=ht),$=nh(_e,Et,bt),$!==null&&(gi($,_e,bt,vt),oh($,_e,bt))},enqueueForceUpdate:function(_e,$){_e=_e._reactInternals;var ht=R$1(),vt=yi(_e),bt=mh(ht,vt);bt.tag=2,$!=null&&(bt.callback=$),$=nh(_e,bt,vt),$!==null&&(gi($,_e,vt,ht),oh($,_e,vt))}};function Fi(_e,$,ht,vt,bt,Et,At){return _e=_e.stateNode,typeof _e.shouldComponentUpdate=="function"?_e.shouldComponentUpdate(vt,Et,At):$.prototype&&$.prototype.isPureReactComponent?!Ie(ht,vt)||!Ie(bt,Et):!0}function Gi(_e,$,ht){var vt=!1,bt=Vf,Et=$.contextType;return typeof Et=="object"&&Et!==null?Et=eh(Et):(bt=Zf($)?Xf:H$2.current,vt=$.contextTypes,Et=(vt=vt!=null)?Yf(_e,bt):Vf),$=new $(ht,Et),_e.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,$.updater=Ei,_e.stateNode=$,$._reactInternals=_e,vt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=bt,_e.__reactInternalMemoizedMaskedChildContext=Et),$}function Hi(_e,$,ht,vt){_e=$.state,typeof $.componentWillReceiveProps=="function"&&$.componentWillReceiveProps(ht,vt),typeof $.UNSAFE_componentWillReceiveProps=="function"&&$.UNSAFE_componentWillReceiveProps(ht,vt),$.state!==_e&&Ei.enqueueReplaceState($,$.state,null)}function Ii(_e,$,ht,vt){var bt=_e.stateNode;bt.props=ht,bt.state=_e.memoizedState,bt.refs={},kh(_e);var Et=$.contextType;typeof Et=="object"&&Et!==null?bt.context=eh(Et):(Et=Zf($)?Xf:H$2.current,bt.context=Yf(_e,Et)),bt.state=_e.memoizedState,Et=$.getDerivedStateFromProps,typeof Et=="function"&&(Di(_e,$,Et,ht),bt.state=_e.memoizedState),typeof $.getDerivedStateFromProps=="function"||typeof bt.getSnapshotBeforeUpdate=="function"||typeof bt.UNSAFE_componentWillMount!="function"&&typeof bt.componentWillMount!="function"||($=bt.state,typeof bt.componentWillMount=="function"&&bt.componentWillMount(),typeof bt.UNSAFE_componentWillMount=="function"&&bt.UNSAFE_componentWillMount(),$!==bt.state&&Ei.enqueueReplaceState(bt,bt.state,null),qh(_e,ht,bt,vt),bt.state=_e.memoizedState),typeof bt.componentDidMount=="function"&&(_e.flags|=4194308)}function Ji(_e,$){try{var ht="",vt=$;do ht+=Pa(vt),vt=vt.return;while(vt);var bt=ht}catch(Et){bt=`
Error generating stack: `+Et.message+`
`+Et.stack}return{value:_e,source:$,stack:bt,digest:null}}function Ki(_e,$,ht){return{value:_e,source:null,stack:ht??null,digest:$??null}}function Li(_e,$){try{console.error($.value)}catch(ht){setTimeout(function(){throw ht})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(_e,$,ht){ht=mh(-1,ht),ht.tag=3,ht.payload={element:null};var vt=$.value;return ht.callback=function(){Oi||(Oi=!0,Pi=vt),Li(_e,$)},ht}function Qi(_e,$,ht){ht=mh(-1,ht),ht.tag=3;var vt=_e.type.getDerivedStateFromError;if(typeof vt=="function"){var bt=$.value;ht.payload=function(){return vt(bt)},ht.callback=function(){Li(_e,$)}}var Et=_e.stateNode;return Et!==null&&typeof Et.componentDidCatch=="function"&&(ht.callback=function(){Li(_e,$),typeof vt!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var At=$.stack;this.componentDidCatch($.value,{componentStack:At!==null?At:""})}),ht}function Si(_e,$,ht){var vt=_e.pingCache;if(vt===null){vt=_e.pingCache=new Mi;var bt=new Set;vt.set($,bt)}else bt=vt.get($),bt===void 0&&(bt=new Set,vt.set($,bt));bt.has(ht)||(bt.add(ht),_e=Ti.bind(null,_e,$,ht),$.then(_e,_e))}function Ui(_e){do{var $;if(($=_e.tag===13)&&($=_e.memoizedState,$=$!==null?$.dehydrated!==null:!0),$)return _e;_e=_e.return}while(_e!==null);return null}function Vi(_e,$,ht,vt,bt){return _e.mode&1?(_e.flags|=65536,_e.lanes=bt,_e):(_e===$?_e.flags|=65536:(_e.flags|=128,ht.flags|=131072,ht.flags&=-52805,ht.tag===1&&(ht.alternate===null?ht.tag=17:($=mh(-1,1),$.tag=2,nh(ht,$,1))),ht.lanes|=1),_e)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(_e,$,ht,vt){$.child=_e===null?Vg($,null,ht,vt):Ug($,_e.child,ht,vt)}function Yi(_e,$,ht,vt,bt){ht=ht.render;var Et=$.ref;return ch($,bt),vt=Nh(_e,$,ht,vt,Et,bt),ht=Sh(),_e!==null&&!dh?($.updateQueue=_e.updateQueue,$.flags&=-2053,_e.lanes&=~bt,Zi(_e,$,bt)):(I$4&&ht&&vg($),$.flags|=1,Xi(_e,$,vt,bt),$.child)}function $i(_e,$,ht,vt,bt){if(_e===null){var Et=ht.type;return typeof Et=="function"&&!aj(Et)&&Et.defaultProps===void 0&&ht.compare===null&&ht.defaultProps===void 0?($.tag=15,$.type=Et,bj(_e,$,Et,vt,bt)):(_e=Rg(ht.type,null,vt,$,$.mode,bt),_e.ref=$.ref,_e.return=$,$.child=_e)}if(Et=_e.child,!(_e.lanes&bt)){var At=Et.memoizedProps;if(ht=ht.compare,ht=ht!==null?ht:Ie,ht(At,vt)&&_e.ref===$.ref)return Zi(_e,$,bt)}return $.flags|=1,_e=Pg(Et,vt),_e.ref=$.ref,_e.return=$,$.child=_e}function bj(_e,$,ht,vt,bt){if(_e!==null){var Et=_e.memoizedProps;if(Ie(Et,vt)&&_e.ref===$.ref)if(dh=!1,$.pendingProps=vt=Et,(_e.lanes&bt)!==0)_e.flags&131072&&(dh=!0);else return $.lanes=_e.lanes,Zi(_e,$,bt)}return cj(_e,$,ht,vt,bt)}function dj(_e,$,ht){var vt=$.pendingProps,bt=vt.children,Et=_e!==null?_e.memoizedState:null;if(vt.mode==="hidden")if(!($.mode&1))$.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$2(ej,fj),fj|=ht;else{if(!(ht&1073741824))return _e=Et!==null?Et.baseLanes|ht:ht,$.lanes=$.childLanes=1073741824,$.memoizedState={baseLanes:_e,cachePool:null,transitions:null},$.updateQueue=null,G$2(ej,fj),fj|=_e,null;$.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt=Et!==null?Et.baseLanes:ht,G$2(ej,fj),fj|=vt}else Et!==null?(vt=Et.baseLanes|ht,$.memoizedState=null):vt=ht,G$2(ej,fj),fj|=vt;return Xi(_e,$,bt,ht),$.child}function gj(_e,$){var ht=$.ref;(_e===null&&ht!==null||_e!==null&&_e.ref!==ht)&&($.flags|=512,$.flags|=2097152)}function cj(_e,$,ht,vt,bt){var Et=Zf(ht)?Xf:H$2.current;return Et=Yf($,Et),ch($,bt),ht=Nh(_e,$,ht,vt,Et,bt),vt=Sh(),_e!==null&&!dh?($.updateQueue=_e.updateQueue,$.flags&=-2053,_e.lanes&=~bt,Zi(_e,$,bt)):(I$4&&vt&&vg($),$.flags|=1,Xi(_e,$,ht,bt),$.child)}function hj(_e,$,ht,vt,bt){if(Zf(ht)){var Et=!0;cg($)}else Et=!1;if(ch($,bt),$.stateNode===null)ij(_e,$),Gi($,ht,vt),Ii($,ht,vt,bt),vt=!0;else if(_e===null){var At=$.stateNode,_t=$.memoizedProps;At.props=_t;var wt=At.context,Ct=ht.contextType;typeof Ct=="object"&&Ct!==null?Ct=eh(Ct):(Ct=Zf(ht)?Xf:H$2.current,Ct=Yf($,Ct));var xt=ht.getDerivedStateFromProps,Pt=typeof xt=="function"||typeof At.getSnapshotBeforeUpdate=="function";Pt||typeof At.UNSAFE_componentWillReceiveProps!="function"&&typeof At.componentWillReceiveProps!="function"||(_t!==vt||wt!==Ct)&&Hi($,At,vt,Ct),jh=!1;var Rt=$.memoizedState;At.state=Rt,qh($,vt,At,bt),wt=$.memoizedState,_t!==vt||Rt!==wt||Wf.current||jh?(typeof xt=="function"&&(Di($,ht,xt,vt),wt=$.memoizedState),(_t=jh||Fi($,ht,_t,vt,Rt,wt,Ct))?(Pt||typeof At.UNSAFE_componentWillMount!="function"&&typeof At.componentWillMount!="function"||(typeof At.componentWillMount=="function"&&At.componentWillMount(),typeof At.UNSAFE_componentWillMount=="function"&&At.UNSAFE_componentWillMount()),typeof At.componentDidMount=="function"&&($.flags|=4194308)):(typeof At.componentDidMount=="function"&&($.flags|=4194308),$.memoizedProps=vt,$.memoizedState=wt),At.props=vt,At.state=wt,At.context=Ct,vt=_t):(typeof At.componentDidMount=="function"&&($.flags|=4194308),vt=!1)}else{At=$.stateNode,lh(_e,$),_t=$.memoizedProps,Ct=$.type===$.elementType?_t:Ci($.type,_t),At.props=Ct,Pt=$.pendingProps,Rt=At.context,wt=ht.contextType,typeof wt=="object"&&wt!==null?wt=eh(wt):(wt=Zf(ht)?Xf:H$2.current,wt=Yf($,wt));var kt=ht.getDerivedStateFromProps;(xt=typeof kt=="function"||typeof At.getSnapshotBeforeUpdate=="function")||typeof At.UNSAFE_componentWillReceiveProps!="function"&&typeof At.componentWillReceiveProps!="function"||(_t!==Pt||Rt!==wt)&&Hi($,At,vt,wt),jh=!1,Rt=$.memoizedState,At.state=Rt,qh($,vt,At,bt);var Mt=$.memoizedState;_t!==Pt||Rt!==Mt||Wf.current||jh?(typeof kt=="function"&&(Di($,ht,kt,vt),Mt=$.memoizedState),(Ct=jh||Fi($,ht,Ct,vt,Rt,Mt,wt)||!1)?(xt||typeof At.UNSAFE_componentWillUpdate!="function"&&typeof At.componentWillUpdate!="function"||(typeof At.componentWillUpdate=="function"&&At.componentWillUpdate(vt,Mt,wt),typeof At.UNSAFE_componentWillUpdate=="function"&&At.UNSAFE_componentWillUpdate(vt,Mt,wt)),typeof At.componentDidUpdate=="function"&&($.flags|=4),typeof At.getSnapshotBeforeUpdate=="function"&&($.flags|=1024)):(typeof At.componentDidUpdate!="function"||_t===_e.memoizedProps&&Rt===_e.memoizedState||($.flags|=4),typeof At.getSnapshotBeforeUpdate!="function"||_t===_e.memoizedProps&&Rt===_e.memoizedState||($.flags|=1024),$.memoizedProps=vt,$.memoizedState=Mt),At.props=vt,At.state=Mt,At.context=wt,vt=Ct):(typeof At.componentDidUpdate!="function"||_t===_e.memoizedProps&&Rt===_e.memoizedState||($.flags|=4),typeof At.getSnapshotBeforeUpdate!="function"||_t===_e.memoizedProps&&Rt===_e.memoizedState||($.flags|=1024),vt=!1)}return jj(_e,$,ht,vt,Et,bt)}function jj(_e,$,ht,vt,bt,Et){gj(_e,$);var At=($.flags&128)!==0;if(!vt&&!At)return bt&&dg($,ht,!1),Zi(_e,$,Et);vt=$.stateNode,Wi.current=$;var _t=At&&typeof ht.getDerivedStateFromError!="function"?null:vt.render();return $.flags|=1,_e!==null&&At?($.child=Ug($,_e.child,null,Et),$.child=Ug($,null,_t,Et)):Xi(_e,$,_t,Et),$.memoizedState=vt.state,bt&&dg($,ht,!0),$.child}function kj(_e){var $=_e.stateNode;$.pendingContext?ag(_e,$.pendingContext,$.pendingContext!==$.context):$.context&&ag(_e,$.context,!1),yh(_e,$.containerInfo)}function lj(_e,$,ht,vt,bt){return Ig(),Jg(bt),$.flags|=256,Xi(_e,$,ht,vt),$.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(_e){return{baseLanes:_e,cachePool:null,transitions:null}}function oj(_e,$,ht){var vt=$.pendingProps,bt=L$1.current,Et=!1,At=($.flags&128)!==0,_t;if((_t=At)||(_t=_e!==null&&_e.memoizedState===null?!1:(bt&2)!==0),_t?(Et=!0,$.flags&=-129):(_e===null||_e.memoizedState!==null)&&(bt|=1),G$2(L$1,bt&1),_e===null)return Eg($),_e=$.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null)?($.mode&1?_e.data==="$!"?$.lanes=8:$.lanes=1073741824:$.lanes=1,null):(At=vt.children,_e=vt.fallback,Et?(vt=$.mode,Et=$.child,At={mode:"hidden",children:At},!(vt&1)&&Et!==null?(Et.childLanes=0,Et.pendingProps=At):Et=pj(At,vt,0,null),_e=Tg(_e,vt,ht,null),Et.return=$,_e.return=$,Et.sibling=_e,$.child=Et,$.child.memoizedState=nj(ht),$.memoizedState=mj,_e):qj($,At));if(bt=_e.memoizedState,bt!==null&&(_t=bt.dehydrated,_t!==null))return rj(_e,$,At,vt,_t,bt,ht);if(Et){Et=vt.fallback,At=$.mode,bt=_e.child,_t=bt.sibling;var wt={mode:"hidden",children:vt.children};return!(At&1)&&$.child!==bt?(vt=$.child,vt.childLanes=0,vt.pendingProps=wt,$.deletions=null):(vt=Pg(bt,wt),vt.subtreeFlags=bt.subtreeFlags&14680064),_t!==null?Et=Pg(_t,Et):(Et=Tg(Et,At,ht,null),Et.flags|=2),Et.return=$,vt.return=$,vt.sibling=Et,$.child=vt,vt=Et,Et=$.child,At=_e.child.memoizedState,At=At===null?nj(ht):{baseLanes:At.baseLanes|ht,cachePool:null,transitions:At.transitions},Et.memoizedState=At,Et.childLanes=_e.childLanes&~ht,$.memoizedState=mj,vt}return Et=_e.child,_e=Et.sibling,vt=Pg(Et,{mode:"visible",children:vt.children}),!($.mode&1)&&(vt.lanes=ht),vt.return=$,vt.sibling=null,_e!==null&&(ht=$.deletions,ht===null?($.deletions=[_e],$.flags|=16):ht.push(_e)),$.child=vt,$.memoizedState=null,vt}function qj(_e,$){return $=pj({mode:"visible",children:$},_e.mode,0,null),$.return=_e,_e.child=$}function sj(_e,$,ht,vt){return vt!==null&&Jg(vt),Ug($,_e.child,null,ht),_e=qj($,$.pendingProps.children),_e.flags|=2,$.memoizedState=null,_e}function rj(_e,$,ht,vt,bt,Et,At){if(ht)return $.flags&256?($.flags&=-257,vt=Ki(Error(p$4(422))),sj(_e,$,At,vt)):$.memoizedState!==null?($.child=_e.child,$.flags|=128,null):(Et=vt.fallback,bt=$.mode,vt=pj({mode:"visible",children:vt.children},bt,0,null),Et=Tg(Et,bt,At,null),Et.flags|=2,vt.return=$,Et.return=$,vt.sibling=Et,$.child=vt,$.mode&1&&Ug($,_e.child,null,At),$.child.memoizedState=nj(At),$.memoizedState=mj,Et);if(!($.mode&1))return sj(_e,$,At,null);if(bt.data==="$!"){if(vt=bt.nextSibling&&bt.nextSibling.dataset,vt)var _t=vt.dgst;return vt=_t,Et=Error(p$4(419)),vt=Ki(Et,vt,void 0),sj(_e,$,At,vt)}if(_t=(At&_e.childLanes)!==0,dh||_t){if(vt=Q,vt!==null){switch(At&-At){case 4:bt=2;break;case 16:bt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:bt=32;break;case 536870912:bt=268435456;break;default:bt=0}bt=bt&(vt.suspendedLanes|At)?0:bt,bt!==0&&bt!==Et.retryLane&&(Et.retryLane=bt,ih(_e,bt),gi(vt,_e,bt,-1))}return tj(),vt=Ki(Error(p$4(421))),sj(_e,$,At,vt)}return bt.data==="$?"?($.flags|=128,$.child=_e.child,$=uj.bind(null,_e),bt._reactRetry=$,null):(_e=Et.treeContext,yg=Lf(bt.nextSibling),xg=$,I$4=!0,zg=null,_e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=_e.id,sg=_e.overflow,qg=$),$=qj($,vt.children),$.flags|=4096,$)}function vj(_e,$,ht){_e.lanes|=$;var vt=_e.alternate;vt!==null&&(vt.lanes|=$),bh(_e.return,$,ht)}function wj(_e,$,ht,vt,bt){var Et=_e.memoizedState;Et===null?_e.memoizedState={isBackwards:$,rendering:null,renderingStartTime:0,last:vt,tail:ht,tailMode:bt}:(Et.isBackwards=$,Et.rendering=null,Et.renderingStartTime=0,Et.last=vt,Et.tail=ht,Et.tailMode=bt)}function xj(_e,$,ht){var vt=$.pendingProps,bt=vt.revealOrder,Et=vt.tail;if(Xi(_e,$,vt.children,ht),vt=L$1.current,vt&2)vt=vt&1|2,$.flags|=128;else{if(_e!==null&&_e.flags&128)e:for(_e=$.child;_e!==null;){if(_e.tag===13)_e.memoizedState!==null&&vj(_e,ht,$);else if(_e.tag===19)vj(_e,ht,$);else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===$)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===$)break e;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}vt&=1}if(G$2(L$1,vt),!($.mode&1))$.memoizedState=null;else switch(bt){case"forwards":for(ht=$.child,bt=null;ht!==null;)_e=ht.alternate,_e!==null&&Ch(_e)===null&&(bt=ht),ht=ht.sibling;ht=bt,ht===null?(bt=$.child,$.child=null):(bt=ht.sibling,ht.sibling=null),wj($,!1,bt,ht,Et);break;case"backwards":for(ht=null,bt=$.child,$.child=null;bt!==null;){if(_e=bt.alternate,_e!==null&&Ch(_e)===null){$.child=bt;break}_e=bt.sibling,bt.sibling=ht,ht=bt,bt=_e}wj($,!0,ht,null,Et);break;case"together":wj($,!1,null,null,void 0);break;default:$.memoizedState=null}return $.child}function ij(_e,$){!($.mode&1)&&_e!==null&&(_e.alternate=null,$.alternate=null,$.flags|=2)}function Zi(_e,$,ht){if(_e!==null&&($.dependencies=_e.dependencies),rh|=$.lanes,!(ht&$.childLanes))return null;if(_e!==null&&$.child!==_e.child)throw Error(p$4(153));if($.child!==null){for(_e=$.child,ht=Pg(_e,_e.pendingProps),$.child=ht,ht.return=$;_e.sibling!==null;)_e=_e.sibling,ht=ht.sibling=Pg(_e,_e.pendingProps),ht.return=$;ht.sibling=null}return $.child}function yj(_e,$,ht){switch($.tag){case 3:kj($),Ig();break;case 5:Ah($);break;case 1:Zf($.type)&&cg($);break;case 4:yh($,$.stateNode.containerInfo);break;case 10:var vt=$.type._context,bt=$.memoizedProps.value;G$2(Wg,vt._currentValue),vt._currentValue=bt;break;case 13:if(vt=$.memoizedState,vt!==null)return vt.dehydrated!==null?(G$2(L$1,L$1.current&1),$.flags|=128,null):ht&$.child.childLanes?oj(_e,$,ht):(G$2(L$1,L$1.current&1),_e=Zi(_e,$,ht),_e!==null?_e.sibling:null);G$2(L$1,L$1.current&1);break;case 19:if(vt=(ht&$.childLanes)!==0,_e.flags&128){if(vt)return xj(_e,$,ht);$.flags|=128}if(bt=$.memoizedState,bt!==null&&(bt.rendering=null,bt.tail=null,bt.lastEffect=null),G$2(L$1,L$1.current),vt)break;return null;case 22:case 23:return $.lanes=0,dj(_e,$,ht)}return Zi(_e,$,ht)}var zj,Aj,Bj,Cj;zj=function(_e,$){for(var ht=$.child;ht!==null;){if(ht.tag===5||ht.tag===6)_e.appendChild(ht.stateNode);else if(ht.tag!==4&&ht.child!==null){ht.child.return=ht,ht=ht.child;continue}if(ht===$)break;for(;ht.sibling===null;){if(ht.return===null||ht.return===$)return;ht=ht.return}ht.sibling.return=ht.return,ht=ht.sibling}};Aj=function(){};Bj=function(_e,$,ht,vt){var bt=_e.memoizedProps;if(bt!==vt){_e=$.stateNode,xh(uh.current);var Et=null;switch(ht){case"input":bt=Ya(_e,bt),vt=Ya(_e,vt),Et=[];break;case"select":bt=A$3({},bt,{value:void 0}),vt=A$3({},vt,{value:void 0}),Et=[];break;case"textarea":bt=gb(_e,bt),vt=gb(_e,vt),Et=[];break;default:typeof bt.onClick!="function"&&typeof vt.onClick=="function"&&(_e.onclick=Bf)}ub(ht,vt);var At;ht=null;for(Ct in bt)if(!vt.hasOwnProperty(Ct)&&bt.hasOwnProperty(Ct)&&bt[Ct]!=null)if(Ct==="style"){var _t=bt[Ct];for(At in _t)_t.hasOwnProperty(At)&&(ht||(ht={}),ht[At]="")}else Ct!=="dangerouslySetInnerHTML"&&Ct!=="children"&&Ct!=="suppressContentEditableWarning"&&Ct!=="suppressHydrationWarning"&&Ct!=="autoFocus"&&(ea.hasOwnProperty(Ct)?Et||(Et=[]):(Et=Et||[]).push(Ct,null));for(Ct in vt){var wt=vt[Ct];if(_t=bt!=null?bt[Ct]:void 0,vt.hasOwnProperty(Ct)&&wt!==_t&&(wt!=null||_t!=null))if(Ct==="style")if(_t){for(At in _t)!_t.hasOwnProperty(At)||wt&&wt.hasOwnProperty(At)||(ht||(ht={}),ht[At]="");for(At in wt)wt.hasOwnProperty(At)&&_t[At]!==wt[At]&&(ht||(ht={}),ht[At]=wt[At])}else ht||(Et||(Et=[]),Et.push(Ct,ht)),ht=wt;else Ct==="dangerouslySetInnerHTML"?(wt=wt?wt.__html:void 0,_t=_t?_t.__html:void 0,wt!=null&&_t!==wt&&(Et=Et||[]).push(Ct,wt)):Ct==="children"?typeof wt!="string"&&typeof wt!="number"||(Et=Et||[]).push(Ct,""+wt):Ct!=="suppressContentEditableWarning"&&Ct!=="suppressHydrationWarning"&&(ea.hasOwnProperty(Ct)?(wt!=null&&Ct==="onScroll"&&D$4("scroll",_e),Et||_t===wt||(Et=[])):(Et=Et||[]).push(Ct,wt))}ht&&(Et=Et||[]).push("style",ht);var Ct=Et;($.updateQueue=Ct)&&($.flags|=4)}};Cj=function(_e,$,ht,vt){ht!==vt&&($.flags|=4)};function Dj(_e,$){if(!I$4)switch(_e.tailMode){case"hidden":$=_e.tail;for(var ht=null;$!==null;)$.alternate!==null&&(ht=$),$=$.sibling;ht===null?_e.tail=null:ht.sibling=null;break;case"collapsed":ht=_e.tail;for(var vt=null;ht!==null;)ht.alternate!==null&&(vt=ht),ht=ht.sibling;vt===null?$||_e.tail===null?_e.tail=null:_e.tail.sibling=null:vt.sibling=null}}function S$4(_e){var $=_e.alternate!==null&&_e.alternate.child===_e.child,ht=0,vt=0;if($)for(var bt=_e.child;bt!==null;)ht|=bt.lanes|bt.childLanes,vt|=bt.subtreeFlags&14680064,vt|=bt.flags&14680064,bt.return=_e,bt=bt.sibling;else for(bt=_e.child;bt!==null;)ht|=bt.lanes|bt.childLanes,vt|=bt.subtreeFlags,vt|=bt.flags,bt.return=_e,bt=bt.sibling;return _e.subtreeFlags|=vt,_e.childLanes=ht,$}function Ej(_e,$,ht){var vt=$.pendingProps;switch(wg($),$.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$4($),null;case 1:return Zf($.type)&&$f(),S$4($),null;case 3:return vt=$.stateNode,zh(),E$1(Wf),E$1(H$2),Eh(),vt.pendingContext&&(vt.context=vt.pendingContext,vt.pendingContext=null),(_e===null||_e.child===null)&&(Gg($)?$.flags|=4:_e===null||_e.memoizedState.isDehydrated&&!($.flags&256)||($.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(_e,$),S$4($),null;case 5:Bh($);var bt=xh(wh.current);if(ht=$.type,_e!==null&&$.stateNode!=null)Bj(_e,$,ht,vt,bt),_e.ref!==$.ref&&($.flags|=512,$.flags|=2097152);else{if(!vt){if($.stateNode===null)throw Error(p$4(166));return S$4($),null}if(_e=xh(uh.current),Gg($)){vt=$.stateNode,ht=$.type;var Et=$.memoizedProps;switch(vt[Of]=$,vt[Pf]=Et,_e=($.mode&1)!==0,ht){case"dialog":D$4("cancel",vt),D$4("close",vt);break;case"iframe":case"object":case"embed":D$4("load",vt);break;case"video":case"audio":for(bt=0;bt<lf.length;bt++)D$4(lf[bt],vt);break;case"source":D$4("error",vt);break;case"img":case"image":case"link":D$4("error",vt),D$4("load",vt);break;case"details":D$4("toggle",vt);break;case"input":Za(vt,Et),D$4("invalid",vt);break;case"select":vt._wrapperState={wasMultiple:!!Et.multiple},D$4("invalid",vt);break;case"textarea":hb(vt,Et),D$4("invalid",vt)}ub(ht,Et),bt=null;for(var At in Et)if(Et.hasOwnProperty(At)){var _t=Et[At];At==="children"?typeof _t=="string"?vt.textContent!==_t&&(Et.suppressHydrationWarning!==!0&&Af(vt.textContent,_t,_e),bt=["children",_t]):typeof _t=="number"&&vt.textContent!==""+_t&&(Et.suppressHydrationWarning!==!0&&Af(vt.textContent,_t,_e),bt=["children",""+_t]):ea.hasOwnProperty(At)&&_t!=null&&At==="onScroll"&&D$4("scroll",vt)}switch(ht){case"input":Va(vt),db(vt,Et,!0);break;case"textarea":Va(vt),jb(vt);break;case"select":case"option":break;default:typeof Et.onClick=="function"&&(vt.onclick=Bf)}vt=bt,$.updateQueue=vt,vt!==null&&($.flags|=4)}else{At=bt.nodeType===9?bt:bt.ownerDocument,_e==="http://www.w3.org/1999/xhtml"&&(_e=kb(ht)),_e==="http://www.w3.org/1999/xhtml"?ht==="script"?(_e=At.createElement("div"),_e.innerHTML="<script><\/script>",_e=_e.removeChild(_e.firstChild)):typeof vt.is=="string"?_e=At.createElement(ht,{is:vt.is}):(_e=At.createElement(ht),ht==="select"&&(At=_e,vt.multiple?At.multiple=!0:vt.size&&(At.size=vt.size))):_e=At.createElementNS(_e,ht),_e[Of]=$,_e[Pf]=vt,zj(_e,$,!1,!1),$.stateNode=_e;e:{switch(At=vb(ht,vt),ht){case"dialog":D$4("cancel",_e),D$4("close",_e),bt=vt;break;case"iframe":case"object":case"embed":D$4("load",_e),bt=vt;break;case"video":case"audio":for(bt=0;bt<lf.length;bt++)D$4(lf[bt],_e);bt=vt;break;case"source":D$4("error",_e),bt=vt;break;case"img":case"image":case"link":D$4("error",_e),D$4("load",_e),bt=vt;break;case"details":D$4("toggle",_e),bt=vt;break;case"input":Za(_e,vt),bt=Ya(_e,vt),D$4("invalid",_e);break;case"option":bt=vt;break;case"select":_e._wrapperState={wasMultiple:!!vt.multiple},bt=A$3({},vt,{value:void 0}),D$4("invalid",_e);break;case"textarea":hb(_e,vt),bt=gb(_e,vt),D$4("invalid",_e);break;default:bt=vt}ub(ht,bt),_t=bt;for(Et in _t)if(_t.hasOwnProperty(Et)){var wt=_t[Et];Et==="style"?sb(_e,wt):Et==="dangerouslySetInnerHTML"?(wt=wt?wt.__html:void 0,wt!=null&&nb(_e,wt)):Et==="children"?typeof wt=="string"?(ht!=="textarea"||wt!=="")&&ob(_e,wt):typeof wt=="number"&&ob(_e,""+wt):Et!=="suppressContentEditableWarning"&&Et!=="suppressHydrationWarning"&&Et!=="autoFocus"&&(ea.hasOwnProperty(Et)?wt!=null&&Et==="onScroll"&&D$4("scroll",_e):wt!=null&&ta(_e,Et,wt,At))}switch(ht){case"input":Va(_e),db(_e,vt,!1);break;case"textarea":Va(_e),jb(_e);break;case"option":vt.value!=null&&_e.setAttribute("value",""+Sa(vt.value));break;case"select":_e.multiple=!!vt.multiple,Et=vt.value,Et!=null?fb(_e,!!vt.multiple,Et,!1):vt.defaultValue!=null&&fb(_e,!!vt.multiple,vt.defaultValue,!0);break;default:typeof bt.onClick=="function"&&(_e.onclick=Bf)}switch(ht){case"button":case"input":case"select":case"textarea":vt=!!vt.autoFocus;break e;case"img":vt=!0;break e;default:vt=!1}}vt&&($.flags|=4)}$.ref!==null&&($.flags|=512,$.flags|=2097152)}return S$4($),null;case 6:if(_e&&$.stateNode!=null)Cj(_e,$,_e.memoizedProps,vt);else{if(typeof vt!="string"&&$.stateNode===null)throw Error(p$4(166));if(ht=xh(wh.current),xh(uh.current),Gg($)){if(vt=$.stateNode,ht=$.memoizedProps,vt[Of]=$,(Et=vt.nodeValue!==ht)&&(_e=xg,_e!==null))switch(_e.tag){case 3:Af(vt.nodeValue,ht,(_e.mode&1)!==0);break;case 5:_e.memoizedProps.suppressHydrationWarning!==!0&&Af(vt.nodeValue,ht,(_e.mode&1)!==0)}Et&&($.flags|=4)}else vt=(ht.nodeType===9?ht:ht.ownerDocument).createTextNode(vt),vt[Of]=$,$.stateNode=vt}return S$4($),null;case 13:if(E$1(L$1),vt=$.memoizedState,_e===null||_e.memoizedState!==null&&_e.memoizedState.dehydrated!==null){if(I$4&&yg!==null&&$.mode&1&&!($.flags&128))Hg(),Ig(),$.flags|=98560,Et=!1;else if(Et=Gg($),vt!==null&&vt.dehydrated!==null){if(_e===null){if(!Et)throw Error(p$4(318));if(Et=$.memoizedState,Et=Et!==null?Et.dehydrated:null,!Et)throw Error(p$4(317));Et[Of]=$}else Ig(),!($.flags&128)&&($.memoizedState=null),$.flags|=4;S$4($),Et=!1}else zg!==null&&(Fj(zg),zg=null),Et=!0;if(!Et)return $.flags&65536?$:null}return $.flags&128?($.lanes=ht,$):(vt=vt!==null,vt!==(_e!==null&&_e.memoizedState!==null)&&vt&&($.child.flags|=8192,$.mode&1&&(_e===null||L$1.current&1?T$3===0&&(T$3=3):tj())),$.updateQueue!==null&&($.flags|=4),S$4($),null);case 4:return zh(),Aj(_e,$),_e===null&&sf($.stateNode.containerInfo),S$4($),null;case 10:return ah($.type._context),S$4($),null;case 17:return Zf($.type)&&$f(),S$4($),null;case 19:if(E$1(L$1),Et=$.memoizedState,Et===null)return S$4($),null;if(vt=($.flags&128)!==0,At=Et.rendering,At===null)if(vt)Dj(Et,!1);else{if(T$3!==0||_e!==null&&_e.flags&128)for(_e=$.child;_e!==null;){if(At=Ch(_e),At!==null){for($.flags|=128,Dj(Et,!1),vt=At.updateQueue,vt!==null&&($.updateQueue=vt,$.flags|=4),$.subtreeFlags=0,vt=ht,ht=$.child;ht!==null;)Et=ht,_e=vt,Et.flags&=14680066,At=Et.alternate,At===null?(Et.childLanes=0,Et.lanes=_e,Et.child=null,Et.subtreeFlags=0,Et.memoizedProps=null,Et.memoizedState=null,Et.updateQueue=null,Et.dependencies=null,Et.stateNode=null):(Et.childLanes=At.childLanes,Et.lanes=At.lanes,Et.child=At.child,Et.subtreeFlags=0,Et.deletions=null,Et.memoizedProps=At.memoizedProps,Et.memoizedState=At.memoizedState,Et.updateQueue=At.updateQueue,Et.type=At.type,_e=At.dependencies,Et.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext}),ht=ht.sibling;return G$2(L$1,L$1.current&1|2),$.child}_e=_e.sibling}Et.tail!==null&&B$1()>Gj&&($.flags|=128,vt=!0,Dj(Et,!1),$.lanes=4194304)}else{if(!vt)if(_e=Ch(At),_e!==null){if($.flags|=128,vt=!0,ht=_e.updateQueue,ht!==null&&($.updateQueue=ht,$.flags|=4),Dj(Et,!0),Et.tail===null&&Et.tailMode==="hidden"&&!At.alternate&&!I$4)return S$4($),null}else 2*B$1()-Et.renderingStartTime>Gj&&ht!==1073741824&&($.flags|=128,vt=!0,Dj(Et,!1),$.lanes=4194304);Et.isBackwards?(At.sibling=$.child,$.child=At):(ht=Et.last,ht!==null?ht.sibling=At:$.child=At,Et.last=At)}return Et.tail!==null?($=Et.tail,Et.rendering=$,Et.tail=$.sibling,Et.renderingStartTime=B$1(),$.sibling=null,ht=L$1.current,G$2(L$1,vt?ht&1|2:ht&1),$):(S$4($),null);case 22:case 23:return Hj(),vt=$.memoizedState!==null,_e!==null&&_e.memoizedState!==null!==vt&&($.flags|=8192),vt&&$.mode&1?fj&1073741824&&(S$4($),$.subtreeFlags&6&&($.flags|=8192)):S$4($),null;case 24:return null;case 25:return null}throw Error(p$4(156,$.tag))}function Ij(_e,$){switch(wg($),$.tag){case 1:return Zf($.type)&&$f(),_e=$.flags,_e&65536?($.flags=_e&-65537|128,$):null;case 3:return zh(),E$1(Wf),E$1(H$2),Eh(),_e=$.flags,_e&65536&&!(_e&128)?($.flags=_e&-65537|128,$):null;case 5:return Bh($),null;case 13:if(E$1(L$1),_e=$.memoizedState,_e!==null&&_e.dehydrated!==null){if($.alternate===null)throw Error(p$4(340));Ig()}return _e=$.flags,_e&65536?($.flags=_e&-65537|128,$):null;case 19:return E$1(L$1),null;case 4:return zh(),null;case 10:return ah($.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$2=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(_e,$){var ht=_e.ref;if(ht!==null)if(typeof ht=="function")try{ht(null)}catch(vt){W$2(_e,$,vt)}else ht.current=null}function Mj(_e,$,ht){try{ht()}catch(vt){W$2(_e,$,vt)}}var Nj=!1;function Oj(_e,$){if(Cf=dd,_e=Me(),Ne(_e)){if("selectionStart"in _e)var ht={start:_e.selectionStart,end:_e.selectionEnd};else e:{ht=(ht=_e.ownerDocument)&&ht.defaultView||window;var vt=ht.getSelection&&ht.getSelection();if(vt&&vt.rangeCount!==0){ht=vt.anchorNode;var bt=vt.anchorOffset,Et=vt.focusNode;vt=vt.focusOffset;try{ht.nodeType,Et.nodeType}catch{ht=null;break e}var At=0,_t=-1,wt=-1,Ct=0,xt=0,Pt=_e,Rt=null;t:for(;;){for(var kt;Pt!==ht||bt!==0&&Pt.nodeType!==3||(_t=At+bt),Pt!==Et||vt!==0&&Pt.nodeType!==3||(wt=At+vt),Pt.nodeType===3&&(At+=Pt.nodeValue.length),(kt=Pt.firstChild)!==null;)Rt=Pt,Pt=kt;for(;;){if(Pt===_e)break t;if(Rt===ht&&++Ct===bt&&(_t=At),Rt===Et&&++xt===vt&&(wt=At),(kt=Pt.nextSibling)!==null)break;Pt=Rt,Rt=Pt.parentNode}Pt=kt}ht=_t===-1||wt===-1?null:{start:_t,end:wt}}else ht=null}ht=ht||{start:0,end:0}}else ht=null;for(Df={focusedElem:_e,selectionRange:ht},dd=!1,V$1=$;V$1!==null;)if($=V$1,_e=$.child,($.subtreeFlags&1028)!==0&&_e!==null)_e.return=$,V$1=_e;else for(;V$1!==null;){$=V$1;try{var Mt=$.alternate;if($.flags&1024)switch($.tag){case 0:case 11:case 15:break;case 1:if(Mt!==null){var Lt=Mt.memoizedProps,Ot=Mt.memoizedState,Ft=$.stateNode,Dt=Ft.getSnapshotBeforeUpdate($.elementType===$.type?Lt:Ci($.type,Lt),Ot);Ft.__reactInternalSnapshotBeforeUpdate=Dt}break;case 3:var $t=$.stateNode.containerInfo;$t.nodeType===1?$t.textContent="":$t.nodeType===9&&$t.documentElement&&$t.removeChild($t.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$4(163))}}catch(Bt){W$2($,$.return,Bt)}if(_e=$.sibling,_e!==null){_e.return=$.return,V$1=_e;break}V$1=$.return}return Mt=Nj,Nj=!1,Mt}function Pj(_e,$,ht){var vt=$.updateQueue;if(vt=vt!==null?vt.lastEffect:null,vt!==null){var bt=vt=vt.next;do{if((bt.tag&_e)===_e){var Et=bt.destroy;bt.destroy=void 0,Et!==void 0&&Mj($,ht,Et)}bt=bt.next}while(bt!==vt)}}function Qj(_e,$){if($=$.updateQueue,$=$!==null?$.lastEffect:null,$!==null){var ht=$=$.next;do{if((ht.tag&_e)===_e){var vt=ht.create;ht.destroy=vt()}ht=ht.next}while(ht!==$)}}function Rj(_e){var $=_e.ref;if($!==null){var ht=_e.stateNode;switch(_e.tag){case 5:_e=ht;break;default:_e=ht}typeof $=="function"?$(_e):$.current=_e}}function Sj(_e){var $=_e.alternate;$!==null&&(_e.alternate=null,Sj($)),_e.child=null,_e.deletions=null,_e.sibling=null,_e.tag===5&&($=_e.stateNode,$!==null&&(delete $[Of],delete $[Pf],delete $[of],delete $[Qf],delete $[Rf])),_e.stateNode=null,_e.return=null,_e.dependencies=null,_e.memoizedProps=null,_e.memoizedState=null,_e.pendingProps=null,_e.stateNode=null,_e.updateQueue=null}function Tj(_e){return _e.tag===5||_e.tag===3||_e.tag===4}function Uj(_e){e:for(;;){for(;_e.sibling===null;){if(_e.return===null||Tj(_e.return))return null;_e=_e.return}for(_e.sibling.return=_e.return,_e=_e.sibling;_e.tag!==5&&_e.tag!==6&&_e.tag!==18;){if(_e.flags&2||_e.child===null||_e.tag===4)continue e;_e.child.return=_e,_e=_e.child}if(!(_e.flags&2))return _e.stateNode}}function Vj(_e,$,ht){var vt=_e.tag;if(vt===5||vt===6)_e=_e.stateNode,$?ht.nodeType===8?ht.parentNode.insertBefore(_e,$):ht.insertBefore(_e,$):(ht.nodeType===8?($=ht.parentNode,$.insertBefore(_e,ht)):($=ht,$.appendChild(_e)),ht=ht._reactRootContainer,ht!=null||$.onclick!==null||($.onclick=Bf));else if(vt!==4&&(_e=_e.child,_e!==null))for(Vj(_e,$,ht),_e=_e.sibling;_e!==null;)Vj(_e,$,ht),_e=_e.sibling}function Wj(_e,$,ht){var vt=_e.tag;if(vt===5||vt===6)_e=_e.stateNode,$?ht.insertBefore(_e,$):ht.appendChild(_e);else if(vt!==4&&(_e=_e.child,_e!==null))for(Wj(_e,$,ht),_e=_e.sibling;_e!==null;)Wj(_e,$,ht),_e=_e.sibling}var X$1=null,Xj=!1;function Yj(_e,$,ht){for(ht=ht.child;ht!==null;)Zj(_e,$,ht),ht=ht.sibling}function Zj(_e,$,ht){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,ht)}catch{}switch(ht.tag){case 5:U$2||Lj(ht,$);case 6:var vt=X$1,bt=Xj;X$1=null,Yj(_e,$,ht),X$1=vt,Xj=bt,X$1!==null&&(Xj?(_e=X$1,ht=ht.stateNode,_e.nodeType===8?_e.parentNode.removeChild(ht):_e.removeChild(ht)):X$1.removeChild(ht.stateNode));break;case 18:X$1!==null&&(Xj?(_e=X$1,ht=ht.stateNode,_e.nodeType===8?Kf(_e.parentNode,ht):_e.nodeType===1&&Kf(_e,ht),bd(_e)):Kf(X$1,ht.stateNode));break;case 4:vt=X$1,bt=Xj,X$1=ht.stateNode.containerInfo,Xj=!0,Yj(_e,$,ht),X$1=vt,Xj=bt;break;case 0:case 11:case 14:case 15:if(!U$2&&(vt=ht.updateQueue,vt!==null&&(vt=vt.lastEffect,vt!==null))){bt=vt=vt.next;do{var Et=bt,At=Et.destroy;Et=Et.tag,At!==void 0&&(Et&2||Et&4)&&Mj(ht,$,At),bt=bt.next}while(bt!==vt)}Yj(_e,$,ht);break;case 1:if(!U$2&&(Lj(ht,$),vt=ht.stateNode,typeof vt.componentWillUnmount=="function"))try{vt.props=ht.memoizedProps,vt.state=ht.memoizedState,vt.componentWillUnmount()}catch(_t){W$2(ht,$,_t)}Yj(_e,$,ht);break;case 21:Yj(_e,$,ht);break;case 22:ht.mode&1?(U$2=(vt=U$2)||ht.memoizedState!==null,Yj(_e,$,ht),U$2=vt):Yj(_e,$,ht);break;default:Yj(_e,$,ht)}}function ak(_e){var $=_e.updateQueue;if($!==null){_e.updateQueue=null;var ht=_e.stateNode;ht===null&&(ht=_e.stateNode=new Kj),$.forEach(function(vt){var bt=bk.bind(null,_e,vt);ht.has(vt)||(ht.add(vt),vt.then(bt,bt))})}}function ck(_e,$){var ht=$.deletions;if(ht!==null)for(var vt=0;vt<ht.length;vt++){var bt=ht[vt];try{var Et=_e,At=$,_t=At;e:for(;_t!==null;){switch(_t.tag){case 5:X$1=_t.stateNode,Xj=!1;break e;case 3:X$1=_t.stateNode.containerInfo,Xj=!0;break e;case 4:X$1=_t.stateNode.containerInfo,Xj=!0;break e}_t=_t.return}if(X$1===null)throw Error(p$4(160));Zj(Et,At,bt),X$1=null,Xj=!1;var wt=bt.alternate;wt!==null&&(wt.return=null),bt.return=null}catch(Ct){W$2(bt,$,Ct)}}if($.subtreeFlags&12854)for($=$.child;$!==null;)dk($,_e),$=$.sibling}function dk(_e,$){var ht=_e.alternate,vt=_e.flags;switch(_e.tag){case 0:case 11:case 14:case 15:if(ck($,_e),ek(_e),vt&4){try{Pj(3,_e,_e.return),Qj(3,_e)}catch(Lt){W$2(_e,_e.return,Lt)}try{Pj(5,_e,_e.return)}catch(Lt){W$2(_e,_e.return,Lt)}}break;case 1:ck($,_e),ek(_e),vt&512&&ht!==null&&Lj(ht,ht.return);break;case 5:if(ck($,_e),ek(_e),vt&512&&ht!==null&&Lj(ht,ht.return),_e.flags&32){var bt=_e.stateNode;try{ob(bt,"")}catch(Lt){W$2(_e,_e.return,Lt)}}if(vt&4&&(bt=_e.stateNode,bt!=null)){var Et=_e.memoizedProps,At=ht!==null?ht.memoizedProps:Et,_t=_e.type,wt=_e.updateQueue;if(_e.updateQueue=null,wt!==null)try{_t==="input"&&Et.type==="radio"&&Et.name!=null&&ab(bt,Et),vb(_t,At);var Ct=vb(_t,Et);for(At=0;At<wt.length;At+=2){var xt=wt[At],Pt=wt[At+1];xt==="style"?sb(bt,Pt):xt==="dangerouslySetInnerHTML"?nb(bt,Pt):xt==="children"?ob(bt,Pt):ta(bt,xt,Pt,Ct)}switch(_t){case"input":bb(bt,Et);break;case"textarea":ib(bt,Et);break;case"select":var Rt=bt._wrapperState.wasMultiple;bt._wrapperState.wasMultiple=!!Et.multiple;var kt=Et.value;kt!=null?fb(bt,!!Et.multiple,kt,!1):Rt!==!!Et.multiple&&(Et.defaultValue!=null?fb(bt,!!Et.multiple,Et.defaultValue,!0):fb(bt,!!Et.multiple,Et.multiple?[]:"",!1))}bt[Pf]=Et}catch(Lt){W$2(_e,_e.return,Lt)}}break;case 6:if(ck($,_e),ek(_e),vt&4){if(_e.stateNode===null)throw Error(p$4(162));bt=_e.stateNode,Et=_e.memoizedProps;try{bt.nodeValue=Et}catch(Lt){W$2(_e,_e.return,Lt)}}break;case 3:if(ck($,_e),ek(_e),vt&4&&ht!==null&&ht.memoizedState.isDehydrated)try{bd($.containerInfo)}catch(Lt){W$2(_e,_e.return,Lt)}break;case 4:ck($,_e),ek(_e);break;case 13:ck($,_e),ek(_e),bt=_e.child,bt.flags&8192&&(Et=bt.memoizedState!==null,bt.stateNode.isHidden=Et,!Et||bt.alternate!==null&&bt.alternate.memoizedState!==null||(fk=B$1())),vt&4&&ak(_e);break;case 22:if(xt=ht!==null&&ht.memoizedState!==null,_e.mode&1?(U$2=(Ct=U$2)||xt,ck($,_e),U$2=Ct):ck($,_e),ek(_e),vt&8192){if(Ct=_e.memoizedState!==null,(_e.stateNode.isHidden=Ct)&&!xt&&_e.mode&1)for(V$1=_e,xt=_e.child;xt!==null;){for(Pt=V$1=xt;V$1!==null;){switch(Rt=V$1,kt=Rt.child,Rt.tag){case 0:case 11:case 14:case 15:Pj(4,Rt,Rt.return);break;case 1:Lj(Rt,Rt.return);var Mt=Rt.stateNode;if(typeof Mt.componentWillUnmount=="function"){vt=Rt,ht=Rt.return;try{$=vt,Mt.props=$.memoizedProps,Mt.state=$.memoizedState,Mt.componentWillUnmount()}catch(Lt){W$2(vt,ht,Lt)}}break;case 5:Lj(Rt,Rt.return);break;case 22:if(Rt.memoizedState!==null){gk(Pt);continue}}kt!==null?(kt.return=Rt,V$1=kt):gk(Pt)}xt=xt.sibling}e:for(xt=null,Pt=_e;;){if(Pt.tag===5){if(xt===null){xt=Pt;try{bt=Pt.stateNode,Ct?(Et=bt.style,typeof Et.setProperty=="function"?Et.setProperty("display","none","important"):Et.display="none"):(_t=Pt.stateNode,wt=Pt.memoizedProps.style,At=wt!=null&&wt.hasOwnProperty("display")?wt.display:null,_t.style.display=rb("display",At))}catch(Lt){W$2(_e,_e.return,Lt)}}}else if(Pt.tag===6){if(xt===null)try{Pt.stateNode.nodeValue=Ct?"":Pt.memoizedProps}catch(Lt){W$2(_e,_e.return,Lt)}}else if((Pt.tag!==22&&Pt.tag!==23||Pt.memoizedState===null||Pt===_e)&&Pt.child!==null){Pt.child.return=Pt,Pt=Pt.child;continue}if(Pt===_e)break e;for(;Pt.sibling===null;){if(Pt.return===null||Pt.return===_e)break e;xt===Pt&&(xt=null),Pt=Pt.return}xt===Pt&&(xt=null),Pt.sibling.return=Pt.return,Pt=Pt.sibling}}break;case 19:ck($,_e),ek(_e),vt&4&&ak(_e);break;case 21:break;default:ck($,_e),ek(_e)}}function ek(_e){var $=_e.flags;if($&2){try{e:{for(var ht=_e.return;ht!==null;){if(Tj(ht)){var vt=ht;break e}ht=ht.return}throw Error(p$4(160))}switch(vt.tag){case 5:var bt=vt.stateNode;vt.flags&32&&(ob(bt,""),vt.flags&=-33);var Et=Uj(_e);Wj(_e,Et,bt);break;case 3:case 4:var At=vt.stateNode.containerInfo,_t=Uj(_e);Vj(_e,_t,At);break;default:throw Error(p$4(161))}}catch(wt){W$2(_e,_e.return,wt)}_e.flags&=-3}$&4096&&(_e.flags&=-4097)}function hk(_e,$,ht){V$1=_e,ik(_e)}function ik(_e,$,ht){for(var vt=(_e.mode&1)!==0;V$1!==null;){var bt=V$1,Et=bt.child;if(bt.tag===22&&vt){var At=bt.memoizedState!==null||Jj;if(!At){var _t=bt.alternate,wt=_t!==null&&_t.memoizedState!==null||U$2;_t=Jj;var Ct=U$2;if(Jj=At,(U$2=wt)&&!Ct)for(V$1=bt;V$1!==null;)At=V$1,wt=At.child,At.tag===22&&At.memoizedState!==null?jk(bt):wt!==null?(wt.return=At,V$1=wt):jk(bt);for(;Et!==null;)V$1=Et,ik(Et),Et=Et.sibling;V$1=bt,Jj=_t,U$2=Ct}kk(_e)}else bt.subtreeFlags&8772&&Et!==null?(Et.return=bt,V$1=Et):kk(_e)}}function kk(_e){for(;V$1!==null;){var $=V$1;if($.flags&8772){var ht=$.alternate;try{if($.flags&8772)switch($.tag){case 0:case 11:case 15:U$2||Qj(5,$);break;case 1:var vt=$.stateNode;if($.flags&4&&!U$2)if(ht===null)vt.componentDidMount();else{var bt=$.elementType===$.type?ht.memoizedProps:Ci($.type,ht.memoizedProps);vt.componentDidUpdate(bt,ht.memoizedState,vt.__reactInternalSnapshotBeforeUpdate)}var Et=$.updateQueue;Et!==null&&sh($,Et,vt);break;case 3:var At=$.updateQueue;if(At!==null){if(ht=null,$.child!==null)switch($.child.tag){case 5:ht=$.child.stateNode;break;case 1:ht=$.child.stateNode}sh($,At,ht)}break;case 5:var _t=$.stateNode;if(ht===null&&$.flags&4){ht=_t;var wt=$.memoizedProps;switch($.type){case"button":case"input":case"select":case"textarea":wt.autoFocus&&ht.focus();break;case"img":wt.src&&(ht.src=wt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if($.memoizedState===null){var Ct=$.alternate;if(Ct!==null){var xt=Ct.memoizedState;if(xt!==null){var Pt=xt.dehydrated;Pt!==null&&bd(Pt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$4(163))}U$2||$.flags&512&&Rj($)}catch(Rt){W$2($,$.return,Rt)}}if($===_e){V$1=null;break}if(ht=$.sibling,ht!==null){ht.return=$.return,V$1=ht;break}V$1=$.return}}function gk(_e){for(;V$1!==null;){var $=V$1;if($===_e){V$1=null;break}var ht=$.sibling;if(ht!==null){ht.return=$.return,V$1=ht;break}V$1=$.return}}function jk(_e){for(;V$1!==null;){var $=V$1;try{switch($.tag){case 0:case 11:case 15:var ht=$.return;try{Qj(4,$)}catch(wt){W$2($,ht,wt)}break;case 1:var vt=$.stateNode;if(typeof vt.componentDidMount=="function"){var bt=$.return;try{vt.componentDidMount()}catch(wt){W$2($,bt,wt)}}var Et=$.return;try{Rj($)}catch(wt){W$2($,Et,wt)}break;case 5:var At=$.return;try{Rj($)}catch(wt){W$2($,At,wt)}}}catch(wt){W$2($,$.return,wt)}if($===_e){V$1=null;break}var _t=$.sibling;if(_t!==null){_t.return=$.return,V$1=_t;break}V$1=$.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T$3=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi(_e){return _e.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(_e=C$1,_e!==0||(_e=window.event,_e=_e===void 0?16:jd(_e.type)),_e):1}function gi(_e,$,ht,vt){if(50<yk)throw yk=0,zk=null,Error(p$4(185));Ac(_e,ht,vt),(!(K&2)||_e!==Q)&&(_e===Q&&(!(K&2)&&(qk|=ht),T$3===4&&Ck(_e,Z)),Dk(_e,vt),ht===1&&K===0&&!($.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(_e,$){var ht=_e.callbackNode;wc(_e,$);var vt=uc(_e,_e===Q?Z:0);if(vt===0)ht!==null&&bc(ht),_e.callbackNode=null,_e.callbackPriority=0;else if($=vt&-vt,_e.callbackPriority!==$){if(ht!=null&&bc(ht),$===1)_e.tag===0?ig(Ek.bind(null,_e)):hg(Ek.bind(null,_e)),Jf(function(){!(K&6)&&jg()}),ht=null;else{switch(Dc(vt)){case 1:ht=fc;break;case 4:ht=gc;break;case 16:ht=hc;break;case 536870912:ht=jc;break;default:ht=hc}ht=Fk(ht,Gk.bind(null,_e))}_e.callbackPriority=$,_e.callbackNode=ht}}function Gk(_e,$){if(Ak=-1,Bk=0,K&6)throw Error(p$4(327));var ht=_e.callbackNode;if(Hk()&&_e.callbackNode!==ht)return null;var vt=uc(_e,_e===Q?Z:0);if(vt===0)return null;if(vt&30||vt&_e.expiredLanes||$)$=Ik(_e,vt);else{$=vt;var bt=K;K|=2;var Et=Jk();(Q!==_e||Z!==$)&&(uk=null,Gj=B$1()+500,Kk(_e,$));do try{Lk();break}catch(_t){Mk(_e,_t)}while(!0);$g(),mk.current=Et,K=bt,Y!==null?$=0:(Q=null,Z=0,$=T$3)}if($!==0){if($===2&&(bt=xc(_e),bt!==0&&(vt=bt,$=Nk(_e,bt))),$===1)throw ht=pk,Kk(_e,0),Ck(_e,vt),Dk(_e,B$1()),ht;if($===6)Ck(_e,vt);else{if(bt=_e.current.alternate,!(vt&30)&&!Ok(bt)&&($=Ik(_e,vt),$===2&&(Et=xc(_e),Et!==0&&(vt=Et,$=Nk(_e,Et))),$===1))throw ht=pk,Kk(_e,0),Ck(_e,vt),Dk(_e,B$1()),ht;switch(_e.finishedWork=bt,_e.finishedLanes=vt,$){case 0:case 1:throw Error(p$4(345));case 2:Pk(_e,tk,uk);break;case 3:if(Ck(_e,vt),(vt&130023424)===vt&&($=fk+500-B$1(),10<$)){if(uc(_e,0)!==0)break;if(bt=_e.suspendedLanes,(bt&vt)!==vt){R$1(),_e.pingedLanes|=_e.suspendedLanes&bt;break}_e.timeoutHandle=Ff(Pk.bind(null,_e,tk,uk),$);break}Pk(_e,tk,uk);break;case 4:if(Ck(_e,vt),(vt&4194240)===vt)break;for($=_e.eventTimes,bt=-1;0<vt;){var At=31-oc(vt);Et=1<<At,At=$[At],At>bt&&(bt=At),vt&=~Et}if(vt=bt,vt=B$1()-vt,vt=(120>vt?120:480>vt?480:1080>vt?1080:1920>vt?1920:3e3>vt?3e3:4320>vt?4320:1960*lk(vt/1960))-vt,10<vt){_e.timeoutHandle=Ff(Pk.bind(null,_e,tk,uk),vt);break}Pk(_e,tk,uk);break;case 5:Pk(_e,tk,uk);break;default:throw Error(p$4(329))}}}return Dk(_e,B$1()),_e.callbackNode===ht?Gk.bind(null,_e):null}function Nk(_e,$){var ht=sk;return _e.current.memoizedState.isDehydrated&&(Kk(_e,$).flags|=256),_e=Ik(_e,$),_e!==2&&($=tk,tk=ht,$!==null&&Fj($)),_e}function Fj(_e){tk===null?tk=_e:tk.push.apply(tk,_e)}function Ok(_e){for(var $=_e;;){if($.flags&16384){var ht=$.updateQueue;if(ht!==null&&(ht=ht.stores,ht!==null))for(var vt=0;vt<ht.length;vt++){var bt=ht[vt],Et=bt.getSnapshot;bt=bt.value;try{if(!He(Et(),bt))return!1}catch{return!1}}}if(ht=$.child,$.subtreeFlags&16384&&ht!==null)ht.return=$,$=ht;else{if($===_e)break;for(;$.sibling===null;){if($.return===null||$.return===_e)return!0;$=$.return}$.sibling.return=$.return,$=$.sibling}}return!0}function Ck(_e,$){for($&=~rk,$&=~qk,_e.suspendedLanes|=$,_e.pingedLanes&=~$,_e=_e.expirationTimes;0<$;){var ht=31-oc($),vt=1<<ht;_e[ht]=-1,$&=~vt}}function Ek(_e){if(K&6)throw Error(p$4(327));Hk();var $=uc(_e,0);if(!($&1))return Dk(_e,B$1()),null;var ht=Ik(_e,$);if(_e.tag!==0&&ht===2){var vt=xc(_e);vt!==0&&($=vt,ht=Nk(_e,vt))}if(ht===1)throw ht=pk,Kk(_e,0),Ck(_e,$),Dk(_e,B$1()),ht;if(ht===6)throw Error(p$4(345));return _e.finishedWork=_e.current.alternate,_e.finishedLanes=$,Pk(_e,tk,uk),Dk(_e,B$1()),null}function Qk(_e,$){var ht=K;K|=1;try{return _e($)}finally{K=ht,K===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(_e){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var $=K;K|=1;var ht=ok.transition,vt=C$1;try{if(ok.transition=null,C$1=1,_e)return _e()}finally{C$1=vt,ok.transition=ht,K=$,!(K&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk(_e,$){_e.finishedWork=null,_e.finishedLanes=0;var ht=_e.timeoutHandle;if(ht!==-1&&(_e.timeoutHandle=-1,Gf(ht)),Y!==null)for(ht=Y.return;ht!==null;){var vt=ht;switch(wg(vt),vt.tag){case 1:vt=vt.type.childContextTypes,vt!=null&&$f();break;case 3:zh(),E$1(Wf),E$1(H$2),Eh();break;case 5:Bh(vt);break;case 4:zh();break;case 13:E$1(L$1);break;case 19:E$1(L$1);break;case 10:ah(vt.type._context);break;case 22:case 23:Hj()}ht=ht.return}if(Q=_e,Y=_e=Pg(_e.current,null),Z=fj=$,T$3=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for($=0;$<fh.length;$++)if(ht=fh[$],vt=ht.interleaved,vt!==null){ht.interleaved=null;var bt=vt.next,Et=ht.pending;if(Et!==null){var At=Et.next;Et.next=bt,vt.next=At}ht.pending=vt}fh=null}return _e}function Mk(_e,$){do{var ht=Y;try{if($g(),Fh.current=Rh,Ih){for(var vt=M$3.memoizedState;vt!==null;){var bt=vt.queue;bt!==null&&(bt.pending=null),vt=vt.next}Ih=!1}if(Hh=0,O$2=N$3=M$3=null,Jh=!1,Kh=0,nk.current=null,ht===null||ht.return===null){T$3=1,pk=$,Y=null;break}e:{var Et=_e,At=ht.return,_t=ht,wt=$;if($=Z,_t.flags|=32768,wt!==null&&typeof wt=="object"&&typeof wt.then=="function"){var Ct=wt,xt=_t,Pt=xt.tag;if(!(xt.mode&1)&&(Pt===0||Pt===11||Pt===15)){var Rt=xt.alternate;Rt?(xt.updateQueue=Rt.updateQueue,xt.memoizedState=Rt.memoizedState,xt.lanes=Rt.lanes):(xt.updateQueue=null,xt.memoizedState=null)}var kt=Ui(At);if(kt!==null){kt.flags&=-257,Vi(kt,At,_t,Et,$),kt.mode&1&&Si(Et,Ct,$),$=kt,wt=Ct;var Mt=$.updateQueue;if(Mt===null){var Lt=new Set;Lt.add(wt),$.updateQueue=Lt}else Mt.add(wt);break e}else{if(!($&1)){Si(Et,Ct,$),tj();break e}wt=Error(p$4(426))}}else if(I$4&&_t.mode&1){var Ot=Ui(At);if(Ot!==null){!(Ot.flags&65536)&&(Ot.flags|=256),Vi(Ot,At,_t,Et,$),Jg(Ji(wt,_t));break e}}Et=wt=Ji(wt,_t),T$3!==4&&(T$3=2),sk===null?sk=[Et]:sk.push(Et),Et=At;do{switch(Et.tag){case 3:Et.flags|=65536,$&=-$,Et.lanes|=$;var Ft=Ni(Et,wt,$);ph(Et,Ft);break e;case 1:_t=wt;var Dt=Et.type,$t=Et.stateNode;if(!(Et.flags&128)&&(typeof Dt.getDerivedStateFromError=="function"||$t!==null&&typeof $t.componentDidCatch=="function"&&(Ri===null||!Ri.has($t)))){Et.flags|=65536,$&=-$,Et.lanes|=$;var Bt=Qi(Et,_t,$);ph(Et,Bt);break e}}Et=Et.return}while(Et!==null)}Sk(ht)}catch(Nt){$=Nt,Y===ht&&ht!==null&&(Y=ht=ht.return);continue}break}while(!0)}function Jk(){var _e=mk.current;return mk.current=Rh,_e===null?Rh:_e}function tj(){(T$3===0||T$3===3||T$3===2)&&(T$3=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(_e,$){var ht=K;K|=2;var vt=Jk();(Q!==_e||Z!==$)&&(uk=null,Kk(_e,$));do try{Tk();break}catch(bt){Mk(_e,bt)}while(!0);if($g(),K=ht,mk.current=vt,Y!==null)throw Error(p$4(261));return Q=null,Z=0,T$3}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(_e){var $=Vk(_e.alternate,_e,fj);_e.memoizedProps=_e.pendingProps,$===null?Sk(_e):Y=$,nk.current=null}function Sk(_e){var $=_e;do{var ht=$.alternate;if(_e=$.return,$.flags&32768){if(ht=Ij(ht,$),ht!==null){ht.flags&=32767,Y=ht;return}if(_e!==null)_e.flags|=32768,_e.subtreeFlags=0,_e.deletions=null;else{T$3=6,Y=null;return}}else if(ht=Ej(ht,$,fj),ht!==null){Y=ht;return}if($=$.sibling,$!==null){Y=$;return}Y=$=_e}while($!==null);T$3===0&&(T$3=5)}function Pk(_e,$,ht){var vt=C$1,bt=ok.transition;try{ok.transition=null,C$1=1,Wk(_e,$,ht,vt)}finally{ok.transition=bt,C$1=vt}return null}function Wk(_e,$,ht,vt){do Hk();while(wk!==null);if(K&6)throw Error(p$4(327));ht=_e.finishedWork;var bt=_e.finishedLanes;if(ht===null)return null;if(_e.finishedWork=null,_e.finishedLanes=0,ht===_e.current)throw Error(p$4(177));_e.callbackNode=null,_e.callbackPriority=0;var Et=ht.lanes|ht.childLanes;if(Bc(_e,Et),_e===Q&&(Y=Q=null,Z=0),!(ht.subtreeFlags&2064)&&!(ht.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),Et=(ht.flags&15990)!==0,ht.subtreeFlags&15990||Et){Et=ok.transition,ok.transition=null;var At=C$1;C$1=1;var _t=K;K|=4,nk.current=null,Oj(_e,ht),dk(ht,_e),Oe(Df),dd=!!Cf,Df=Cf=null,_e.current=ht,hk(ht),dc(),K=_t,C$1=At,ok.transition=Et}else _e.current=ht;if(vk&&(vk=!1,wk=_e,xk=bt),Et=_e.pendingLanes,Et===0&&(Ri=null),mc(ht.stateNode),Dk(_e,B$1()),$!==null)for(vt=_e.onRecoverableError,ht=0;ht<$.length;ht++)bt=$[ht],vt(bt.value,{componentStack:bt.stack,digest:bt.digest});if(Oi)throw Oi=!1,_e=Pi,Pi=null,_e;return xk&1&&_e.tag!==0&&Hk(),Et=_e.pendingLanes,Et&1?_e===zk?yk++:(yk=0,zk=_e):yk=0,jg(),null}function Hk(){if(wk!==null){var _e=Dc(xk),$=ok.transition,ht=C$1;try{if(ok.transition=null,C$1=16>_e?16:_e,wk===null)var vt=!1;else{if(_e=wk,wk=null,xk=0,K&6)throw Error(p$4(331));var bt=K;for(K|=4,V$1=_e.current;V$1!==null;){var Et=V$1,At=Et.child;if(V$1.flags&16){var _t=Et.deletions;if(_t!==null){for(var wt=0;wt<_t.length;wt++){var Ct=_t[wt];for(V$1=Ct;V$1!==null;){var xt=V$1;switch(xt.tag){case 0:case 11:case 15:Pj(8,xt,Et)}var Pt=xt.child;if(Pt!==null)Pt.return=xt,V$1=Pt;else for(;V$1!==null;){xt=V$1;var Rt=xt.sibling,kt=xt.return;if(Sj(xt),xt===Ct){V$1=null;break}if(Rt!==null){Rt.return=kt,V$1=Rt;break}V$1=kt}}}var Mt=Et.alternate;if(Mt!==null){var Lt=Mt.child;if(Lt!==null){Mt.child=null;do{var Ot=Lt.sibling;Lt.sibling=null,Lt=Ot}while(Lt!==null)}}V$1=Et}}if(Et.subtreeFlags&2064&&At!==null)At.return=Et,V$1=At;else e:for(;V$1!==null;){if(Et=V$1,Et.flags&2048)switch(Et.tag){case 0:case 11:case 15:Pj(9,Et,Et.return)}var Ft=Et.sibling;if(Ft!==null){Ft.return=Et.return,V$1=Ft;break e}V$1=Et.return}}var Dt=_e.current;for(V$1=Dt;V$1!==null;){At=V$1;var $t=At.child;if(At.subtreeFlags&2064&&$t!==null)$t.return=At,V$1=$t;else e:for(At=Dt;V$1!==null;){if(_t=V$1,_t.flags&2048)try{switch(_t.tag){case 0:case 11:case 15:Qj(9,_t)}}catch(Nt){W$2(_t,_t.return,Nt)}if(_t===At){V$1=null;break e}var Bt=_t.sibling;if(Bt!==null){Bt.return=_t.return,V$1=Bt;break e}V$1=_t.return}}if(K=bt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,_e)}catch{}vt=!0}return vt}finally{C$1=ht,ok.transition=$}}return!1}function Xk(_e,$,ht){$=Ji(ht,$),$=Ni(_e,$,1),_e=nh(_e,$,1),$=R$1(),_e!==null&&(Ac(_e,1,$),Dk(_e,$))}function W$2(_e,$,ht){if(_e.tag===3)Xk(_e,_e,ht);else for(;$!==null;){if($.tag===3){Xk($,_e,ht);break}else if($.tag===1){var vt=$.stateNode;if(typeof $.type.getDerivedStateFromError=="function"||typeof vt.componentDidCatch=="function"&&(Ri===null||!Ri.has(vt))){_e=Ji(ht,_e),_e=Qi($,_e,1),$=nh($,_e,1),_e=R$1(),$!==null&&(Ac($,1,_e),Dk($,_e));break}}$=$.return}}function Ti(_e,$,ht){var vt=_e.pingCache;vt!==null&&vt.delete($),$=R$1(),_e.pingedLanes|=_e.suspendedLanes&ht,Q===_e&&(Z&ht)===ht&&(T$3===4||T$3===3&&(Z&130023424)===Z&&500>B$1()-fk?Kk(_e,0):rk|=ht),Dk(_e,$)}function Yk(_e,$){$===0&&(_e.mode&1?($=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):$=1);var ht=R$1();_e=ih(_e,$),_e!==null&&(Ac(_e,$,ht),Dk(_e,ht))}function uj(_e){var $=_e.memoizedState,ht=0;$!==null&&(ht=$.retryLane),Yk(_e,ht)}function bk(_e,$){var ht=0;switch(_e.tag){case 13:var vt=_e.stateNode,bt=_e.memoizedState;bt!==null&&(ht=bt.retryLane);break;case 19:vt=_e.stateNode;break;default:throw Error(p$4(314))}vt!==null&&vt.delete($),Yk(_e,ht)}var Vk;Vk=function(_e,$,ht){if(_e!==null)if(_e.memoizedProps!==$.pendingProps||Wf.current)dh=!0;else{if(!(_e.lanes&ht)&&!($.flags&128))return dh=!1,yj(_e,$,ht);dh=!!(_e.flags&131072)}else dh=!1,I$4&&$.flags&1048576&&ug($,ng,$.index);switch($.lanes=0,$.tag){case 2:var vt=$.type;ij(_e,$),_e=$.pendingProps;var bt=Yf($,H$2.current);ch($,ht),bt=Nh(null,$,vt,_e,bt,ht);var Et=Sh();return $.flags|=1,typeof bt=="object"&&bt!==null&&typeof bt.render=="function"&&bt.$$typeof===void 0?($.tag=1,$.memoizedState=null,$.updateQueue=null,Zf(vt)?(Et=!0,cg($)):Et=!1,$.memoizedState=bt.state!==null&&bt.state!==void 0?bt.state:null,kh($),bt.updater=Ei,$.stateNode=bt,bt._reactInternals=$,Ii($,vt,_e,ht),$=jj(null,$,vt,!0,Et,ht)):($.tag=0,I$4&&Et&&vg($),Xi(null,$,bt,ht),$=$.child),$;case 16:vt=$.elementType;e:{switch(ij(_e,$),_e=$.pendingProps,bt=vt._init,vt=bt(vt._payload),$.type=vt,bt=$.tag=Zk(vt),_e=Ci(vt,_e),bt){case 0:$=cj(null,$,vt,_e,ht);break e;case 1:$=hj(null,$,vt,_e,ht);break e;case 11:$=Yi(null,$,vt,_e,ht);break e;case 14:$=$i(null,$,vt,Ci(vt.type,_e),ht);break e}throw Error(p$4(306,vt,""))}return $;case 0:return vt=$.type,bt=$.pendingProps,bt=$.elementType===vt?bt:Ci(vt,bt),cj(_e,$,vt,bt,ht);case 1:return vt=$.type,bt=$.pendingProps,bt=$.elementType===vt?bt:Ci(vt,bt),hj(_e,$,vt,bt,ht);case 3:e:{if(kj($),_e===null)throw Error(p$4(387));vt=$.pendingProps,Et=$.memoizedState,bt=Et.element,lh(_e,$),qh($,vt,null,ht);var At=$.memoizedState;if(vt=At.element,Et.isDehydrated)if(Et={element:vt,isDehydrated:!1,cache:At.cache,pendingSuspenseBoundaries:At.pendingSuspenseBoundaries,transitions:At.transitions},$.updateQueue.baseState=Et,$.memoizedState=Et,$.flags&256){bt=Ji(Error(p$4(423)),$),$=lj(_e,$,vt,ht,bt);break e}else if(vt!==bt){bt=Ji(Error(p$4(424)),$),$=lj(_e,$,vt,ht,bt);break e}else for(yg=Lf($.stateNode.containerInfo.firstChild),xg=$,I$4=!0,zg=null,ht=Vg($,null,vt,ht),$.child=ht;ht;)ht.flags=ht.flags&-3|4096,ht=ht.sibling;else{if(Ig(),vt===bt){$=Zi(_e,$,ht);break e}Xi(_e,$,vt,ht)}$=$.child}return $;case 5:return Ah($),_e===null&&Eg($),vt=$.type,bt=$.pendingProps,Et=_e!==null?_e.memoizedProps:null,At=bt.children,Ef(vt,bt)?At=null:Et!==null&&Ef(vt,Et)&&($.flags|=32),gj(_e,$),Xi(_e,$,At,ht),$.child;case 6:return _e===null&&Eg($),null;case 13:return oj(_e,$,ht);case 4:return yh($,$.stateNode.containerInfo),vt=$.pendingProps,_e===null?$.child=Ug($,null,vt,ht):Xi(_e,$,vt,ht),$.child;case 11:return vt=$.type,bt=$.pendingProps,bt=$.elementType===vt?bt:Ci(vt,bt),Yi(_e,$,vt,bt,ht);case 7:return Xi(_e,$,$.pendingProps,ht),$.child;case 8:return Xi(_e,$,$.pendingProps.children,ht),$.child;case 12:return Xi(_e,$,$.pendingProps.children,ht),$.child;case 10:e:{if(vt=$.type._context,bt=$.pendingProps,Et=$.memoizedProps,At=bt.value,G$2(Wg,vt._currentValue),vt._currentValue=At,Et!==null)if(He(Et.value,At)){if(Et.children===bt.children&&!Wf.current){$=Zi(_e,$,ht);break e}}else for(Et=$.child,Et!==null&&(Et.return=$);Et!==null;){var _t=Et.dependencies;if(_t!==null){At=Et.child;for(var wt=_t.firstContext;wt!==null;){if(wt.context===vt){if(Et.tag===1){wt=mh(-1,ht&-ht),wt.tag=2;var Ct=Et.updateQueue;if(Ct!==null){Ct=Ct.shared;var xt=Ct.pending;xt===null?wt.next=wt:(wt.next=xt.next,xt.next=wt),Ct.pending=wt}}Et.lanes|=ht,wt=Et.alternate,wt!==null&&(wt.lanes|=ht),bh(Et.return,ht,$),_t.lanes|=ht;break}wt=wt.next}}else if(Et.tag===10)At=Et.type===$.type?null:Et.child;else if(Et.tag===18){if(At=Et.return,At===null)throw Error(p$4(341));At.lanes|=ht,_t=At.alternate,_t!==null&&(_t.lanes|=ht),bh(At,ht,$),At=Et.sibling}else At=Et.child;if(At!==null)At.return=Et;else for(At=Et;At!==null;){if(At===$){At=null;break}if(Et=At.sibling,Et!==null){Et.return=At.return,At=Et;break}At=At.return}Et=At}Xi(_e,$,bt.children,ht),$=$.child}return $;case 9:return bt=$.type,vt=$.pendingProps.children,ch($,ht),bt=eh(bt),vt=vt(bt),$.flags|=1,Xi(_e,$,vt,ht),$.child;case 14:return vt=$.type,bt=Ci(vt,$.pendingProps),bt=Ci(vt.type,bt),$i(_e,$,vt,bt,ht);case 15:return bj(_e,$,$.type,$.pendingProps,ht);case 17:return vt=$.type,bt=$.pendingProps,bt=$.elementType===vt?bt:Ci(vt,bt),ij(_e,$),$.tag=1,Zf(vt)?(_e=!0,cg($)):_e=!1,ch($,ht),Gi($,vt,bt),Ii($,vt,bt,ht),jj(null,$,vt,!0,_e,ht);case 19:return xj(_e,$,ht);case 22:return dj(_e,$,ht)}throw Error(p$4(156,$.tag))};function Fk(_e,$){return ac(_e,$)}function $k(_e,$,ht,vt){this.tag=_e,this.key=ht,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=$,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=vt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(_e,$,ht,vt){return new $k(_e,$,ht,vt)}function aj(_e){return _e=_e.prototype,!(!_e||!_e.isReactComponent)}function Zk(_e){if(typeof _e=="function")return aj(_e)?1:0;if(_e!=null){if(_e=_e.$$typeof,_e===Da)return 11;if(_e===Ga)return 14}return 2}function Pg(_e,$){var ht=_e.alternate;return ht===null?(ht=Bg(_e.tag,$,_e.key,_e.mode),ht.elementType=_e.elementType,ht.type=_e.type,ht.stateNode=_e.stateNode,ht.alternate=_e,_e.alternate=ht):(ht.pendingProps=$,ht.type=_e.type,ht.flags=0,ht.subtreeFlags=0,ht.deletions=null),ht.flags=_e.flags&14680064,ht.childLanes=_e.childLanes,ht.lanes=_e.lanes,ht.child=_e.child,ht.memoizedProps=_e.memoizedProps,ht.memoizedState=_e.memoizedState,ht.updateQueue=_e.updateQueue,$=_e.dependencies,ht.dependencies=$===null?null:{lanes:$.lanes,firstContext:$.firstContext},ht.sibling=_e.sibling,ht.index=_e.index,ht.ref=_e.ref,ht}function Rg(_e,$,ht,vt,bt,Et){var At=2;if(vt=_e,typeof _e=="function")aj(_e)&&(At=1);else if(typeof _e=="string")At=5;else e:switch(_e){case ya:return Tg(ht.children,bt,Et,$);case za:At=8,bt|=8;break;case Aa:return _e=Bg(12,ht,$,bt|2),_e.elementType=Aa,_e.lanes=Et,_e;case Ea:return _e=Bg(13,ht,$,bt),_e.elementType=Ea,_e.lanes=Et,_e;case Fa:return _e=Bg(19,ht,$,bt),_e.elementType=Fa,_e.lanes=Et,_e;case Ia:return pj(ht,bt,Et,$);default:if(typeof _e=="object"&&_e!==null)switch(_e.$$typeof){case Ba:At=10;break e;case Ca:At=9;break e;case Da:At=11;break e;case Ga:At=14;break e;case Ha:At=16,vt=null;break e}throw Error(p$4(130,_e==null?_e:typeof _e,""))}return $=Bg(At,ht,$,bt),$.elementType=_e,$.type=vt,$.lanes=Et,$}function Tg(_e,$,ht,vt){return _e=Bg(7,_e,vt,$),_e.lanes=ht,_e}function pj(_e,$,ht,vt){return _e=Bg(22,_e,vt,$),_e.elementType=Ia,_e.lanes=ht,_e.stateNode={isHidden:!1},_e}function Qg(_e,$,ht){return _e=Bg(6,_e,null,$),_e.lanes=ht,_e}function Sg(_e,$,ht){return $=Bg(4,_e.children!==null?_e.children:[],_e.key,$),$.lanes=ht,$.stateNode={containerInfo:_e.containerInfo,pendingChildren:null,implementation:_e.implementation},$}function al(_e,$,ht,vt,bt){this.tag=$,this.containerInfo=_e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=vt,this.onRecoverableError=bt,this.mutableSourceEagerHydrationData=null}function bl(_e,$,ht,vt,bt,Et,At,_t,wt){return _e=new al(_e,$,ht,_t,wt),$===1?($=1,Et===!0&&($|=8)):$=0,Et=Bg(3,null,null,$),_e.current=Et,Et.stateNode=_e,Et.memoizedState={element:vt,isDehydrated:ht,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(Et),_e}function cl(_e,$,ht){var vt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:vt==null?null:""+vt,children:_e,containerInfo:$,implementation:ht}}function dl(_e){if(!_e)return Vf;_e=_e._reactInternals;e:{if(Vb(_e)!==_e||_e.tag!==1)throw Error(p$4(170));var $=_e;do{switch($.tag){case 3:$=$.stateNode.context;break e;case 1:if(Zf($.type)){$=$.stateNode.__reactInternalMemoizedMergedChildContext;break e}}$=$.return}while($!==null);throw Error(p$4(171))}if(_e.tag===1){var ht=_e.type;if(Zf(ht))return bg(_e,ht,$)}return $}function el(_e,$,ht,vt,bt,Et,At,_t,wt){return _e=bl(ht,vt,!0,_e,bt,Et,At,_t,wt),_e.context=dl(null),ht=_e.current,vt=R$1(),bt=yi(ht),Et=mh(vt,bt),Et.callback=$??null,nh(ht,Et,bt),_e.current.lanes=bt,Ac(_e,bt,vt),Dk(_e,vt),_e}function fl(_e,$,ht,vt){var bt=$.current,Et=R$1(),At=yi(bt);return ht=dl(ht),$.context===null?$.context=ht:$.pendingContext=ht,$=mh(Et,At),$.payload={element:_e},vt=vt===void 0?null:vt,vt!==null&&($.callback=vt),_e=nh(bt,$,At),_e!==null&&(gi(_e,bt,At,Et),oh(_e,bt,At)),At}function gl(_e){if(_e=_e.current,!_e.child)return null;switch(_e.child.tag){case 5:return _e.child.stateNode;default:return _e.child.stateNode}}function hl(_e,$){if(_e=_e.memoizedState,_e!==null&&_e.dehydrated!==null){var ht=_e.retryLane;_e.retryLane=ht!==0&&ht<$?ht:$}}function il(_e,$){hl(_e,$),(_e=_e.alternate)&&hl(_e,$)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(_e){console.error(_e)};function ll(_e){this._internalRoot=_e}ml.prototype.render=ll.prototype.render=function(_e){var $=this._internalRoot;if($===null)throw Error(p$4(409));fl(_e,$,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var _e=this._internalRoot;if(_e!==null){this._internalRoot=null;var $=_e.containerInfo;Rk(function(){fl(null,_e,null,null)}),$[uf]=null}};function ml(_e){this._internalRoot=_e}ml.prototype.unstable_scheduleHydration=function(_e){if(_e){var $=Hc();_e={blockedOn:null,target:_e,priority:$};for(var ht=0;ht<Qc.length&&$!==0&&$<Qc[ht].priority;ht++);Qc.splice(ht,0,_e),ht===0&&Vc(_e)}};function nl(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11)}function ol(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11&&(_e.nodeType!==8||_e.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(_e,$,ht,vt,bt){if(bt){if(typeof vt=="function"){var Et=vt;vt=function(){var Ct=gl(At);Et.call(Ct)}}var At=el($,vt,_e,0,null,!1,!1,"",pl);return _e._reactRootContainer=At,_e[uf]=At.current,sf(_e.nodeType===8?_e.parentNode:_e),Rk(),At}for(;bt=_e.lastChild;)_e.removeChild(bt);if(typeof vt=="function"){var _t=vt;vt=function(){var Ct=gl(wt);_t.call(Ct)}}var wt=bl(_e,0,!1,null,null,!1,!1,"",pl);return _e._reactRootContainer=wt,_e[uf]=wt.current,sf(_e.nodeType===8?_e.parentNode:_e),Rk(function(){fl($,wt,ht,vt)}),wt}function rl(_e,$,ht,vt,bt){var Et=ht._reactRootContainer;if(Et){var At=Et;if(typeof bt=="function"){var _t=bt;bt=function(){var wt=gl(At);_t.call(wt)}}fl($,At,_e,bt)}else At=ql(ht,$,_e,bt,vt);return gl(At)}Ec=function(_e){switch(_e.tag){case 3:var $=_e.stateNode;if($.current.memoizedState.isDehydrated){var ht=tc($.pendingLanes);ht!==0&&(Cc($,ht|1),Dk($,B$1()),!(K&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var vt=ih(_e,1);if(vt!==null){var bt=R$1();gi(vt,_e,1,bt)}}),il(_e,1)}};Fc=function(_e){if(_e.tag===13){var $=ih(_e,134217728);if($!==null){var ht=R$1();gi($,_e,134217728,ht)}il(_e,134217728)}};Gc=function(_e){if(_e.tag===13){var $=yi(_e),ht=ih(_e,$);if(ht!==null){var vt=R$1();gi(ht,_e,$,vt)}il(_e,$)}};Hc=function(){return C$1};Ic=function(_e,$){var ht=C$1;try{return C$1=_e,$()}finally{C$1=ht}};yb=function(_e,$,ht){switch($){case"input":if(bb(_e,ht),$=ht.name,ht.type==="radio"&&$!=null){for(ht=_e;ht.parentNode;)ht=ht.parentNode;for(ht=ht.querySelectorAll("input[name="+JSON.stringify(""+$)+'][type="radio"]'),$=0;$<ht.length;$++){var vt=ht[$];if(vt!==_e&&vt.form===_e.form){var bt=Db(vt);if(!bt)throw Error(p$4(90));Wa(vt),bb(vt,bt)}}}break;case"textarea":ib(_e,ht);break;case"select":$=ht.value,$!=null&&fb(_e,!!ht.multiple,$,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(_e){return _e=Zb(_e),_e===null?null:_e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(_e,$){var ht=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl($))throw Error(p$4(200));return cl(_e,$,null,ht)};reactDom_production_min.createRoot=function(_e,$){if(!nl(_e))throw Error(p$4(299));var ht=!1,vt="",bt=kl;return $!=null&&($.unstable_strictMode===!0&&(ht=!0),$.identifierPrefix!==void 0&&(vt=$.identifierPrefix),$.onRecoverableError!==void 0&&(bt=$.onRecoverableError)),$=bl(_e,1,!1,null,null,ht,!1,vt,bt),_e[uf]=$.current,sf(_e.nodeType===8?_e.parentNode:_e),new ll($)};reactDom_production_min.findDOMNode=function(_e){if(_e==null)return null;if(_e.nodeType===1)return _e;var $=_e._reactInternals;if($===void 0)throw typeof _e.render=="function"?Error(p$4(188)):(_e=Object.keys(_e).join(","),Error(p$4(268,_e)));return _e=Zb($),_e=_e===null?null:_e.stateNode,_e};reactDom_production_min.flushSync=function(_e){return Rk(_e)};reactDom_production_min.hydrate=function(_e,$,ht){if(!ol($))throw Error(p$4(200));return rl(null,_e,$,!0,ht)};reactDom_production_min.hydrateRoot=function(_e,$,ht){if(!nl(_e))throw Error(p$4(405));var vt=ht!=null&&ht.hydratedSources||null,bt=!1,Et="",At=kl;if(ht!=null&&(ht.unstable_strictMode===!0&&(bt=!0),ht.identifierPrefix!==void 0&&(Et=ht.identifierPrefix),ht.onRecoverableError!==void 0&&(At=ht.onRecoverableError)),$=el($,null,_e,1,ht??null,bt,!1,Et,At),_e[uf]=$.current,sf(_e),vt)for(_e=0;_e<vt.length;_e++)ht=vt[_e],bt=ht._getVersion,bt=bt(ht._source),$.mutableSourceEagerHydrationData==null?$.mutableSourceEagerHydrationData=[ht,bt]:$.mutableSourceEagerHydrationData.push(ht,bt);return new ml($)};reactDom_production_min.render=function(_e,$,ht){if(!ol($))throw Error(p$4(200));return rl(null,_e,$,!1,ht)};reactDom_production_min.unmountComponentAtNode=function(_e){if(!ol(_e))throw Error(p$4(40));return _e._reactRootContainer?(Rk(function(){rl(null,null,_e,!1,function(){_e._reactRootContainer=null,_e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_e,$,ht,vt){if(!ol(ht))throw Error(p$4(200));if(_e==null||_e._reactInternals===void 0)throw Error(p$4(38));return rl(_e,$,ht,!1,vt)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_e){console.error(_e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m$4=reactDomExports;client.createRoot=m$4.createRoot,client.hydrateRoot=m$4.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(_e){for(var $=1;$<arguments.length;$++){var ht=arguments[$];for(var vt in ht)Object.prototype.hasOwnProperty.call(ht,vt)&&(_e[vt]=ht[vt])}return _e},_extends$2.apply(this,arguments)}var Action;(function(_e){_e.Pop="POP",_e.Push="PUSH",_e.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(_e){_e===void 0&&(_e={});function $(vt,bt){let{pathname:Et,search:At,hash:_t}=vt.location;return createLocation("",{pathname:Et,search:At,hash:_t},bt.state&&bt.state.usr||null,bt.state&&bt.state.key||"default")}function ht(vt,bt){return typeof bt=="string"?bt:createPath(bt)}return getUrlBasedHistory($,ht,null,_e)}function invariant$1(_e,$){if(_e===!1||_e===null||typeof _e>"u")throw new Error($)}function warning(_e,$){if(!_e){typeof console<"u"&&console.warn($);try{throw new Error($)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(_e,$){return{usr:_e.state,key:_e.key,idx:$}}function createLocation(_e,$,ht,vt){return ht===void 0&&(ht=null),_extends$2({pathname:typeof _e=="string"?_e:_e.pathname,search:"",hash:""},typeof $=="string"?parsePath($):$,{state:ht,key:$&&$.key||vt||createKey()})}function createPath(_e){let{pathname:$="/",search:ht="",hash:vt=""}=_e;return ht&&ht!=="?"&&($+=ht.charAt(0)==="?"?ht:"?"+ht),vt&&vt!=="#"&&($+=vt.charAt(0)==="#"?vt:"#"+vt),$}function parsePath(_e){let $={};if(_e){let ht=_e.indexOf("#");ht>=0&&($.hash=_e.substr(ht),_e=_e.substr(0,ht));let vt=_e.indexOf("?");vt>=0&&($.search=_e.substr(vt),_e=_e.substr(0,vt)),_e&&($.pathname=_e)}return $}function getUrlBasedHistory(_e,$,ht,vt){vt===void 0&&(vt={});let{window:bt=document.defaultView,v5Compat:Et=!1}=vt,At=bt.history,_t=Action.Pop,wt=null,Ct=xt();Ct==null&&(Ct=0,At.replaceState(_extends$2({},At.state,{idx:Ct}),""));function xt(){return(At.state||{idx:null}).idx}function Pt(){_t=Action.Pop;let Ot=xt(),Ft=Ot==null?null:Ot-Ct;Ct=Ot,wt&&wt({action:_t,location:Lt.location,delta:Ft})}function Rt(Ot,Ft){_t=Action.Push;let Dt=createLocation(Lt.location,Ot,Ft);Ct=xt()+1;let $t=getHistoryState(Dt,Ct),Bt=Lt.createHref(Dt);try{At.pushState($t,"",Bt)}catch(Nt){if(Nt instanceof DOMException&&Nt.name==="DataCloneError")throw Nt;bt.location.assign(Bt)}Et&&wt&&wt({action:_t,location:Lt.location,delta:1})}function kt(Ot,Ft){_t=Action.Replace;let Dt=createLocation(Lt.location,Ot,Ft);Ct=xt();let $t=getHistoryState(Dt,Ct),Bt=Lt.createHref(Dt);At.replaceState($t,"",Bt),Et&&wt&&wt({action:_t,location:Lt.location,delta:0})}function Mt(Ot){let Ft=bt.location.origin!=="null"?bt.location.origin:bt.location.href,Dt=typeof Ot=="string"?Ot:createPath(Ot);return Dt=Dt.replace(/ $/,"%20"),invariant$1(Ft,"No window.location.(origin|href) available to create URL for href: "+Dt),new URL(Dt,Ft)}let Lt={get action(){return _t},get location(){return _e(bt,At)},listen(Ot){if(wt)throw new Error("A history only accepts one active listener");return bt.addEventListener(PopStateEventType,Pt),wt=Ot,()=>{bt.removeEventListener(PopStateEventType,Pt),wt=null}},createHref(Ot){return $(bt,Ot)},createURL:Mt,encodeLocation(Ot){let Ft=Mt(Ot);return{pathname:Ft.pathname,search:Ft.search,hash:Ft.hash}},push:Rt,replace:kt,go(Ot){return At.go(Ot)}};return Lt}var ResultType;(function(_e){_e.data="data",_e.deferred="deferred",_e.redirect="redirect",_e.error="error"})(ResultType||(ResultType={}));function matchRoutes(_e,$,ht){ht===void 0&&(ht="/");let vt=typeof $=="string"?parsePath($):$,bt=stripBasename(vt.pathname||"/",ht);if(bt==null)return null;let Et=flattenRoutes(_e);rankRouteBranches(Et);let At=null;for(let _t=0;At==null&&_t<Et.length;++_t){let wt=decodePath(bt);At=matchRouteBranch(Et[_t],wt)}return At}function flattenRoutes(_e,$,ht,vt){$===void 0&&($=[]),ht===void 0&&(ht=[]),vt===void 0&&(vt="");let bt=(Et,At,_t)=>{let wt={relativePath:_t===void 0?Et.path||"":_t,caseSensitive:Et.caseSensitive===!0,childrenIndex:At,route:Et};wt.relativePath.startsWith("/")&&(invariant$1(wt.relativePath.startsWith(vt),'Absolute route path "'+wt.relativePath+'" nested under path '+('"'+vt+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),wt.relativePath=wt.relativePath.slice(vt.length));let Ct=joinPaths([vt,wt.relativePath]),xt=ht.concat(wt);Et.children&&Et.children.length>0&&(invariant$1(Et.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+Ct+'".')),flattenRoutes(Et.children,$,xt,Ct)),!(Et.path==null&&!Et.index)&&$.push({path:Ct,score:computeScore(Ct,Et.index),routesMeta:xt})};return _e.forEach((Et,At)=>{var _t;if(Et.path===""||!((_t=Et.path)!=null&&_t.includes("?")))bt(Et,At);else for(let wt of explodeOptionalSegments(Et.path))bt(Et,At,wt)}),$}function explodeOptionalSegments(_e){let $=_e.split("/");if($.length===0)return[];let[ht,...vt]=$,bt=ht.endsWith("?"),Et=ht.replace(/\?$/,"");if(vt.length===0)return bt?[Et,""]:[Et];let At=explodeOptionalSegments(vt.join("/")),_t=[];return _t.push(...At.map(wt=>wt===""?Et:[Et,wt].join("/"))),bt&&_t.push(...At),_t.map(wt=>_e.startsWith("/")&&wt===""?"/":wt)}function rankRouteBranches(_e){_e.sort(($,ht)=>$.score!==ht.score?ht.score-$.score:compareIndexes($.routesMeta.map(vt=>vt.childrenIndex),ht.routesMeta.map(vt=>vt.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=_e=>_e==="*";function computeScore(_e,$){let ht=_e.split("/"),vt=ht.length;return ht.some(isSplat)&&(vt+=splatPenalty),$&&(vt+=indexRouteValue),ht.filter(bt=>!isSplat(bt)).reduce((bt,Et)=>bt+(paramRe.test(Et)?dynamicSegmentValue:Et===""?emptySegmentValue:staticSegmentValue),vt)}function compareIndexes(_e,$){return _e.length===$.length&&_e.slice(0,-1).every((vt,bt)=>vt===$[bt])?_e[_e.length-1]-$[$.length-1]:0}function matchRouteBranch(_e,$){let{routesMeta:ht}=_e,vt={},bt="/",Et=[];for(let At=0;At<ht.length;++At){let _t=ht[At],wt=At===ht.length-1,Ct=bt==="/"?$:$.slice(bt.length)||"/",xt=matchPath({path:_t.relativePath,caseSensitive:_t.caseSensitive,end:wt},Ct);if(!xt)return null;Object.assign(vt,xt.params);let Pt=_t.route;Et.push({params:vt,pathname:joinPaths([bt,xt.pathname]),pathnameBase:normalizePathname(joinPaths([bt,xt.pathnameBase])),route:Pt}),xt.pathnameBase!=="/"&&(bt=joinPaths([bt,xt.pathnameBase]))}return Et}function matchPath(_e,$){typeof _e=="string"&&(_e={path:_e,caseSensitive:!1,end:!0});let[ht,vt]=compilePath(_e.path,_e.caseSensitive,_e.end),bt=$.match(ht);if(!bt)return null;let Et=bt[0],At=Et.replace(/(.)\/+$/,"$1"),_t=bt.slice(1);return{params:vt.reduce((Ct,xt,Pt)=>{let{paramName:Rt,isOptional:kt}=xt;if(Rt==="*"){let Lt=_t[Pt]||"";At=Et.slice(0,Et.length-Lt.length).replace(/(.)\/+$/,"$1")}const Mt=_t[Pt];return kt&&!Mt?Ct[Rt]=void 0:Ct[Rt]=(Mt||"").replace(/%2F/g,"/"),Ct},{}),pathname:Et,pathnameBase:At,pattern:_e}}function compilePath(_e,$,ht){$===void 0&&($=!1),ht===void 0&&(ht=!0),warning(_e==="*"||!_e.endsWith("*")||_e.endsWith("/*"),'Route path "'+_e+'" will be treated as if it were '+('"'+_e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+_e.replace(/\*$/,"/*")+'".'));let vt=[],bt="^"+_e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(At,_t,wt)=>(vt.push({paramName:_t,isOptional:wt!=null}),wt?"/?([^\\/]+)?":"/([^\\/]+)"));return _e.endsWith("*")?(vt.push({paramName:"*"}),bt+=_e==="*"||_e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):ht?bt+="\\/*$":_e!==""&&_e!=="/"&&(bt+="(?:(?=\\/|$))"),[new RegExp(bt,$?void 0:"i"),vt]}function decodePath(_e){try{return _e.split("/").map($=>decodeURIComponent($).replace(/\//g,"%2F")).join("/")}catch($){return warning(!1,'The URL path "'+_e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+$+").")),_e}}function stripBasename(_e,$){if($==="/")return _e;if(!_e.toLowerCase().startsWith($.toLowerCase()))return null;let ht=$.endsWith("/")?$.length-1:$.length,vt=_e.charAt(ht);return vt&&vt!=="/"?null:_e.slice(ht)||"/"}function resolvePath(_e,$){$===void 0&&($="/");let{pathname:ht,search:vt="",hash:bt=""}=typeof _e=="string"?parsePath(_e):_e;return{pathname:ht?ht.startsWith("/")?ht:resolvePathname(ht,$):$,search:normalizeSearch(vt),hash:normalizeHash(bt)}}function resolvePathname(_e,$){let ht=$.replace(/\/+$/,"").split("/");return _e.split("/").forEach(bt=>{bt===".."?ht.length>1&&ht.pop():bt!=="."&&ht.push(bt)}),ht.length>1?ht.join("/"):"/"}function getInvalidPathError(_e,$,ht,vt){return"Cannot include a '"+_e+"' character in a manually specified "+("`to."+$+"` field ["+JSON.stringify(vt)+"].  Please separate it out to the ")+("`to."+ht+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(_e){return _e.filter(($,ht)=>ht===0||$.route.path&&$.route.path.length>0)}function getResolveToMatches(_e,$){let ht=getPathContributingMatches(_e);return $?ht.map((vt,bt)=>bt===_e.length-1?vt.pathname:vt.pathnameBase):ht.map(vt=>vt.pathnameBase)}function resolveTo(_e,$,ht,vt){vt===void 0&&(vt=!1);let bt;typeof _e=="string"?bt=parsePath(_e):(bt=_extends$2({},_e),invariant$1(!bt.pathname||!bt.pathname.includes("?"),getInvalidPathError("?","pathname","search",bt)),invariant$1(!bt.pathname||!bt.pathname.includes("#"),getInvalidPathError("#","pathname","hash",bt)),invariant$1(!bt.search||!bt.search.includes("#"),getInvalidPathError("#","search","hash",bt)));let Et=_e===""||bt.pathname==="",At=Et?"/":bt.pathname,_t;if(At==null)_t=ht;else{let Pt=$.length-1;if(!vt&&At.startsWith("..")){let Rt=At.split("/");for(;Rt[0]==="..";)Rt.shift(),Pt-=1;bt.pathname=Rt.join("/")}_t=Pt>=0?$[Pt]:"/"}let wt=resolvePath(bt,_t),Ct=At&&At!=="/"&&At.endsWith("/"),xt=(Et||At===".")&&ht.endsWith("/");return!wt.pathname.endsWith("/")&&(Ct||xt)&&(wt.pathname+="/"),wt}const joinPaths=_e=>_e.join("/").replace(/\/\/+/g,"/"),normalizePathname=_e=>_e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=_e=>!_e||_e==="?"?"":_e.startsWith("?")?_e:"?"+_e,normalizeHash=_e=>!_e||_e==="#"?"":_e.startsWith("#")?_e:"#"+_e;function isRouteErrorResponse(_e){return _e!=null&&typeof _e.status=="number"&&typeof _e.statusText=="string"&&typeof _e.internal=="boolean"&&"data"in _e}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(_e){for(var $=1;$<arguments.length;$++){var ht=arguments[$];for(var vt in ht)Object.prototype.hasOwnProperty.call(ht,vt)&&(_e[vt]=ht[vt])}return _e},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$1(_e){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(_e)}function useNavigate(){let{isDataRoute:_e}=reactExports.useContext(RouteContext);return _e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$1(!1);let _e=reactExports.useContext(DataRouterContext),{basename:$,future:ht,navigator:vt}=reactExports.useContext(NavigationContext),{matches:bt}=reactExports.useContext(RouteContext),{pathname:Et}=useLocation(),At=JSON.stringify(getResolveToMatches(bt,ht.v7_relativeSplatPath)),_t=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{_t.current=!0}),reactExports.useCallback(function(Ct,xt){if(xt===void 0&&(xt={}),!_t.current)return;if(typeof Ct=="number"){vt.go(Ct);return}let Pt=resolveTo(Ct,JSON.parse(At),Et,xt.relative==="path");_e==null&&$!=="/"&&(Pt.pathname=Pt.pathname==="/"?$:joinPaths([$,Pt.pathname])),(xt.replace?vt.replace:vt.push)(Pt,xt.state,xt)},[$,vt,At,Et,_e])}function useRoutes(_e,$){return useRoutesImpl(_e,$)}function useRoutesImpl(_e,$,ht,vt){useInRouterContext()||invariant$1(!1);let{navigator:bt}=reactExports.useContext(NavigationContext),{matches:Et}=reactExports.useContext(RouteContext),At=Et[Et.length-1],_t=At?At.params:{};At&&At.pathname;let wt=At?At.pathnameBase:"/";At&&At.route;let Ct=useLocation(),xt;if($){var Pt;let Ot=typeof $=="string"?parsePath($):$;wt==="/"||(Pt=Ot.pathname)!=null&&Pt.startsWith(wt)||invariant$1(!1),xt=Ot}else xt=Ct;let Rt=xt.pathname||"/",kt=Rt;if(wt!=="/"){let Ot=wt.replace(/^\//,"").split("/");kt="/"+Rt.replace(/^\//,"").split("/").slice(Ot.length).join("/")}let Mt=matchRoutes(_e,{pathname:kt}),Lt=_renderMatches(Mt&&Mt.map(Ot=>Object.assign({},Ot,{params:Object.assign({},_t,Ot.params),pathname:joinPaths([wt,bt.encodeLocation?bt.encodeLocation(Ot.pathname).pathname:Ot.pathname]),pathnameBase:Ot.pathnameBase==="/"?wt:joinPaths([wt,bt.encodeLocation?bt.encodeLocation(Ot.pathnameBase).pathname:Ot.pathnameBase])})),Et,ht,vt);return $&&Lt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},xt),navigationType:Action.Pop}},Lt):Lt}function DefaultErrorComponent(){let _e=useRouteError(),$=isRouteErrorResponse(_e)?_e.status+" "+_e.statusText:_e instanceof Error?_e.message:JSON.stringify(_e),ht=_e instanceof Error?_e.stack:null,bt={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},$),ht?reactExports.createElement("pre",{style:bt},ht):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor($){super($),this.state={location:$.location,revalidation:$.revalidation,error:$.error}}static getDerivedStateFromError($){return{error:$}}static getDerivedStateFromProps($,ht){return ht.location!==$.location||ht.revalidation!=="idle"&&$.revalidation==="idle"?{error:$.error,location:$.location,revalidation:$.revalidation}:{error:$.error!==void 0?$.error:ht.error,location:ht.location,revalidation:$.revalidation||ht.revalidation}}componentDidCatch($,ht){console.error("React Router caught the following error during render",$,ht)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(_e){let{routeContext:$,match:ht,children:vt}=_e,bt=reactExports.useContext(DataRouterContext);return bt&&bt.static&&bt.staticContext&&(ht.route.errorElement||ht.route.ErrorBoundary)&&(bt.staticContext._deepestRenderedBoundaryId=ht.route.id),reactExports.createElement(RouteContext.Provider,{value:$},vt)}function _renderMatches(_e,$,ht,vt){var bt;if($===void 0&&($=[]),ht===void 0&&(ht=null),vt===void 0&&(vt=null),_e==null){var Et;if((Et=ht)!=null&&Et.errors)_e=ht.matches;else return null}let At=_e,_t=(bt=ht)==null?void 0:bt.errors;if(_t!=null){let xt=At.findIndex(Pt=>Pt.route.id&&(_t==null?void 0:_t[Pt.route.id])!==void 0);xt>=0||invariant$1(!1),At=At.slice(0,Math.min(At.length,xt+1))}let wt=!1,Ct=-1;if(ht&&vt&&vt.v7_partialHydration)for(let xt=0;xt<At.length;xt++){let Pt=At[xt];if((Pt.route.HydrateFallback||Pt.route.hydrateFallbackElement)&&(Ct=xt),Pt.route.id){let{loaderData:Rt,errors:kt}=ht,Mt=Pt.route.loader&&Rt[Pt.route.id]===void 0&&(!kt||kt[Pt.route.id]===void 0);if(Pt.route.lazy||Mt){wt=!0,Ct>=0?At=At.slice(0,Ct+1):At=[At[0]];break}}}return At.reduceRight((xt,Pt,Rt)=>{let kt,Mt=!1,Lt=null,Ot=null;ht&&(kt=_t&&Pt.route.id?_t[Pt.route.id]:void 0,Lt=Pt.route.errorElement||defaultErrorElement,wt&&(Ct<0&&Rt===0?(Mt=!0,Ot=null):Ct===Rt&&(Mt=!0,Ot=Pt.route.hydrateFallbackElement||null)));let Ft=$.concat(At.slice(0,Rt+1)),Dt=()=>{let $t;return kt?$t=Lt:Mt?$t=Ot:Pt.route.Component?$t=reactExports.createElement(Pt.route.Component,null):Pt.route.element?$t=Pt.route.element:$t=xt,reactExports.createElement(RenderedRoute,{match:Pt,routeContext:{outlet:xt,matches:Ft,isDataRoute:ht!=null},children:$t})};return ht&&(Pt.route.ErrorBoundary||Pt.route.errorElement||Rt===0)?reactExports.createElement(RenderErrorBoundary,{location:ht.location,revalidation:ht.revalidation,component:Lt,error:kt,children:Dt(),routeContext:{outlet:null,matches:Ft,isDataRoute:!0}}):Dt()},null)}var DataRouterHook$1=function(_e){return _e.UseBlocker="useBlocker",_e.UseRevalidator="useRevalidator",_e.UseNavigateStable="useNavigate",_e}(DataRouterHook$1||{}),DataRouterStateHook$1=function(_e){return _e.UseBlocker="useBlocker",_e.UseLoaderData="useLoaderData",_e.UseActionData="useActionData",_e.UseRouteError="useRouteError",_e.UseNavigation="useNavigation",_e.UseRouteLoaderData="useRouteLoaderData",_e.UseMatches="useMatches",_e.UseRevalidator="useRevalidator",_e.UseNavigateStable="useNavigate",_e.UseRouteId="useRouteId",_e}(DataRouterStateHook$1||{});function useDataRouterContext(_e){let $=reactExports.useContext(DataRouterContext);return $||invariant$1(!1),$}function useDataRouterState(_e){let $=reactExports.useContext(DataRouterStateContext);return $||invariant$1(!1),$}function useRouteContext(_e){let $=reactExports.useContext(RouteContext);return $||invariant$1(!1),$}function useCurrentRouteId(_e){let $=useRouteContext(),ht=$.matches[$.matches.length-1];return ht.route.id||invariant$1(!1),ht.route.id}function useRouteError(){var _e;let $=reactExports.useContext(RouteErrorContext),ht=useDataRouterState(DataRouterStateHook$1.UseRouteError),vt=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return $!==void 0?$:(_e=ht.errors)==null?void 0:_e[vt]}function useNavigateStable(){let{router:_e}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),$=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),ht=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{ht.current=!0}),reactExports.useCallback(function(bt,Et){Et===void 0&&(Et={}),ht.current&&(typeof bt=="number"?_e.navigate(bt):_e.navigate(bt,_extends$1({fromRouteId:$},Et)))},[_e,$])}function Route(_e){invariant$1(!1)}function Router(_e){let{basename:$="/",children:ht=null,location:vt,navigationType:bt=Action.Pop,navigator:Et,static:At=!1,future:_t}=_e;useInRouterContext()&&invariant$1(!1);let wt=$.replace(/^\/*/,"/"),Ct=reactExports.useMemo(()=>({basename:wt,navigator:Et,static:At,future:_extends$1({v7_relativeSplatPath:!1},_t)}),[wt,_t,Et,At]);typeof vt=="string"&&(vt=parsePath(vt));let{pathname:xt="/",search:Pt="",hash:Rt="",state:kt=null,key:Mt="default"}=vt,Lt=reactExports.useMemo(()=>{let Ot=stripBasename(xt,wt);return Ot==null?null:{location:{pathname:Ot,search:Pt,hash:Rt,state:kt,key:Mt},navigationType:bt}},[wt,xt,Pt,Rt,kt,Mt,bt]);return Lt==null?null:reactExports.createElement(NavigationContext.Provider,{value:Ct},reactExports.createElement(LocationContext.Provider,{children:ht,value:Lt}))}function Routes(_e){let{children:$,location:ht}=_e;return useRoutes(createRoutesFromChildren($),ht)}new Promise(()=>{});function createRoutesFromChildren(_e,$){$===void 0&&($=[]);let ht=[];return reactExports.Children.forEach(_e,(vt,bt)=>{if(!reactExports.isValidElement(vt))return;let Et=[...$,bt];if(vt.type===reactExports.Fragment){ht.push.apply(ht,createRoutesFromChildren(vt.props.children,Et));return}vt.type!==Route&&invariant$1(!1),!vt.props.index||!vt.props.children||invariant$1(!1);let At={id:vt.props.id||Et.join("-"),caseSensitive:vt.props.caseSensitive,element:vt.props.element,Component:vt.props.Component,index:vt.props.index,path:vt.props.path,loader:vt.props.loader,action:vt.props.action,errorElement:vt.props.errorElement,ErrorBoundary:vt.props.ErrorBoundary,hasErrorBoundary:vt.props.ErrorBoundary!=null||vt.props.errorElement!=null,shouldRevalidate:vt.props.shouldRevalidate,handle:vt.props.handle,lazy:vt.props.lazy};vt.props.children&&(At.children=createRoutesFromChildren(vt.props.children,Et)),ht.push(At)}),ht}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=t$4[START_TRANSITION];function BrowserRouter(_e){let{basename:$,children:ht,future:vt,window:bt}=_e,Et=reactExports.useRef();Et.current==null&&(Et.current=createBrowserHistory({window:bt,v5Compat:!0}));let At=Et.current,[_t,wt]=reactExports.useState({action:At.action,location:At.location}),{v7_startTransition:Ct}=vt||{},xt=reactExports.useCallback(Pt=>{Ct&&startTransitionImpl?startTransitionImpl(()=>wt(Pt)):wt(Pt)},[wt,Ct]);return reactExports.useLayoutEffect(()=>At.listen(xt),[At,xt]),reactExports.createElement(Router,{basename:$,children:ht,location:_t.location,navigationType:_t.action,navigator:At,future:vt})}var DataRouterHook;(function(_e){_e.UseScrollRestoration="useScrollRestoration",_e.UseSubmit="useSubmit",_e.UseSubmitFetcher="useSubmitFetcher",_e.UseFetcher="useFetcher",_e.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(_e){_e.UseFetcher="useFetcher",_e.UseFetchers="useFetchers",_e.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));const $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c=typeof document<"u"?React.useLayoutEffect:()=>{};function $8ae05eaa5c114e9c$export$7f54fc3180508a52(_e){const $=reactExports.useRef(null);return $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>{$.current=_e},[_e]),reactExports.useCallback((...ht)=>{const vt=$.current;return vt==null?void 0:vt(...ht)},[])}const $431fbd86ca7dc216$export$b204af158042fbac=_e=>{var $;return($=_e==null?void 0:_e.ownerDocument)!==null&&$!==void 0?$:document},$431fbd86ca7dc216$export$f21a1ffae260145a=_e=>_e&&"window"in _e&&_e.window===_e?_e:$431fbd86ca7dc216$export$b204af158042fbac(_e).defaultView||window;function $c87311424ea30a05$var$testUserAgent(_e){var $;return typeof window>"u"||window.navigator==null?!1:(($=window.navigator.userAgentData)===null||$===void 0?void 0:$.brands.some(ht=>_e.test(ht.brand)))||_e.test(window.navigator.userAgent)}function $c87311424ea30a05$var$testPlatform(_e){var $;return typeof window<"u"&&window.navigator!=null?_e.test((($=window.navigator.userAgentData)===null||$===void 0?void 0:$.platform)||window.navigator.platform):!1}function $c87311424ea30a05$export$9ac100e40613ea10(){return $c87311424ea30a05$var$testPlatform(/^Mac/i)}function $c87311424ea30a05$export$a11b0059900ceec8(){return $c87311424ea30a05$var$testUserAgent(/Android/i)}function $6a7db85432448f7f$export$60278871457622de(_e){return _e.mozInputSource===0&&_e.isTrusted?!0:$c87311424ea30a05$export$a11b0059900ceec8()&&_e.pointerType?_e.type==="click"&&_e.buttons===1:_e.detail===0&&!_e.pointerType}class $8a9cb279dc87e130$export$905e7fc544a71f36{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor($,ht){this.nativeEvent=ht,this.target=ht.target,this.currentTarget=ht.currentTarget,this.relatedTarget=ht.relatedTarget,this.bubbles=ht.bubbles,this.cancelable=ht.cancelable,this.defaultPrevented=ht.defaultPrevented,this.eventPhase=ht.eventPhase,this.isTrusted=ht.isTrusted,this.timeStamp=ht.timeStamp,this.type=$}}function $8a9cb279dc87e130$export$715c682d09d639cc(_e){let $=reactExports.useRef({isFocused:!1,observer:null});$f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>{const vt=$.current;return()=>{vt.observer&&(vt.observer.disconnect(),vt.observer=null)}},[]);let ht=$8ae05eaa5c114e9c$export$7f54fc3180508a52(vt=>{_e==null||_e(vt)});return reactExports.useCallback(vt=>{if(vt.target instanceof HTMLButtonElement||vt.target instanceof HTMLInputElement||vt.target instanceof HTMLTextAreaElement||vt.target instanceof HTMLSelectElement){$.current.isFocused=!0;let bt=vt.target,Et=At=>{$.current.isFocused=!1,bt.disabled&&ht(new $8a9cb279dc87e130$export$905e7fc544a71f36("blur",At)),$.current.observer&&($.current.observer.disconnect(),$.current.observer=null)};bt.addEventListener("focusout",Et,{once:!0}),$.current.observer=new MutationObserver(()=>{if($.current.isFocused&&bt.disabled){var At;(At=$.current.observer)===null||At===void 0||At.disconnect();let _t=bt===document.activeElement?null:document.activeElement;bt.dispatchEvent(new FocusEvent("blur",{relatedTarget:_t})),bt.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:_t}))}}),$.current.observer.observe(bt,{attributes:!0,attributeFilter:["disabled"]})}},[ht])}function $a1ea59d68270f0dd$export$f8168d8dd8fd66e6(_e){let{isDisabled:$,onFocus:ht,onBlur:vt,onFocusChange:bt}=_e;const Et=reactExports.useCallback(wt=>{if(wt.target===wt.currentTarget)return vt&&vt(wt),bt&&bt(!1),!0},[vt,bt]),At=$8a9cb279dc87e130$export$715c682d09d639cc(Et),_t=reactExports.useCallback(wt=>{const Ct=$431fbd86ca7dc216$export$b204af158042fbac(wt.target);wt.target===wt.currentTarget&&Ct.activeElement===wt.target&&(ht&&ht(wt),bt&&bt(!0),At(wt))},[bt,ht,At]);return{focusProps:{onFocus:!$&&(ht||bt||vt)?_t:void 0,onBlur:!$&&(vt||bt)?Et:void 0}}}let $507fabe10e71c6fb$var$currentModality=null,$507fabe10e71c6fb$var$changeHandlers=new Set,$507fabe10e71c6fb$export$d90243b58daecda7=new Map,$507fabe10e71c6fb$var$hasEventBeforeFocus=!1,$507fabe10e71c6fb$var$hasBlurredWindowRecently=!1;const $507fabe10e71c6fb$var$FOCUS_VISIBLE_INPUT_KEYS={Tab:!0,Escape:!0};function $507fabe10e71c6fb$var$triggerChangeHandlers(_e,$){for(let ht of $507fabe10e71c6fb$var$changeHandlers)ht(_e,$)}function $507fabe10e71c6fb$var$isValidKey(_e){return!(_e.metaKey||!$c87311424ea30a05$export$9ac100e40613ea10()&&_e.altKey||_e.ctrlKey||_e.key==="Control"||_e.key==="Shift"||_e.key==="Meta")}function $507fabe10e71c6fb$var$handleKeyboardEvent(_e){$507fabe10e71c6fb$var$hasEventBeforeFocus=!0,$507fabe10e71c6fb$var$isValidKey(_e)&&($507fabe10e71c6fb$var$currentModality="keyboard",$507fabe10e71c6fb$var$triggerChangeHandlers("keyboard",_e))}function $507fabe10e71c6fb$var$handlePointerEvent(_e){$507fabe10e71c6fb$var$currentModality="pointer",(_e.type==="mousedown"||_e.type==="pointerdown")&&($507fabe10e71c6fb$var$hasEventBeforeFocus=!0,$507fabe10e71c6fb$var$triggerChangeHandlers("pointer",_e))}function $507fabe10e71c6fb$var$handleClickEvent(_e){$6a7db85432448f7f$export$60278871457622de(_e)&&($507fabe10e71c6fb$var$hasEventBeforeFocus=!0,$507fabe10e71c6fb$var$currentModality="virtual")}function $507fabe10e71c6fb$var$handleFocusEvent(_e){_e.target===window||_e.target===document||(!$507fabe10e71c6fb$var$hasEventBeforeFocus&&!$507fabe10e71c6fb$var$hasBlurredWindowRecently&&($507fabe10e71c6fb$var$currentModality="virtual",$507fabe10e71c6fb$var$triggerChangeHandlers("virtual",_e)),$507fabe10e71c6fb$var$hasEventBeforeFocus=!1,$507fabe10e71c6fb$var$hasBlurredWindowRecently=!1)}function $507fabe10e71c6fb$var$handleWindowBlur(){$507fabe10e71c6fb$var$hasEventBeforeFocus=!1,$507fabe10e71c6fb$var$hasBlurredWindowRecently=!0}function $507fabe10e71c6fb$var$setupGlobalFocusEvents(_e){if(typeof window>"u"||$507fabe10e71c6fb$export$d90243b58daecda7.get($431fbd86ca7dc216$export$f21a1ffae260145a(_e)))return;const $=$431fbd86ca7dc216$export$f21a1ffae260145a(_e),ht=$431fbd86ca7dc216$export$b204af158042fbac(_e);let vt=$.HTMLElement.prototype.focus;$.HTMLElement.prototype.focus=function(){$507fabe10e71c6fb$var$hasEventBeforeFocus=!0,vt.apply(this,arguments)},ht.addEventListener("keydown",$507fabe10e71c6fb$var$handleKeyboardEvent,!0),ht.addEventListener("keyup",$507fabe10e71c6fb$var$handleKeyboardEvent,!0),ht.addEventListener("click",$507fabe10e71c6fb$var$handleClickEvent,!0),$.addEventListener("focus",$507fabe10e71c6fb$var$handleFocusEvent,!0),$.addEventListener("blur",$507fabe10e71c6fb$var$handleWindowBlur,!1),typeof PointerEvent<"u"?(ht.addEventListener("pointerdown",$507fabe10e71c6fb$var$handlePointerEvent,!0),ht.addEventListener("pointermove",$507fabe10e71c6fb$var$handlePointerEvent,!0),ht.addEventListener("pointerup",$507fabe10e71c6fb$var$handlePointerEvent,!0)):(ht.addEventListener("mousedown",$507fabe10e71c6fb$var$handlePointerEvent,!0),ht.addEventListener("mousemove",$507fabe10e71c6fb$var$handlePointerEvent,!0),ht.addEventListener("mouseup",$507fabe10e71c6fb$var$handlePointerEvent,!0)),$.addEventListener("beforeunload",()=>{$507fabe10e71c6fb$var$tearDownWindowFocusTracking(_e)},{once:!0}),$507fabe10e71c6fb$export$d90243b58daecda7.set($,{focus:vt})}const $507fabe10e71c6fb$var$tearDownWindowFocusTracking=(_e,$)=>{const ht=$431fbd86ca7dc216$export$f21a1ffae260145a(_e),vt=$431fbd86ca7dc216$export$b204af158042fbac(_e);$&&vt.removeEventListener("DOMContentLoaded",$),$507fabe10e71c6fb$export$d90243b58daecda7.has(ht)&&(ht.HTMLElement.prototype.focus=$507fabe10e71c6fb$export$d90243b58daecda7.get(ht).focus,vt.removeEventListener("keydown",$507fabe10e71c6fb$var$handleKeyboardEvent,!0),vt.removeEventListener("keyup",$507fabe10e71c6fb$var$handleKeyboardEvent,!0),vt.removeEventListener("click",$507fabe10e71c6fb$var$handleClickEvent,!0),ht.removeEventListener("focus",$507fabe10e71c6fb$var$handleFocusEvent,!0),ht.removeEventListener("blur",$507fabe10e71c6fb$var$handleWindowBlur,!1),typeof PointerEvent<"u"?(vt.removeEventListener("pointerdown",$507fabe10e71c6fb$var$handlePointerEvent,!0),vt.removeEventListener("pointermove",$507fabe10e71c6fb$var$handlePointerEvent,!0),vt.removeEventListener("pointerup",$507fabe10e71c6fb$var$handlePointerEvent,!0)):(vt.removeEventListener("mousedown",$507fabe10e71c6fb$var$handlePointerEvent,!0),vt.removeEventListener("mousemove",$507fabe10e71c6fb$var$handlePointerEvent,!0),vt.removeEventListener("mouseup",$507fabe10e71c6fb$var$handlePointerEvent,!0)),$507fabe10e71c6fb$export$d90243b58daecda7.delete(ht))};function $507fabe10e71c6fb$export$2f1888112f558a7d(_e){const $=$431fbd86ca7dc216$export$b204af158042fbac(_e);let ht;return $.readyState!=="loading"?$507fabe10e71c6fb$var$setupGlobalFocusEvents(_e):(ht=()=>{$507fabe10e71c6fb$var$setupGlobalFocusEvents(_e)},$.addEventListener("DOMContentLoaded",ht)),()=>$507fabe10e71c6fb$var$tearDownWindowFocusTracking(_e,ht)}typeof document<"u"&&$507fabe10e71c6fb$export$2f1888112f558a7d();function $507fabe10e71c6fb$export$b9b3dfddab17db27(){return $507fabe10e71c6fb$var$currentModality!=="pointer"}const $507fabe10e71c6fb$var$nonTextInputTypes=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function $507fabe10e71c6fb$var$isKeyboardFocusEvent(_e,$,ht){var vt;const bt=typeof window<"u"?$431fbd86ca7dc216$export$f21a1ffae260145a(ht==null?void 0:ht.target).HTMLInputElement:HTMLInputElement,Et=typeof window<"u"?$431fbd86ca7dc216$export$f21a1ffae260145a(ht==null?void 0:ht.target).HTMLTextAreaElement:HTMLTextAreaElement,At=typeof window<"u"?$431fbd86ca7dc216$export$f21a1ffae260145a(ht==null?void 0:ht.target).HTMLElement:HTMLElement,_t=typeof window<"u"?$431fbd86ca7dc216$export$f21a1ffae260145a(ht==null?void 0:ht.target).KeyboardEvent:KeyboardEvent;return _e=_e||(ht==null?void 0:ht.target)instanceof bt&&!$507fabe10e71c6fb$var$nonTextInputTypes.has(ht==null||(vt=ht.target)===null||vt===void 0?void 0:vt.type)||(ht==null?void 0:ht.target)instanceof Et||(ht==null?void 0:ht.target)instanceof At&&(ht==null?void 0:ht.target.isContentEditable),!(_e&&$==="keyboard"&&ht instanceof _t&&!$507fabe10e71c6fb$var$FOCUS_VISIBLE_INPUT_KEYS[ht.key])}function $507fabe10e71c6fb$export$ec71b4b83ac08ec3(_e,$,ht){$507fabe10e71c6fb$var$setupGlobalFocusEvents(),reactExports.useEffect(()=>{let vt=(bt,Et)=>{$507fabe10e71c6fb$var$isKeyboardFocusEvent(!!(ht!=null&&ht.isTextInput),bt,Et)&&_e($507fabe10e71c6fb$export$b9b3dfddab17db27())};return $507fabe10e71c6fb$var$changeHandlers.add(vt),()=>{$507fabe10e71c6fb$var$changeHandlers.delete(vt)}},$)}function $9ab94262bd0047c7$export$420e68273165f4ec(_e){let{isDisabled:$,onBlurWithin:ht,onFocusWithin:vt,onFocusWithinChange:bt}=_e,Et=reactExports.useRef({isFocusWithin:!1}),At=reactExports.useCallback(Ct=>{Et.current.isFocusWithin&&!Ct.currentTarget.contains(Ct.relatedTarget)&&(Et.current.isFocusWithin=!1,ht&&ht(Ct),bt&&bt(!1))},[ht,bt,Et]),_t=$8a9cb279dc87e130$export$715c682d09d639cc(At),wt=reactExports.useCallback(Ct=>{!Et.current.isFocusWithin&&document.activeElement===Ct.target&&(vt&&vt(Ct),bt&&bt(!0),Et.current.isFocusWithin=!0,_t(Ct))},[vt,bt,_t]);return $?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:wt,onBlur:At}}}let $6179b936705e76d3$var$globalIgnoreEmulatedMouseEvents=!1,$6179b936705e76d3$var$hoverCount=0;function $6179b936705e76d3$var$setGlobalIgnoreEmulatedMouseEvents(){$6179b936705e76d3$var$globalIgnoreEmulatedMouseEvents=!0,setTimeout(()=>{$6179b936705e76d3$var$globalIgnoreEmulatedMouseEvents=!1},50)}function $6179b936705e76d3$var$handleGlobalPointerEvent(_e){_e.pointerType==="touch"&&$6179b936705e76d3$var$setGlobalIgnoreEmulatedMouseEvents()}function $6179b936705e76d3$var$setupGlobalTouchEvents(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",$6179b936705e76d3$var$handleGlobalPointerEvent):document.addEventListener("touchend",$6179b936705e76d3$var$setGlobalIgnoreEmulatedMouseEvents),$6179b936705e76d3$var$hoverCount++,()=>{$6179b936705e76d3$var$hoverCount--,!($6179b936705e76d3$var$hoverCount>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",$6179b936705e76d3$var$handleGlobalPointerEvent):document.removeEventListener("touchend",$6179b936705e76d3$var$setGlobalIgnoreEmulatedMouseEvents))}}function $6179b936705e76d3$export$ae780daf29e6d456(_e){let{onHoverStart:$,onHoverChange:ht,onHoverEnd:vt,isDisabled:bt}=_e,[Et,At]=reactExports.useState(!1),_t=reactExports.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;reactExports.useEffect($6179b936705e76d3$var$setupGlobalTouchEvents,[]);let{hoverProps:wt,triggerHoverEnd:Ct}=reactExports.useMemo(()=>{let xt=(kt,Mt)=>{if(_t.pointerType=Mt,bt||Mt==="touch"||_t.isHovered||!kt.currentTarget.contains(kt.target))return;_t.isHovered=!0;let Lt=kt.currentTarget;_t.target=Lt,$&&$({type:"hoverstart",target:Lt,pointerType:Mt}),ht&&ht(!0),At(!0)},Pt=(kt,Mt)=>{if(_t.pointerType="",_t.target=null,Mt==="touch"||!_t.isHovered)return;_t.isHovered=!1;let Lt=kt.currentTarget;vt&&vt({type:"hoverend",target:Lt,pointerType:Mt}),ht&&ht(!1),At(!1)},Rt={};return typeof PointerEvent<"u"?(Rt.onPointerEnter=kt=>{$6179b936705e76d3$var$globalIgnoreEmulatedMouseEvents&&kt.pointerType==="mouse"||xt(kt,kt.pointerType)},Rt.onPointerLeave=kt=>{!bt&&kt.currentTarget.contains(kt.target)&&Pt(kt,kt.pointerType)}):(Rt.onTouchStart=()=>{_t.ignoreEmulatedMouseEvents=!0},Rt.onMouseEnter=kt=>{!_t.ignoreEmulatedMouseEvents&&!$6179b936705e76d3$var$globalIgnoreEmulatedMouseEvents&&xt(kt,"mouse"),_t.ignoreEmulatedMouseEvents=!1},Rt.onMouseLeave=kt=>{!bt&&kt.currentTarget.contains(kt.target)&&Pt(kt,"mouse")}),{hoverProps:Rt,triggerHoverEnd:Pt}},[$,ht,vt,bt,_t]);return reactExports.useEffect(()=>{bt&&Ct({currentTarget:_t.target},_t.pointerType)},[bt]),{hoverProps:wt,isHovered:Et}}function $f7dceffc5ad7768b$export$4e328f61c538687f(_e={}){let{autoFocus:$=!1,isTextInput:ht,within:vt}=_e,bt=reactExports.useRef({isFocused:!1,isFocusVisible:$||$507fabe10e71c6fb$export$b9b3dfddab17db27()}),[Et,At]=reactExports.useState(!1),[_t,wt]=reactExports.useState(()=>bt.current.isFocused&&bt.current.isFocusVisible),Ct=reactExports.useCallback(()=>wt(bt.current.isFocused&&bt.current.isFocusVisible),[]),xt=reactExports.useCallback(kt=>{bt.current.isFocused=kt,At(kt),Ct()},[Ct]);$507fabe10e71c6fb$export$ec71b4b83ac08ec3(kt=>{bt.current.isFocusVisible=kt,Ct()},[],{isTextInput:ht});let{focusProps:Pt}=$a1ea59d68270f0dd$export$f8168d8dd8fd66e6({isDisabled:vt,onFocusChange:xt}),{focusWithinProps:Rt}=$9ab94262bd0047c7$export$420e68273165f4ec({isDisabled:!vt,onFocusWithinChange:xt});return{isFocused:Et,isFocusVisible:_t,focusProps:vt?Rt:Pt}}var i$5=Object.defineProperty,d$3=(_e,$,ht)=>$ in _e?i$5(_e,$,{enumerable:!0,configurable:!0,writable:!0,value:ht}):_e[$]=ht,r$2=(_e,$,ht)=>(d$3(_e,typeof $!="symbol"?$+"":$,ht),ht);let o$5=class{constructor(){r$2(this,"current",this.detect()),r$2(this,"handoffState","pending"),r$2(this,"currentId",0)}set($){this.current!==$&&(this.handoffState="pending",this.currentId=0,this.current=$)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},s$5=new o$5;function u$7(_e){return s$5.isServer?null:_e instanceof Node?_e.ownerDocument:_e!=null&&_e.hasOwnProperty("current")&&_e.current instanceof Node?_e.current.ownerDocument:document}function t$3(_e){typeof queueMicrotask=="function"?queueMicrotask(_e):Promise.resolve().then(_e).catch($=>setTimeout(()=>{throw $}))}function o$4(){let _e=[],$={addEventListener(ht,vt,bt,Et){return ht.addEventListener(vt,bt,Et),$.add(()=>ht.removeEventListener(vt,bt,Et))},requestAnimationFrame(...ht){let vt=requestAnimationFrame(...ht);return $.add(()=>cancelAnimationFrame(vt))},nextFrame(...ht){return $.requestAnimationFrame(()=>$.requestAnimationFrame(...ht))},setTimeout(...ht){let vt=setTimeout(...ht);return $.add(()=>clearTimeout(vt))},microTask(...ht){let vt={current:!0};return t$3(()=>{vt.current&&ht[0]()}),$.add(()=>{vt.current=!1})},style(ht,vt,bt){let Et=ht.style.getPropertyValue(vt);return Object.assign(ht.style,{[vt]:bt}),this.add(()=>{Object.assign(ht.style,{[vt]:Et})})},group(ht){let vt=o$4();return ht(vt),this.add(()=>vt.dispose())},add(ht){return _e.includes(ht)||_e.push(ht),()=>{let vt=_e.indexOf(ht);if(vt>=0)for(let bt of _e.splice(vt,1))bt()}},dispose(){for(let ht of _e.splice(0))ht()}};return $}function p$3(){let[_e]=reactExports.useState(o$4);return reactExports.useEffect(()=>()=>_e.dispose(),[_e]),_e}let n$3=(_e,$)=>{s$5.isServer?reactExports.useEffect(_e,$):reactExports.useLayoutEffect(_e,$)};function s$4(_e){let $=reactExports.useRef(_e);return n$3(()=>{$.current=_e},[_e]),$}let o$3=function(_e){let $=s$4(_e);return React.useCallback((...ht)=>$.current(...ht),[$])};function E(_e){let $=_e.width/2,ht=_e.height/2;return{top:_e.clientY-ht,right:_e.clientX+$,bottom:_e.clientY+ht,left:_e.clientX-$}}function P$2(_e,$){return!(!_e||!$||_e.right<$.left||_e.left>$.right||_e.bottom<$.top||_e.top>$.bottom)}function w$1({disabled:_e=!1}={}){let $=reactExports.useRef(null),[ht,vt]=reactExports.useState(!1),bt=p$3(),Et=o$3(()=>{$.current=null,vt(!1),bt.dispose()}),At=o$3(_t=>{if(bt.dispose(),$.current===null){$.current=_t.currentTarget,vt(!0);{let wt=u$7(_t.currentTarget);bt.addEventListener(wt,"pointerup",Et,!1),bt.addEventListener(wt,"pointermove",Ct=>{if($.current){let xt=E(Ct);vt(P$2(xt,$.current.getBoundingClientRect()))}},!1),bt.addEventListener(wt,"pointercancel",Et,!1)}}});return{pressed:ht,pressProps:_e?{}:{onPointerDown:At,onPointerUp:Et,onClick:Et}}}let e$2=reactExports.createContext(void 0);function a$7(){return reactExports.useContext(e$2)}function t$2(..._e){return Array.from(new Set(_e.flatMap($=>typeof $=="string"?$.split(" "):[]))).filter(Boolean).join(" ")}function u$6(_e,$,...ht){if(_e in $){let bt=$[_e];return typeof bt=="function"?bt(...ht):bt}let vt=new Error(`Tried to handle "${_e}" but there is no handler defined. Only defined handlers are: ${Object.keys($).map(bt=>`"${bt}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(vt,u$6),vt}var O$1=(_e=>(_e[_e.None=0]="None",_e[_e.RenderStrategy=1]="RenderStrategy",_e[_e.Static=2]="Static",_e))(O$1||{}),M$2=(_e=>(_e[_e.Unmount=0]="Unmount",_e[_e.Hidden=1]="Hidden",_e))(M$2||{});function H$1({ourProps:_e,theirProps:$,slot:ht,defaultTag:vt,features:bt,visible:Et=!0,name:At,mergeRefs:_t}){_t=_t??A$2;let wt=N$2($,_e);if(Et)return b$1(wt,ht,vt,At,_t);let Ct=bt??0;if(Ct&2){let{static:xt=!1,...Pt}=wt;if(xt)return b$1(Pt,ht,vt,At,_t)}if(Ct&1){let{unmount:xt=!0,...Pt}=wt;return u$6(xt?0:1,{0(){return null},1(){return b$1({...Pt,hidden:!0,style:{display:"none"}},ht,vt,At,_t)}})}return b$1(wt,ht,vt,At,_t)}function b$1(_e,$={},ht,vt,bt){let{as:Et=ht,children:At,refName:_t="ref",...wt}=h$2(_e,["unmount","static"]),Ct=_e.ref!==void 0?{[_t]:_e.ref}:{},xt=typeof At=="function"?At($):At;"className"in wt&&wt.className&&typeof wt.className=="function"&&(wt.className=wt.className($)),wt["aria-labelledby"]&&wt["aria-labelledby"]===wt.id&&(wt["aria-labelledby"]=void 0);let Pt={};if($){let Rt=!1,kt=[];for(let[Mt,Lt]of Object.entries($))typeof Lt=="boolean"&&(Rt=!0),Lt===!0&&kt.push(Mt.replace(/([A-Z])/g,Ot=>`-${Ot.toLowerCase()}`));if(Rt){Pt["data-headlessui-state"]=kt.join(" ");for(let Mt of kt)Pt[`data-${Mt}`]=""}}if(Et===reactExports.Fragment&&(Object.keys(m$3(wt)).length>0||Object.keys(m$3(Pt)).length>0))if(!reactExports.isValidElement(xt)||Array.isArray(xt)&&xt.length>1){if(Object.keys(m$3(wt)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${vt} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(m$3(wt)).concat(Object.keys(m$3(Pt))).map(Rt=>`  - ${Rt}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(Rt=>`  - ${Rt}`).join(`
`)].join(`
`))}else{let Rt=xt.props,kt=Rt==null?void 0:Rt.className,Mt=typeof kt=="function"?(...Ft)=>t$2(kt(...Ft),wt.className):t$2(kt,wt.className),Lt=Mt?{className:Mt}:{},Ot=N$2(xt.props,m$3(h$2(wt,["ref"])));for(let Ft in Pt)Ft in Ot&&delete Pt[Ft];return reactExports.cloneElement(xt,Object.assign({},Ot,Pt,Ct,{ref:bt(xt.ref,Ct.ref)},Lt))}return reactExports.createElement(Et,Object.assign({},h$2(wt,["ref"]),Et!==reactExports.Fragment&&Ct,Et!==reactExports.Fragment&&Pt),xt)}function A$2(..._e){return _e.every($=>$==null)?void 0:$=>{for(let ht of _e)ht!=null&&(typeof ht=="function"?ht($):ht.current=$)}}function N$2(..._e){if(_e.length===0)return{};if(_e.length===1)return _e[0];let $={},ht={};for(let vt of _e)for(let bt in vt)bt.startsWith("on")&&typeof vt[bt]=="function"?(ht[bt]!=null||(ht[bt]=[]),ht[bt].push(vt[bt])):$[bt]=vt[bt];if($.disabled||$["aria-disabled"])for(let vt in ht)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(vt)&&(ht[vt]=[bt=>{var Et;return(Et=bt==null?void 0:bt.preventDefault)==null?void 0:Et.call(bt)}]);for(let vt in ht)Object.assign($,{[vt](bt,...Et){let At=ht[vt];for(let _t of At){if((bt instanceof Event||(bt==null?void 0:bt.nativeEvent)instanceof Event)&&bt.defaultPrevented)return;_t(bt,...Et)}}});return $}function D$3(..._e){if(_e.length===0)return{};if(_e.length===1)return _e[0];let $={},ht={};for(let vt of _e)for(let bt in vt)bt.startsWith("on")&&typeof vt[bt]=="function"?(ht[bt]!=null||(ht[bt]=[]),ht[bt].push(vt[bt])):$[bt]=vt[bt];for(let vt in ht)Object.assign($,{[vt](...bt){let Et=ht[vt];for(let At of Et)At==null||At(...bt)}});return $}function I$3(_e){var $;return Object.assign(reactExports.forwardRef(_e),{displayName:($=_e.displayName)!=null?$:_e.name})}function m$3(_e){let $=Object.assign({},_e);for(let ht in $)$[ht]===void 0&&delete $[ht];return $}function h$2(_e,$=[]){let ht=Object.assign({},_e);for(let vt of $)vt in ht&&delete ht[vt];return ht}let e$1=reactExports.createContext(void 0);function u$5(){return reactExports.useContext(e$1)}function r$1(_e){let $=_e.parentElement,ht=null;for(;$&&!($ instanceof HTMLFieldSetElement);)$ instanceof HTMLLegendElement&&(ht=$),$=$.parentElement;let vt=($==null?void 0:$.getAttribute("disabled"))==="";return vt&&i$4(ht)?!1:vt}function i$4(_e){if(!_e)return!1;let $=_e.previousElementSibling;for(;$!==null;){if($ instanceof HTMLLegendElement)return!1;$=$.previousElementSibling}return!0}let u$4=Symbol();function T$2(_e,$=!0){return Object.assign(_e,{[u$4]:$})}function y$4(..._e){let $=reactExports.useRef(_e);reactExports.useEffect(()=>{$.current=_e},[_e]);let ht=o$3(vt=>{for(let bt of $.current)bt!=null&&(typeof bt=="function"?bt(vt):bt.current=vt)});return _e.every(vt=>vt==null||(vt==null?void 0:vt[u$4]))?void 0:ht}let a$6=reactExports.createContext(null);a$6.displayName="DescriptionContext";function f$5(){let _e=reactExports.useContext(a$6);if(_e===null){let $=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace($,f$5),$}return _e}function U$1(){let[_e,$]=reactExports.useState([]);return[_e.length>0?_e.join(" "):void 0,reactExports.useMemo(()=>function(ht){let vt=o$3(Et=>($(At=>[...At,Et]),()=>$(At=>{let _t=At.slice(),wt=_t.indexOf(Et);return wt!==-1&&_t.splice(wt,1),_t}))),bt=reactExports.useMemo(()=>({register:vt,slot:ht.slot,name:ht.name,props:ht.props,value:ht.value}),[vt,ht.slot,ht.name,ht.props,ht.value]);return React.createElement(a$6.Provider,{value:bt},ht.children)},[$])]}let S$3="p";function C(_e,$){let ht=reactExports.useId(),vt=a$7(),{id:bt=`headlessui-description-${ht}`,...Et}=_e,At=f$5(),_t=y$4($);n$3(()=>At.register(bt),[bt,At.register]);let wt=vt||!1,Ct=reactExports.useMemo(()=>({...At.slot,disabled:wt}),[At.slot,wt]),xt={ref:_t,...At.props,id:bt};return H$1({ourProps:xt,theirProps:Et,slot:Ct,defaultTag:S$3,name:At.name||"Description"})}let _$1=I$3(C);Object.assign(_$1,{});var o$2=(_e=>(_e.Space=" ",_e.Enter="Enter",_e.Escape="Escape",_e.Backspace="Backspace",_e.Delete="Delete",_e.ArrowLeft="ArrowLeft",_e.ArrowUp="ArrowUp",_e.ArrowRight="ArrowRight",_e.ArrowDown="ArrowDown",_e.Home="Home",_e.End="End",_e.PageUp="PageUp",_e.PageDown="PageDown",_e.Tab="Tab",_e))(o$2||{});let c$4=reactExports.createContext(null);c$4.displayName="LabelContext";function P$1(){let _e=reactExports.useContext(c$4);if(_e===null){let $=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace($,P$1),$}return _e}function I$2(_e){var $,ht,vt;let bt=(ht=($=reactExports.useContext(c$4))==null?void 0:$.value)!=null?ht:void 0;return((vt=void 0)!=null?vt:0)>0?[bt,..._e].filter(Boolean).join(" "):bt}function z({inherit:_e=!1}={}){let $=I$2(),[ht,vt]=reactExports.useState([]),bt=_e?[$,...ht].filter(Boolean):ht;return[bt.length>0?bt.join(" "):void 0,reactExports.useMemo(()=>function(Et){let At=o$3(wt=>(vt(Ct=>[...Ct,wt]),()=>vt(Ct=>{let xt=Ct.slice(),Pt=xt.indexOf(wt);return Pt!==-1&&xt.splice(Pt,1),xt}))),_t=reactExports.useMemo(()=>({register:At,slot:Et.slot,name:Et.name,props:Et.props,value:Et.value}),[At,Et.slot,Et.name,Et.props,Et.value]);return React.createElement(c$4.Provider,{value:_t},Et.children)},[vt])]}let N$1="label";function G$1(_e,$){var ht;let vt=reactExports.useId(),bt=P$1(),Et=u$5(),At=a$7(),{id:_t=`headlessui-label-${vt}`,htmlFor:wt=Et??((ht=bt.props)==null?void 0:ht.htmlFor),passive:Ct=!1,...xt}=_e,Pt=y$4($);n$3(()=>bt.register(_t),[_t,bt.register]);let Rt=o$3(Ot=>{let Ft=Ot.currentTarget;if(Ft instanceof HTMLLabelElement&&Ot.preventDefault(),bt.props&&"onClick"in bt.props&&typeof bt.props.onClick=="function"&&bt.props.onClick(Ot),Ft instanceof HTMLLabelElement){let Dt=document.getElementById(Ft.htmlFor);if(Dt){let $t=Dt.getAttribute("disabled");if($t==="true"||$t==="")return;let Bt=Dt.getAttribute("aria-disabled");if(Bt==="true"||Bt==="")return;(Dt instanceof HTMLInputElement&&(Dt.type==="radio"||Dt.type==="checkbox")||Dt.role==="radio"||Dt.role==="checkbox"||Dt.role==="switch")&&Dt.click(),Dt.focus({preventScroll:!0})}}}),kt=At||!1,Mt=reactExports.useMemo(()=>({...bt.slot,disabled:kt}),[bt.slot,kt]),Lt={ref:Pt,...bt.props,id:_t,htmlFor:wt,onClick:Rt};return Ct&&("onClick"in Lt&&(delete Lt.htmlFor,delete Lt.onClick),"onClick"in xt&&delete xt.onClick),H$1({ourProps:Lt,theirProps:xt,slot:Mt,defaultTag:wt?N$1:"div",name:bt.name||"Label"})}let U=I$3(G$1);Object.assign(U,{});function s$3(_e){if(_e===null)return{width:0,height:0};let{width:$,height:ht}=_e.getBoundingClientRect();return{width:$,height:ht}}function f$4(_e,$=!1){let ht=_e===null?null:"current"in _e?_e.current:_e,[vt,bt]=reactExports.useReducer(()=>({}),{}),Et=reactExports.useMemo(()=>s$3(ht),[ht,vt]);return n$3(()=>{if(!ht)return;let At=new ResizeObserver(bt);return At.observe(ht),()=>{At.disconnect()}},[ht]),$?{width:`${Et.width}px`,height:`${Et.height}px`}:Et}let a$5=class extends Map{constructor($){super(),this.factory=$}get($){let ht=super.get($);return ht===void 0&&(ht=this.factory($),this.set($,ht)),ht}};function a$4(_e,$){let ht=_e(),vt=new Set;return{getSnapshot(){return ht},subscribe(bt){return vt.add(bt),()=>vt.delete(bt)},dispatch(bt,...Et){let At=$[bt].call(ht,...Et);At&&(ht=At,vt.forEach(_t=>_t()))}}}function o$1(_e){return reactExports.useSyncExternalStore(_e.subscribe,_e.getSnapshot,_e.getSnapshot)}let p$2=new a$5(()=>a$4(()=>[],{ADD(_e){return this.includes(_e)?this:[...this,_e]},REMOVE(_e){let $=this.indexOf(_e);if($===-1)return this;let ht=this.slice();return ht.splice($,1),ht}}));function x(_e,$){let ht=p$2.get($),vt=reactExports.useId(),bt=o$1(ht);if(n$3(()=>{if(_e)return ht.dispatch("ADD",vt),()=>ht.dispatch("REMOVE",vt)},[ht,_e]),!_e)return!1;let Et=bt.indexOf(vt),At=bt.length;return Et===-1&&(Et=At,At+=1),Et===At-1}let f$3=new Map,u$3=new Map;function h$1(_e){var $;let ht=($=u$3.get(_e))!=null?$:0;return u$3.set(_e,ht+1),ht!==0?()=>m$2(_e):(f$3.set(_e,{"aria-hidden":_e.getAttribute("aria-hidden"),inert:_e.inert}),_e.setAttribute("aria-hidden","true"),_e.inert=!0,()=>m$2(_e))}function m$2(_e){var $;let ht=($=u$3.get(_e))!=null?$:1;if(ht===1?u$3.delete(_e):u$3.set(_e,ht-1),ht!==1)return;let vt=f$3.get(_e);vt&&(vt["aria-hidden"]===null?_e.removeAttribute("aria-hidden"):_e.setAttribute("aria-hidden",vt["aria-hidden"]),_e.inert=vt.inert,f$3.delete(_e))}function y$3(_e,{allowed:$,disallowed:ht}={}){let vt=x(_e,"inert-others");n$3(()=>{var bt,Et;if(!vt)return;let At=o$4();for(let wt of(bt=ht==null?void 0:ht())!=null?bt:[])wt&&At.add(h$1(wt));let _t=(Et=$==null?void 0:$())!=null?Et:[];for(let wt of _t){if(!wt)continue;let Ct=u$7(wt);if(!Ct)continue;let xt=wt.parentElement;for(;xt&&xt!==Ct.body;){for(let Pt of xt.children)_t.some(Rt=>Pt.contains(Rt))||At.add(h$1(Pt));xt=xt.parentElement}}return At.dispose},[vt,$,ht])}function m$1(_e,$,ht){let vt=s$4(bt=>{let Et=bt.getBoundingClientRect();Et.x===0&&Et.y===0&&Et.width===0&&Et.height===0&&ht()});reactExports.useEffect(()=>{if(!_e)return;let bt=$===null?null:$ instanceof HTMLElement?$:$.current;if(!bt)return;let Et=o$4();if(typeof ResizeObserver<"u"){let At=new ResizeObserver(()=>vt.current(bt));At.observe(bt),Et.add(()=>At.disconnect())}if(typeof IntersectionObserver<"u"){let At=new IntersectionObserver(()=>vt.current(bt));At.observe(bt),Et.add(()=>At.disconnect())}return()=>Et.dispose()},[$,vt,_e])}let f$2=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(_e=>`${_e}:not([tabindex='-1'])`).join(","),p$1=["[data-autofocus]"].map(_e=>`${_e}:not([tabindex='-1'])`).join(",");var F$3=(_e=>(_e[_e.First=1]="First",_e[_e.Previous=2]="Previous",_e[_e.Next=4]="Next",_e[_e.Last=8]="Last",_e[_e.WrapAround=16]="WrapAround",_e[_e.NoScroll=32]="NoScroll",_e[_e.AutoFocus=64]="AutoFocus",_e))(F$3||{}),T$1=(_e=>(_e[_e.Error=0]="Error",_e[_e.Overflow=1]="Overflow",_e[_e.Success=2]="Success",_e[_e.Underflow=3]="Underflow",_e))(T$1||{}),y$2=(_e=>(_e[_e.Previous=-1]="Previous",_e[_e.Next=1]="Next",_e))(y$2||{});function b(_e=document.body){return _e==null?[]:Array.from(_e.querySelectorAll(f$2)).sort(($,ht)=>Math.sign(($.tabIndex||Number.MAX_SAFE_INTEGER)-(ht.tabIndex||Number.MAX_SAFE_INTEGER)))}function S$2(_e=document.body){return _e==null?[]:Array.from(_e.querySelectorAll(p$1)).sort(($,ht)=>Math.sign(($.tabIndex||Number.MAX_SAFE_INTEGER)-(ht.tabIndex||Number.MAX_SAFE_INTEGER)))}var h=(_e=>(_e[_e.Strict=0]="Strict",_e[_e.Loose=1]="Loose",_e))(h||{});function A$1(_e,$=0){var ht;return _e===((ht=u$7(_e))==null?void 0:ht.body)?!1:u$6($,{0(){return _e.matches(f$2)},1(){let vt=_e;for(;vt!==null;){if(vt.matches(f$2))return!0;vt=vt.parentElement}return!1}})}function G(_e){let $=u$7(_e);o$4().nextFrame(()=>{$&&!A$1($.activeElement,0)&&I$1(_e)})}var H=(_e=>(_e[_e.Keyboard=0]="Keyboard",_e[_e.Mouse=1]="Mouse",_e))(H||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",_e=>{_e.metaKey||_e.altKey||_e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",_e=>{_e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:_e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function I$1(_e){_e==null||_e.focus({preventScroll:!0})}let w=["textarea","input"].join(",");function O(_e){var $,ht;return(ht=($=_e==null?void 0:_e.matches)==null?void 0:$.call(_e,w))!=null?ht:!1}function _(_e,$=ht=>ht){return _e.slice().sort((ht,vt)=>{let bt=$(ht),Et=$(vt);if(bt===null||Et===null)return 0;let At=bt.compareDocumentPosition(Et);return At&Node.DOCUMENT_POSITION_FOLLOWING?-1:At&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function j$2(_e,$){return P(b(),$,{relativeTo:_e})}function P(_e,$,{sorted:ht=!0,relativeTo:vt=null,skipElements:bt=[]}={}){let Et=Array.isArray(_e)?_e.length>0?_e[0].ownerDocument:document:_e.ownerDocument,At=Array.isArray(_e)?ht?_(_e):_e:$&64?S$2(_e):b(_e);bt.length>0&&At.length>1&&(At=At.filter(kt=>!bt.some(Mt=>Mt!=null&&"current"in Mt?(Mt==null?void 0:Mt.current)===kt:Mt===kt))),vt=vt??Et.activeElement;let _t=(()=>{if($&5)return 1;if($&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),wt=(()=>{if($&1)return 0;if($&2)return Math.max(0,At.indexOf(vt))-1;if($&4)return Math.max(0,At.indexOf(vt))+1;if($&8)return At.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),Ct=$&32?{preventScroll:!0}:{},xt=0,Pt=At.length,Rt;do{if(xt>=Pt||xt+Pt<=0)return 0;let kt=wt+xt;if($&16)kt=(kt+Pt)%Pt;else{if(kt<0)return 3;if(kt>=Pt)return 1}Rt=At[kt],Rt==null||Rt.focus(Ct),xt+=_t}while(Rt!==Et.activeElement);return $&6&&O(Rt)&&Rt.select(),2}function t$1(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function i$3(){return/Android/gi.test(window.navigator.userAgent)}function n$2(){return t$1()||i$3()}function i$2(_e,$,ht,vt){let bt=s$4(ht);reactExports.useEffect(()=>{if(!_e)return;function Et(At){bt.current(At)}return document.addEventListener($,Et,vt),()=>document.removeEventListener($,Et,vt)},[_e,$,vt])}function s$2(_e,$,ht,vt){let bt=s$4(ht);reactExports.useEffect(()=>{if(!_e)return;function Et(At){bt.current(At)}return window.addEventListener($,Et,vt),()=>window.removeEventListener($,Et,vt)},[_e,$,vt])}const d$2=30;function F$2(_e,$,ht){let vt=x(_e,"outside-click"),bt=s$4(ht),Et=reactExports.useCallback(function(wt,Ct){if(wt.defaultPrevented)return;let xt=Ct(wt);if(xt===null||!xt.getRootNode().contains(xt)||!xt.isConnected)return;let Pt=function Rt(kt){return typeof kt=="function"?Rt(kt()):Array.isArray(kt)||kt instanceof Set?kt:[kt]}($);for(let Rt of Pt){if(Rt===null)continue;let kt=Rt instanceof HTMLElement?Rt:Rt.current;if(kt!=null&&kt.contains(xt)||wt.composed&&wt.composedPath().includes(kt))return}return!A$1(xt,h.Loose)&&xt.tabIndex!==-1&&wt.preventDefault(),bt.current(wt,xt)},[bt]),At=reactExports.useRef(null);i$2(vt,"pointerdown",wt=>{var Ct,xt;At.current=((xt=(Ct=wt.composedPath)==null?void 0:Ct.call(wt))==null?void 0:xt[0])||wt.target},!0),i$2(vt,"mousedown",wt=>{var Ct,xt;At.current=((xt=(Ct=wt.composedPath)==null?void 0:Ct.call(wt))==null?void 0:xt[0])||wt.target},!0),i$2(vt,"click",wt=>{n$2()||At.current&&(Et(wt,()=>At.current),At.current=null)},!0);let _t=reactExports.useRef({x:0,y:0});i$2(vt,"touchstart",wt=>{_t.current.x=wt.touches[0].clientX,_t.current.y=wt.touches[0].clientY},!0),i$2(vt,"touchend",wt=>{let Ct={x:wt.changedTouches[0].clientX,y:wt.changedTouches[0].clientY};if(!(Math.abs(Ct.x-_t.current.x)>=d$2||Math.abs(Ct.y-_t.current.y)>=d$2))return Et(wt,()=>wt.target instanceof HTMLElement?wt.target:null)},!0),s$2(vt,"blur",wt=>Et(wt,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function n$1(..._e){return reactExports.useMemo(()=>u$7(..._e),[..._e])}function i$1(_e){var $;if(_e.type)return _e.type;let ht=($=_e.as)!=null?$:"button";if(typeof ht=="string"&&ht.toLowerCase()==="button")return"button"}function T(_e,$){let[ht,vt]=reactExports.useState(()=>i$1(_e));return n$3(()=>{vt(i$1(_e))},[_e.type,_e.as]),n$3(()=>{ht||$.current&&$.current instanceof HTMLButtonElement&&!$.current.hasAttribute("type")&&vt("button")},[ht,$]),ht}function d$1(){let _e;return{before({doc:$}){var ht;let vt=$.documentElement,bt=(ht=$.defaultView)!=null?ht:window;_e=Math.max(0,bt.innerWidth-vt.clientWidth)},after({doc:$,d:ht}){let vt=$.documentElement,bt=Math.max(0,vt.clientWidth-vt.offsetWidth),Et=Math.max(0,_e-bt);ht.style(vt,"paddingRight",`${Et}px`)}}}function d(){return t$1()?{before({doc:_e,d:$,meta:ht}){function vt(bt){return ht.containers.flatMap(Et=>Et()).some(Et=>Et.contains(bt))}$.microTask(()=>{var bt;if(window.getComputedStyle(_e.documentElement).scrollBehavior!=="auto"){let _t=o$4();_t.style(_e.documentElement,"scrollBehavior","auto"),$.add(()=>$.microTask(()=>_t.dispose()))}let Et=(bt=window.scrollY)!=null?bt:window.pageYOffset,At=null;$.addEventListener(_e,"click",_t=>{if(_t.target instanceof HTMLElement)try{let wt=_t.target.closest("a");if(!wt)return;let{hash:Ct}=new URL(wt.href),xt=_e.querySelector(Ct);xt&&!vt(xt)&&(At=xt)}catch{}},!0),$.addEventListener(_e,"touchstart",_t=>{if(_t.target instanceof HTMLElement)if(vt(_t.target)){let wt=_t.target;for(;wt.parentElement&&vt(wt.parentElement);)wt=wt.parentElement;$.style(wt,"overscrollBehavior","contain")}else $.style(_t.target,"touchAction","none")}),$.addEventListener(_e,"touchmove",_t=>{if(_t.target instanceof HTMLElement){if(_t.target.tagName==="INPUT")return;if(vt(_t.target)){let wt=_t.target;for(;wt.parentElement&&wt.dataset.headlessuiPortal!==""&&!(wt.scrollHeight>wt.clientHeight||wt.scrollWidth>wt.clientWidth);)wt=wt.parentElement;wt.dataset.headlessuiPortal===""&&_t.preventDefault()}else _t.preventDefault()}},{passive:!1}),$.add(()=>{var _t;let wt=(_t=window.scrollY)!=null?_t:window.pageYOffset;Et!==wt&&window.scrollTo(0,Et),At&&At.isConnected&&(At.scrollIntoView({block:"nearest"}),At=null)})})}}:{}}function r(){return{before({doc:_e,d:$}){$.style(_e.documentElement,"overflow","hidden")}}}function m(_e){let $={};for(let ht of _e)Object.assign($,ht($));return $}let a$3=a$4(()=>new Map,{PUSH(_e,$){var ht;let vt=(ht=this.get(_e))!=null?ht:{doc:_e,count:0,d:o$4(),meta:new Set};return vt.count++,vt.meta.add($),this.set(_e,vt),this},POP(_e,$){let ht=this.get(_e);return ht&&(ht.count--,ht.meta.delete($)),this},SCROLL_PREVENT({doc:_e,d:$,meta:ht}){let vt={doc:_e,d:$,meta:m(ht)},bt=[d(),d$1(),r()];bt.forEach(({before:Et})=>Et==null?void 0:Et(vt)),bt.forEach(({after:Et})=>Et==null?void 0:Et(vt))},SCROLL_ALLOW({d:_e}){_e.dispose()},TEARDOWN({doc:_e}){this.delete(_e)}});a$3.subscribe(()=>{let _e=a$3.getSnapshot(),$=new Map;for(let[ht]of _e)$.set(ht,ht.documentElement.style.overflow);for(let ht of _e.values()){let vt=$.get(ht.doc)==="hidden",bt=ht.count!==0;(bt&&!vt||!bt&&vt)&&a$3.dispatch(ht.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",ht),ht.count===0&&a$3.dispatch("TEARDOWN",ht)}});function a$2(_e,$,ht=()=>({containers:[]})){let vt=o$1(a$3),bt=$?vt.get($):void 0,Et=bt?bt.count>0:!1;return n$3(()=>{if(!(!$||!_e))return a$3.dispatch("PUSH",$,ht),()=>a$3.dispatch("POP",$,ht)},[_e,$]),Et}function f$1(_e,$,ht=()=>[document.body]){let vt=x(_e,"scroll-lock");a$2(vt,$,bt=>{var Et;return{containers:[...(Et=bt.containers)!=null?Et:[],ht]}})}function t(_e){return[_e.screenX,_e.screenY]}function u$2(){let _e=reactExports.useRef([-1,-1]);return{wasMoved($){let ht=t($);return _e.current[0]===ht[0]&&_e.current[1]===ht[1]?!1:(_e.current=ht,!0)},update($){_e.current=t($)}}}function l$1(_e){let $={called:!1};return(...ht)=>{if(!$.called)return $.called=!0,_e(...ht)}}function c$3(_e=0){let[$,ht]=reactExports.useState(_e),vt=reactExports.useCallback(wt=>ht(wt),[$]),bt=reactExports.useCallback(wt=>ht(Ct=>Ct|wt),[$]),Et=reactExports.useCallback(wt=>($&wt)===wt,[$]),At=reactExports.useCallback(wt=>ht(Ct=>Ct&~wt),[ht]),_t=reactExports.useCallback(wt=>ht(Ct=>Ct^wt),[ht]);return{flags:$,setFlag:vt,addFlag:bt,hasFlag:Et,removeFlag:At,toggleFlag:_t}}var D$2=(_e=>(_e[_e.None=0]="None",_e[_e.Closed=1]="Closed",_e[_e.Enter=2]="Enter",_e[_e.Leave=4]="Leave",_e))(D$2||{});function A(_e){let $={};for(let ht in _e)_e[ht]===!0&&($[`data-${ht}`]="");return $}function V(_e,$,ht,vt){let[bt,Et]=reactExports.useState(ht),{hasFlag:At,addFlag:_t,removeFlag:wt}=c$3(_e&&bt?3:0),Ct=reactExports.useRef(!1),xt=reactExports.useRef(!1),Pt=p$3();return n$3(function Rt(){var kt;if(!_e)return;ht&&Et(!0);let Mt=$.current;return Mt?((kt=void 0)==null||kt.call(vt,ht),M$1(Mt,{inFlight:Ct,prepare(){xt.current?xt.current=!1:xt.current=Ct.current,Ct.current=!0,!xt.current&&(ht?(_t(3),wt(4)):(_t(4),wt(2)))},run(){xt.current?ht?(wt(3),_t(4)):(wt(4),_t(3)):ht?wt(1):_t(1)},done(){var Lt;xt.current&&typeof Mt.getAnimations=="function"&&Mt.getAnimations().length>0||(Ct.current=!1,wt(7),ht||Et(!1),(Lt=void 0)==null||Lt.call(vt,ht))}})):ht?(_t(3),Pt.nextFrame(()=>Rt())):void 0},[_e,ht,$,Pt]),_e?[bt,{closed:At(1),enter:At(2),leave:At(4),transition:At(2)||At(4)}]:[ht,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function M$1(_e,{prepare:$,run:ht,done:vt,inFlight:bt}){let Et=o$4();return R(_e,{prepare:$,inFlight:bt}),Et.nextFrame(()=>{Et.add(F$1(_e,vt)),ht()}),Et.dispose}function F$1(_e,$){let ht=l$1($),vt=o$4();if(!_e)return vt.dispose;let{transitionDuration:bt,transitionDelay:Et}=getComputedStyle(_e),[At,_t]=[bt,Et].map(Ct=>{let[xt=0]=Ct.split(",").filter(Boolean).map(Pt=>Pt.includes("ms")?parseFloat(Pt):parseFloat(Pt)*1e3).sort((Pt,Rt)=>Rt-Pt);return xt}),wt=At+_t;if(wt!==0){let Ct=vt.group(xt=>{let Pt=xt.setTimeout(()=>{ht(),xt.dispose()},wt);xt.addEventListener(_e,"transitionrun",Rt=>{Rt.target===Rt.currentTarget&&(Pt(),xt.addEventListener(_e,"transitioncancel",kt=>{kt.target===kt.currentTarget&&(ht(),Ct())}))})});vt.addEventListener(_e,"transitionend",xt=>{xt.target===xt.currentTarget&&(ht(),vt.dispose())})}else ht();return vt.dispose}function R(_e,{inFlight:$,prepare:ht}){if($!=null&&$.current){ht();return}let vt=_e.style.transition;_e.style.transition="none",ht(),_e.offsetHeight,_e.style.transition=vt}function F(_e,{container:$,accept:ht,walk:vt}){let bt=reactExports.useRef(ht),Et=reactExports.useRef(vt);reactExports.useEffect(()=>{bt.current=ht,Et.current=vt},[ht,vt]),n$3(()=>{if(!$||!_e)return;let At=u$7($);if(!At)return;let _t=bt.current,wt=Et.current,Ct=Object.assign(Pt=>_t(Pt),{acceptNode:_t}),xt=At.createTreeWalker($,NodeFilter.SHOW_ELEMENT,Ct,!1);for(;xt.nextNode();)wt(xt.currentNode)},[$,_e,bt,Et])}function getNodeName(_e){return isNode(_e)?(_e.nodeName||"").toLowerCase():"#document"}function getWindow(_e){var $;return(_e==null||($=_e.ownerDocument)==null?void 0:$.defaultView)||window}function getDocumentElement(_e){var $;return($=(isNode(_e)?_e.ownerDocument:_e.document)||window.document)==null?void 0:$.documentElement}function isNode(_e){return _e instanceof Node||_e instanceof getWindow(_e).Node}function isElement(_e){return _e instanceof Element||_e instanceof getWindow(_e).Element}function isHTMLElement(_e){return _e instanceof HTMLElement||_e instanceof getWindow(_e).HTMLElement}function isShadowRoot(_e){return typeof ShadowRoot>"u"?!1:_e instanceof ShadowRoot||_e instanceof getWindow(_e).ShadowRoot}function isOverflowElement(_e){const{overflow:$,overflowX:ht,overflowY:vt,display:bt}=getComputedStyle$2(_e);return/auto|scroll|overlay|hidden|clip/.test($+vt+ht)&&!["inline","contents"].includes(bt)}function isTableElement(_e){return["table","td","th"].includes(getNodeName(_e))}function isTopLayer(_e){return[":popover-open",":modal"].some($=>{try{return _e.matches($)}catch{return!1}})}function isContainingBlock(_e){const $=isWebKit(),ht=getComputedStyle$2(_e);return ht.transform!=="none"||ht.perspective!=="none"||(ht.containerType?ht.containerType!=="normal":!1)||!$&&(ht.backdropFilter?ht.backdropFilter!=="none":!1)||!$&&(ht.filter?ht.filter!=="none":!1)||["transform","perspective","filter"].some(vt=>(ht.willChange||"").includes(vt))||["paint","layout","strict","content"].some(vt=>(ht.contain||"").includes(vt))}function getContainingBlock(_e){let $=getParentNode(_e);for(;isHTMLElement($)&&!isLastTraversableNode($);){if(isTopLayer($))return null;if(isContainingBlock($))return $;$=getParentNode($)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(_e){return["html","body","#document"].includes(getNodeName(_e))}function getComputedStyle$2(_e){return getWindow(_e).getComputedStyle(_e)}function getNodeScroll(_e){return isElement(_e)?{scrollLeft:_e.scrollLeft,scrollTop:_e.scrollTop}:{scrollLeft:_e.pageXOffset,scrollTop:_e.pageYOffset}}function getParentNode(_e){if(getNodeName(_e)==="html")return _e;const $=_e.assignedSlot||_e.parentNode||isShadowRoot(_e)&&_e.host||getDocumentElement(_e);return isShadowRoot($)?$.host:$}function getNearestOverflowAncestor(_e){const $=getParentNode(_e);return isLastTraversableNode($)?_e.ownerDocument?_e.ownerDocument.body:_e.body:isHTMLElement($)&&isOverflowElement($)?$:getNearestOverflowAncestor($)}function getOverflowAncestors(_e,$,ht){var vt;$===void 0&&($=[]),ht===void 0&&(ht=!0);const bt=getNearestOverflowAncestor(_e),Et=bt===((vt=_e.ownerDocument)==null?void 0:vt.body),At=getWindow(bt);return Et?$.concat(At,At.visualViewport||[],isOverflowElement(bt)?bt:[],At.frameElement&&ht?getOverflowAncestors(At.frameElement):[]):$.concat(bt,getOverflowAncestors(bt,[],ht))}function getUserAgent(){const _e=navigator.userAgentData;return _e&&Array.isArray(_e.brands)?_e.brands.map($=>{let{brand:ht,version:vt}=$;return ht+"/"+vt}).join(" "):navigator.userAgent}const min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=_e=>({x:_e,y:_e}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(_e,$,ht){return max(_e,min($,ht))}function evaluate(_e,$){return typeof _e=="function"?_e($):_e}function getSide(_e){return _e.split("-")[0]}function getAlignment(_e){return _e.split("-")[1]}function getOppositeAxis(_e){return _e==="x"?"y":"x"}function getAxisLength(_e){return _e==="y"?"height":"width"}function getSideAxis(_e){return["top","bottom"].includes(getSide(_e))?"y":"x"}function getAlignmentAxis(_e){return getOppositeAxis(getSideAxis(_e))}function getAlignmentSides(_e,$,ht){ht===void 0&&(ht=!1);const vt=getAlignment(_e),bt=getAlignmentAxis(_e),Et=getAxisLength(bt);let At=bt==="x"?vt===(ht?"end":"start")?"right":"left":vt==="start"?"bottom":"top";return $.reference[Et]>$.floating[Et]&&(At=getOppositePlacement(At)),[At,getOppositePlacement(At)]}function getExpandedPlacements(_e){const $=getOppositePlacement(_e);return[getOppositeAlignmentPlacement(_e),$,getOppositeAlignmentPlacement($)]}function getOppositeAlignmentPlacement(_e){return _e.replace(/start|end/g,$=>oppositeAlignmentMap[$])}function getSideList(_e,$,ht){const vt=["left","right"],bt=["right","left"],Et=["top","bottom"],At=["bottom","top"];switch(_e){case"top":case"bottom":return ht?$?bt:vt:$?vt:bt;case"left":case"right":return $?Et:At;default:return[]}}function getOppositeAxisPlacements(_e,$,ht,vt){const bt=getAlignment(_e);let Et=getSideList(getSide(_e),ht==="start",vt);return bt&&(Et=Et.map(At=>At+"-"+bt),$&&(Et=Et.concat(Et.map(getOppositeAlignmentPlacement)))),Et}function getOppositePlacement(_e){return _e.replace(/left|right|bottom|top/g,$=>oppositeSideMap[$])}function expandPaddingObject(_e){return{top:0,right:0,bottom:0,left:0,..._e}}function getPaddingObject(_e){return typeof _e!="number"?expandPaddingObject(_e):{top:_e,right:_e,bottom:_e,left:_e}}function rectToClientRect(_e){const{x:$,y:ht,width:vt,height:bt}=_e;return{width:vt,height:bt,top:ht,left:$,right:$+vt,bottom:ht+bt,x:$,y:ht}}function computeCoordsFromPlacement(_e,$,ht){let{reference:vt,floating:bt}=_e;const Et=getSideAxis($),At=getAlignmentAxis($),_t=getAxisLength(At),wt=getSide($),Ct=Et==="y",xt=vt.x+vt.width/2-bt.width/2,Pt=vt.y+vt.height/2-bt.height/2,Rt=vt[_t]/2-bt[_t]/2;let kt;switch(wt){case"top":kt={x:xt,y:vt.y-bt.height};break;case"bottom":kt={x:xt,y:vt.y+vt.height};break;case"right":kt={x:vt.x+vt.width,y:Pt};break;case"left":kt={x:vt.x-bt.width,y:Pt};break;default:kt={x:vt.x,y:vt.y}}switch(getAlignment($)){case"start":kt[At]-=Rt*(ht&&Ct?-1:1);break;case"end":kt[At]+=Rt*(ht&&Ct?-1:1);break}return kt}const computePosition$1=async(_e,$,ht)=>{const{placement:vt="bottom",strategy:bt="absolute",middleware:Et=[],platform:At}=ht,_t=Et.filter(Boolean),wt=await(At.isRTL==null?void 0:At.isRTL($));let Ct=await At.getElementRects({reference:_e,floating:$,strategy:bt}),{x:xt,y:Pt}=computeCoordsFromPlacement(Ct,vt,wt),Rt=vt,kt={},Mt=0;for(let Lt=0;Lt<_t.length;Lt++){const{name:Ot,fn:Ft}=_t[Lt],{x:Dt,y:$t,data:Bt,reset:Nt}=await Ft({x:xt,y:Pt,initialPlacement:vt,placement:Rt,strategy:bt,middlewareData:kt,rects:Ct,platform:At,elements:{reference:_e,floating:$}});xt=Dt??xt,Pt=$t??Pt,kt={...kt,[Ot]:{...kt[Ot],...Bt}},Nt&&Mt<=50&&(Mt++,typeof Nt=="object"&&(Nt.placement&&(Rt=Nt.placement),Nt.rects&&(Ct=Nt.rects===!0?await At.getElementRects({reference:_e,floating:$,strategy:bt}):Nt.rects),{x:xt,y:Pt}=computeCoordsFromPlacement(Ct,Rt,wt)),Lt=-1)}return{x:xt,y:Pt,placement:Rt,strategy:bt,middlewareData:kt}};async function detectOverflow$1(_e,$){var ht;$===void 0&&($={});const{x:vt,y:bt,platform:Et,rects:At,elements:_t,strategy:wt}=_e,{boundary:Ct="clippingAncestors",rootBoundary:xt="viewport",elementContext:Pt="floating",altBoundary:Rt=!1,padding:kt=0}=evaluate($,_e),Mt=getPaddingObject(kt),Ot=_t[Rt?Pt==="floating"?"reference":"floating":Pt],Ft=rectToClientRect(await Et.getClippingRect({element:(ht=await(Et.isElement==null?void 0:Et.isElement(Ot)))==null||ht?Ot:Ot.contextElement||await(Et.getDocumentElement==null?void 0:Et.getDocumentElement(_t.floating)),boundary:Ct,rootBoundary:xt,strategy:wt})),Dt=Pt==="floating"?{x:vt,y:bt,width:At.floating.width,height:At.floating.height}:At.reference,$t=await(Et.getOffsetParent==null?void 0:Et.getOffsetParent(_t.floating)),Bt=await(Et.isElement==null?void 0:Et.isElement($t))?await(Et.getScale==null?void 0:Et.getScale($t))||{x:1,y:1}:{x:1,y:1},Nt=rectToClientRect(Et.convertOffsetParentRelativeRectToViewportRelativeRect?await Et.convertOffsetParentRelativeRectToViewportRelativeRect({elements:_t,rect:Dt,offsetParent:$t,strategy:wt}):Dt);return{top:(Ft.top-Nt.top+Mt.top)/Bt.y,bottom:(Nt.bottom-Ft.bottom+Mt.bottom)/Bt.y,left:(Ft.left-Nt.left+Mt.left)/Bt.x,right:(Nt.right-Ft.right+Mt.right)/Bt.x}}const flip$2=function(_e){return _e===void 0&&(_e={}),{name:"flip",options:_e,async fn($){var ht,vt;const{placement:bt,middlewareData:Et,rects:At,initialPlacement:_t,platform:wt,elements:Ct}=$,{mainAxis:xt=!0,crossAxis:Pt=!0,fallbackPlacements:Rt,fallbackStrategy:kt="bestFit",fallbackAxisSideDirection:Mt="none",flipAlignment:Lt=!0,...Ot}=evaluate(_e,$);if((ht=Et.arrow)!=null&&ht.alignmentOffset)return{};const Ft=getSide(bt),Dt=getSideAxis(_t),$t=getSide(_t)===_t,Bt=await(wt.isRTL==null?void 0:wt.isRTL(Ct.floating)),Nt=Rt||($t||!Lt?[getOppositePlacement(_t)]:getExpandedPlacements(_t)),Ht=Mt!=="none";!Rt&&Ht&&Nt.push(...getOppositeAxisPlacements(_t,Lt,Mt,Bt));const Vt=[_t,...Nt],jt=await detectOverflow$1($,Ot),Xt=[];let Jt=((vt=Et.flip)==null?void 0:vt.overflows)||[];if(xt&&Xt.push(jt[Ft]),Pt){const _n=getAlignmentSides(bt,At,Bt);Xt.push(jt[_n[0]],jt[_n[1]])}if(Jt=[...Jt,{placement:bt,overflows:Xt}],!Xt.every(_n=>_n<=0)){var Gt,en;const _n=(((Gt=Et.flip)==null?void 0:Gt.index)||0)+1,ln=Vt[_n];if(ln)return{data:{index:_n,overflows:Jt},reset:{placement:ln}};let En=(en=Jt.filter(un=>un.overflows[0]<=0).sort((un,hn)=>un.overflows[1]-hn.overflows[1])[0])==null?void 0:en.placement;if(!En)switch(kt){case"bestFit":{var on;const un=(on=Jt.filter(hn=>{if(Ht){const nn=getSideAxis(hn.placement);return nn===Dt||nn==="y"}return!0}).map(hn=>[hn.placement,hn.overflows.filter(nn=>nn>0).reduce((nn,mn)=>nn+mn,0)]).sort((hn,nn)=>hn[1]-nn[1])[0])==null?void 0:on[0];un&&(En=un);break}case"initialPlacement":En=_t;break}if(bt!==En)return{reset:{placement:En}}}return{}}}};async function convertValueToCoords(_e,$){const{placement:ht,platform:vt,elements:bt}=_e,Et=await(vt.isRTL==null?void 0:vt.isRTL(bt.floating)),At=getSide(ht),_t=getAlignment(ht),wt=getSideAxis(ht)==="y",Ct=["left","top"].includes(At)?-1:1,xt=Et&&wt?-1:1,Pt=evaluate($,_e);let{mainAxis:Rt,crossAxis:kt,alignmentAxis:Mt}=typeof Pt=="number"?{mainAxis:Pt,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...Pt};return _t&&typeof Mt=="number"&&(kt=_t==="end"?Mt*-1:Mt),wt?{x:kt*xt,y:Rt*Ct}:{x:Rt*Ct,y:kt*xt}}const offset$2=function(_e){return _e===void 0&&(_e=0),{name:"offset",options:_e,async fn($){var ht,vt;const{x:bt,y:Et,placement:At,middlewareData:_t}=$,wt=await convertValueToCoords($,_e);return At===((ht=_t.offset)==null?void 0:ht.placement)&&(vt=_t.arrow)!=null&&vt.alignmentOffset?{}:{x:bt+wt.x,y:Et+wt.y,data:{...wt,placement:At}}}}},shift$2=function(_e){return _e===void 0&&(_e={}),{name:"shift",options:_e,async fn($){const{x:ht,y:vt,placement:bt}=$,{mainAxis:Et=!0,crossAxis:At=!1,limiter:_t={fn:Ot=>{let{x:Ft,y:Dt}=Ot;return{x:Ft,y:Dt}}},...wt}=evaluate(_e,$),Ct={x:ht,y:vt},xt=await detectOverflow$1($,wt),Pt=getSideAxis(getSide(bt)),Rt=getOppositeAxis(Pt);let kt=Ct[Rt],Mt=Ct[Pt];if(Et){const Ot=Rt==="y"?"top":"left",Ft=Rt==="y"?"bottom":"right",Dt=kt+xt[Ot],$t=kt-xt[Ft];kt=clamp$1(Dt,kt,$t)}if(At){const Ot=Pt==="y"?"top":"left",Ft=Pt==="y"?"bottom":"right",Dt=Mt+xt[Ot],$t=Mt-xt[Ft];Mt=clamp$1(Dt,Mt,$t)}const Lt=_t.fn({...$,[Rt]:kt,[Pt]:Mt});return{...Lt,data:{x:Lt.x-ht,y:Lt.y-vt}}}}},size$2=function(_e){return _e===void 0&&(_e={}),{name:"size",options:_e,async fn($){const{placement:ht,rects:vt,platform:bt,elements:Et}=$,{apply:At=()=>{},..._t}=evaluate(_e,$),wt=await detectOverflow$1($,_t),Ct=getSide(ht),xt=getAlignment(ht),Pt=getSideAxis(ht)==="y",{width:Rt,height:kt}=vt.floating;let Mt,Lt;Ct==="top"||Ct==="bottom"?(Mt=Ct,Lt=xt===(await(bt.isRTL==null?void 0:bt.isRTL(Et.floating))?"start":"end")?"left":"right"):(Lt=Ct,Mt=xt==="end"?"top":"bottom");const Ot=kt-wt.top-wt.bottom,Ft=Rt-wt.left-wt.right,Dt=min(kt-wt[Mt],Ot),$t=min(Rt-wt[Lt],Ft),Bt=!$.middlewareData.shift;let Nt=Dt,Ht=$t;if(Pt?Ht=xt||Bt?min($t,Ft):Ft:Nt=xt||Bt?min(Dt,Ot):Ot,Bt&&!xt){const jt=max(wt.left,0),Xt=max(wt.right,0),Jt=max(wt.top,0),Gt=max(wt.bottom,0);Pt?Ht=Rt-2*(jt!==0||Xt!==0?jt+Xt:max(wt.left,wt.right)):Nt=kt-2*(Jt!==0||Gt!==0?Jt+Gt:max(wt.top,wt.bottom))}await At({...$,availableWidth:Ht,availableHeight:Nt});const Vt=await bt.getDimensions(Et.floating);return Rt!==Vt.width||kt!==Vt.height?{reset:{rects:!0}}:{}}}};function getCssDimensions(_e){const $=getComputedStyle$2(_e);let ht=parseFloat($.width)||0,vt=parseFloat($.height)||0;const bt=isHTMLElement(_e),Et=bt?_e.offsetWidth:ht,At=bt?_e.offsetHeight:vt,_t=round(ht)!==Et||round(vt)!==At;return _t&&(ht=Et,vt=At),{width:ht,height:vt,$:_t}}function unwrapElement(_e){return isElement(_e)?_e:_e.contextElement}function getScale(_e){const $=unwrapElement(_e);if(!isHTMLElement($))return createCoords(1);const ht=$.getBoundingClientRect(),{width:vt,height:bt,$:Et}=getCssDimensions($);let At=(Et?round(ht.width):ht.width)/vt,_t=(Et?round(ht.height):ht.height)/bt;return(!At||!Number.isFinite(At))&&(At=1),(!_t||!Number.isFinite(_t))&&(_t=1),{x:At,y:_t}}const noOffsets=createCoords(0);function getVisualOffsets(_e){const $=getWindow(_e);return!isWebKit()||!$.visualViewport?noOffsets:{x:$.visualViewport.offsetLeft,y:$.visualViewport.offsetTop}}function shouldAddVisualOffsets(_e,$,ht){return $===void 0&&($=!1),!ht||$&&ht!==getWindow(_e)?!1:$}function getBoundingClientRect(_e,$,ht,vt){$===void 0&&($=!1),ht===void 0&&(ht=!1);const bt=_e.getBoundingClientRect(),Et=unwrapElement(_e);let At=createCoords(1);$&&(vt?isElement(vt)&&(At=getScale(vt)):At=getScale(_e));const _t=shouldAddVisualOffsets(Et,ht,vt)?getVisualOffsets(Et):createCoords(0);let wt=(bt.left+_t.x)/At.x,Ct=(bt.top+_t.y)/At.y,xt=bt.width/At.x,Pt=bt.height/At.y;if(Et){const Rt=getWindow(Et),kt=vt&&isElement(vt)?getWindow(vt):vt;let Mt=Rt,Lt=Mt.frameElement;for(;Lt&&vt&&kt!==Mt;){const Ot=getScale(Lt),Ft=Lt.getBoundingClientRect(),Dt=getComputedStyle$2(Lt),$t=Ft.left+(Lt.clientLeft+parseFloat(Dt.paddingLeft))*Ot.x,Bt=Ft.top+(Lt.clientTop+parseFloat(Dt.paddingTop))*Ot.y;wt*=Ot.x,Ct*=Ot.y,xt*=Ot.x,Pt*=Ot.y,wt+=$t,Ct+=Bt,Mt=getWindow(Lt),Lt=Mt.frameElement}}return rectToClientRect({width:xt,height:Pt,x:wt,y:Ct})}function convertOffsetParentRelativeRectToViewportRelativeRect(_e){let{elements:$,rect:ht,offsetParent:vt,strategy:bt}=_e;const Et=bt==="fixed",At=getDocumentElement(vt),_t=$?isTopLayer($.floating):!1;if(vt===At||_t&&Et)return ht;let wt={scrollLeft:0,scrollTop:0},Ct=createCoords(1);const xt=createCoords(0),Pt=isHTMLElement(vt);if((Pt||!Pt&&!Et)&&((getNodeName(vt)!=="body"||isOverflowElement(At))&&(wt=getNodeScroll(vt)),isHTMLElement(vt))){const Rt=getBoundingClientRect(vt);Ct=getScale(vt),xt.x=Rt.x+vt.clientLeft,xt.y=Rt.y+vt.clientTop}return{width:ht.width*Ct.x,height:ht.height*Ct.y,x:ht.x*Ct.x-wt.scrollLeft*Ct.x+xt.x,y:ht.y*Ct.y-wt.scrollTop*Ct.y+xt.y}}function getClientRects(_e){return Array.from(_e.getClientRects())}function getWindowScrollBarX(_e){return getBoundingClientRect(getDocumentElement(_e)).left+getNodeScroll(_e).scrollLeft}function getDocumentRect(_e){const $=getDocumentElement(_e),ht=getNodeScroll(_e),vt=_e.ownerDocument.body,bt=max($.scrollWidth,$.clientWidth,vt.scrollWidth,vt.clientWidth),Et=max($.scrollHeight,$.clientHeight,vt.scrollHeight,vt.clientHeight);let At=-ht.scrollLeft+getWindowScrollBarX(_e);const _t=-ht.scrollTop;return getComputedStyle$2(vt).direction==="rtl"&&(At+=max($.clientWidth,vt.clientWidth)-bt),{width:bt,height:Et,x:At,y:_t}}function getViewportRect(_e,$){const ht=getWindow(_e),vt=getDocumentElement(_e),bt=ht.visualViewport;let Et=vt.clientWidth,At=vt.clientHeight,_t=0,wt=0;if(bt){Et=bt.width,At=bt.height;const Ct=isWebKit();(!Ct||Ct&&$==="fixed")&&(_t=bt.offsetLeft,wt=bt.offsetTop)}return{width:Et,height:At,x:_t,y:wt}}function getInnerBoundingClientRect(_e,$){const ht=getBoundingClientRect(_e,!0,$==="fixed"),vt=ht.top+_e.clientTop,bt=ht.left+_e.clientLeft,Et=isHTMLElement(_e)?getScale(_e):createCoords(1),At=_e.clientWidth*Et.x,_t=_e.clientHeight*Et.y,wt=bt*Et.x,Ct=vt*Et.y;return{width:At,height:_t,x:wt,y:Ct}}function getClientRectFromClippingAncestor(_e,$,ht){let vt;if($==="viewport")vt=getViewportRect(_e,ht);else if($==="document")vt=getDocumentRect(getDocumentElement(_e));else if(isElement($))vt=getInnerBoundingClientRect($,ht);else{const bt=getVisualOffsets(_e);vt={...$,x:$.x-bt.x,y:$.y-bt.y}}return rectToClientRect(vt)}function hasFixedPositionAncestor(_e,$){const ht=getParentNode(_e);return ht===$||!isElement(ht)||isLastTraversableNode(ht)?!1:getComputedStyle$2(ht).position==="fixed"||hasFixedPositionAncestor(ht,$)}function getClippingElementAncestors(_e,$){const ht=$.get(_e);if(ht)return ht;let vt=getOverflowAncestors(_e,[],!1).filter(_t=>isElement(_t)&&getNodeName(_t)!=="body"),bt=null;const Et=getComputedStyle$2(_e).position==="fixed";let At=Et?getParentNode(_e):_e;for(;isElement(At)&&!isLastTraversableNode(At);){const _t=getComputedStyle$2(At),wt=isContainingBlock(At);!wt&&_t.position==="fixed"&&(bt=null),(Et?!wt&&!bt:!wt&&_t.position==="static"&&!!bt&&["absolute","fixed"].includes(bt.position)||isOverflowElement(At)&&!wt&&hasFixedPositionAncestor(_e,At))?vt=vt.filter(xt=>xt!==At):bt=_t,At=getParentNode(At)}return $.set(_e,vt),vt}function getClippingRect(_e){let{element:$,boundary:ht,rootBoundary:vt,strategy:bt}=_e;const At=[...ht==="clippingAncestors"?isTopLayer($)?[]:getClippingElementAncestors($,this._c):[].concat(ht),vt],_t=At[0],wt=At.reduce((Ct,xt)=>{const Pt=getClientRectFromClippingAncestor($,xt,bt);return Ct.top=max(Pt.top,Ct.top),Ct.right=min(Pt.right,Ct.right),Ct.bottom=min(Pt.bottom,Ct.bottom),Ct.left=max(Pt.left,Ct.left),Ct},getClientRectFromClippingAncestor($,_t,bt));return{width:wt.right-wt.left,height:wt.bottom-wt.top,x:wt.left,y:wt.top}}function getDimensions(_e){const{width:$,height:ht}=getCssDimensions(_e);return{width:$,height:ht}}function getRectRelativeToOffsetParent(_e,$,ht){const vt=isHTMLElement($),bt=getDocumentElement($),Et=ht==="fixed",At=getBoundingClientRect(_e,!0,Et,$);let _t={scrollLeft:0,scrollTop:0};const wt=createCoords(0);if(vt||!vt&&!Et)if((getNodeName($)!=="body"||isOverflowElement(bt))&&(_t=getNodeScroll($)),vt){const Pt=getBoundingClientRect($,!0,Et,$);wt.x=Pt.x+$.clientLeft,wt.y=Pt.y+$.clientTop}else bt&&(wt.x=getWindowScrollBarX(bt));const Ct=At.left+_t.scrollLeft-wt.x,xt=At.top+_t.scrollTop-wt.y;return{x:Ct,y:xt,width:At.width,height:At.height}}function isStaticPositioned(_e){return getComputedStyle$2(_e).position==="static"}function getTrueOffsetParent(_e,$){return!isHTMLElement(_e)||getComputedStyle$2(_e).position==="fixed"?null:$?$(_e):_e.offsetParent}function getOffsetParent(_e,$){const ht=getWindow(_e);if(isTopLayer(_e))return ht;if(!isHTMLElement(_e)){let bt=getParentNode(_e);for(;bt&&!isLastTraversableNode(bt);){if(isElement(bt)&&!isStaticPositioned(bt))return bt;bt=getParentNode(bt)}return ht}let vt=getTrueOffsetParent(_e,$);for(;vt&&isTableElement(vt)&&isStaticPositioned(vt);)vt=getTrueOffsetParent(vt,$);return vt&&isLastTraversableNode(vt)&&isStaticPositioned(vt)&&!isContainingBlock(vt)?ht:vt||getContainingBlock(_e)||ht}const getElementRects=async function(_e){const $=this.getOffsetParent||getOffsetParent,ht=this.getDimensions,vt=await ht(_e.floating);return{reference:getRectRelativeToOffsetParent(_e.reference,await $(_e.floating),_e.strategy),floating:{x:0,y:0,width:vt.width,height:vt.height}}};function isRTL(_e){return getComputedStyle$2(_e).direction==="rtl"}const platform$2={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(_e,$){let ht=null,vt;const bt=getDocumentElement(_e);function Et(){var _t;clearTimeout(vt),(_t=ht)==null||_t.disconnect(),ht=null}function At(_t,wt){_t===void 0&&(_t=!1),wt===void 0&&(wt=1),Et();const{left:Ct,top:xt,width:Pt,height:Rt}=_e.getBoundingClientRect();if(_t||$(),!Pt||!Rt)return;const kt=floor(xt),Mt=floor(bt.clientWidth-(Ct+Pt)),Lt=floor(bt.clientHeight-(xt+Rt)),Ot=floor(Ct),Dt={rootMargin:-kt+"px "+-Mt+"px "+-Lt+"px "+-Ot+"px",threshold:max(0,min(1,wt))||1};let $t=!0;function Bt(Nt){const Ht=Nt[0].intersectionRatio;if(Ht!==wt){if(!$t)return At();Ht?At(!1,Ht):vt=setTimeout(()=>{At(!1,1e-7)},1e3)}$t=!1}try{ht=new IntersectionObserver(Bt,{...Dt,root:bt.ownerDocument})}catch{ht=new IntersectionObserver(Bt,Dt)}ht.observe(_e)}return At(!0),Et}function autoUpdate(_e,$,ht,vt){vt===void 0&&(vt={});const{ancestorScroll:bt=!0,ancestorResize:Et=!0,elementResize:At=typeof ResizeObserver=="function",layoutShift:_t=typeof IntersectionObserver=="function",animationFrame:wt=!1}=vt,Ct=unwrapElement(_e),xt=bt||Et?[...Ct?getOverflowAncestors(Ct):[],...getOverflowAncestors($)]:[];xt.forEach(Ft=>{bt&&Ft.addEventListener("scroll",ht,{passive:!0}),Et&&Ft.addEventListener("resize",ht)});const Pt=Ct&&_t?observeMove(Ct,ht):null;let Rt=-1,kt=null;At&&(kt=new ResizeObserver(Ft=>{let[Dt]=Ft;Dt&&Dt.target===Ct&&kt&&(kt.unobserve($),cancelAnimationFrame(Rt),Rt=requestAnimationFrame(()=>{var $t;($t=kt)==null||$t.observe($)})),ht()}),Ct&&!wt&&kt.observe(Ct),kt.observe($));let Mt,Lt=wt?getBoundingClientRect(_e):null;wt&&Ot();function Ot(){const Ft=getBoundingClientRect(_e);Lt&&(Ft.x!==Lt.x||Ft.y!==Lt.y||Ft.width!==Lt.width||Ft.height!==Lt.height)&&ht(),Lt=Ft,Mt=requestAnimationFrame(Ot)}return ht(),()=>{var Ft;xt.forEach(Dt=>{bt&&Dt.removeEventListener("scroll",ht),Et&&Dt.removeEventListener("resize",ht)}),Pt==null||Pt(),(Ft=kt)==null||Ft.disconnect(),kt=null,wt&&cancelAnimationFrame(Mt)}}const detectOverflow=detectOverflow$1,offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,computePosition=(_e,$,ht)=>{const vt=new Map,bt={platform:platform$2,...ht},Et={...bt.platform,_c:vt};return computePosition$1(_e,$,{...bt,platform:Et})};var index$1=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(_e,$){if(_e===$)return!0;if(typeof _e!=typeof $)return!1;if(typeof _e=="function"&&_e.toString()===$.toString())return!0;let ht,vt,bt;if(_e&&$&&typeof _e=="object"){if(Array.isArray(_e)){if(ht=_e.length,ht!==$.length)return!1;for(vt=ht;vt--!==0;)if(!deepEqual(_e[vt],$[vt]))return!1;return!0}if(bt=Object.keys(_e),ht=bt.length,ht!==Object.keys($).length)return!1;for(vt=ht;vt--!==0;)if(!{}.hasOwnProperty.call($,bt[vt]))return!1;for(vt=ht;vt--!==0;){const Et=bt[vt];if(!(Et==="_owner"&&_e.$$typeof)&&!deepEqual(_e[Et],$[Et]))return!1}return!0}return _e!==_e&&$!==$}function getDPR(_e){return typeof window>"u"?1:(_e.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(_e,$){const ht=getDPR(_e);return Math.round($*ht)/ht}function useLatestRef(_e){const $=reactExports.useRef(_e);return index$1(()=>{$.current=_e}),$}function useFloating$1(_e){_e===void 0&&(_e={});const{placement:$="bottom",strategy:ht="absolute",middleware:vt=[],platform:bt,elements:{reference:Et,floating:At}={},transform:_t=!0,whileElementsMounted:wt,open:Ct}=_e,[xt,Pt]=reactExports.useState({x:0,y:0,strategy:ht,placement:$,middlewareData:{},isPositioned:!1}),[Rt,kt]=reactExports.useState(vt);deepEqual(Rt,vt)||kt(vt);const[Mt,Lt]=reactExports.useState(null),[Ot,Ft]=reactExports.useState(null),Dt=reactExports.useCallback(un=>{un!==Ht.current&&(Ht.current=un,Lt(un))},[]),$t=reactExports.useCallback(un=>{un!==Vt.current&&(Vt.current=un,Ft(un))},[]),Bt=Et||Mt,Nt=At||Ot,Ht=reactExports.useRef(null),Vt=reactExports.useRef(null),jt=reactExports.useRef(xt),Xt=wt!=null,Jt=useLatestRef(wt),Gt=useLatestRef(bt),en=reactExports.useCallback(()=>{if(!Ht.current||!Vt.current)return;const un={placement:$,strategy:ht,middleware:Rt};Gt.current&&(un.platform=Gt.current),computePosition(Ht.current,Vt.current,un).then(hn=>{const nn={...hn,isPositioned:!0};on.current&&!deepEqual(jt.current,nn)&&(jt.current=nn,reactDomExports.flushSync(()=>{Pt(nn)}))})},[Rt,$,ht,Gt]);index$1(()=>{Ct===!1&&jt.current.isPositioned&&(jt.current.isPositioned=!1,Pt(un=>({...un,isPositioned:!1})))},[Ct]);const on=reactExports.useRef(!1);index$1(()=>(on.current=!0,()=>{on.current=!1}),[]),index$1(()=>{if(Bt&&(Ht.current=Bt),Nt&&(Vt.current=Nt),Bt&&Nt){if(Jt.current)return Jt.current(Bt,Nt,en);en()}},[Bt,Nt,en,Jt,Xt]);const _n=reactExports.useMemo(()=>({reference:Ht,floating:Vt,setReference:Dt,setFloating:$t}),[Dt,$t]),ln=reactExports.useMemo(()=>({reference:Bt,floating:Nt}),[Bt,Nt]),En=reactExports.useMemo(()=>{const un={position:ht,left:0,top:0};if(!ln.floating)return un;const hn=roundByDPR(ln.floating,xt.x),nn=roundByDPR(ln.floating,xt.y);return _t?{...un,transform:"translate("+hn+"px, "+nn+"px)",...getDPR(ln.floating)>=1.5&&{willChange:"transform"}}:{position:ht,left:hn,top:nn}},[ht,_t,ln.floating,xt.x,xt.y]);return reactExports.useMemo(()=>({...xt,update:en,refs:_n,elements:ln,floatingStyles:En}),[xt,en,_n,ln,En])}const offset=(_e,$)=>({...offset$1(_e),options:[_e,$]}),shift=(_e,$)=>({...shift$1(_e),options:[_e,$]}),flip=(_e,$)=>({...flip$1(_e),options:[_e,$]}),size=(_e,$)=>({...size$1(_e),options:[_e,$]}),SafeReact={...t$4},useInsertionEffect=SafeReact.useInsertionEffect,useSafeInsertionEffect=useInsertionEffect||(_e=>_e());function useEffectEvent(_e){const $=reactExports.useRef(()=>{});return useSafeInsertionEffect(()=>{$.current=_e}),reactExports.useCallback(function(){for(var ht=arguments.length,vt=new Array(ht),bt=0;bt<ht;bt++)vt[bt]=arguments[bt];return $.current==null?void 0:$.current(...vt)},[])}var index=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;let serverHandoffComplete=!1,count=0;const genId=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+count++;function useFloatingId(){const[_e,$]=reactExports.useState(()=>serverHandoffComplete?genId():void 0);return index(()=>{_e==null&&$(genId())},[]),reactExports.useEffect(()=>{serverHandoffComplete=!0},[]),_e}const useReactId=SafeReact.useId,useId=useReactId||useFloatingId;function createPubSub(){const _e=new Map;return{emit($,ht){var vt;(vt=_e.get($))==null||vt.forEach(bt=>bt(ht))},on($,ht){_e.set($,[..._e.get($)||[],ht])},off($,ht){var vt;_e.set($,((vt=_e.get($))==null?void 0:vt.filter(bt=>bt!==ht))||[])}}}const FloatingNodeContext=reactExports.createContext(null),FloatingTreeContext=reactExports.createContext(null),useFloatingParentNodeId=()=>{var _e;return((_e=reactExports.useContext(FloatingNodeContext))==null?void 0:_e.id)||null},useFloatingTree=()=>reactExports.useContext(FloatingTreeContext);function useFloatingRootContext(_e){const{open:$=!1,onOpenChange:ht,elements:vt}=_e,bt=useId(),Et=reactExports.useRef({}),[At]=reactExports.useState(()=>createPubSub()),_t=useFloatingParentNodeId()!=null,[wt,Ct]=reactExports.useState(vt.reference),xt=useEffectEvent((kt,Mt,Lt)=>{Et.current.openEvent=kt?Mt:void 0,At.emit("openchange",{open:kt,event:Mt,reason:Lt,nested:_t}),ht==null||ht(kt,Mt,Lt)}),Pt=reactExports.useMemo(()=>({setPositionReference:Ct}),[]),Rt=reactExports.useMemo(()=>({reference:wt||vt.reference||null,floating:vt.floating||null,domReference:vt.reference}),[wt,vt.reference,vt.floating]);return reactExports.useMemo(()=>({dataRef:Et,open:$,onOpenChange:xt,elements:Rt,events:At,floatingId:bt,refs:Pt}),[$,xt,Rt,At,bt,Pt])}function useFloating(_e){_e===void 0&&(_e={});const{nodeId:$}=_e,ht=useFloatingRootContext({..._e,elements:{reference:null,floating:null,..._e.elements}}),vt=_e.rootContext||ht,bt=vt.elements,[Et,At]=reactExports.useState(null),[_t,wt]=reactExports.useState(null),xt=(bt==null?void 0:bt.reference)||Et,Pt=reactExports.useRef(null),Rt=useFloatingTree();index(()=>{xt&&(Pt.current=xt)},[xt]);const kt=useFloating$1({..._e,elements:{...bt,..._t&&{reference:_t}}}),Mt=reactExports.useCallback($t=>{const Bt=isElement($t)?{getBoundingClientRect:()=>$t.getBoundingClientRect(),contextElement:$t}:$t;wt(Bt),kt.refs.setReference(Bt)},[kt.refs]),Lt=reactExports.useCallback($t=>{(isElement($t)||$t===null)&&(Pt.current=$t,At($t)),(isElement(kt.refs.reference.current)||kt.refs.reference.current===null||$t!==null&&!isElement($t))&&kt.refs.setReference($t)},[kt.refs]),Ot=reactExports.useMemo(()=>({...kt.refs,setReference:Lt,setPositionReference:Mt,domReference:Pt}),[kt.refs,Lt,Mt]),Ft=reactExports.useMemo(()=>({...kt.elements,domReference:xt}),[kt.elements,xt]),Dt=reactExports.useMemo(()=>({...kt,...vt,refs:Ot,elements:Ft,nodeId:$}),[kt,Ot,Ft,$,vt]);return index(()=>{vt.dataRef.current.floatingContext=Dt;const $t=Rt==null?void 0:Rt.nodesRef.current.find(Bt=>Bt.id===$);$t&&($t.context=Dt)}),reactExports.useMemo(()=>({...kt,context:Dt,refs:Ot,elements:Ft}),[kt,Ot,Ft,Dt])}const ACTIVE_KEY="active",SELECTED_KEY="selected";function mergeProps(_e,$,ht){const vt=new Map,bt=ht==="item";let Et=_e;if(bt&&_e){const{[ACTIVE_KEY]:At,[SELECTED_KEY]:_t,...wt}=_e;Et=wt}return{...ht==="floating"&&{tabIndex:-1},...Et,...$.map(At=>{const _t=At?At[ht]:null;return typeof _t=="function"?_e?_t(_e):null:_t}).concat(_e).reduce((At,_t)=>(_t&&Object.entries(_t).forEach(wt=>{let[Ct,xt]=wt;if(!(bt&&[ACTIVE_KEY,SELECTED_KEY].includes(Ct)))if(Ct.indexOf("on")===0){if(vt.has(Ct)||vt.set(Ct,[]),typeof xt=="function"){var Pt;(Pt=vt.get(Ct))==null||Pt.push(xt),At[Ct]=function(){for(var Rt,kt=arguments.length,Mt=new Array(kt),Lt=0;Lt<kt;Lt++)Mt[Lt]=arguments[Lt];return(Rt=vt.get(Ct))==null?void 0:Rt.map(Ot=>Ot(...Mt)).find(Ot=>Ot!==void 0)}}}else At[Ct]=xt}),At),{})}}function useInteractions(_e){_e===void 0&&(_e=[]);const $=_e.map(_t=>_t==null?void 0:_t.reference),ht=_e.map(_t=>_t==null?void 0:_t.floating),vt=_e.map(_t=>_t==null?void 0:_t.item),bt=reactExports.useCallback(_t=>mergeProps(_t,_e,"reference"),$),Et=reactExports.useCallback(_t=>mergeProps(_t,_e,"floating"),ht),At=reactExports.useCallback(_t=>mergeProps(_t,_e,"item"),vt);return reactExports.useMemo(()=>({getReferenceProps:bt,getFloatingProps:Et,getItemProps:At}),[bt,Et,At])}function getArgsWithCustomFloatingHeight(_e,$){return{..._e,rects:{..._e.rects,floating:{..._e.rects.floating,height:$}}}}const inner=_e=>({name:"inner",options:_e,async fn($){const{listRef:ht,overflowRef:vt,onFallbackChange:bt,offset:Et=0,index:At=0,minItemsVisible:_t=4,referenceOverflowThreshold:wt=0,scrollRef:Ct,...xt}=evaluate(_e,$),{rects:Pt,elements:{floating:Rt}}=$,kt=ht.current[At];if(!kt)return{};const Mt={...$,...await offset(-kt.offsetTop-Rt.clientTop-Pt.reference.height/2-kt.offsetHeight/2-Et).fn($)},Lt=(Ct==null?void 0:Ct.current)||Rt,Ot=await detectOverflow(getArgsWithCustomFloatingHeight(Mt,Lt.scrollHeight),xt),Ft=await detectOverflow(Mt,{...xt,elementContext:"reference"}),Dt=Math.max(0,Ot.top),$t=Mt.y+Dt,Bt=Math.max(0,Lt.scrollHeight-Dt-Math.max(0,Ot.bottom));return Lt.style.maxHeight=Bt+"px",Lt.scrollTop=Dt,bt&&(Lt.offsetHeight<kt.offsetHeight*Math.min(_t,ht.current.length-1)-1||Ft.top>=-wt||Ft.bottom>=-wt?reactDomExports.flushSync(()=>bt(!0)):reactDomExports.flushSync(()=>bt(!1))),vt&&(vt.current=await detectOverflow(getArgsWithCustomFloatingHeight({...Mt,y:$t},Lt.offsetHeight),xt)),{y:$t}}});function useInnerOffset(_e,$){const{open:ht,elements:vt}=_e,{enabled:bt=!0,overflowRef:Et,scrollRef:At,onChange:_t}=$,wt=useEffectEvent(_t),Ct=reactExports.useRef(!1),xt=reactExports.useRef(null),Pt=reactExports.useRef(null);reactExports.useEffect(()=>{if(!bt)return;function kt(Lt){if(Lt.ctrlKey||!Mt||Et.current==null)return;const Ot=Lt.deltaY,Ft=Et.current.top>=-.5,Dt=Et.current.bottom>=-.5,$t=Mt.scrollHeight-Mt.clientHeight,Bt=Ot<0?-1:1,Nt=Ot<0?"max":"min";Mt.scrollHeight<=Mt.clientHeight||(!Ft&&Ot>0||!Dt&&Ot<0?(Lt.preventDefault(),reactDomExports.flushSync(()=>{wt(Ht=>Ht+Math[Nt](Ot,$t*Bt))})):/firefox/i.test(getUserAgent())&&(Mt.scrollTop+=Ot))}const Mt=(At==null?void 0:At.current)||vt.floating;if(ht&&Mt)return Mt.addEventListener("wheel",kt),requestAnimationFrame(()=>{xt.current=Mt.scrollTop,Et.current!=null&&(Pt.current={...Et.current})}),()=>{xt.current=null,Pt.current=null,Mt.removeEventListener("wheel",kt)}},[bt,ht,vt.floating,Et,At,wt]);const Rt=reactExports.useMemo(()=>({onKeyDown(){Ct.current=!0},onWheel(){Ct.current=!1},onPointerMove(){Ct.current=!1},onScroll(){const kt=(At==null?void 0:At.current)||vt.floating;if(!(!Et.current||!kt||!Ct.current)){if(xt.current!==null){const Mt=kt.scrollTop-xt.current;(Et.current.bottom<-.5&&Mt<-1||Et.current.top<-.5&&Mt>1)&&reactDomExports.flushSync(()=>wt(Lt=>Lt+Mt))}requestAnimationFrame(()=>{xt.current=kt.scrollTop})}}}),[vt.floating,wt,Et,At]);return reactExports.useMemo(()=>bt?{floating:Rt}:{},[bt,Rt])}let y$1=reactExports.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});y$1.displayName="FloatingContext";let S$1=reactExports.createContext(null);S$1.displayName="PlacementContext";function xe(_e){return reactExports.useMemo(()=>_e?typeof _e=="string"?{to:_e}:_e:null,[_e])}function ye(){return reactExports.useContext(y$1).setReference}function Fe(){return reactExports.useContext(y$1).getReferenceProps}function be(){let{getFloatingProps:_e,slot:$}=reactExports.useContext(y$1);return reactExports.useCallback((...ht)=>Object.assign({},_e(...ht),{"data-anchor":$.anchor}),[_e,$])}function Re(_e=null){_e===!1&&(_e=null),typeof _e=="string"&&(_e={to:_e});let $=reactExports.useContext(S$1),ht=reactExports.useMemo(()=>_e,[JSON.stringify(_e,typeof HTMLElement<"u"?(bt,Et)=>Et instanceof HTMLElement?Et.outerHTML:Et:void 0)]);n$3(()=>{$==null||$(ht??null)},[$,ht]);let vt=reactExports.useContext(y$1);return reactExports.useMemo(()=>[vt.setFloating,_e?vt.styles:{}],[vt.setFloating,_e,vt.styles])}let q=4;function ve({children:_e,enabled:$=!0}){let[ht,vt]=reactExports.useState(null),[bt,Et]=reactExports.useState(0),At=reactExports.useRef(null),[_t,wt]=reactExports.useState(null);pe(_t);let Ct=$&&ht!==null&&_t!==null,{to:xt="bottom",gap:Pt=0,offset:Rt=0,padding:kt=0,inner:Mt}=ce(ht,_t),[Lt,Ot="center"]=xt.split(" ");n$3(()=>{Ct&&Et(0)},[Ct]);let{refs:Ft,floatingStyles:Dt,context:$t}=useFloating({open:Ct,placement:Lt==="selection"?Ot==="center"?"bottom":`bottom-${Ot}`:Ot==="center"?`${Lt}`:`${Lt}-${Ot}`,strategy:"absolute",transform:!1,middleware:[offset({mainAxis:Lt==="selection"?0:Pt,crossAxis:Rt}),shift({padding:kt}),Lt!=="selection"&&flip({padding:kt}),Lt==="selection"&&Mt?inner({...Mt,padding:kt,overflowRef:At,offset:bt,minItemsVisible:q,referenceOverflowThreshold:kt,onFallbackChange(Gt){var en,on;if(!Gt)return;let _n=$t.elements.floating;if(!_n)return;let ln=parseFloat(getComputedStyle(_n).scrollPaddingBottom)||0,En=Math.min(q,_n.childElementCount),un=0,hn=0;for(let nn of(on=(en=$t.elements.floating)==null?void 0:en.childNodes)!=null?on:[])if(nn instanceof HTMLElement){let mn=nn.offsetTop,xn=mn+nn.clientHeight+ln,rn=_n.scrollTop,qt=rn+_n.clientHeight;if(mn>=rn&&xn<=qt)En--;else{hn=Math.max(0,Math.min(xn,qt)-Math.max(mn,rn)),un=nn.clientHeight;break}}En>=1&&Et(nn=>{let mn=un*En-hn+ln;return nn>=mn?nn:mn})}}):null,size({padding:kt,apply({availableWidth:Gt,availableHeight:en,elements:on}){Object.assign(on.floating.style,{overflow:"auto",maxWidth:`${Gt}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${en}px)`})}})].filter(Boolean),whileElementsMounted:autoUpdate}),[Bt=Lt,Nt=Ot]=$t.placement.split("-");Lt==="selection"&&(Bt="selection");let Ht=reactExports.useMemo(()=>({anchor:[Bt,Nt].filter(Boolean).join(" ")}),[Bt,Nt]),Vt=useInnerOffset($t,{overflowRef:At,onChange:Et}),{getReferenceProps:jt,getFloatingProps:Xt}=useInteractions([Vt]),Jt=o$3(Gt=>{wt(Gt),Ft.setFloating(Gt)});return reactExports.createElement(S$1.Provider,{value:vt},reactExports.createElement(y$1.Provider,{value:{setFloating:Jt,setReference:Ft.setReference,styles:Dt,getReferenceProps:jt,getFloatingProps:Xt,slot:Ht}},_e))}function pe(_e){n$3(()=>{if(!_e)return;let $=new MutationObserver(()=>{let ht=_e.style.maxHeight;parseFloat(ht)!==parseInt(ht)&&(_e.style.maxHeight=`${Math.ceil(parseFloat(ht))}px`)});return $.observe(_e,{attributes:!0,attributeFilter:["style"]}),()=>{$.disconnect()}},[_e])}function ce(_e,$){var ht,vt,bt;let Et=L((ht=_e==null?void 0:_e.gap)!=null?ht:"var(--anchor-gap, 0)",$),At=L((vt=_e==null?void 0:_e.offset)!=null?vt:"var(--anchor-offset, 0)",$),_t=L((bt=_e==null?void 0:_e.padding)!=null?bt:"var(--anchor-padding, 0)",$);return{..._e,gap:Et,offset:At,padding:_t}}function L(_e,$,ht=void 0){let vt=p$3(),bt=o$3((wt,Ct)=>{if(wt==null)return[ht,null];if(typeof wt=="number")return[wt,null];if(typeof wt=="string"){if(!Ct)return[ht,null];let xt=J$1(wt,Ct);return[xt,Pt=>{let Rt=D$1(wt);{let kt=Rt.map(Mt=>window.getComputedStyle(Ct).getPropertyValue(Mt));vt.requestAnimationFrame(function Mt(){vt.nextFrame(Mt);let Lt=!1;for(let[Ft,Dt]of Rt.entries()){let $t=window.getComputedStyle(Ct).getPropertyValue(Dt);if(kt[Ft]!==$t){kt[Ft]=$t,Lt=!0;break}}if(!Lt)return;let Ot=J$1(wt,Ct);xt!==Ot&&(Pt(Ot),xt=Ot)})}return vt.dispose}]}return[ht,null]}),Et=reactExports.useMemo(()=>bt(_e,$)[0],[_e,$]),[At=Et,_t]=reactExports.useState();return n$3(()=>{let[wt,Ct]=bt(_e,$);if(_t(wt),!!Ct)return Ct(_t)},[_e,$]),At}function D$1(_e){let $=/var\((.*)\)/.exec(_e);if($){let ht=$[1].indexOf(",");if(ht===-1)return[$[1]];let vt=$[1].slice(0,ht).trim(),bt=$[1].slice(ht+1).trim();return bt?[vt,...D$1(bt)]:[vt]}return[]}function J$1(_e,$){let ht=document.createElement("div");$.appendChild(ht),ht.style.setProperty("margin-top","0px","important"),ht.style.setProperty("margin-top",_e,"important");let vt=parseFloat(window.getComputedStyle(ht).marginTop)||0;return $.removeChild(ht),vt}let n=reactExports.createContext(null);n.displayName="OpenClosedContext";var i=(_e=>(_e[_e.Open=1]="Open",_e[_e.Closed=2]="Closed",_e[_e.Closing=4]="Closing",_e[_e.Opening=8]="Opening",_e))(i||{});function u$1(){return reactExports.useContext(n)}function c$2({value:_e,children:$}){return React.createElement(n.Provider,{value:_e},$)}function u(_e){throw new Error("Unexpected object: "+_e)}var c$1=(_e=>(_e[_e.First=0]="First",_e[_e.Previous=1]="Previous",_e[_e.Next=2]="Next",_e[_e.Last=3]="Last",_e[_e.Specific=4]="Specific",_e[_e.Nothing=5]="Nothing",_e))(c$1||{});function f(_e,$){let ht=$.resolveItems();if(ht.length<=0)return null;let vt=$.resolveActiveIndex(),bt=vt??-1;switch(_e.focus){case 0:{for(let Et=0;Et<ht.length;++Et)if(!$.resolveDisabled(ht[Et],Et,ht))return Et;return vt}case 1:{bt===-1&&(bt=ht.length);for(let Et=bt-1;Et>=0;--Et)if(!$.resolveDisabled(ht[Et],Et,ht))return Et;return vt}case 2:{for(let Et=bt+1;Et<ht.length;++Et)if(!$.resolveDisabled(ht[Et],Et,ht))return Et;return vt}case 3:{for(let Et=ht.length-1;Et>=0;--Et)if(!$.resolveDisabled(ht[Et],Et,ht))return Et;return vt}case 4:{for(let Et=0;Et<ht.length;++Et)if($.resolveId(ht[Et],Et,ht)===_e.id)return Et;return vt}case 5:return null;default:u(_e)}}function c(_e){let $=o$3(_e),ht=reactExports.useRef(!1);reactExports.useEffect(()=>(ht.current=!1,()=>{ht.current=!0,t$3(()=>{ht.current&&$()})}),[$])}function s$1(){let _e=typeof document>"u";return"useSyncExternalStore"in t$4?($=>$.useSyncExternalStore)(t$4)(()=>()=>{},()=>!1,()=>!_e):!1}function l(){let _e=s$1(),[$,ht]=reactExports.useState(s$5.isHandoffComplete);return $&&s$5.isHandoffComplete===!1&&ht(!1),reactExports.useEffect(()=>{$!==!0&&ht(!0)},[$]),reactExports.useEffect(()=>s$5.handoff(),[]),_e?!1:$}let e=reactExports.createContext(!1);function a$1(){return reactExports.useContext(e)}function D(_e){let $=a$1(),ht=reactExports.useContext(v),vt=n$1(_e),[bt,Et]=reactExports.useState(()=>{var At;if(!$&&ht!==null)return(At=ht.current)!=null?At:null;if(s$5.isServer)return null;let _t=vt==null?void 0:vt.getElementById("headlessui-portal-root");if(_t)return _t;if(vt===null)return null;let wt=vt.createElement("div");return wt.setAttribute("id","headlessui-portal-root"),vt.body.appendChild(wt)});return reactExports.useEffect(()=>{bt!==null&&(vt!=null&&vt.body.contains(bt)||vt==null||vt.body.appendChild(bt))},[bt,vt]),reactExports.useEffect(()=>{$||ht!==null&&Et(ht.current)},[ht,Et,$]),bt}let M=reactExports.Fragment,N=I$3(function(_e,$){let ht=_e,vt=reactExports.useRef(null),bt=y$4(T$2(xt=>{vt.current=xt}),$),Et=n$1(vt),At=D(vt),[_t]=reactExports.useState(()=>{var xt;return s$5.isServer?null:(xt=Et==null?void 0:Et.createElement("div"))!=null?xt:null}),wt=reactExports.useContext(y),Ct=l();return n$3(()=>{!At||!_t||At.contains(_t)||(_t.setAttribute("data-headlessui-portal",""),At.appendChild(_t))},[At,_t]),n$3(()=>{if(_t&&wt)return wt.register(_t)},[wt,_t]),c(()=>{var xt;!At||!_t||(_t instanceof Node&&At.contains(_t)&&At.removeChild(_t),At.childNodes.length<=0&&((xt=At.parentElement)==null||xt.removeChild(At)))}),Ct?!At||!_t?null:reactDomExports.createPortal(H$1({ourProps:{ref:bt},theirProps:ht,slot:{},defaultTag:M,name:"Portal"}),_t):null});function S(_e,$){let ht=y$4($),{enabled:vt=!0,...bt}=_e;return vt?React.createElement(N,{...bt,ref:ht}):H$1({ourProps:{ref:ht},theirProps:bt,slot:{},defaultTag:M,name:"Portal"})}let j$1=reactExports.Fragment,v=reactExports.createContext(null);function W$1(_e,$){let{target:ht,...vt}=_e,bt={ref:y$4($)};return React.createElement(v.Provider,{value:ht},H$1({ourProps:bt,theirProps:vt,defaultTag:j$1,name:"Popover.Group"}))}let y=reactExports.createContext(null),I=I$3(S),J=I$3(W$1),te=Object.assign(I,{Group:J});function p(_e,$){let ht=reactExports.useRef({left:0,top:0});if(n$3(()=>{let bt=$.current;if(!bt)return;let Et=bt.getBoundingClientRect();Et&&(ht.current=Et)},[_e]),$.current==null||!_e||$.current===document.activeElement)return!1;let vt=$.current.getBoundingClientRect();return vt.top!==ht.current.top||vt.left!==ht.current.left}let a=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function o(_e){var $,ht;let vt=($=_e.innerText)!=null?$:"",bt=_e.cloneNode(!0);if(!(bt instanceof HTMLElement))return vt;let Et=!1;for(let _t of bt.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))_t.remove(),Et=!0;let At=Et?(ht=bt.innerText)!=null?ht:"":vt;return a.test(At)&&(At=At.replace(a,"")),At}function g(_e){let $=_e.getAttribute("aria-label");if(typeof $=="string")return $.trim();let ht=_e.getAttribute("aria-labelledby");if(ht){let vt=ht.split(" ").map(bt=>{let Et=document.getElementById(bt);if(Et){let At=Et.getAttribute("aria-label");return typeof At=="string"?At.trim():o(Et).trim()}return null}).filter(Boolean);if(vt.length>0)return vt.join(", ")}return o(_e).trim()}function s(_e){let $=reactExports.useRef(""),ht=reactExports.useRef("");return o$3(()=>{let vt=_e.current;if(!vt)return"";let bt=vt.innerText;if($.current===bt)return ht.current;let Et=g(vt).trim().toLowerCase();return $.current=bt,ht.current=Et,Et})}var Je=(_e=>(_e[_e.Open=0]="Open",_e[_e.Closed=1]="Closed",_e))(Je||{}),Ve=(_e=>(_e[_e.Pointer=0]="Pointer",_e[_e.Other=1]="Other",_e))(Ve||{}),Xe=(_e=>(_e[_e.OpenMenu=0]="OpenMenu",_e[_e.CloseMenu=1]="CloseMenu",_e[_e.GoToItem=2]="GoToItem",_e[_e.Search=3]="Search",_e[_e.ClearSearch=4]="ClearSearch",_e[_e.RegisterItem=5]="RegisterItem",_e[_e.UnregisterItem=6]="UnregisterItem",_e))(Xe||{});function W(_e,$=ht=>ht){let ht=_e.activeItemIndex!==null?_e.items[_e.activeItemIndex]:null,vt=_($(_e.items.slice()),Et=>Et.dataRef.current.domRef.current),bt=ht?vt.indexOf(ht):null;return bt===-1&&(bt=null),{items:vt,activeItemIndex:bt}}let $e={1(_e){return _e.menuState===1?_e:{..._e,activeItemIndex:null,menuState:1}},0(_e){return _e.menuState===0?_e:{..._e,__demoMode:!1,menuState:0}},2:(_e,$)=>{var ht,vt,bt,Et,At;if(_e.menuState===1)return _e;let _t={..._e,searchQuery:"",activationTrigger:(ht=$.trigger)!=null?ht:1,__demoMode:!1};if($.focus===c$1.Nothing)return{..._t,activeItemIndex:null};if($.focus===c$1.Specific)return{..._t,activeItemIndex:_e.items.findIndex(xt=>xt.id===$.id)};if($.focus===c$1.Previous){let xt=_e.activeItemIndex;if(xt!==null){let Pt=_e.items[xt].dataRef.current.domRef,Rt=f($,{resolveItems:()=>_e.items,resolveActiveIndex:()=>_e.activeItemIndex,resolveId:kt=>kt.id,resolveDisabled:kt=>kt.dataRef.current.disabled});if(Rt!==null){let kt=_e.items[Rt].dataRef.current.domRef;if(((vt=Pt.current)==null?void 0:vt.previousElementSibling)===kt.current||((bt=kt.current)==null?void 0:bt.previousElementSibling)===null)return{..._t,activeItemIndex:Rt}}}}else if($.focus===c$1.Next){let xt=_e.activeItemIndex;if(xt!==null){let Pt=_e.items[xt].dataRef.current.domRef,Rt=f($,{resolveItems:()=>_e.items,resolveActiveIndex:()=>_e.activeItemIndex,resolveId:kt=>kt.id,resolveDisabled:kt=>kt.dataRef.current.disabled});if(Rt!==null){let kt=_e.items[Rt].dataRef.current.domRef;if(((Et=Pt.current)==null?void 0:Et.nextElementSibling)===kt.current||((At=kt.current)==null?void 0:At.nextElementSibling)===null)return{..._t,activeItemIndex:Rt}}}}let wt=W(_e),Ct=f($,{resolveItems:()=>wt.items,resolveActiveIndex:()=>wt.activeItemIndex,resolveId:xt=>xt.id,resolveDisabled:xt=>xt.dataRef.current.disabled});return{..._t,...wt,activeItemIndex:Ct}},3:(_e,$)=>{let ht=_e.searchQuery!==""?0:1,vt=_e.searchQuery+$.value.toLowerCase(),bt=(_e.activeItemIndex!==null?_e.items.slice(_e.activeItemIndex+ht).concat(_e.items.slice(0,_e.activeItemIndex+ht)):_e.items).find(At=>{var _t;return((_t=At.dataRef.current.textValue)==null?void 0:_t.startsWith(vt))&&!At.dataRef.current.disabled}),Et=bt?_e.items.indexOf(bt):-1;return Et===-1||Et===_e.activeItemIndex?{..._e,searchQuery:vt}:{..._e,searchQuery:vt,activeItemIndex:Et,activationTrigger:1}},4(_e){return _e.searchQuery===""?_e:{..._e,searchQuery:"",searchActiveItemIndex:null}},5:(_e,$)=>{let ht=W(_e,vt=>[...vt,{id:$.id,dataRef:$.dataRef}]);return{..._e,...ht}},6:(_e,$)=>{let ht=W(_e,vt=>{let bt=vt.findIndex(Et=>Et.id===$.id);return bt!==-1&&vt.splice(bt,1),vt});return{..._e,...ht,activationTrigger:1}}},j=reactExports.createContext(null);j.displayName="MenuContext";function B(_e){let $=reactExports.useContext(j);if($===null){let ht=new Error(`<${_e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(ht,B),ht}return $}function qe(_e,$){return u$6($.type,$e,_e,$)}let ze=reactExports.Fragment;function Ye(_e,$){let{__demoMode:ht=!1,...vt}=_e,bt=reactExports.useReducer(qe,{__demoMode:ht,menuState:ht?0:1,buttonRef:reactExports.createRef(),itemsRef:reactExports.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:Et,itemsRef:At,buttonRef:_t},wt]=bt,Ct=y$4($);F$2(Et===0,[_t,At],(kt,Mt)=>{var Lt;wt({type:1}),A$1(Mt,h.Loose)||(kt.preventDefault(),(Lt=_t.current)==null||Lt.focus())});let xt=o$3(()=>{wt({type:1})}),Pt=reactExports.useMemo(()=>({open:Et===0,close:xt}),[Et,xt]),Rt={ref:Ct};return React.createElement(ve,null,React.createElement(j.Provider,{value:bt},React.createElement(c$2,{value:u$6(Et,{0:i.Open,1:i.Closed})},H$1({ourProps:Rt,theirProps:vt,slot:Pt,defaultTag:ze,name:"Menu"}))))}let Ze="button";function et(_e,$){var ht;let vt=reactExports.useId(),{id:bt=`headlessui-menu-button-${vt}`,disabled:Et=!1,autoFocus:At=!1,..._t}=_e,[wt,Ct]=B("Menu.Button"),xt=Fe(),Pt=y$4(wt.buttonRef,$,ye()),Rt=o$3(Vt=>{switch(Vt.key){case o$2.Space:case o$2.Enter:case o$2.ArrowDown:Vt.preventDefault(),Vt.stopPropagation(),reactDomExports.flushSync(()=>Ct({type:0})),Ct({type:2,focus:c$1.First});break;case o$2.ArrowUp:Vt.preventDefault(),Vt.stopPropagation(),reactDomExports.flushSync(()=>Ct({type:0})),Ct({type:2,focus:c$1.Last});break}}),kt=o$3(Vt=>{switch(Vt.key){case o$2.Space:Vt.preventDefault();break}}),Mt=o$3(Vt=>{var jt;if(r$1(Vt.currentTarget))return Vt.preventDefault();Et||(wt.menuState===0?(reactDomExports.flushSync(()=>Ct({type:1})),(jt=wt.buttonRef.current)==null||jt.focus({preventScroll:!0})):(Vt.preventDefault(),Ct({type:0})))}),{isFocusVisible:Lt,focusProps:Ot}=$f7dceffc5ad7768b$export$4e328f61c538687f({autoFocus:At}),{isHovered:Ft,hoverProps:Dt}=$6179b936705e76d3$export$ae780daf29e6d456({isDisabled:Et}),{pressed:$t,pressProps:Bt}=w$1({disabled:Et}),Nt=reactExports.useMemo(()=>({open:wt.menuState===0,active:$t||wt.menuState===0,disabled:Et,hover:Ft,focus:Lt,autofocus:At}),[wt,Ft,Lt,$t,Et,At]),Ht=D$3(xt(),{ref:Pt,id:bt,type:T(_e,wt.buttonRef),"aria-haspopup":"menu","aria-controls":(ht=wt.itemsRef.current)==null?void 0:ht.id,"aria-expanded":wt.menuState===0,disabled:Et||void 0,autoFocus:At,onKeyDown:Rt,onKeyUp:kt,onClick:Mt},Ot,Dt,Bt);return H$1({ourProps:Ht,theirProps:_t,slot:Nt,defaultTag:Ze,name:"Menu.Button"})}let tt="div",nt=O$1.RenderStrategy|O$1.Static;function rt(_e,$){var ht,vt;let bt=reactExports.useId(),{id:Et=`headlessui-menu-items-${bt}`,anchor:At,portal:_t=!1,modal:wt=!0,transition:Ct=!1,...xt}=_e,Pt=xe(At),[Rt,kt]=B("Menu.Items"),[Mt,Lt]=Re(Pt),Ot=be(),Ft=y$4(Rt.itemsRef,$,Pt?Mt:null),Dt=n$1(Rt.itemsRef);Pt&&(_t=!0);let $t=u$1(),[Bt,Nt]=V(Ct,Rt.itemsRef,$t!==null?($t&i.Open)===i.Open:Rt.menuState===0);m$1(Bt,Rt.buttonRef,()=>{kt({type:1})});let Ht=Rt.__demoMode?!1:wt&&Rt.menuState===0;f$1(Ht,Dt);let Vt=Rt.__demoMode?!1:wt&&Rt.menuState===0;y$3(Vt,{allowed:o$3(()=>[Rt.buttonRef.current,Rt.itemsRef.current])});let jt=Rt.menuState!==0,Xt=p(jt,Rt.buttonRef)?!1:Bt;reactExports.useEffect(()=>{let ln=Rt.itemsRef.current;ln&&Rt.menuState===0&&ln!==(Dt==null?void 0:Dt.activeElement)&&ln.focus({preventScroll:!0})},[Rt.menuState,Rt.itemsRef,Dt,Rt.itemsRef.current]),F(Rt.menuState===0,{container:Rt.itemsRef.current,accept(ln){return ln.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:ln.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(ln){ln.setAttribute("role","none")}});let Jt=p$3(),Gt=o$3(ln=>{var En,un,hn;switch(Jt.dispose(),ln.key){case o$2.Space:if(Rt.searchQuery!=="")return ln.preventDefault(),ln.stopPropagation(),kt({type:3,value:ln.key});case o$2.Enter:if(ln.preventDefault(),ln.stopPropagation(),kt({type:1}),Rt.activeItemIndex!==null){let{dataRef:nn}=Rt.items[Rt.activeItemIndex];(un=(En=nn.current)==null?void 0:En.domRef.current)==null||un.click()}G(Rt.buttonRef.current);break;case o$2.ArrowDown:return ln.preventDefault(),ln.stopPropagation(),kt({type:2,focus:c$1.Next});case o$2.ArrowUp:return ln.preventDefault(),ln.stopPropagation(),kt({type:2,focus:c$1.Previous});case o$2.Home:case o$2.PageUp:return ln.preventDefault(),ln.stopPropagation(),kt({type:2,focus:c$1.First});case o$2.End:case o$2.PageDown:return ln.preventDefault(),ln.stopPropagation(),kt({type:2,focus:c$1.Last});case o$2.Escape:ln.preventDefault(),ln.stopPropagation(),reactDomExports.flushSync(()=>kt({type:1})),(hn=Rt.buttonRef.current)==null||hn.focus({preventScroll:!0});break;case o$2.Tab:ln.preventDefault(),ln.stopPropagation(),reactDomExports.flushSync(()=>kt({type:1})),j$2(Rt.buttonRef.current,ln.shiftKey?F$3.Previous:F$3.Next);break;default:ln.key.length===1&&(kt({type:3,value:ln.key}),Jt.setTimeout(()=>kt({type:4}),350));break}}),en=o$3(ln=>{switch(ln.key){case o$2.Space:ln.preventDefault();break}}),on=reactExports.useMemo(()=>({open:Rt.menuState===0}),[Rt.menuState]),_n=D$3(Pt?Ot():{},{"aria-activedescendant":Rt.activeItemIndex===null||(ht=Rt.items[Rt.activeItemIndex])==null?void 0:ht.id,"aria-labelledby":(vt=Rt.buttonRef.current)==null?void 0:vt.id,id:Et,onKeyDown:Gt,onKeyUp:en,role:"menu",tabIndex:Rt.menuState===0?0:void 0,ref:Ft,style:{...xt.style,...Lt,"--button-width":f$4(Rt.buttonRef,!0).width},...A(Nt)});return React.createElement(te,{enabled:_t?_e.static||Bt:!1},H$1({ourProps:_n,theirProps:xt,slot:on,defaultTag:tt,features:nt,visible:Xt,name:"Menu.Items"}))}let ot=reactExports.Fragment;function at(_e,$){let ht=reactExports.useId(),{id:vt=`headlessui-menu-item-${ht}`,disabled:bt=!1,...Et}=_e,[At,_t]=B("Menu.Item"),wt=At.activeItemIndex!==null?At.items[At.activeItemIndex].id===vt:!1,Ct=reactExports.useRef(null),xt=y$4($,Ct);n$3(()=>{if(!At.__demoMode&&At.menuState===0&&wt&&At.activationTrigger!==0)return o$4().requestAnimationFrame(()=>{var Xt,Jt;(Jt=(Xt=Ct.current)==null?void 0:Xt.scrollIntoView)==null||Jt.call(Xt,{block:"nearest"})})},[At.__demoMode,Ct,wt,At.menuState,At.activationTrigger,At.activeItemIndex]);let Pt=s(Ct),Rt=reactExports.useRef({disabled:bt,domRef:Ct,get textValue(){return Pt()}});n$3(()=>{Rt.current.disabled=bt},[Rt,bt]),n$3(()=>(_t({type:5,id:vt,dataRef:Rt}),()=>_t({type:6,id:vt})),[Rt,vt]);let kt=o$3(()=>{_t({type:1})}),Mt=o$3(Xt=>{if(bt)return Xt.preventDefault();_t({type:1}),G(At.buttonRef.current)}),Lt=o$3(()=>{if(bt)return _t({type:2,focus:c$1.Nothing});_t({type:2,focus:c$1.Specific,id:vt})}),Ot=u$2(),Ft=o$3(Xt=>{Ot.update(Xt),!bt&&(wt||_t({type:2,focus:c$1.Specific,id:vt,trigger:0}))}),Dt=o$3(Xt=>{Ot.wasMoved(Xt)&&(bt||wt||_t({type:2,focus:c$1.Specific,id:vt,trigger:0}))}),$t=o$3(Xt=>{Ot.wasMoved(Xt)&&(bt||wt&&_t({type:2,focus:c$1.Nothing}))}),[Bt,Nt]=z(),[Ht,Vt]=U$1(),jt=reactExports.useMemo(()=>({active:wt,focus:wt,disabled:bt,close:kt}),[wt,bt,kt]);return React.createElement(Nt,null,React.createElement(Vt,null,H$1({ourProps:{id:vt,ref:xt,role:"menuitem",tabIndex:bt===!0?void 0:-1,"aria-disabled":bt===!0?!0:void 0,"aria-labelledby":Bt,"aria-describedby":Ht,disabled:void 0,onClick:Mt,onFocus:Lt,onPointerEnter:Ft,onMouseEnter:Ft,onPointerMove:Dt,onMouseMove:Dt,onPointerLeave:$t,onMouseLeave:$t},theirProps:Et,slot:jt,defaultTag:ot,name:"Menu.Item"})))}let it="div";function st(_e,$){let[ht,vt]=z();return React.createElement(vt,null,H$1({ourProps:{ref:$,"aria-labelledby":ht,role:"group"},theirProps:_e,slot:{},defaultTag:it,name:"Menu.Section"}))}let lt="header";function ut(_e,$){let ht=reactExports.useId(),{id:vt=`headlessui-menu-heading-${ht}`,...bt}=_e,Et=P$1();n$3(()=>Et.register(vt),[vt,Et.register]);let At={id:vt,ref:$,role:"presentation",...Et.props};return H$1({ourProps:At,theirProps:bt,slot:{},defaultTag:lt,name:"Menu.Heading"})}let pt="div";function dt(_e,$){return H$1({ourProps:{ref:$,role:"separator"},theirProps:_e,slot:{},defaultTag:pt,name:"Menu.Separator"})}let mt=I$3(Ye),ct=I$3(et),ft=I$3(rt),Tt=I$3(at),yt=I$3(st),gt=I$3(ut),It=I$3(dt),Zt=Object.assign(mt,{Button:ct,Items:ft,Item:Tt,Section:yt,Heading:gt,Separator:It});function ChevronDownIcon({title:_e,titleId:$,...ht},vt){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:vt,"aria-labelledby":$},ht),_e?reactExports.createElement("title",{id:$},_e):null,reactExports.createElement("path",{fillRule:"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const ForwardRef=reactExports.forwardRef(ChevronDownIcon);function bind(_e,$){return function(){return _e.apply($,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(_e=>$=>{const ht=toString.call($);return _e[ht]||(_e[ht]=ht.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=_e=>(_e=_e.toLowerCase(),$=>kindOf($)===_e),typeOfTest=_e=>$=>typeof $===_e,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(_e){return _e!==null&&!isUndefined(_e)&&_e.constructor!==null&&!isUndefined(_e.constructor)&&isFunction(_e.constructor.isBuffer)&&_e.constructor.isBuffer(_e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(_e){let $;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?$=ArrayBuffer.isView(_e):$=_e&&_e.buffer&&isArrayBuffer(_e.buffer),$}const isString$1=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=_e=>_e!==null&&typeof _e=="object",isBoolean=_e=>_e===!0||_e===!1,isPlainObject=_e=>{if(kindOf(_e)!=="object")return!1;const $=getPrototypeOf(_e);return($===null||$===Object.prototype||Object.getPrototypeOf($)===null)&&!(Symbol.toStringTag in _e)&&!(Symbol.iterator in _e)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=_e=>isObject(_e)&&isFunction(_e.pipe),isFormData=_e=>{let $;return _e&&(typeof FormData=="function"&&_e instanceof FormData||isFunction(_e.append)&&(($=kindOf(_e))==="formdata"||$==="object"&&isFunction(_e.toString)&&_e.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=_e=>_e.trim?_e.trim():_e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(_e,$,{allOwnKeys:ht=!1}={}){if(_e===null||typeof _e>"u")return;let vt,bt;if(typeof _e!="object"&&(_e=[_e]),isArray(_e))for(vt=0,bt=_e.length;vt<bt;vt++)$.call(null,_e[vt],vt,_e);else{const Et=ht?Object.getOwnPropertyNames(_e):Object.keys(_e),At=Et.length;let _t;for(vt=0;vt<At;vt++)_t=Et[vt],$.call(null,_e[_t],_t,_e)}}function findKey(_e,$){$=$.toLowerCase();const ht=Object.keys(_e);let vt=ht.length,bt;for(;vt-- >0;)if(bt=ht[vt],$===bt.toLowerCase())return bt;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=_e=>!isUndefined(_e)&&_e!==_global;function merge(){const{caseless:_e}=isContextDefined(this)&&this||{},$={},ht=(vt,bt)=>{const Et=_e&&findKey($,bt)||bt;isPlainObject($[Et])&&isPlainObject(vt)?$[Et]=merge($[Et],vt):isPlainObject(vt)?$[Et]=merge({},vt):isArray(vt)?$[Et]=vt.slice():$[Et]=vt};for(let vt=0,bt=arguments.length;vt<bt;vt++)arguments[vt]&&forEach(arguments[vt],ht);return $}const extend=(_e,$,ht,{allOwnKeys:vt}={})=>(forEach($,(bt,Et)=>{ht&&isFunction(bt)?_e[Et]=bind(bt,ht):_e[Et]=bt},{allOwnKeys:vt}),_e),stripBOM=_e=>(_e.charCodeAt(0)===65279&&(_e=_e.slice(1)),_e),inherits=(_e,$,ht,vt)=>{_e.prototype=Object.create($.prototype,vt),_e.prototype.constructor=_e,Object.defineProperty(_e,"super",{value:$.prototype}),ht&&Object.assign(_e.prototype,ht)},toFlatObject=(_e,$,ht,vt)=>{let bt,Et,At;const _t={};if($=$||{},_e==null)return $;do{for(bt=Object.getOwnPropertyNames(_e),Et=bt.length;Et-- >0;)At=bt[Et],(!vt||vt(At,_e,$))&&!_t[At]&&($[At]=_e[At],_t[At]=!0);_e=ht!==!1&&getPrototypeOf(_e)}while(_e&&(!ht||ht(_e,$))&&_e!==Object.prototype);return $},endsWith=(_e,$,ht)=>{_e=String(_e),(ht===void 0||ht>_e.length)&&(ht=_e.length),ht-=$.length;const vt=_e.indexOf($,ht);return vt!==-1&&vt===ht},toArray=_e=>{if(!_e)return null;if(isArray(_e))return _e;let $=_e.length;if(!isNumber($))return null;const ht=new Array($);for(;$-- >0;)ht[$]=_e[$];return ht},isTypedArray=(_e=>$=>_e&&$ instanceof _e)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(_e,$)=>{const vt=(_e&&_e[Symbol.iterator]).call(_e);let bt;for(;(bt=vt.next())&&!bt.done;){const Et=bt.value;$.call(_e,Et[0],Et[1])}},matchAll=(_e,$)=>{let ht;const vt=[];for(;(ht=_e.exec($))!==null;)vt.push(ht);return vt},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=_e=>_e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(ht,vt,bt){return vt.toUpperCase()+bt}),hasOwnProperty=(({hasOwnProperty:_e})=>($,ht)=>_e.call($,ht))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(_e,$)=>{const ht=Object.getOwnPropertyDescriptors(_e),vt={};forEach(ht,(bt,Et)=>{let At;(At=$(bt,Et,_e))!==!1&&(vt[Et]=At||bt)}),Object.defineProperties(_e,vt)},freezeMethods=_e=>{reduceDescriptors(_e,($,ht)=>{if(isFunction(_e)&&["arguments","caller","callee"].indexOf(ht)!==-1)return!1;const vt=_e[ht];if(isFunction(vt)){if($.enumerable=!1,"writable"in $){$.writable=!1;return}$.set||($.set=()=>{throw Error("Can not rewrite read-only method '"+ht+"'")})}})},toObjectSet=(_e,$)=>{const ht={},vt=bt=>{bt.forEach(Et=>{ht[Et]=!0})};return isArray(_e)?vt(_e):vt(String(_e).split($)),ht},noop$1=()=>{},toFiniteNumber=(_e,$)=>_e!=null&&Number.isFinite(_e=+_e)?_e:$,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(_e=16,$=ALPHABET.ALPHA_DIGIT)=>{let ht="";const{length:vt}=$;for(;_e--;)ht+=$[Math.random()*vt|0];return ht};function isSpecCompliantForm(_e){return!!(_e&&isFunction(_e.append)&&_e[Symbol.toStringTag]==="FormData"&&_e[Symbol.iterator])}const toJSONObject=_e=>{const $=new Array(10),ht=(vt,bt)=>{if(isObject(vt)){if($.indexOf(vt)>=0)return;if(!("toJSON"in vt)){$[bt]=vt;const Et=isArray(vt)?[]:{};return forEach(vt,(At,_t)=>{const wt=ht(At,bt+1);!isUndefined(wt)&&(Et[_t]=wt)}),$[bt]=void 0,Et}}return vt};return ht(_e,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=_e=>_e&&(isObject(_e)||isFunction(_e))&&isFunction(_e.then)&&isFunction(_e.catch),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString:isString$1,isNumber,isBoolean,isObject,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(_e,$,ht,vt,bt){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=_e,this.name="AxiosError",$&&(this.code=$),ht&&(this.config=ht),vt&&(this.request=vt),bt&&(this.response=bt)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(_e=>{descriptors[_e]={value:_e}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(_e,$,ht,vt,bt,Et)=>{const At=Object.create(prototype$1);return utils$1.toFlatObject(_e,At,function(wt){return wt!==Error.prototype},_t=>_t!=="isAxiosError"),AxiosError.call(At,_e.message,$,ht,vt,bt),At.cause=_e,At.name=_e.name,Et&&Object.assign(At,Et),At};const httpAdapter=null;function isVisitable(_e){return utils$1.isPlainObject(_e)||utils$1.isArray(_e)}function removeBrackets(_e){return utils$1.endsWith(_e,"[]")?_e.slice(0,-2):_e}function renderKey(_e,$,ht){return _e?_e.concat($).map(function(bt,Et){return bt=removeBrackets(bt),!ht&&Et?"["+bt+"]":bt}).join(ht?".":""):$}function isFlatArray(_e){return utils$1.isArray(_e)&&!_e.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function($){return/^is[A-Z]/.test($)});function toFormData(_e,$,ht){if(!utils$1.isObject(_e))throw new TypeError("target must be an object");$=$||new FormData,ht=utils$1.toFlatObject(ht,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Lt,Ot){return!utils$1.isUndefined(Ot[Lt])});const vt=ht.metaTokens,bt=ht.visitor||xt,Et=ht.dots,At=ht.indexes,wt=(ht.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm($);if(!utils$1.isFunction(bt))throw new TypeError("visitor must be a function");function Ct(Mt){if(Mt===null)return"";if(utils$1.isDate(Mt))return Mt.toISOString();if(!wt&&utils$1.isBlob(Mt))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(Mt)||utils$1.isTypedArray(Mt)?wt&&typeof Blob=="function"?new Blob([Mt]):Buffer.from(Mt):Mt}function xt(Mt,Lt,Ot){let Ft=Mt;if(Mt&&!Ot&&typeof Mt=="object"){if(utils$1.endsWith(Lt,"{}"))Lt=vt?Lt:Lt.slice(0,-2),Mt=JSON.stringify(Mt);else if(utils$1.isArray(Mt)&&isFlatArray(Mt)||(utils$1.isFileList(Mt)||utils$1.endsWith(Lt,"[]"))&&(Ft=utils$1.toArray(Mt)))return Lt=removeBrackets(Lt),Ft.forEach(function($t,Bt){!(utils$1.isUndefined($t)||$t===null)&&$.append(At===!0?renderKey([Lt],Bt,Et):At===null?Lt:Lt+"[]",Ct($t))}),!1}return isVisitable(Mt)?!0:($.append(renderKey(Ot,Lt,Et),Ct(Mt)),!1)}const Pt=[],Rt=Object.assign(predicates,{defaultVisitor:xt,convertValue:Ct,isVisitable});function kt(Mt,Lt){if(!utils$1.isUndefined(Mt)){if(Pt.indexOf(Mt)!==-1)throw Error("Circular reference detected in "+Lt.join("."));Pt.push(Mt),utils$1.forEach(Mt,function(Ft,Dt){(!(utils$1.isUndefined(Ft)||Ft===null)&&bt.call($,Ft,utils$1.isString(Dt)?Dt.trim():Dt,Lt,Rt))===!0&&kt(Ft,Lt?Lt.concat(Dt):[Dt])}),Pt.pop()}}if(!utils$1.isObject(_e))throw new TypeError("data must be an object");return kt(_e),$}function encode$1(_e){const $={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(_e).replace(/[!'()~]|%20|%00/g,function(vt){return $[vt]})}function AxiosURLSearchParams(_e,$){this._pairs=[],_e&&toFormData(_e,this,$)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function($,ht){this._pairs.push([$,ht])};prototype.toString=function($){const ht=$?function(vt){return $.call(this,vt,encode$1)}:encode$1;return this._pairs.map(function(bt){return ht(bt[0])+"="+ht(bt[1])},"").join("&")};function encode(_e){return encodeURIComponent(_e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(_e,$,ht){if(!$)return _e;const vt=ht&&ht.encode||encode,bt=ht&&ht.serialize;let Et;if(bt?Et=bt($,ht):Et=utils$1.isURLSearchParams($)?$.toString():new AxiosURLSearchParams($,ht).toString(vt),Et){const At=_e.indexOf("#");At!==-1&&(_e=_e.slice(0,At)),_e+=(_e.indexOf("?")===-1?"?":"&")+Et}return _e}class InterceptorManager{constructor(){this.handlers=[]}use($,ht,vt){return this.handlers.push({fulfilled:$,rejected:ht,synchronous:vt?vt.synchronous:!1,runWhen:vt?vt.runWhen:null}),this.handlers.length-1}eject($){this.handlers[$]&&(this.handlers[$]=null)}clear(){this.handlers&&(this.handlers=[])}forEach($){utils$1.forEach(this.handlers,function(vt){vt!==null&&$(vt)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",hasStandardBrowserEnv=(_e=>hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf(_e)<0)(typeof navigator<"u"&&navigator.product),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(_e,$){return toFormData(_e,new platform.classes.URLSearchParams,Object.assign({visitor:function(ht,vt,bt,Et){return platform.isNode&&utils$1.isBuffer(ht)?(this.append(vt,ht.toString("base64")),!1):Et.defaultVisitor.apply(this,arguments)}},$))}function parsePropPath(_e){return utils$1.matchAll(/\w+|\[(\w*)]/g,_e).map($=>$[0]==="[]"?"":$[1]||$[0])}function arrayToObject(_e){const $={},ht=Object.keys(_e);let vt;const bt=ht.length;let Et;for(vt=0;vt<bt;vt++)Et=ht[vt],$[Et]=_e[Et];return $}function formDataToJSON(_e){function $(ht,vt,bt,Et){let At=ht[Et++];if(At==="__proto__")return!0;const _t=Number.isFinite(+At),wt=Et>=ht.length;return At=!At&&utils$1.isArray(bt)?bt.length:At,wt?(utils$1.hasOwnProp(bt,At)?bt[At]=[bt[At],vt]:bt[At]=vt,!_t):((!bt[At]||!utils$1.isObject(bt[At]))&&(bt[At]=[]),$(ht,vt,bt[At],Et)&&utils$1.isArray(bt[At])&&(bt[At]=arrayToObject(bt[At])),!_t)}if(utils$1.isFormData(_e)&&utils$1.isFunction(_e.entries)){const ht={};return utils$1.forEachEntry(_e,(vt,bt)=>{$(parsePropPath(vt),bt,ht,0)}),ht}return null}function stringifySafely(_e,$,ht){if(utils$1.isString(_e))try{return($||JSON.parse)(_e),utils$1.trim(_e)}catch(vt){if(vt.name!=="SyntaxError")throw vt}return(ht||JSON.stringify)(_e)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function($,ht){const vt=ht.getContentType()||"",bt=vt.indexOf("application/json")>-1,Et=utils$1.isObject($);if(Et&&utils$1.isHTMLForm($)&&($=new FormData($)),utils$1.isFormData($))return bt?JSON.stringify(formDataToJSON($)):$;if(utils$1.isArrayBuffer($)||utils$1.isBuffer($)||utils$1.isStream($)||utils$1.isFile($)||utils$1.isBlob($)||utils$1.isReadableStream($))return $;if(utils$1.isArrayBufferView($))return $.buffer;if(utils$1.isURLSearchParams($))return ht.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),$.toString();let _t;if(Et){if(vt.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm($,this.formSerializer).toString();if((_t=utils$1.isFileList($))||vt.indexOf("multipart/form-data")>-1){const wt=this.env&&this.env.FormData;return toFormData(_t?{"files[]":$}:$,wt&&new wt,this.formSerializer)}}return Et||bt?(ht.setContentType("application/json",!1),stringifySafely($)):$}],transformResponse:[function($){const ht=this.transitional||defaults.transitional,vt=ht&&ht.forcedJSONParsing,bt=this.responseType==="json";if(utils$1.isResponse($)||utils$1.isReadableStream($))return $;if($&&utils$1.isString($)&&(vt&&!this.responseType||bt)){const At=!(ht&&ht.silentJSONParsing)&&bt;try{return JSON.parse($)}catch(_t){if(At)throw _t.name==="SyntaxError"?AxiosError.from(_t,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):_t}}return $}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function($){return $>=200&&$<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],_e=>{defaults.headers[_e]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=_e=>{const $={};let ht,vt,bt;return _e&&_e.split(`
`).forEach(function(At){bt=At.indexOf(":"),ht=At.substring(0,bt).trim().toLowerCase(),vt=At.substring(bt+1).trim(),!(!ht||$[ht]&&ignoreDuplicateOf[ht])&&(ht==="set-cookie"?$[ht]?$[ht].push(vt):$[ht]=[vt]:$[ht]=$[ht]?$[ht]+", "+vt:vt)}),$},$internals=Symbol("internals");function normalizeHeader(_e){return _e&&String(_e).trim().toLowerCase()}function normalizeValue(_e){return _e===!1||_e==null?_e:utils$1.isArray(_e)?_e.map(normalizeValue):String(_e)}function parseTokens(_e){const $=Object.create(null),ht=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let vt;for(;vt=ht.exec(_e);)$[vt[1]]=vt[2];return $}const isValidHeaderName=_e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(_e.trim());function matchHeaderValue(_e,$,ht,vt,bt){if(utils$1.isFunction(vt))return vt.call(this,$,ht);if(bt&&($=ht),!!utils$1.isString($)){if(utils$1.isString(vt))return $.indexOf(vt)!==-1;if(utils$1.isRegExp(vt))return vt.test($)}}function formatHeader(_e){return _e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,($,ht,vt)=>ht.toUpperCase()+vt)}function buildAccessors(_e,$){const ht=utils$1.toCamelCase(" "+$);["get","set","has"].forEach(vt=>{Object.defineProperty(_e,vt+ht,{value:function(bt,Et,At){return this[vt].call(this,$,bt,Et,At)},configurable:!0})})}class AxiosHeaders{constructor($){$&&this.set($)}set($,ht,vt){const bt=this;function Et(_t,wt,Ct){const xt=normalizeHeader(wt);if(!xt)throw new Error("header name must be a non-empty string");const Pt=utils$1.findKey(bt,xt);(!Pt||bt[Pt]===void 0||Ct===!0||Ct===void 0&&bt[Pt]!==!1)&&(bt[Pt||wt]=normalizeValue(_t))}const At=(_t,wt)=>utils$1.forEach(_t,(Ct,xt)=>Et(Ct,xt,wt));if(utils$1.isPlainObject($)||$ instanceof this.constructor)At($,ht);else if(utils$1.isString($)&&($=$.trim())&&!isValidHeaderName($))At(parseHeaders($),ht);else if(utils$1.isHeaders($))for(const[_t,wt]of $.entries())Et(wt,_t,vt);else $!=null&&Et(ht,$,vt);return this}get($,ht){if($=normalizeHeader($),$){const vt=utils$1.findKey(this,$);if(vt){const bt=this[vt];if(!ht)return bt;if(ht===!0)return parseTokens(bt);if(utils$1.isFunction(ht))return ht.call(this,bt,vt);if(utils$1.isRegExp(ht))return ht.exec(bt);throw new TypeError("parser must be boolean|regexp|function")}}}has($,ht){if($=normalizeHeader($),$){const vt=utils$1.findKey(this,$);return!!(vt&&this[vt]!==void 0&&(!ht||matchHeaderValue(this,this[vt],vt,ht)))}return!1}delete($,ht){const vt=this;let bt=!1;function Et(At){if(At=normalizeHeader(At),At){const _t=utils$1.findKey(vt,At);_t&&(!ht||matchHeaderValue(vt,vt[_t],_t,ht))&&(delete vt[_t],bt=!0)}}return utils$1.isArray($)?$.forEach(Et):Et($),bt}clear($){const ht=Object.keys(this);let vt=ht.length,bt=!1;for(;vt--;){const Et=ht[vt];(!$||matchHeaderValue(this,this[Et],Et,$,!0))&&(delete this[Et],bt=!0)}return bt}normalize($){const ht=this,vt={};return utils$1.forEach(this,(bt,Et)=>{const At=utils$1.findKey(vt,Et);if(At){ht[At]=normalizeValue(bt),delete ht[Et];return}const _t=$?formatHeader(Et):String(Et).trim();_t!==Et&&delete ht[Et],ht[_t]=normalizeValue(bt),vt[_t]=!0}),this}concat(...$){return this.constructor.concat(this,...$)}toJSON($){const ht=Object.create(null);return utils$1.forEach(this,(vt,bt)=>{vt!=null&&vt!==!1&&(ht[bt]=$&&utils$1.isArray(vt)?vt.join(", "):vt)}),ht}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([$,ht])=>$+": "+ht).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from($){return $ instanceof this?$:new this($)}static concat($,...ht){const vt=new this($);return ht.forEach(bt=>vt.set(bt)),vt}static accessor($){const vt=(this[$internals]=this[$internals]={accessors:{}}).accessors,bt=this.prototype;function Et(At){const _t=normalizeHeader(At);vt[_t]||(buildAccessors(bt,At),vt[_t]=!0)}return utils$1.isArray($)?$.forEach(Et):Et($),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:_e},$)=>{let ht=$[0].toUpperCase()+$.slice(1);return{get:()=>_e,set(vt){this[ht]=vt}}});utils$1.freezeMethods(AxiosHeaders);function transformData(_e,$){const ht=this||defaults,vt=$||ht,bt=AxiosHeaders.from(vt.headers);let Et=vt.data;return utils$1.forEach(_e,function(_t){Et=_t.call(ht,Et,bt.normalize(),$?$.status:void 0)}),bt.normalize(),Et}function isCancel(_e){return!!(_e&&_e.__CANCEL__)}function CanceledError(_e,$,ht){AxiosError.call(this,_e??"canceled",AxiosError.ERR_CANCELED,$,ht),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(_e,$,ht){const vt=ht.config.validateStatus;!ht.status||!vt||vt(ht.status)?_e(ht):$(new AxiosError("Request failed with status code "+ht.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(ht.status/100)-4],ht.config,ht.request,ht))}function parseProtocol(_e){const $=/^([-+\w]{1,25})(:?\/\/|:)/.exec(_e);return $&&$[1]||""}function speedometer(_e,$){_e=_e||10;const ht=new Array(_e),vt=new Array(_e);let bt=0,Et=0,At;return $=$!==void 0?$:1e3,function(wt){const Ct=Date.now(),xt=vt[Et];At||(At=Ct),ht[bt]=wt,vt[bt]=Ct;let Pt=Et,Rt=0;for(;Pt!==bt;)Rt+=ht[Pt++],Pt=Pt%_e;if(bt=(bt+1)%_e,bt===Et&&(Et=(Et+1)%_e),Ct-At<$)return;const kt=xt&&Ct-xt;return kt?Math.round(Rt*1e3/kt):void 0}}function throttle(_e,$){let ht=0;const vt=1e3/$;let bt=null;return function(){const At=this===!0,_t=Date.now();if(At||_t-ht>vt)return bt&&(clearTimeout(bt),bt=null),ht=_t,_e.apply(null,arguments);bt||(bt=setTimeout(()=>(bt=null,ht=Date.now(),_e.apply(null,arguments)),vt-(_t-ht)))}}const progressEventReducer=(_e,$,ht=3)=>{let vt=0;const bt=speedometer(50,250);return throttle(Et=>{const At=Et.loaded,_t=Et.lengthComputable?Et.total:void 0,wt=At-vt,Ct=bt(wt),xt=At<=_t;vt=At;const Pt={loaded:At,total:_t,progress:_t?At/_t:void 0,bytes:wt,rate:Ct||void 0,estimated:Ct&&_t&&xt?(_t-At)/Ct:void 0,event:Et,lengthComputable:_t!=null};Pt[$?"download":"upload"]=!0,_e(Pt)},ht)},isURLSameOrigin=platform.hasStandardBrowserEnv?function(){const $=/(msie|trident)/i.test(navigator.userAgent),ht=document.createElement("a");let vt;function bt(Et){let At=Et;return $&&(ht.setAttribute("href",At),At=ht.href),ht.setAttribute("href",At),{href:ht.href,protocol:ht.protocol?ht.protocol.replace(/:$/,""):"",host:ht.host,search:ht.search?ht.search.replace(/^\?/,""):"",hash:ht.hash?ht.hash.replace(/^#/,""):"",hostname:ht.hostname,port:ht.port,pathname:ht.pathname.charAt(0)==="/"?ht.pathname:"/"+ht.pathname}}return vt=bt(window.location.href),function(At){const _t=utils$1.isString(At)?bt(At):At;return _t.protocol===vt.protocol&&_t.host===vt.host}}():function(){return function(){return!0}}(),cookies=platform.hasStandardBrowserEnv?{write(_e,$,ht,vt,bt,Et){const At=[_e+"="+encodeURIComponent($)];utils$1.isNumber(ht)&&At.push("expires="+new Date(ht).toGMTString()),utils$1.isString(vt)&&At.push("path="+vt),utils$1.isString(bt)&&At.push("domain="+bt),Et===!0&&At.push("secure"),document.cookie=At.join("; ")},read(_e){const $=document.cookie.match(new RegExp("(^|;\\s*)("+_e+")=([^;]*)"));return $?decodeURIComponent($[3]):null},remove(_e){this.write(_e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(_e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(_e)}function combineURLs(_e,$){return $?_e.replace(/\/?\/$/,"")+"/"+$.replace(/^\/+/,""):_e}function buildFullPath(_e,$){return _e&&!isAbsoluteURL($)?combineURLs(_e,$):$}const headersToObject=_e=>_e instanceof AxiosHeaders?{..._e}:_e;function mergeConfig(_e,$){$=$||{};const ht={};function vt(Ct,xt,Pt){return utils$1.isPlainObject(Ct)&&utils$1.isPlainObject(xt)?utils$1.merge.call({caseless:Pt},Ct,xt):utils$1.isPlainObject(xt)?utils$1.merge({},xt):utils$1.isArray(xt)?xt.slice():xt}function bt(Ct,xt,Pt){if(utils$1.isUndefined(xt)){if(!utils$1.isUndefined(Ct))return vt(void 0,Ct,Pt)}else return vt(Ct,xt,Pt)}function Et(Ct,xt){if(!utils$1.isUndefined(xt))return vt(void 0,xt)}function At(Ct,xt){if(utils$1.isUndefined(xt)){if(!utils$1.isUndefined(Ct))return vt(void 0,Ct)}else return vt(void 0,xt)}function _t(Ct,xt,Pt){if(Pt in $)return vt(Ct,xt);if(Pt in _e)return vt(void 0,Ct)}const wt={url:Et,method:Et,data:Et,baseURL:At,transformRequest:At,transformResponse:At,paramsSerializer:At,timeout:At,timeoutMessage:At,withCredentials:At,withXSRFToken:At,adapter:At,responseType:At,xsrfCookieName:At,xsrfHeaderName:At,onUploadProgress:At,onDownloadProgress:At,decompress:At,maxContentLength:At,maxBodyLength:At,beforeRedirect:At,transport:At,httpAgent:At,httpsAgent:At,cancelToken:At,socketPath:At,responseEncoding:At,validateStatus:_t,headers:(Ct,xt)=>bt(headersToObject(Ct),headersToObject(xt),!0)};return utils$1.forEach(Object.keys(Object.assign({},_e,$)),function(xt){const Pt=wt[xt]||bt,Rt=Pt(_e[xt],$[xt],xt);utils$1.isUndefined(Rt)&&Pt!==_t||(ht[xt]=Rt)}),ht}const resolveConfig=_e=>{const $=mergeConfig({},_e);let{data:ht,withXSRFToken:vt,xsrfHeaderName:bt,xsrfCookieName:Et,headers:At,auth:_t}=$;$.headers=At=AxiosHeaders.from(At),$.url=buildURL(buildFullPath($.baseURL,$.url),_e.params,_e.paramsSerializer),_t&&At.set("Authorization","Basic "+btoa((_t.username||"")+":"+(_t.password?unescape(encodeURIComponent(_t.password)):"")));let wt;if(utils$1.isFormData(ht)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)At.setContentType(void 0);else if((wt=At.getContentType())!==!1){const[Ct,...xt]=wt?wt.split(";").map(Pt=>Pt.trim()).filter(Boolean):[];At.setContentType([Ct||"multipart/form-data",...xt].join("; "))}}if(platform.hasStandardBrowserEnv&&(vt&&utils$1.isFunction(vt)&&(vt=vt($)),vt||vt!==!1&&isURLSameOrigin($.url))){const Ct=bt&&Et&&cookies.read(Et);Ct&&At.set(bt,Ct)}return $},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(_e){return new Promise(function(ht,vt){const bt=resolveConfig(_e);let Et=bt.data;const At=AxiosHeaders.from(bt.headers).normalize();let{responseType:_t}=bt,wt;function Ct(){bt.cancelToken&&bt.cancelToken.unsubscribe(wt),bt.signal&&bt.signal.removeEventListener("abort",wt)}let xt=new XMLHttpRequest;xt.open(bt.method.toUpperCase(),bt.url,!0),xt.timeout=bt.timeout;function Pt(){if(!xt)return;const kt=AxiosHeaders.from("getAllResponseHeaders"in xt&&xt.getAllResponseHeaders()),Lt={data:!_t||_t==="text"||_t==="json"?xt.responseText:xt.response,status:xt.status,statusText:xt.statusText,headers:kt,config:_e,request:xt};settle(function(Ft){ht(Ft),Ct()},function(Ft){vt(Ft),Ct()},Lt),xt=null}"onloadend"in xt?xt.onloadend=Pt:xt.onreadystatechange=function(){!xt||xt.readyState!==4||xt.status===0&&!(xt.responseURL&&xt.responseURL.indexOf("file:")===0)||setTimeout(Pt)},xt.onabort=function(){xt&&(vt(new AxiosError("Request aborted",AxiosError.ECONNABORTED,bt,xt)),xt=null)},xt.onerror=function(){vt(new AxiosError("Network Error",AxiosError.ERR_NETWORK,bt,xt)),xt=null},xt.ontimeout=function(){let Mt=bt.timeout?"timeout of "+bt.timeout+"ms exceeded":"timeout exceeded";const Lt=bt.transitional||transitionalDefaults;bt.timeoutErrorMessage&&(Mt=bt.timeoutErrorMessage),vt(new AxiosError(Mt,Lt.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,bt,xt)),xt=null},Et===void 0&&At.setContentType(null),"setRequestHeader"in xt&&utils$1.forEach(At.toJSON(),function(Mt,Lt){xt.setRequestHeader(Lt,Mt)}),utils$1.isUndefined(bt.withCredentials)||(xt.withCredentials=!!bt.withCredentials),_t&&_t!=="json"&&(xt.responseType=bt.responseType),typeof bt.onDownloadProgress=="function"&&xt.addEventListener("progress",progressEventReducer(bt.onDownloadProgress,!0)),typeof bt.onUploadProgress=="function"&&xt.upload&&xt.upload.addEventListener("progress",progressEventReducer(bt.onUploadProgress)),(bt.cancelToken||bt.signal)&&(wt=kt=>{xt&&(vt(!kt||kt.type?new CanceledError(null,_e,xt):kt),xt.abort(),xt=null)},bt.cancelToken&&bt.cancelToken.subscribe(wt),bt.signal&&(bt.signal.aborted?wt():bt.signal.addEventListener("abort",wt)));const Rt=parseProtocol(bt.url);if(Rt&&platform.protocols.indexOf(Rt)===-1){vt(new AxiosError("Unsupported protocol "+Rt+":",AxiosError.ERR_BAD_REQUEST,_e));return}xt.send(Et||null)})},composeSignals=(_e,$)=>{let ht=new AbortController,vt;const bt=function(wt){if(!vt){vt=!0,At();const Ct=wt instanceof Error?wt:this.reason;ht.abort(Ct instanceof AxiosError?Ct:new CanceledError(Ct instanceof Error?Ct.message:Ct))}};let Et=$&&setTimeout(()=>{bt(new AxiosError(`timeout ${$} of ms exceeded`,AxiosError.ETIMEDOUT))},$);const At=()=>{_e&&(Et&&clearTimeout(Et),Et=null,_e.forEach(wt=>{wt&&(wt.removeEventListener?wt.removeEventListener("abort",bt):wt.unsubscribe(bt))}),_e=null)};_e.forEach(wt=>wt&&wt.addEventListener&&wt.addEventListener("abort",bt));const{signal:_t}=ht;return _t.unsubscribe=At,[_t,()=>{Et&&clearTimeout(Et),Et=null}]},streamChunk=function*(_e,$){let ht=_e.byteLength;if(!$||ht<$){yield _e;return}let vt=0,bt;for(;vt<ht;)bt=vt+$,yield _e.slice(vt,bt),vt=bt},readBytes=async function*(_e,$,ht){for await(const vt of _e)yield*streamChunk(ArrayBuffer.isView(vt)?vt:await ht(String(vt)),$)},trackStream=(_e,$,ht,vt,bt)=>{const Et=readBytes(_e,$,bt);let At=0;return new ReadableStream({type:"bytes",async pull(_t){const{done:wt,value:Ct}=await Et.next();if(wt){_t.close(),vt();return}let xt=Ct.byteLength;ht&&ht(At+=xt),_t.enqueue(new Uint8Array(Ct))},cancel(_t){return vt(_t),Et.return()}},{highWaterMark:2})},fetchProgressDecorator=(_e,$)=>{const ht=_e!=null;return vt=>setTimeout(()=>$({lengthComputable:ht,total:_e,loaded:vt}))},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(_e=>$=>_e.encode($))(new TextEncoder):async _e=>new Uint8Array(await new Response(_e).arrayBuffer())),supportsRequestStream=isReadableStreamSupported&&(()=>{let _e=!1;const $=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return _e=!0,"half"}}).headers.has("Content-Type");return _e&&!$})(),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&!!(()=>{try{return utils$1.isReadableStream(new Response("").body)}catch{}})(),resolvers={stream:supportsResponseStream&&(_e=>_e.body)};isFetchSupported&&(_e=>{["text","arrayBuffer","blob","formData","stream"].forEach($=>{!resolvers[$]&&(resolvers[$]=utils$1.isFunction(_e[$])?ht=>ht[$]():(ht,vt)=>{throw new AxiosError(`Response type '${$}' is not supported`,AxiosError.ERR_NOT_SUPPORT,vt)})})})(new Response);const getBodyLength=async _e=>{if(_e==null)return 0;if(utils$1.isBlob(_e))return _e.size;if(utils$1.isSpecCompliantForm(_e))return(await new Request(_e).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(_e))return _e.byteLength;if(utils$1.isURLSearchParams(_e)&&(_e=_e+""),utils$1.isString(_e))return(await encodeText(_e)).byteLength},resolveBodyLength=async(_e,$)=>{const ht=utils$1.toFiniteNumber(_e.getContentLength());return ht??getBodyLength($)},fetchAdapter=isFetchSupported&&(async _e=>{let{url:$,method:ht,data:vt,signal:bt,cancelToken:Et,timeout:At,onDownloadProgress:_t,onUploadProgress:wt,responseType:Ct,headers:xt,withCredentials:Pt="same-origin",fetchOptions:Rt}=resolveConfig(_e);Ct=Ct?(Ct+"").toLowerCase():"text";let[kt,Mt]=bt||Et||At?composeSignals([bt,Et],At):[],Lt,Ot;const Ft=()=>{!Lt&&setTimeout(()=>{kt&&kt.unsubscribe()}),Lt=!0};let Dt;try{if(wt&&supportsRequestStream&&ht!=="get"&&ht!=="head"&&(Dt=await resolveBodyLength(xt,vt))!==0){let Ht=new Request($,{method:"POST",body:vt,duplex:"half"}),Vt;utils$1.isFormData(vt)&&(Vt=Ht.headers.get("content-type"))&&xt.setContentType(Vt),Ht.body&&(vt=trackStream(Ht.body,DEFAULT_CHUNK_SIZE,fetchProgressDecorator(Dt,progressEventReducer(wt)),null,encodeText))}utils$1.isString(Pt)||(Pt=Pt?"cors":"omit"),Ot=new Request($,{...Rt,signal:kt,method:ht.toUpperCase(),headers:xt.normalize().toJSON(),body:vt,duplex:"half",withCredentials:Pt});let $t=await fetch(Ot);const Bt=supportsResponseStream&&(Ct==="stream"||Ct==="response");if(supportsResponseStream&&(_t||Bt)){const Ht={};["status","statusText","headers"].forEach(jt=>{Ht[jt]=$t[jt]});const Vt=utils$1.toFiniteNumber($t.headers.get("content-length"));$t=new Response(trackStream($t.body,DEFAULT_CHUNK_SIZE,_t&&fetchProgressDecorator(Vt,progressEventReducer(_t,!0)),Bt&&Ft,encodeText),Ht)}Ct=Ct||"text";let Nt=await resolvers[utils$1.findKey(resolvers,Ct)||"text"]($t,_e);return!Bt&&Ft(),Mt&&Mt(),await new Promise((Ht,Vt)=>{settle(Ht,Vt,{data:Nt,headers:AxiosHeaders.from($t.headers),status:$t.status,statusText:$t.statusText,config:_e,request:Ot})})}catch($t){throw Ft(),$t&&$t.name==="TypeError"&&/fetch/i.test($t.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,_e,Ot),{cause:$t.cause||$t}):AxiosError.from($t,$t&&$t.code,_e,Ot)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(_e,$)=>{if(_e){try{Object.defineProperty(_e,"name",{value:$})}catch{}Object.defineProperty(_e,"adapterName",{value:$})}});const renderReason=_e=>`- ${_e}`,isResolvedHandle=_e=>utils$1.isFunction(_e)||_e===null||_e===!1,adapters={getAdapter:_e=>{_e=utils$1.isArray(_e)?_e:[_e];const{length:$}=_e;let ht,vt;const bt={};for(let Et=0;Et<$;Et++){ht=_e[Et];let At;if(vt=ht,!isResolvedHandle(ht)&&(vt=knownAdapters[(At=String(ht)).toLowerCase()],vt===void 0))throw new AxiosError(`Unknown adapter '${At}'`);if(vt)break;bt[At||"#"+Et]=vt}if(!vt){const Et=Object.entries(bt).map(([_t,wt])=>`adapter ${_t} `+(wt===!1?"is not supported by the environment":"is not available in the build"));let At=$?Et.length>1?`since :
`+Et.map(renderReason).join(`
`):" "+renderReason(Et[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+At,"ERR_NOT_SUPPORT")}return vt},adapters:knownAdapters};function throwIfCancellationRequested(_e){if(_e.cancelToken&&_e.cancelToken.throwIfRequested(),_e.signal&&_e.signal.aborted)throw new CanceledError(null,_e)}function dispatchRequest(_e){return throwIfCancellationRequested(_e),_e.headers=AxiosHeaders.from(_e.headers),_e.data=transformData.call(_e,_e.transformRequest),["post","put","patch"].indexOf(_e.method)!==-1&&_e.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(_e.adapter||defaults.adapter)(_e).then(function(vt){return throwIfCancellationRequested(_e),vt.data=transformData.call(_e,_e.transformResponse,vt),vt.headers=AxiosHeaders.from(vt.headers),vt},function(vt){return isCancel(vt)||(throwIfCancellationRequested(_e),vt&&vt.response&&(vt.response.data=transformData.call(_e,_e.transformResponse,vt.response),vt.response.headers=AxiosHeaders.from(vt.response.headers))),Promise.reject(vt)})}const VERSION="1.7.2",validators$1={};["object","boolean","number","function","string","symbol"].forEach((_e,$)=>{validators$1[_e]=function(vt){return typeof vt===_e||"a"+($<1?"n ":" ")+_e}});const deprecatedWarnings={};validators$1.transitional=function($,ht,vt){function bt(Et,At){return"[Axios v"+VERSION+"] Transitional option '"+Et+"'"+At+(vt?". "+vt:"")}return(Et,At,_t)=>{if($===!1)throw new AxiosError(bt(At," has been removed"+(ht?" in "+ht:"")),AxiosError.ERR_DEPRECATED);return ht&&!deprecatedWarnings[At]&&(deprecatedWarnings[At]=!0,console.warn(bt(At," has been deprecated since v"+ht+" and will be removed in the near future"))),$?$(Et,At,_t):!0}};function assertOptions(_e,$,ht){if(typeof _e!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const vt=Object.keys(_e);let bt=vt.length;for(;bt-- >0;){const Et=vt[bt],At=$[Et];if(At){const _t=_e[Et],wt=_t===void 0||At(_t,Et,_e);if(wt!==!0)throw new AxiosError("option "+Et+" must be "+wt,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(ht!==!0)throw new AxiosError("Unknown option "+Et,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor($){this.defaults=$,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request($,ht){try{return await this._request($,ht)}catch(vt){if(vt instanceof Error){let bt;Error.captureStackTrace?Error.captureStackTrace(bt={}):bt=new Error;const Et=bt.stack?bt.stack.replace(/^.+\n/,""):"";try{vt.stack?Et&&!String(vt.stack).endsWith(Et.replace(/^.+\n.+\n/,""))&&(vt.stack+=`
`+Et):vt.stack=Et}catch{}}throw vt}}_request($,ht){typeof $=="string"?(ht=ht||{},ht.url=$):ht=$||{},ht=mergeConfig(this.defaults,ht);const{transitional:vt,paramsSerializer:bt,headers:Et}=ht;vt!==void 0&&validator.assertOptions(vt,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),bt!=null&&(utils$1.isFunction(bt)?ht.paramsSerializer={serialize:bt}:validator.assertOptions(bt,{encode:validators.function,serialize:validators.function},!0)),ht.method=(ht.method||this.defaults.method||"get").toLowerCase();let At=Et&&utils$1.merge(Et.common,Et[ht.method]);Et&&utils$1.forEach(["delete","get","head","post","put","patch","common"],Mt=>{delete Et[Mt]}),ht.headers=AxiosHeaders.concat(At,Et);const _t=[];let wt=!0;this.interceptors.request.forEach(function(Lt){typeof Lt.runWhen=="function"&&Lt.runWhen(ht)===!1||(wt=wt&&Lt.synchronous,_t.unshift(Lt.fulfilled,Lt.rejected))});const Ct=[];this.interceptors.response.forEach(function(Lt){Ct.push(Lt.fulfilled,Lt.rejected)});let xt,Pt=0,Rt;if(!wt){const Mt=[dispatchRequest.bind(this),void 0];for(Mt.unshift.apply(Mt,_t),Mt.push.apply(Mt,Ct),Rt=Mt.length,xt=Promise.resolve(ht);Pt<Rt;)xt=xt.then(Mt[Pt++],Mt[Pt++]);return xt}Rt=_t.length;let kt=ht;for(Pt=0;Pt<Rt;){const Mt=_t[Pt++],Lt=_t[Pt++];try{kt=Mt(kt)}catch(Ot){Lt.call(this,Ot);break}}try{xt=dispatchRequest.call(this,kt)}catch(Mt){return Promise.reject(Mt)}for(Pt=0,Rt=Ct.length;Pt<Rt;)xt=xt.then(Ct[Pt++],Ct[Pt++]);return xt}getUri($){$=mergeConfig(this.defaults,$);const ht=buildFullPath($.baseURL,$.url);return buildURL(ht,$.params,$.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function($){Axios.prototype[$]=function(ht,vt){return this.request(mergeConfig(vt||{},{method:$,url:ht,data:(vt||{}).data}))}});utils$1.forEach(["post","put","patch"],function($){function ht(vt){return function(Et,At,_t){return this.request(mergeConfig(_t||{},{method:$,headers:vt?{"Content-Type":"multipart/form-data"}:{},url:Et,data:At}))}}Axios.prototype[$]=ht(),Axios.prototype[$+"Form"]=ht(!0)});class CancelToken{constructor($){if(typeof $!="function")throw new TypeError("executor must be a function.");let ht;this.promise=new Promise(function(Et){ht=Et});const vt=this;this.promise.then(bt=>{if(!vt._listeners)return;let Et=vt._listeners.length;for(;Et-- >0;)vt._listeners[Et](bt);vt._listeners=null}),this.promise.then=bt=>{let Et;const At=new Promise(_t=>{vt.subscribe(_t),Et=_t}).then(bt);return At.cancel=function(){vt.unsubscribe(Et)},At},$(function(Et,At,_t){vt.reason||(vt.reason=new CanceledError(Et,At,_t),ht(vt.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe($){if(this.reason){$(this.reason);return}this._listeners?this._listeners.push($):this._listeners=[$]}unsubscribe($){if(!this._listeners)return;const ht=this._listeners.indexOf($);ht!==-1&&this._listeners.splice(ht,1)}static source(){let $;return{token:new CancelToken(function(bt){$=bt}),cancel:$}}}function spread(_e){return function(ht){return _e.apply(null,ht)}}function isAxiosError(_e){return utils$1.isObject(_e)&&_e.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([_e,$])=>{HttpStatusCode[$]=_e});function createInstance(_e){const $=new Axios(_e),ht=bind(Axios.prototype.request,$);return utils$1.extend(ht,Axios.prototype,$,{allOwnKeys:!0}),utils$1.extend(ht,$,null,{allOwnKeys:!0}),ht.create=function(bt){return createInstance(mergeConfig(_e,bt))},ht}const axios=createInstance(defaults);axios.Axios=Axios;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function($){return Promise.all($)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders;axios.formToJSON=_e=>formDataToJSON(utils$1.isHTMLForm(_e)?new FormData(_e):_e);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode;axios.default=axios;/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=_e=>_e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(..._e)=>_e.filter(($,ht,vt)=>!!$&&vt.indexOf($)===ht).join(" ");/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:_e="currentColor",size:$=24,strokeWidth:ht=2,absoluteStrokeWidth:vt,className:bt="",children:Et,iconNode:At,..._t},wt)=>reactExports.createElement("svg",{ref:wt,...defaultAttributes,width:$,height:$,stroke:_e,strokeWidth:vt?Number(ht)*24/Number($):ht,className:mergeClasses("lucide",bt),..._t},[...At.map(([Ct,xt])=>reactExports.createElement(Ct,xt)),...Array.isArray(Et)?Et:[Et]]));/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(_e,$)=>{const ht=reactExports.forwardRef(({className:vt,...bt},Et)=>reactExports.createElement(Icon,{ref:Et,iconNode:$,className:mergeClasses(`lucide-${toKebabCase(_e)}`,vt),...bt}));return ht.displayName=`${_e}`,ht};/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleCheckBig=createLucideIcon("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleX=createLucideIcon("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FileText=createLucideIcon("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LineChart=createLucideIcon("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LoaderCircle=createLucideIcon("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Loader=createLucideIcon("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MessageCircle=createLucideIcon("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Send=createLucideIcon("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TriangleAlert=createLucideIcon("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const User=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(_e,$){if(_e==null)return{};var ht=_objectWithoutPropertiesLoose(_e,$),vt,bt;if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(_e);for(bt=0;bt<Et.length;bt++)vt=Et[bt],!($.indexOf(vt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,vt)&&(ht[vt]=_e[vt])}return ht}function _objectWithoutPropertiesLoose(_e,$){if(_e==null)return{};var ht={};for(var vt in _e)if(Object.prototype.hasOwnProperty.call(_e,vt)){if($.indexOf(vt)>=0)continue;ht[vt]=_e[vt]}return ht}function _extends(){return _extends=Object.assign?Object.assign.bind():function(_e){for(var $=1;$<arguments.length;$++){var ht=arguments[$];for(var vt in ht)Object.prototype.hasOwnProperty.call(ht,vt)&&(_e[vt]=ht[vt])}return _e},_extends.apply(this,arguments)}function ownKeys(_e,$){var ht=Object.keys(_e);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(_e);$&&(vt=vt.filter(function(bt){return Object.getOwnPropertyDescriptor(_e,bt).enumerable})),ht.push.apply(ht,vt)}return ht}function _objectSpread(_e){for(var $=1;$<arguments.length;$++){var ht=arguments[$]!=null?arguments[$]:{};$%2?ownKeys(Object(ht),!0).forEach(function(vt){_defineProperty(_e,vt,ht[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(ht)):ownKeys(Object(ht)).forEach(function(vt){Object.defineProperty(_e,vt,Object.getOwnPropertyDescriptor(ht,vt))})}return _e}function _defineProperty(_e,$,ht){return $=_toPropertyKey($),$ in _e?Object.defineProperty(_e,$,{value:ht,enumerable:!0,configurable:!0,writable:!0}):_e[$]=ht,_e}function _toPropertyKey(_e){var $=_toPrimitive(_e,"string");return typeof $=="symbol"?$:$+""}function _toPrimitive(_e,$){if(typeof _e!="object"||!_e)return _e;var ht=_e[Symbol.toPrimitive];if(ht!==void 0){var vt=ht.call(_e,$||"default");if(typeof vt!="object")return vt;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_e)}function Tree2Element(_e){return _e&&_e.map(($,ht)=>React.createElement($.tag,_objectSpread({key:ht},$.attr),Tree2Element($.child)))}function GenIcon(_e){return $=>React.createElement(IconBase,_extends({attr:_objectSpread({},_e.attr)},$),Tree2Element(_e.child))}function IconBase(_e){var $=ht=>{var{attr:vt,size:bt,title:Et}=_e,At=_objectWithoutProperties(_e,_excluded),_t=bt||ht.size||"1em",wt;return ht.className&&(wt=ht.className),_e.className&&(wt=(wt?wt+" ":"")+_e.className),React.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},ht.attr,vt,At,{className:wt,style:_objectSpread(_objectSpread({color:_e.color||ht.color},ht.style),_e.style),height:_t,width:_t,xmlns:"http://www.w3.org/2000/svg"}),Et&&React.createElement("title",null,Et),_e.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,ht=>$(ht)):$(DefaultContext)}function FaEdit(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(_e)}const MotionConfigContext=reactExports.createContext({transformPagePoint:_e=>_e,isStatic:!1,reducedMotion:"never"}),MotionContext=reactExports.createContext({}),PresenceContext=reactExports.createContext(null),isBrowser=typeof document<"u",useIsomorphicLayoutEffect=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,LazyContext=reactExports.createContext({strict:!1}),camelToDash=_e=>_e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),MotionGlobalConfig={skipAnimations:!1,useManualTiming:!1};class Queue{constructor(){this.order=[],this.scheduled=new Set}add($){if(!this.scheduled.has($))return this.scheduled.add($),this.order.push($),!0}remove($){const ht=this.order.indexOf($);ht!==-1&&(this.order.splice(ht,1),this.scheduled.delete($))}clear(){this.order.length=0,this.scheduled.clear()}}function createRenderStep(_e){let $=new Queue,ht=new Queue,vt=0,bt=!1,Et=!1;const At=new WeakSet,_t={schedule:(wt,Ct=!1,xt=!1)=>{const Pt=xt&&bt,Rt=Pt?$:ht;return Ct&&At.add(wt),Rt.add(wt)&&Pt&&bt&&(vt=$.order.length),wt},cancel:wt=>{ht.remove(wt),At.delete(wt)},process:wt=>{if(bt){Et=!0;return}if(bt=!0,[$,ht]=[ht,$],ht.clear(),vt=$.order.length,vt)for(let Ct=0;Ct<vt;Ct++){const xt=$.order[Ct];At.has(xt)&&(_t.schedule(xt),_e()),xt(wt)}bt=!1,Et&&(Et=!1,_t.process(wt))}};return _t}const stepsOrder=["read","resolveKeyframes","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(_e,$){let ht=!1,vt=!0;const bt={delta:0,timestamp:0,isProcessing:!1},Et=stepsOrder.reduce((Pt,Rt)=>(Pt[Rt]=createRenderStep(()=>ht=!0),Pt),{}),At=Pt=>{Et[Pt].process(bt)},_t=()=>{const Pt=performance.now();ht=!1,bt.delta=vt?1e3/60:Math.max(Math.min(Pt-bt.timestamp,maxElapsed),1),bt.timestamp=Pt,bt.isProcessing=!0,stepsOrder.forEach(At),bt.isProcessing=!1,ht&&$&&(vt=!1,_e(_t))},wt=()=>{ht=!0,vt=!0,bt.isProcessing||_e(_t)};return{schedule:stepsOrder.reduce((Pt,Rt)=>{const kt=Et[Rt];return Pt[Rt]=(Mt,Lt=!1,Ot=!1)=>(ht||wt(),kt.schedule(Mt,Lt,Ot)),Pt},{}),cancel:Pt=>stepsOrder.forEach(Rt=>Et[Rt].cancel(Pt)),state:bt,steps:Et}}const{schedule:microtask,cancel:cancelMicrotask}=createRenderBatcher(queueMicrotask,!1);function isRefObject(_e){return _e&&typeof _e=="object"&&Object.prototype.hasOwnProperty.call(_e,"current")}const SwitchLayoutGroupContext=reactExports.createContext({});let scheduleHandoffComplete=!1;function useVisualElement(_e,$,ht,vt,bt){const{visualElement:Et}=reactExports.useContext(MotionContext),At=reactExports.useContext(LazyContext),_t=reactExports.useContext(PresenceContext),wt=reactExports.useContext(MotionConfigContext).reducedMotion,Ct=reactExports.useRef();vt=vt||At.renderer,!Ct.current&&vt&&(Ct.current=vt(_e,{visualState:$,parent:Et,props:ht,presenceContext:_t,blockInitialAnimation:_t?_t.initial===!1:!1,reducedMotionConfig:wt}));const xt=Ct.current,Pt=reactExports.useContext(SwitchLayoutGroupContext);xt&&!xt.projection&&bt&&(xt.type==="html"||xt.type==="svg")&&createProjectionNode$1(Ct.current,ht,bt,Pt),reactExports.useInsertionEffect(()=>{xt&&xt.update(ht,_t)});const Rt=reactExports.useRef(!!(ht[optimizedAppearDataAttribute]&&!window.HandoffComplete));return useIsomorphicLayoutEffect(()=>{xt&&(xt.updateFeatures(),microtask.render(xt.render),Rt.current&&xt.animationState&&xt.animationState.animateChanges())}),reactExports.useEffect(()=>{xt&&(!Rt.current&&xt.animationState&&xt.animationState.animateChanges(),Rt.current&&(Rt.current=!1,scheduleHandoffComplete||(scheduleHandoffComplete=!0,queueMicrotask(completeHandoff))))}),xt}function completeHandoff(){window.HandoffComplete=!0}function createProjectionNode$1(_e,$,ht,vt){const{layoutId:bt,layout:Et,drag:At,dragConstraints:_t,layoutScroll:wt,layoutRoot:Ct}=$;_e.projection=new ht(_e.latestValues,$["data-framer-portal-id"]?void 0:getClosestProjectingNode(_e.parent)),_e.projection.setOptions({layoutId:bt,layout:Et,alwaysMeasureLayout:!!At||_t&&isRefObject(_t),visualElement:_e,scheduleRender:()=>_e.scheduleRender(),animationType:typeof Et=="string"?Et:"both",initialPromotionConfig:vt,layoutScroll:wt,layoutRoot:Ct})}function getClosestProjectingNode(_e){if(_e)return _e.options.allowProjection!==!1?_e.projection:getClosestProjectingNode(_e.parent)}function useMotionRef(_e,$,ht){return reactExports.useCallback(vt=>{vt&&_e.mount&&_e.mount(vt),$&&(vt?$.mount(vt):$.unmount()),ht&&(typeof ht=="function"?ht(vt):isRefObject(ht)&&(ht.current=vt))},[$])}function isVariantLabel(_e){return typeof _e=="string"||Array.isArray(_e)}function isAnimationControls(_e){return _e!==null&&typeof _e=="object"&&typeof _e.start=="function"}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(_e){return isAnimationControls(_e.animate)||variantProps.some($=>isVariantLabel(_e[$]))}function isVariantNode(_e){return!!(isControllingVariants(_e)||_e.variants)}function getCurrentTreeVariants(_e,$){if(isControllingVariants(_e)){const{initial:ht,animate:vt}=_e;return{initial:ht===!1||isVariantLabel(ht)?ht:void 0,animate:isVariantLabel(vt)?vt:void 0}}return _e.inherit!==!1?$:{}}function useCreateMotionContext(_e){const{initial:$,animate:ht}=getCurrentTreeVariants(_e,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:$,animate:ht}),[variantLabelsAsDependency($),variantLabelsAsDependency(ht)])}function variantLabelsAsDependency(_e){return Array.isArray(_e)?_e.join(" "):_e}const featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const _e in featureProps)featureDefinitions[_e]={isEnabled:$=>featureProps[_e].some(ht=>!!$[ht])};function loadFeatures(_e){for(const $ in _e)featureDefinitions[$]={...featureDefinitions[$],..._e[$]}}const LayoutGroupContext=reactExports.createContext({}),motionComponentSymbol=Symbol.for("motionComponentSymbol"),noop=_e=>_e;let invariant=noop;function createMotionComponent({preloadedFeatures:_e,createVisualElement:$,useRender:ht,useVisualState:vt,Component:bt}){_e&&loadFeatures(_e);function Et(_t,wt){let Ct;const xt={...reactExports.useContext(MotionConfigContext),..._t,layoutId:useLayoutId(_t)},{isStatic:Pt}=xt,Rt=useCreateMotionContext(_t),kt=vt(_t,Pt);if(!Pt&&isBrowser){useStrictMode();const Mt=getProjectionFunctionality(xt);Ct=Mt.MeasureLayout,Rt.visualElement=useVisualElement(bt,kt,xt,$,Mt.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:Rt,children:[Ct&&Rt.visualElement?jsxRuntimeExports.jsx(Ct,{visualElement:Rt.visualElement,...xt}):null,ht(bt,_t,useMotionRef(kt,Rt.visualElement,wt),kt,Pt,Rt.visualElement)]})}const At=reactExports.forwardRef(Et);return At[motionComponentSymbol]=bt,At}function useLayoutId({layoutId:_e}){const $=reactExports.useContext(LayoutGroupContext).id;return $&&_e!==void 0?$+"-"+_e:_e}function useStrictMode(_e,$){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(_e){const{drag:$,layout:ht}=featureDefinitions;if(!$&&!ht)return{};const vt={...$,...ht};return{MeasureLayout:$!=null&&$.isEnabled(_e)||ht!=null&&ht.isEnabled(_e)?vt.MeasureLayout:void 0,ProjectionNode:vt.ProjectionNode}}function createMotionProxy(_e){function $(vt,bt={}){return createMotionComponent(_e(vt,bt))}if(typeof Proxy>"u")return $;const ht=new Map;return new Proxy($,{get:(vt,bt)=>(ht.has(bt)||ht.set(bt,$(bt)),ht.get(bt))})}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(_e){return typeof _e!="string"||_e.includes("-")?!1:!!(lowercaseSVGElements.indexOf(_e)>-1||/[A-Z]/u.test(_e))}const scaleCorrectors={};function addScaleCorrector(_e){Object.assign(scaleCorrectors,_e)}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder);function isForcedMotionValue(_e,{layout:$,layoutId:ht}){return transformProps.has(_e)||_e.startsWith("origin")||($||ht!==void 0)&&(!!scaleCorrectors[_e]||_e==="opacity")}const isMotionValue=_e=>!!(_e&&_e.getVelocity),translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(_e,{enableHardwareAcceleration:$=!0,allowTransformNone:ht=!0},vt,bt){let Et="";for(let At=0;At<numTransforms;At++){const _t=transformPropOrder[At];if(_e[_t]!==void 0){const wt=translateAlias[_t]||_t;Et+=`${wt}(${_e[_t]}) `}}return $&&!_e.z&&(Et+="translateZ(0)"),Et=Et.trim(),bt?Et=bt(_e,vt?"":Et):ht&&vt&&(Et="none"),Et}const checkStringStartsWith=_e=>$=>typeof $=="string"&&$.startsWith(_e),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=_e=>startsAsVariableToken(_e)?singleCssVariableRegex.test(_e.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,getValueAsType=(_e,$)=>$&&typeof _e=="number"?$.transform(_e):_e,clamp=(_e,$,ht)=>ht>$?$:ht<_e?_e:ht,number={test:_e=>typeof _e=="number",parse:parseFloat,transform:_e=>_e},alpha={...number,transform:_e=>clamp(0,1,_e)},scale={...number,default:1},sanitize=_e=>Math.round(_e*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function isString(_e){return typeof _e=="string"}function isNullish(_e){return _e==null}const createUnitType=_e=>({test:$=>isString($)&&$.endsWith(_e)&&$.split(" ").length===1,parse:parseFloat,transform:$=>`${$}${_e}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:_e=>percent.parse(_e)/100,transform:_e=>percent.transform(_e*100)},int={...number,transform:Math.round},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,size:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px,zIndex:int,backgroundPositionX:px,backgroundPositionY:px,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int};function buildHTMLStyles(_e,$,ht,vt){const{style:bt,vars:Et,transform:At,transformOrigin:_t}=_e;let wt=!1,Ct=!1,xt=!0;for(const Pt in $){const Rt=$[Pt];if(isCSSVariableName(Pt)){Et[Pt]=Rt;continue}const kt=numberValueTypes[Pt],Mt=getValueAsType(Rt,kt);if(transformProps.has(Pt)){if(wt=!0,At[Pt]=Mt,!xt)continue;Rt!==(kt.default||0)&&(xt=!1)}else Pt.startsWith("origin")?(Ct=!0,_t[Pt]=Mt):bt[Pt]=Mt}if($.transform||(wt||vt?bt.transform=buildTransform(_e.transform,ht,xt,vt):bt.transform&&(bt.transform="none")),Ct){const{originX:Pt="50%",originY:Rt="50%",originZ:kt=0}=_t;bt.transformOrigin=`${Pt} ${Rt} ${kt}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(_e,$,ht){for(const vt in $)!isMotionValue($[vt])&&!isForcedMotionValue(vt,ht)&&(_e[vt]=$[vt])}function useInitialMotionValues({transformTemplate:_e},$,ht){return reactExports.useMemo(()=>{const vt=createHtmlRenderState();return buildHTMLStyles(vt,$,{enableHardwareAcceleration:!ht},_e),Object.assign({},vt.vars,vt.style)},[$])}function useStyle(_e,$,ht){const vt=_e.style||{},bt={};return copyRawValuesOnly(bt,vt,_e),Object.assign(bt,useInitialMotionValues(_e,$,ht)),bt}function useHTMLProps(_e,$,ht){const vt={},bt=useStyle(_e,$,ht);return _e.drag&&_e.dragListener!==!1&&(vt.draggable=!1,bt.userSelect=bt.WebkitUserSelect=bt.WebkitTouchCallout="none",bt.touchAction=_e.drag===!0?"none":`pan-${_e.drag==="x"?"y":"x"}`),_e.tabIndex===void 0&&(_e.onTap||_e.onTapStart||_e.whileTap)&&(vt.tabIndex=0),vt.style=bt,vt}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(_e){return _e.startsWith("while")||_e.startsWith("drag")&&_e!=="draggable"||_e.startsWith("layout")||_e.startsWith("onTap")||_e.startsWith("onPan")||_e.startsWith("onLayout")||validMotionProps.has(_e)}let shouldForward=_e=>!isValidMotionProp(_e);function loadExternalIsValidProp(_e){_e&&(shouldForward=$=>$.startsWith("on")?!isValidMotionProp($):_e($))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(_e,$,ht){const vt={};for(const bt in _e)bt==="values"&&typeof _e.values=="object"||(shouldForward(bt)||ht===!0&&isValidMotionProp(bt)||!$&&!isValidMotionProp(bt)||_e.draggable&&bt.startsWith("onDrag"))&&(vt[bt]=_e[bt]);return vt}function calcOrigin$1(_e,$,ht){return typeof _e=="string"?_e:px.transform($+ht*_e)}function calcSVGTransformOrigin(_e,$,ht){const vt=calcOrigin$1($,_e.x,_e.width),bt=calcOrigin$1(ht,_e.y,_e.height);return`${vt} ${bt}`}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(_e,$,ht=1,vt=0,bt=!0){_e.pathLength=1;const Et=bt?dashKeys:camelKeys;_e[Et.offset]=px.transform(-vt);const At=px.transform($),_t=px.transform(ht);_e[Et.array]=`${At} ${_t}`}function buildSVGAttrs(_e,{attrX:$,attrY:ht,attrScale:vt,originX:bt,originY:Et,pathLength:At,pathSpacing:_t=1,pathOffset:wt=0,...Ct},xt,Pt,Rt){if(buildHTMLStyles(_e,Ct,xt,Rt),Pt){_e.style.viewBox&&(_e.attrs.viewBox=_e.style.viewBox);return}_e.attrs=_e.style,_e.style={};const{attrs:kt,style:Mt,dimensions:Lt}=_e;kt.transform&&(Lt&&(Mt.transform=kt.transform),delete kt.transform),Lt&&(bt!==void 0||Et!==void 0||Mt.transform)&&(Mt.transformOrigin=calcSVGTransformOrigin(Lt,bt!==void 0?bt:.5,Et!==void 0?Et:.5)),$!==void 0&&(kt.x=$),ht!==void 0&&(kt.y=ht),vt!==void 0&&(kt.scale=vt),At!==void 0&&buildSVGPath(kt,At,_t,wt,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=_e=>typeof _e=="string"&&_e.toLowerCase()==="svg";function useSVGProps(_e,$,ht,vt){const bt=reactExports.useMemo(()=>{const Et=createSvgRenderState();return buildSVGAttrs(Et,$,{enableHardwareAcceleration:!1},isSVGTag(vt),_e.transformTemplate),{...Et.attrs,style:{...Et.style}}},[$]);if(_e.style){const Et={};copyRawValuesOnly(Et,_e.style,_e),bt.style={...Et,...bt.style}}return bt}function createUseRender(_e=!1){return(ht,vt,bt,{latestValues:Et},At)=>{const wt=(isSVGComponent(ht)?useSVGProps:useHTMLProps)(vt,Et,At,ht),Ct=filterProps(vt,typeof ht=="string",_e),xt=ht!==reactExports.Fragment?{...Ct,...wt,ref:bt}:{},{children:Pt}=vt,Rt=reactExports.useMemo(()=>isMotionValue(Pt)?Pt.get():Pt,[Pt]);return reactExports.createElement(ht,{...xt,children:Rt})}}function renderHTML(_e,{style:$,vars:ht},vt,bt){Object.assign(_e.style,$,bt&&bt.getProjectionStyles(vt));for(const Et in ht)_e.style.setProperty(Et,ht[Et])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(_e,$,ht,vt){renderHTML(_e,$,void 0,vt);for(const bt in $.attrs)_e.setAttribute(camelCaseAttributes.has(bt)?bt:camelToDash(bt),$.attrs[bt])}function scrapeMotionValuesFromProps$1(_e,$,ht){var vt;const{style:bt}=_e,Et={};for(const At in bt)(isMotionValue(bt[At])||$.style&&isMotionValue($.style[At])||isForcedMotionValue(At,_e)||((vt=ht==null?void 0:ht.getValue(At))===null||vt===void 0?void 0:vt.liveStyle)!==void 0)&&(Et[At]=bt[At]);return Et}function scrapeMotionValuesFromProps(_e,$,ht){const vt=scrapeMotionValuesFromProps$1(_e,$,ht);for(const bt in _e)if(isMotionValue(_e[bt])||isMotionValue($[bt])){const Et=transformPropOrder.indexOf(bt)!==-1?"attr"+bt.charAt(0).toUpperCase()+bt.substring(1):bt;vt[Et]=_e[bt]}return vt}function getValueState(_e){const $=[{},{}];return _e==null||_e.values.forEach((ht,vt)=>{$[0][vt]=ht.get(),$[1][vt]=ht.getVelocity()}),$}function resolveVariantFromProps(_e,$,ht,vt){if(typeof $=="function"){const[bt,Et]=getValueState(vt);$=$(ht!==void 0?ht:_e.custom,bt,Et)}if(typeof $=="string"&&($=_e.variants&&_e.variants[$]),typeof $=="function"){const[bt,Et]=getValueState(vt);$=$(ht!==void 0?ht:_e.custom,bt,Et)}return $}function useConstant(_e){const $=reactExports.useRef(null);return $.current===null&&($.current=_e()),$.current}const isKeyframesTarget=_e=>Array.isArray(_e),isCustomValue=_e=>!!(_e&&typeof _e=="object"&&_e.mix&&_e.toValue),resolveFinalValueInKeyframes=_e=>isKeyframesTarget(_e)?_e[_e.length-1]||0:_e;function resolveMotionValue(_e){const $=isMotionValue(_e)?_e.get():_e;return isCustomValue($)?$.toValue():$}function makeState({scrapeMotionValuesFromProps:_e,createRenderState:$,onMount:ht},vt,bt,Et){const At={latestValues:makeLatestValues(vt,bt,Et,_e),renderState:$()};return ht&&(At.mount=_t=>ht(vt,_t,At)),At}const makeUseVisualState=_e=>($,ht)=>{const vt=reactExports.useContext(MotionContext),bt=reactExports.useContext(PresenceContext),Et=()=>makeState(_e,$,vt,bt);return ht?Et():useConstant(Et)};function makeLatestValues(_e,$,ht,vt){const bt={},Et=vt(_e,{});for(const Rt in Et)bt[Rt]=resolveMotionValue(Et[Rt]);let{initial:At,animate:_t}=_e;const wt=isControllingVariants(_e),Ct=isVariantNode(_e);$&&Ct&&!wt&&_e.inherit!==!1&&(At===void 0&&(At=$.initial),_t===void 0&&(_t=$.animate));let xt=ht?ht.initial===!1:!1;xt=xt||At===!1;const Pt=xt?_t:At;return Pt&&typeof Pt!="boolean"&&!isAnimationControls(Pt)&&(Array.isArray(Pt)?Pt:[Pt]).forEach(kt=>{const Mt=resolveVariantFromProps(_e,kt);if(!Mt)return;const{transitionEnd:Lt,transition:Ot,...Ft}=Mt;for(const Dt in Ft){let $t=Ft[Dt];if(Array.isArray($t)){const Bt=xt?$t.length-1:0;$t=$t[Bt]}$t!==null&&(bt[Dt]=$t)}for(const Dt in Lt)bt[Dt]=Lt[Dt]}),bt}const{schedule:frame,cancel:cancelFrame,state:frameData,steps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop,!0),svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onMount:(_e,$,{renderState:ht,latestValues:vt})=>{frame.read(()=>{try{ht.dimensions=typeof $.getBBox=="function"?$.getBBox():$.getBoundingClientRect()}catch{ht.dimensions={x:0,y:0,width:0,height:0}}}),frame.render(()=>{buildSVGAttrs(ht,vt,{enableHardwareAcceleration:!1},isSVGTag($.tagName),_e.transformTemplate),renderSVG($,ht)})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function createDomMotionConfig(_e,{forwardMotionProps:$=!1},ht,vt){return{...isSVGComponent(_e)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:ht,useRender:createUseRender($),createVisualElement:vt,Component:_e}}function addDomEvent(_e,$,ht,vt={passive:!0}){return _e.addEventListener($,ht,vt),()=>_e.removeEventListener($,ht)}const isPrimaryPointer=_e=>_e.pointerType==="mouse"?typeof _e.button!="number"||_e.button<=0:_e.isPrimary!==!1;function extractEventInfo(_e,$="page"){return{point:{x:_e[`${$}X`],y:_e[`${$}Y`]}}}const addPointerInfo=_e=>$=>isPrimaryPointer($)&&_e($,extractEventInfo($));function addPointerEvent(_e,$,ht,vt){return addDomEvent(_e,$,addPointerInfo(ht),vt)}const combineFunctions=(_e,$)=>ht=>$(_e(ht)),pipe=(..._e)=>_e.reduce(combineFunctions);function createLock(_e){let $=null;return()=>{const ht=()=>{$=null};return $===null?($=_e,ht):!1}}const globalHorizontalLock=createLock("dragHorizontal"),globalVerticalLock=createLock("dragVertical");function getGlobalLock(_e){let $=!1;if(_e==="y")$=globalVerticalLock();else if(_e==="x")$=globalHorizontalLock();else{const ht=globalHorizontalLock(),vt=globalVerticalLock();ht&&vt?$=()=>{ht(),vt()}:(ht&&ht(),vt&&vt())}return $}function isDragActive(){const _e=getGlobalLock(!0);return _e?(_e(),!1):!0}class Feature{constructor($){this.isMounted=!1,this.node=$}update(){}}function addHoverEvent(_e,$){const ht=$?"pointerenter":"pointerleave",vt=$?"onHoverStart":"onHoverEnd",bt=(Et,At)=>{if(Et.pointerType==="touch"||isDragActive())return;const _t=_e.getProps();_e.animationState&&_t.whileHover&&_e.animationState.setActive("whileHover",$);const wt=_t[vt];wt&&frame.postRender(()=>wt(Et,At))};return addPointerEvent(_e.current,ht,bt,{passive:!_e.getProps()[vt]})}class HoverGesture extends Feature{mount(){this.unmount=pipe(addHoverEvent(this.node,!0),addHoverEvent(this.node,!1))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let $=!1;try{$=this.node.current.matches(":focus-visible")}catch{$=!0}!$||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const isNodeOrChild=(_e,$)=>$?_e===$?!0:isNodeOrChild(_e,$.parentElement):!1;function fireSyntheticPointerEvent(_e,$){if(!$)return;const ht=new PointerEvent("pointer"+_e);$(ht,extractEventInfo(ht))}class PressGesture extends Feature{constructor(){super(...arguments),this.removeStartListeners=noop,this.removeEndListeners=noop,this.removeAccessibleListeners=noop,this.startPointerPress=($,ht)=>{if(this.isPressing)return;this.removeEndListeners();const vt=this.node.getProps(),Et=addPointerEvent(window,"pointerup",(_t,wt)=>{if(!this.checkPressEnd())return;const{onTap:Ct,onTapCancel:xt,globalTapTarget:Pt}=this.node.getProps(),Rt=!Pt&&!isNodeOrChild(this.node.current,_t.target)?xt:Ct;Rt&&frame.update(()=>Rt(_t,wt))},{passive:!(vt.onTap||vt.onPointerUp)}),At=addPointerEvent(window,"pointercancel",(_t,wt)=>this.cancelPress(_t,wt),{passive:!(vt.onTapCancel||vt.onPointerCancel)});this.removeEndListeners=pipe(Et,At),this.startPress($,ht)},this.startAccessiblePress=()=>{const $=Et=>{if(Et.key!=="Enter"||this.isPressing)return;const At=_t=>{_t.key!=="Enter"||!this.checkPressEnd()||fireSyntheticPointerEvent("up",(wt,Ct)=>{const{onTap:xt}=this.node.getProps();xt&&frame.postRender(()=>xt(wt,Ct))})};this.removeEndListeners(),this.removeEndListeners=addDomEvent(this.node.current,"keyup",At),fireSyntheticPointerEvent("down",(_t,wt)=>{this.startPress(_t,wt)})},ht=addDomEvent(this.node.current,"keydown",$),vt=()=>{this.isPressing&&fireSyntheticPointerEvent("cancel",(Et,At)=>this.cancelPress(Et,At))},bt=addDomEvent(this.node.current,"blur",vt);this.removeAccessibleListeners=pipe(ht,bt)}}startPress($,ht){this.isPressing=!0;const{onTapStart:vt,whileTap:bt}=this.node.getProps();bt&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),vt&&frame.postRender(()=>vt($,ht))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!isDragActive()}cancelPress($,ht){if(!this.checkPressEnd())return;const{onTapCancel:vt}=this.node.getProps();vt&&frame.postRender(()=>vt($,ht))}mount(){const $=this.node.getProps(),ht=addPointerEvent($.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!($.onTapStart||$.onPointerStart)}),vt=addDomEvent(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=pipe(ht,vt)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=_e=>{const $=observerCallbacks.get(_e.target);$&&$(_e)},fireAllObserverCallbacks=_e=>{_e.forEach(fireObserverCallback)};function initIntersectionObserver({root:_e,...$}){const ht=_e||document;observers.has(ht)||observers.set(ht,{});const vt=observers.get(ht),bt=JSON.stringify($);return vt[bt]||(vt[bt]=new IntersectionObserver(fireAllObserverCallbacks,{root:_e,...$})),vt[bt]}function observeIntersection(_e,$,ht){const vt=initIntersectionObserver($);return observerCallbacks.set(_e,ht),vt.observe(_e),()=>{observerCallbacks.delete(_e),vt.unobserve(_e)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:$={}}=this.node.getProps(),{root:ht,margin:vt,amount:bt="some",once:Et}=$,At={root:ht?ht.current:void 0,rootMargin:vt,threshold:typeof bt=="number"?bt:thresholdNames[bt]},_t=wt=>{const{isIntersecting:Ct}=wt;if(this.isInView===Ct||(this.isInView=Ct,Et&&!Ct&&this.hasEnteredView))return;Ct&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",Ct);const{onViewportEnter:xt,onViewportLeave:Pt}=this.node.getProps(),Rt=Ct?xt:Pt;Rt&&Rt(wt)};return observeIntersection(this.node.current,At,_t)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:$,prevProps:ht}=this.node;["amount","margin","root"].some(hasViewportOptionChanged($,ht))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:_e={}},{viewport:$={}}={}){return ht=>_e[ht]!==$[ht]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}};function shallowCompare(_e,$){if(!Array.isArray($))return!1;const ht=$.length;if(ht!==_e.length)return!1;for(let vt=0;vt<ht;vt++)if($[vt]!==_e[vt])return!1;return!0}function resolveVariant(_e,$,ht){const vt=_e.getProps();return resolveVariantFromProps(vt,$,ht!==void 0?ht:vt.custom,_e)}const secondsToMilliseconds=_e=>_e*1e3,millisecondsToSeconds=_e=>_e/1e3,underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=_e=>({type:"spring",stiffness:550,damping:_e===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(_e,{keyframes:$})=>$.length>2?keyframesTransition:transformProps.has(_e)?_e.startsWith("scale")?criticallyDampedSpring($[1]):underDampedSpring:ease;function isTransitionDefined({when:_e,delay:$,delayChildren:ht,staggerChildren:vt,staggerDirection:bt,repeat:Et,repeatType:At,repeatDelay:_t,from:wt,elapsed:Ct,...xt}){return!!Object.keys(xt).length}function getValueTransition(_e,$){return _e[$]||_e.default||_e}const isNotNull=_e=>_e!==null;function getFinalKeyframe(_e,{repeat:$,repeatType:ht="loop"},vt){const bt=_e.filter(isNotNull),Et=$&&ht!=="loop"&&$%2===1?0:bt.length-1;return!Et||vt===void 0?bt[Et]:vt}let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:_e=>{now=_e,queueMicrotask(clearTime)}},isZeroValueString=_e=>/^0[^.\s]+$/u.test(_e);function isNone(_e){return typeof _e=="number"?_e===0:_e!==null?_e==="none"||_e==="0"||isZeroValueString(_e):!0}const isNumericalString=_e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(_e),splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(_e){const $=splitCSSVariableRegex.exec(_e);if(!$)return[,];const[,ht,vt,bt]=$;return[`--${ht??vt}`,bt]}function getVariableValue(_e,$,ht=1){const[vt,bt]=parseCSSVariable(_e);if(!vt)return;const Et=window.getComputedStyle($).getPropertyValue(vt);if(Et){const At=Et.trim();return isNumericalString(At)?parseFloat(At):At}return isCSSVariableToken(bt)?getVariableValue(bt,$,ht+1):bt}const positionalKeys=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),isNumOrPxType=_e=>_e===number||_e===px,getPosFromMatrix=(_e,$)=>parseFloat(_e.split(", ")[$]),getTranslateFromMatrix=(_e,$)=>(ht,{transform:vt})=>{if(vt==="none"||!vt)return 0;const bt=vt.match(/^matrix3d\((.+)\)$/u);if(bt)return getPosFromMatrix(bt[1],$);{const Et=vt.match(/^matrix\((.+)\)$/u);return Et?getPosFromMatrix(Et[1],_e):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(_e=>!transformKeys.has(_e));function removeNonTranslationalTransform(_e){const $=[];return nonTranslationalTransformKeys.forEach(ht=>{const vt=_e.getValue(ht);vt!==void 0&&($.push([ht,vt.get()]),vt.set(ht.startsWith("scale")?1:0))}),$}const positionalValues={width:({x:_e},{paddingLeft:$="0",paddingRight:ht="0"})=>_e.max-_e.min-parseFloat($)-parseFloat(ht),height:({y:_e},{paddingTop:$="0",paddingBottom:ht="0"})=>_e.max-_e.min-parseFloat($)-parseFloat(ht),top:(_e,{top:$})=>parseFloat($),left:(_e,{left:$})=>parseFloat($),bottom:({y:_e},{top:$})=>parseFloat($)+(_e.max-_e.min),right:({x:_e},{left:$})=>parseFloat($)+(_e.max-_e.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const testValueType=_e=>$=>$.test(_e),auto={test:_e=>_e==="auto",parse:_e=>_e},dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=_e=>dimensionValueTypes.find(testValueType(_e)),toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const _e=Array.from(toResolve).filter(vt=>vt.needsMeasurement),$=new Set(_e.map(vt=>vt.element)),ht=new Map;$.forEach(vt=>{const bt=removeNonTranslationalTransform(vt);bt.length&&(ht.set(vt,bt),vt.render())}),_e.forEach(vt=>vt.measureInitialState()),$.forEach(vt=>{vt.render();const bt=ht.get(vt);bt&&bt.forEach(([Et,At])=>{var _t;(_t=vt.getValue(Et))===null||_t===void 0||_t.set(At)})}),_e.forEach(vt=>vt.measureEndState()),_e.forEach(vt=>{vt.suspendedScrollY!==void 0&&window.scrollTo(0,vt.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(_e=>_e.complete()),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(_e=>{_e.readKeyframes(),_e.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){readAllKeyframes(),measureAllKeyframes()}class KeyframeResolver{constructor($,ht,vt,bt,Et,At=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...$],this.onComplete=ht,this.name=vt,this.motionValue=bt,this.element=Et,this.isAsync=At}scheduleResolve(){this.isScheduled=!0,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:$,name:ht,element:vt,motionValue:bt}=this;for(let Et=0;Et<$.length;Et++)if($[Et]===null)if(Et===0){const At=bt==null?void 0:bt.get(),_t=$[$.length-1];if(At!==void 0)$[0]=At;else if(vt&&ht){const wt=vt.readValue(ht,_t);wt!=null&&($[0]=wt)}$[0]===void 0&&($[0]=_t),bt&&At===void 0&&bt.set($[0])}else $[Et]=$[Et-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),toResolve.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,toResolve.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const isColorString=(_e,$)=>ht=>!!(isString(ht)&&singleColorRegex.test(ht)&&ht.startsWith(_e)||$&&!isNullish(ht)&&Object.prototype.hasOwnProperty.call(ht,$)),splitColor=(_e,$,ht)=>vt=>{if(!isString(vt))return vt;const[bt,Et,At,_t]=vt.match(floatRegex);return{[_e]:parseFloat(bt),[$]:parseFloat(Et),[ht]:parseFloat(At),alpha:_t!==void 0?parseFloat(_t):1}},clampRgbUnit=_e=>clamp(0,255,_e),rgbUnit={...number,transform:_e=>Math.round(clampRgbUnit(_e))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:_e,green:$,blue:ht,alpha:vt=1})=>"rgba("+rgbUnit.transform(_e)+", "+rgbUnit.transform($)+", "+rgbUnit.transform(ht)+", "+sanitize(alpha.transform(vt))+")"};function parseHex(_e){let $="",ht="",vt="",bt="";return _e.length>5?($=_e.substring(1,3),ht=_e.substring(3,5),vt=_e.substring(5,7),bt=_e.substring(7,9)):($=_e.substring(1,2),ht=_e.substring(2,3),vt=_e.substring(3,4),bt=_e.substring(4,5),$+=$,ht+=ht,vt+=vt,bt+=bt),{red:parseInt($,16),green:parseInt(ht,16),blue:parseInt(vt,16),alpha:bt?parseInt(bt,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:_e,saturation:$,lightness:ht,alpha:vt=1})=>"hsla("+Math.round(_e)+", "+percent.transform(sanitize($))+", "+percent.transform(sanitize(ht))+", "+sanitize(alpha.transform(vt))+")"},color={test:_e=>rgba.test(_e)||hex.test(_e)||hsla.test(_e),parse:_e=>rgba.test(_e)?rgba.parse(_e):hsla.test(_e)?hsla.parse(_e):hex.parse(_e),transform:_e=>isString(_e)?_e:_e.hasOwnProperty("red")?rgba.transform(_e):hsla.transform(_e)};function test(_e){var $,ht;return isNaN(_e)&&isString(_e)&&((($=_e.match(floatRegex))===null||$===void 0?void 0:$.length)||0)+(((ht=_e.match(colorRegex))===null||ht===void 0?void 0:ht.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(_e){const $=_e.toString(),ht=[],vt={color:[],number:[],var:[]},bt=[];let Et=0;const _t=$.replace(complexRegex,wt=>(color.test(wt)?(vt.color.push(Et),bt.push(COLOR_TOKEN),ht.push(color.parse(wt))):wt.startsWith(VAR_FUNCTION_TOKEN)?(vt.var.push(Et),bt.push(VAR_TOKEN),ht.push(wt)):(vt.number.push(Et),bt.push(NUMBER_TOKEN),ht.push(parseFloat(wt))),++Et,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:ht,split:_t,indexes:vt,types:bt}}function parseComplexValue(_e){return analyseComplexValue(_e).values}function createTransformer(_e){const{split:$,types:ht}=analyseComplexValue(_e),vt=$.length;return bt=>{let Et="";for(let At=0;At<vt;At++)if(Et+=$[At],bt[At]!==void 0){const _t=ht[At];_t===NUMBER_TOKEN?Et+=sanitize(bt[At]):_t===COLOR_TOKEN?Et+=color.transform(bt[At]):Et+=bt[At]}return Et}}const convertNumbersToZero=_e=>typeof _e=="number"?0:_e;function getAnimatableNone$1(_e){const $=parseComplexValue(_e);return createTransformer(_e)($.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(_e){const[$,ht]=_e.slice(0,-1).split("(");if($==="drop-shadow")return _e;const[vt]=ht.match(floatRegex)||[];if(!vt)return _e;const bt=ht.replace(vt,"");let Et=maxDefaults.has($)?1:0;return vt!==ht&&(Et*=100),$+"("+Et+bt+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:_e=>{const $=_e.match(functionRegex);return $?$.map(applyDefaultFilter).join(" "):_e}},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=_e=>defaultValueTypes[_e];function getAnimatableNone(_e,$){let ht=getDefaultValueType(_e);return ht!==filter&&(ht=complex),ht.getAnimatableNone?ht.getAnimatableNone($):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(_e,$,ht){let vt=0,bt;for(;vt<_e.length&&!bt;){const Et=_e[vt];typeof Et=="string"&&!invalidTemplates.has(Et)&&analyseComplexValue(Et).values.length&&(bt=_e[vt]),vt++}if(bt&&ht)for(const Et of $)_e[Et]=getAnimatableNone(ht,bt)}class DOMKeyframesResolver extends KeyframeResolver{constructor($,ht,vt,bt){super($,ht,vt,bt,bt==null?void 0:bt.owner,!0)}readKeyframes(){const{unresolvedKeyframes:$,element:ht,name:vt}=this;if(!ht.current)return;super.readKeyframes();for(let wt=0;wt<$.length;wt++){let Ct=$[wt];if(typeof Ct=="string"&&(Ct=Ct.trim(),isCSSVariableToken(Ct))){const xt=getVariableValue(Ct,ht.current);xt!==void 0&&($[wt]=xt),wt===$.length-1&&(this.finalKeyframe=Ct)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(vt)||$.length!==2)return;const[bt,Et]=$,At=findDimensionValueType(bt),_t=findDimensionValueType(Et);if(At!==_t)if(isNumOrPxType(At)&&isNumOrPxType(_t))for(let wt=0;wt<$.length;wt++){const Ct=$[wt];typeof Ct=="string"&&($[wt]=parseFloat(Ct))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:$,name:ht}=this,vt=[];for(let bt=0;bt<$.length;bt++)isNone($[bt])&&vt.push(bt);vt.length&&makeNoneKeyframesAnimatable($,vt,ht)}measureInitialState(){const{element:$,unresolvedKeyframes:ht,name:vt}=this;if(!$.current)return;vt==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[vt]($.measureViewportBox(),window.getComputedStyle($.current)),ht[0]=this.measuredOrigin;const bt=ht[ht.length-1];bt!==void 0&&$.getValue(vt,bt).jump(bt,!1)}measureEndState(){var $;const{element:ht,name:vt,unresolvedKeyframes:bt}=this;if(!ht.current)return;const Et=ht.getValue(vt);Et&&Et.jump(this.measuredOrigin,!1);const At=bt.length-1,_t=bt[At];bt[At]=positionalValues[vt](ht.measureViewportBox(),window.getComputedStyle(ht.current)),_t!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=_t),!(($=this.removedTransforms)===null||$===void 0)&&$.length&&this.removedTransforms.forEach(([wt,Ct])=>{ht.getValue(wt).set(Ct)}),this.resolveNoneKeyframes()}}function memo(_e){let $;return()=>($===void 0&&($=_e()),$)}const isAnimatable=(_e,$)=>$==="zIndex"?!1:!!(typeof _e=="number"||Array.isArray(_e)||typeof _e=="string"&&(complex.test(_e)||_e==="0")&&!_e.startsWith("url("));function hasKeyframesChanged(_e){const $=_e[0];if(_e.length===1)return!0;for(let ht=0;ht<_e.length;ht++)if(_e[ht]!==$)return!0}function canAnimate(_e,$,ht,vt){const bt=_e[0];if(bt===null)return!1;if($==="display"||$==="visibility")return!0;const Et=_e[_e.length-1],At=isAnimatable(bt,$),_t=isAnimatable(Et,$);return!At||!_t?!1:hasKeyframesChanged(_e)||ht==="spring"&&vt}class BaseAnimation{constructor({autoplay:$=!0,delay:ht=0,type:vt="keyframes",repeat:bt=0,repeatDelay:Et=0,repeatType:At="loop",..._t}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.options={autoplay:$,delay:ht,type:vt,repeat:bt,repeatDelay:Et,repeatType:At,..._t},this.updateFinishedPromise()}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&flushKeyframeResolvers(),this._resolved}onKeyframesResolved($,ht){this.hasAttemptedResolve=!0;const{name:vt,type:bt,velocity:Et,delay:At,onComplete:_t,onUpdate:wt,isGenerator:Ct}=this.options;if(!Ct&&!canAnimate($,vt,bt,Et))if(At)this.options.duration=0;else{wt==null||wt(getFinalKeyframe($,this.options,ht)),_t==null||_t(),this.resolveFinishedPromise();return}const xt=this.initPlayback($,ht);xt!==!1&&(this._resolved={keyframes:$,finalKeyframe:ht,...xt},this.onPostResolved())}onPostResolved(){}then($,ht){return this.currentFinishedPromise.then($,ht)}updateFinishedPromise(){this.currentFinishedPromise=new Promise($=>{this.resolveFinishedPromise=$})}}function velocityPerSecond(_e,$){return $?_e*(1e3/$):0}const velocitySampleDuration=5;function calcGeneratorVelocity(_e,$,ht){const vt=Math.max($-velocitySampleDuration,0);return velocityPerSecond(ht-_e(vt),$-vt)}const safeMin=.001,minDuration=.01,maxDuration$1=10,minDamping=.05,maxDamping=1;function findSpring({duration:_e=800,bounce:$=.25,velocity:ht=0,mass:vt=1}){let bt,Et,At=1-$;At=clamp(minDamping,maxDamping,At),_e=clamp(minDuration,maxDuration$1,millisecondsToSeconds(_e)),At<1?(bt=Ct=>{const xt=Ct*At,Pt=xt*_e,Rt=xt-ht,kt=calcAngularFreq(Ct,At),Mt=Math.exp(-Pt);return safeMin-Rt/kt*Mt},Et=Ct=>{const Pt=Ct*At*_e,Rt=Pt*ht+ht,kt=Math.pow(At,2)*Math.pow(Ct,2)*_e,Mt=Math.exp(-Pt),Lt=calcAngularFreq(Math.pow(Ct,2),At);return(-bt(Ct)+safeMin>0?-1:1)*((Rt-kt)*Mt)/Lt}):(bt=Ct=>{const xt=Math.exp(-Ct*_e),Pt=(Ct-ht)*_e+1;return-safeMin+xt*Pt},Et=Ct=>{const xt=Math.exp(-Ct*_e),Pt=(ht-Ct)*(_e*_e);return xt*Pt});const _t=5/_e,wt=approximateRoot(bt,Et,_t);if(_e=secondsToMilliseconds(_e),isNaN(wt))return{stiffness:100,damping:10,duration:_e};{const Ct=Math.pow(wt,2)*vt;return{stiffness:Ct,damping:At*2*Math.sqrt(vt*Ct),duration:_e}}}const rootIterations=12;function approximateRoot(_e,$,ht){let vt=ht;for(let bt=1;bt<rootIterations;bt++)vt=vt-_e(vt)/$(vt);return vt}function calcAngularFreq(_e,$){return _e*Math.sqrt(1-$*$)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(_e,$){return $.some(ht=>_e[ht]!==void 0)}function getSpringOptions(_e){let $={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,..._e};if(!isSpringType(_e,physicsKeys)&&isSpringType(_e,durationKeys)){const ht=findSpring(_e);$={...$,...ht,mass:1},$.isResolvedFromDuration=!0}return $}function spring({keyframes:_e,restDelta:$,restSpeed:ht,...vt}){const bt=_e[0],Et=_e[_e.length-1],At={done:!1,value:bt},{stiffness:_t,damping:wt,mass:Ct,duration:xt,velocity:Pt,isResolvedFromDuration:Rt}=getSpringOptions({...vt,velocity:-millisecondsToSeconds(vt.velocity||0)}),kt=Pt||0,Mt=wt/(2*Math.sqrt(_t*Ct)),Lt=Et-bt,Ot=millisecondsToSeconds(Math.sqrt(_t/Ct)),Ft=Math.abs(Lt)<5;ht||(ht=Ft?.01:2),$||($=Ft?.005:.5);let Dt;if(Mt<1){const $t=calcAngularFreq(Ot,Mt);Dt=Bt=>{const Nt=Math.exp(-Mt*Ot*Bt);return Et-Nt*((kt+Mt*Ot*Lt)/$t*Math.sin($t*Bt)+Lt*Math.cos($t*Bt))}}else if(Mt===1)Dt=$t=>Et-Math.exp(-Ot*$t)*(Lt+(kt+Ot*Lt)*$t);else{const $t=Ot*Math.sqrt(Mt*Mt-1);Dt=Bt=>{const Nt=Math.exp(-Mt*Ot*Bt),Ht=Math.min($t*Bt,300);return Et-Nt*((kt+Mt*Ot*Lt)*Math.sinh(Ht)+$t*Lt*Math.cosh(Ht))/$t}}return{calculatedDuration:Rt&&xt||null,next:$t=>{const Bt=Dt($t);if(Rt)At.done=$t>=xt;else{let Nt=kt;$t!==0&&(Mt<1?Nt=calcGeneratorVelocity(Dt,$t,Bt):Nt=0);const Ht=Math.abs(Nt)<=ht,Vt=Math.abs(Et-Bt)<=$;At.done=Ht&&Vt}return At.value=At.done?Et:Bt,At}}}function inertia({keyframes:_e,velocity:$=0,power:ht=.8,timeConstant:vt=325,bounceDamping:bt=10,bounceStiffness:Et=500,modifyTarget:At,min:_t,max:wt,restDelta:Ct=.5,restSpeed:xt}){const Pt=_e[0],Rt={done:!1,value:Pt},kt=jt=>_t!==void 0&&jt<_t||wt!==void 0&&jt>wt,Mt=jt=>_t===void 0?wt:wt===void 0||Math.abs(_t-jt)<Math.abs(wt-jt)?_t:wt;let Lt=ht*$;const Ot=Pt+Lt,Ft=At===void 0?Ot:At(Ot);Ft!==Ot&&(Lt=Ft-Pt);const Dt=jt=>-Lt*Math.exp(-jt/vt),$t=jt=>Ft+Dt(jt),Bt=jt=>{const Xt=Dt(jt),Jt=$t(jt);Rt.done=Math.abs(Xt)<=Ct,Rt.value=Rt.done?Ft:Jt};let Nt,Ht;const Vt=jt=>{kt(Rt.value)&&(Nt=jt,Ht=spring({keyframes:[Rt.value,Mt(Rt.value)],velocity:calcGeneratorVelocity($t,jt,Rt.value),damping:bt,stiffness:Et,restDelta:Ct,restSpeed:xt}))};return Vt(0),{calculatedDuration:null,next:jt=>{let Xt=!1;return!Ht&&Nt===void 0&&(Xt=!0,Bt(jt),Vt(jt)),Nt!==void 0&&jt>=Nt?Ht.next(jt-Nt):(!Xt&&Bt(jt),Rt)}}}const calcBezier=(_e,$,ht)=>(((1-3*ht+3*$)*_e+(3*ht-6*$))*_e+3*$)*_e,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(_e,$,ht,vt,bt){let Et,At,_t=0;do At=$+(ht-$)/2,Et=calcBezier(At,vt,bt)-_e,Et>0?ht=At:$=At;while(Math.abs(Et)>subdivisionPrecision&&++_t<subdivisionMaxIterations);return At}function cubicBezier(_e,$,ht,vt){if(_e===$&&ht===vt)return noop;const bt=Et=>binarySubdivide(Et,0,1,_e,ht);return Et=>Et===0||Et===1?Et:calcBezier(bt(Et),$,vt)}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=_e=>Array.isArray(_e)&&typeof _e[0]!="number",mirrorEasing=_e=>$=>$<=.5?_e(2*$)/2:(2-_e(2*(1-$)))/2,reverseEasing=_e=>$=>1-_e(1-$),circIn=_e=>1-Math.sin(Math.acos(_e)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=_e=>(_e*=2)<1?.5*backIn(_e):.5*(2-Math.pow(2,-10*(_e-1))),easingLookup={linear:noop,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=_e=>{if(Array.isArray(_e)){invariant(_e.length===4);const[$,ht,vt,bt]=_e;return cubicBezier($,ht,vt,bt)}else if(typeof _e=="string")return invariant(easingLookup[_e]!==void 0),easingLookup[_e];return _e},progress=(_e,$,ht)=>{const vt=$-_e;return vt===0?1:(ht-_e)/vt},mixNumber$1=(_e,$,ht)=>_e+($-_e)*ht;function hueToRgb(_e,$,ht){return ht<0&&(ht+=1),ht>1&&(ht-=1),ht<1/6?_e+($-_e)*6*ht:ht<1/2?$:ht<2/3?_e+($-_e)*(2/3-ht)*6:_e}function hslaToRgba({hue:_e,saturation:$,lightness:ht,alpha:vt}){_e/=360,$/=100,ht/=100;let bt=0,Et=0,At=0;if(!$)bt=Et=At=ht;else{const _t=ht<.5?ht*(1+$):ht+$-ht*$,wt=2*ht-_t;bt=hueToRgb(wt,_t,_e+1/3),Et=hueToRgb(wt,_t,_e),At=hueToRgb(wt,_t,_e-1/3)}return{red:Math.round(bt*255),green:Math.round(Et*255),blue:Math.round(At*255),alpha:vt}}function mixImmediate(_e,$){return ht=>ht>0?$:_e}const mixLinearColor=(_e,$,ht)=>{const vt=_e*_e,bt=ht*($*$-vt)+vt;return bt<0?0:Math.sqrt(bt)},colorTypes=[hex,rgba,hsla],getColorType=_e=>colorTypes.find($=>$.test(_e));function asRGBA(_e){const $=getColorType(_e);if(!$)return!1;let ht=$.parse(_e);return $===hsla&&(ht=hslaToRgba(ht)),ht}const mixColor=(_e,$)=>{const ht=asRGBA(_e),vt=asRGBA($);if(!ht||!vt)return mixImmediate(_e,$);const bt={...ht};return Et=>(bt.red=mixLinearColor(ht.red,vt.red,Et),bt.green=mixLinearColor(ht.green,vt.green,Et),bt.blue=mixLinearColor(ht.blue,vt.blue,Et),bt.alpha=mixNumber$1(ht.alpha,vt.alpha,Et),rgba.transform(bt))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(_e,$){return invisibleValues.has(_e)?ht=>ht<=0?_e:$:ht=>ht>=1?$:_e}function mixNumber(_e,$){return ht=>mixNumber$1(_e,$,ht)}function getMixer(_e){return typeof _e=="number"?mixNumber:typeof _e=="string"?isCSSVariableToken(_e)?mixImmediate:color.test(_e)?mixColor:mixComplex:Array.isArray(_e)?mixArray:typeof _e=="object"?color.test(_e)?mixColor:mixObject:mixImmediate}function mixArray(_e,$){const ht=[..._e],vt=ht.length,bt=_e.map((Et,At)=>getMixer(Et)(Et,$[At]));return Et=>{for(let At=0;At<vt;At++)ht[At]=bt[At](Et);return ht}}function mixObject(_e,$){const ht={..._e,...$},vt={};for(const bt in ht)_e[bt]!==void 0&&$[bt]!==void 0&&(vt[bt]=getMixer(_e[bt])(_e[bt],$[bt]));return bt=>{for(const Et in vt)ht[Et]=vt[Et](bt);return ht}}function matchOrder(_e,$){var ht;const vt=[],bt={color:0,var:0,number:0};for(let Et=0;Et<$.values.length;Et++){const At=$.types[Et],_t=_e.indexes[At][bt[At]],wt=(ht=_e.values[_t])!==null&&ht!==void 0?ht:0;vt[Et]=wt,bt[At]++}return vt}const mixComplex=(_e,$)=>{const ht=complex.createTransformer($),vt=analyseComplexValue(_e),bt=analyseComplexValue($);return vt.indexes.var.length===bt.indexes.var.length&&vt.indexes.color.length===bt.indexes.color.length&&vt.indexes.number.length>=bt.indexes.number.length?invisibleValues.has(_e)&&!bt.values.length||invisibleValues.has($)&&!vt.values.length?mixVisibility(_e,$):pipe(mixArray(matchOrder(vt,bt),bt.values),ht):mixImmediate(_e,$)};function mix(_e,$,ht){return typeof _e=="number"&&typeof $=="number"&&typeof ht=="number"?mixNumber$1(_e,$,ht):getMixer(_e)(_e,$)}function createMixers(_e,$,ht){const vt=[],bt=ht||mix,Et=_e.length-1;for(let At=0;At<Et;At++){let _t=bt(_e[At],_e[At+1]);if($){const wt=Array.isArray($)?$[At]||noop:$;_t=pipe(wt,_t)}vt.push(_t)}return vt}function interpolate(_e,$,{clamp:ht=!0,ease:vt,mixer:bt}={}){const Et=_e.length;if(invariant(Et===$.length),Et===1)return()=>$[0];if(Et===2&&_e[0]===_e[1])return()=>$[1];_e[0]>_e[Et-1]&&(_e=[..._e].reverse(),$=[...$].reverse());const At=createMixers($,vt,bt),_t=At.length,wt=Ct=>{let xt=0;if(_t>1)for(;xt<_e.length-2&&!(Ct<_e[xt+1]);xt++);const Pt=progress(_e[xt],_e[xt+1],Ct);return At[xt](Pt)};return ht?Ct=>wt(clamp(_e[0],_e[Et-1],Ct)):wt}function fillOffset(_e,$){const ht=_e[_e.length-1];for(let vt=1;vt<=$;vt++){const bt=progress(0,$,vt);_e.push(mixNumber$1(ht,1,bt))}}function defaultOffset(_e){const $=[0];return fillOffset($,_e.length-1),$}function convertOffsetToTimes(_e,$){return _e.map(ht=>ht*$)}function defaultEasing(_e,$){return _e.map(()=>$||easeInOut).splice(0,_e.length-1)}function keyframes({duration:_e=300,keyframes:$,times:ht,ease:vt="easeInOut"}){const bt=isEasingArray(vt)?vt.map(easingDefinitionToFunction):easingDefinitionToFunction(vt),Et={done:!1,value:$[0]},At=convertOffsetToTimes(ht&&ht.length===$.length?ht:defaultOffset($),_e),_t=interpolate(At,$,{ease:Array.isArray(bt)?bt:defaultEasing($,bt)});return{calculatedDuration:_e,next:wt=>(Et.value=_t(wt),Et.done=wt>=_e,Et)}}const maxGeneratorDuration=2e4;function calcGeneratorDuration(_e){let $=0;const ht=50;let vt=_e.next($);for(;!vt.done&&$<maxGeneratorDuration;)$+=ht,vt=_e.next($);return $>=maxGeneratorDuration?1/0:$}const frameloopDriver=_e=>{const $=({timestamp:ht})=>_e(ht);return{start:()=>frame.update($,!0),stop:()=>cancelFrame($),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generators={decay:inertia,inertia,tween:keyframes,keyframes,spring},percentToProgress=_e=>_e/100;class MainThreadAnimation extends BaseAnimation{constructor({KeyframeResolver:$=KeyframeResolver,...ht}){super(ht),this.holdTime=null,this.startTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:_t}=this.options;_t&&_t()};const{name:vt,motionValue:bt,keyframes:Et}=this.options,At=(_t,wt)=>this.onKeyframesResolved(_t,wt);vt&&bt&&bt.owner?this.resolver=bt.owner.resolveKeyframes(Et,At,vt,bt):this.resolver=new $(Et,At,vt,bt),this.resolver.scheduleResolve()}initPlayback($){const{type:ht="keyframes",repeat:vt=0,repeatDelay:bt=0,repeatType:Et,velocity:At=0}=this.options,_t=generators[ht]||keyframes;let wt,Ct;_t!==keyframes&&typeof $[0]!="number"&&(wt=pipe(percentToProgress,mix($[0],$[1])),$=[0,100]);const xt=_t({...this.options,keyframes:$});Et==="mirror"&&(Ct=_t({...this.options,keyframes:[...$].reverse(),velocity:-At})),xt.calculatedDuration===null&&(xt.calculatedDuration=calcGeneratorDuration(xt));const{calculatedDuration:Pt}=xt,Rt=Pt+bt,kt=Rt*(vt+1)-bt;return{generator:xt,mirroredGenerator:Ct,mapPercentToKeyframes:wt,calculatedDuration:Pt,resolvedDuration:Rt,totalDuration:kt}}onPostResolved(){const{autoplay:$=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!$?this.pause():this.state=this.pendingPlayState}tick($,ht=!1){const{resolved:vt}=this;if(!vt){const{keyframes:jt}=this.options;return{done:!0,value:jt[jt.length-1]}}const{finalKeyframe:bt,generator:Et,mirroredGenerator:At,mapPercentToKeyframes:_t,keyframes:wt,calculatedDuration:Ct,totalDuration:xt,resolvedDuration:Pt}=vt;if(this.startTime===null)return Et.next(0);const{delay:Rt,repeat:kt,repeatType:Mt,repeatDelay:Lt,onUpdate:Ot}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,$):this.speed<0&&(this.startTime=Math.min($-xt/this.speed,this.startTime)),ht?this.currentTime=$:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round($-this.startTime)*this.speed;const Ft=this.currentTime-Rt*(this.speed>=0?1:-1),Dt=this.speed>=0?Ft<0:Ft>xt;this.currentTime=Math.max(Ft,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=xt);let $t=this.currentTime,Bt=Et;if(kt){const jt=Math.min(this.currentTime,xt)/Pt;let Xt=Math.floor(jt),Jt=jt%1;!Jt&&jt>=1&&(Jt=1),Jt===1&&Xt--,Xt=Math.min(Xt,kt+1),!!(Xt%2)&&(Mt==="reverse"?(Jt=1-Jt,Lt&&(Jt-=Lt/Pt)):Mt==="mirror"&&(Bt=At)),$t=clamp(0,1,Jt)*Pt}const Nt=Dt?{done:!1,value:wt[0]}:Bt.next($t);_t&&(Nt.value=_t(Nt.value));let{done:Ht}=Nt;!Dt&&Ct!==null&&(Ht=this.speed>=0?this.currentTime>=xt:this.currentTime<=0);const Vt=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Ht);return Vt&&bt!==void 0&&(Nt.value=getFinalKeyframe(wt,this.options,bt)),Ot&&Ot(Nt.value),Vt&&this.finish(),Nt}get duration(){const{resolved:$}=this;return $?millisecondsToSeconds($.calculatedDuration):0}get time(){return millisecondsToSeconds(this.currentTime)}set time($){$=secondsToMilliseconds($),this.currentTime=$,this.holdTime!==null||this.speed===0?this.holdTime=$:this.driver&&(this.startTime=this.driver.now()-$/this.speed)}get speed(){return this.playbackSpeed}set speed($){const ht=this.playbackSpeed!==$;this.playbackSpeed=$,ht&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:$=frameloopDriver,onPlay:ht}=this.options;this.driver||(this.driver=$(bt=>this.tick(bt))),ht&&ht();const vt=this.driver.now();this.holdTime!==null?this.startTime=vt-this.holdTime:(!this.startTime||this.state==="finished")&&(this.startTime=vt),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var $;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=($=this.currentTime)!==null&&$!==void 0?$:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:$}=this.options;$&&$()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample($){return this.startTime=0,this.tick($,!0)}}const isBezierDefinition=_e=>Array.isArray(_e)&&typeof _e[0]=="number";function isWaapiSupportedEasing(_e){return!!(!_e||typeof _e=="string"&&_e in supportedWaapiEasing||isBezierDefinition(_e)||Array.isArray(_e)&&_e.every(isWaapiSupportedEasing))}const cubicBezierAsString=([_e,$,ht,vt])=>`cubic-bezier(${_e}, ${$}, ${ht}, ${vt})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasingWithDefault(_e){return mapEasingToNativeEasing(_e)||supportedWaapiEasing.easeOut}function mapEasingToNativeEasing(_e){if(_e)return isBezierDefinition(_e)?cubicBezierAsString(_e):Array.isArray(_e)?_e.map(mapEasingToNativeEasingWithDefault):supportedWaapiEasing[_e]}function animateStyle(_e,$,ht,{delay:vt=0,duration:bt=300,repeat:Et=0,repeatType:At="loop",ease:_t,times:wt}={}){const Ct={[$]:ht};wt&&(Ct.offset=wt);const xt=mapEasingToNativeEasing(_t);return Array.isArray(xt)&&(Ct.easing=xt),_e.animate(Ct,{delay:vt,duration:bt,easing:Array.isArray(xt)?"linear":xt,fill:"both",iterations:Et+1,direction:At==="reverse"?"alternate":"normal"})}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),sampleDelta=10,maxDuration=2e4;function requiresPregeneratedKeyframes(_e){return _e.type==="spring"||_e.name==="backgroundColor"||!isWaapiSupportedEasing(_e.ease)}function pregenerateKeyframes(_e,$){const ht=new MainThreadAnimation({...$,keyframes:_e,repeat:0,delay:0,isGenerator:!0});let vt={done:!1,value:_e[0]};const bt=[];let Et=0;for(;!vt.done&&Et<maxDuration;)vt=ht.sample(Et),bt.push(vt.value),Et+=sampleDelta;return{times:void 0,keyframes:bt,duration:Et-sampleDelta,ease:"linear"}}class AcceleratedAnimation extends BaseAnimation{constructor($){super($);const{name:ht,motionValue:vt,keyframes:bt}=this.options;this.resolver=new DOMKeyframesResolver(bt,(Et,At)=>this.onKeyframesResolved(Et,At),ht,vt),this.resolver.scheduleResolve()}initPlayback($,ht){var vt;let{duration:bt=300,times:Et,ease:At,type:_t,motionValue:wt,name:Ct}=this.options;if(!(!((vt=wt.owner)===null||vt===void 0)&&vt.current))return!1;if(requiresPregeneratedKeyframes(this.options)){const{onComplete:Pt,onUpdate:Rt,motionValue:kt,...Mt}=this.options,Lt=pregenerateKeyframes($,Mt);$=Lt.keyframes,$.length===1&&($[1]=$[0]),bt=Lt.duration,Et=Lt.times,At=Lt.ease,_t="keyframes"}const xt=animateStyle(wt.owner.current,Ct,$,{...this.options,duration:bt,times:Et,ease:At});return xt.startTime=time.now(),this.pendingTimeline?(xt.timeline=this.pendingTimeline,this.pendingTimeline=void 0):xt.onfinish=()=>{const{onComplete:Pt}=this.options;wt.set(getFinalKeyframe($,this.options,ht)),Pt&&Pt(),this.cancel(),this.resolveFinishedPromise()},{animation:xt,duration:bt,times:Et,type:_t,ease:At,keyframes:$}}get duration(){const{resolved:$}=this;if(!$)return 0;const{duration:ht}=$;return millisecondsToSeconds(ht)}get time(){const{resolved:$}=this;if(!$)return 0;const{animation:ht}=$;return millisecondsToSeconds(ht.currentTime||0)}set time($){const{resolved:ht}=this;if(!ht)return;const{animation:vt}=ht;vt.currentTime=secondsToMilliseconds($)}get speed(){const{resolved:$}=this;if(!$)return 1;const{animation:ht}=$;return ht.playbackRate}set speed($){const{resolved:ht}=this;if(!ht)return;const{animation:vt}=ht;vt.playbackRate=$}get state(){const{resolved:$}=this;if(!$)return"idle";const{animation:ht}=$;return ht.playState}attachTimeline($){if(!this._resolved)this.pendingTimeline=$;else{const{resolved:ht}=this;if(!ht)return noop;const{animation:vt}=ht;vt.timeline=$,vt.onfinish=null}return noop}play(){if(this.isStopped)return;const{resolved:$}=this;if(!$)return;const{animation:ht}=$;ht.playState==="finished"&&this.updateFinishedPromise(),ht.play()}pause(){const{resolved:$}=this;if(!$)return;const{animation:ht}=$;ht.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;const{resolved:$}=this;if(!$)return;const{animation:ht,keyframes:vt,duration:bt,type:Et,ease:At,times:_t}=$;if(!(ht.playState==="idle"||ht.playState==="finished")){if(this.time){const{motionValue:wt,onUpdate:Ct,onComplete:xt,...Pt}=this.options,Rt=new MainThreadAnimation({...Pt,keyframes:vt,duration:bt,type:Et,ease:At,times:_t,isGenerator:!0}),kt=secondsToMilliseconds(this.time);wt.setWithVelocity(Rt.sample(kt-sampleDelta).value,Rt.sample(kt).value,sampleDelta)}this.cancel()}}complete(){const{resolved:$}=this;$&&$.animation.finish()}cancel(){const{resolved:$}=this;$&&$.animation.cancel()}static supports($){const{motionValue:ht,name:vt,repeatDelay:bt,repeatType:Et,damping:At,type:_t}=$;return supportsWaapi()&&vt&&acceleratedValues.has(vt)&&ht&&ht.owner&&ht.owner.current instanceof HTMLElement&&!ht.owner.getProps().onUpdate&&!bt&&Et!=="mirror"&&At!==0&&_t!=="inertia"}}function observeTimeline(_e,$){let ht;const vt=()=>{const{currentTime:bt}=$,At=(bt===null?0:bt.value)/100;ht!==At&&_e(At),ht=At};return frame.update(vt,!0),()=>cancelFrame(vt)}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0);class GroupPlaybackControls{constructor($){this.stop=()=>this.runAll("stop"),this.animations=$.filter(Boolean)}then($,ht){return Promise.all(this.animations).then($).catch(ht)}getAll($){return this.animations[0][$]}setAll($,ht){for(let vt=0;vt<this.animations.length;vt++)this.animations[vt][$]=ht}attachTimeline($){const ht=this.animations.map(vt=>{if(supportsScrollTimeline()&&vt.attachTimeline)vt.attachTimeline($);else return vt.pause(),observeTimeline(bt=>{vt.time=vt.duration*bt},$)});return()=>{ht.forEach((vt,bt)=>{vt&&vt(),this.animations[bt].stop()})}}get time(){return this.getAll("time")}set time($){this.setAll("time",$)}get speed(){return this.getAll("speed")}set speed($){this.setAll("speed",$)}get duration(){let $=0;for(let ht=0;ht<this.animations.length;ht++)$=Math.max($,this.animations[ht].duration);return $}runAll($){this.animations.forEach(ht=>ht[$]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const animateMotionValue=(_e,$,ht,vt={},bt,Et)=>At=>{const _t=getValueTransition(vt,_e)||{},wt=_t.delay||vt.delay||0;let{elapsed:Ct=0}=vt;Ct=Ct-secondsToMilliseconds(wt);let xt={keyframes:Array.isArray(ht)?ht:[null,ht],ease:"easeOut",velocity:$.getVelocity(),..._t,delay:-Ct,onUpdate:Rt=>{$.set(Rt),_t.onUpdate&&_t.onUpdate(Rt)},onComplete:()=>{At(),_t.onComplete&&_t.onComplete()},name:_e,motionValue:$,element:Et?void 0:bt};isTransitionDefined(_t)||(xt={...xt,...getDefaultTransition(_e,xt)}),xt.duration&&(xt.duration=secondsToMilliseconds(xt.duration)),xt.repeatDelay&&(xt.repeatDelay=secondsToMilliseconds(xt.repeatDelay)),xt.from!==void 0&&(xt.keyframes[0]=xt.from);let Pt=!1;if((xt.type===!1||xt.duration===0&&!xt.repeatDelay)&&(xt.duration=0,xt.delay===0&&(Pt=!0)),Pt&&!Et&&$.get()!==void 0){const Rt=getFinalKeyframe(xt.keyframes,_t);if(Rt!==void 0)return frame.update(()=>{xt.onUpdate(Rt),xt.onComplete()}),new GroupPlaybackControls([])}return!Et&&AcceleratedAnimation.supports(xt)?new AcceleratedAnimation(xt):new MainThreadAnimation(xt)};function isWillChangeMotionValue(_e){return!!(isMotionValue(_e)&&_e.add)}function addUniqueItem(_e,$){_e.indexOf($)===-1&&_e.push($)}function removeItem(_e,$){const ht=_e.indexOf($);ht>-1&&_e.splice(ht,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add($){return addUniqueItem(this.subscriptions,$),()=>removeItem(this.subscriptions,$)}notify($,ht,vt){const bt=this.subscriptions.length;if(bt)if(bt===1)this.subscriptions[0]($,ht,vt);else for(let Et=0;Et<bt;Et++){const At=this.subscriptions[Et];At&&At($,ht,vt)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const MAX_VELOCITY_DELTA=30,isFloat=_e=>!isNaN(parseFloat(_e));class MotionValue{constructor($,ht={}){this.version="11.2.13",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(vt,bt=!0)=>{const Et=time.now();this.updatedAt!==Et&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(vt),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),bt&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent($),this.owner=ht.owner}setCurrent($){this.current=$,this.updatedAt=time.now(),this.canTrackVelocity===null&&$!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue($=this.current){this.prevFrameValue=$,this.prevUpdatedAt=this.updatedAt}onChange($){return this.on("change",$)}on($,ht){this.events[$]||(this.events[$]=new SubscriptionManager);const vt=this.events[$].add(ht);return $==="change"?()=>{vt(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:vt}clearListeners(){for(const $ in this.events)this.events[$].clear()}attach($,ht){this.passiveEffect=$,this.stopPassiveEffect=ht}set($,ht=!0){!ht||!this.passiveEffect?this.updateAndNotify($,ht):this.passiveEffect($,this.updateAndNotify)}setWithVelocity($,ht,vt){this.set(ht),this.prev=void 0,this.prevFrameValue=$,this.prevUpdatedAt=this.updatedAt-vt}jump($,ht=!0){this.updateAndNotify($),this.prev=$,this.prevUpdatedAt=this.prevFrameValue=void 0,ht&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const $=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||$-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const ht=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),ht)}start($){return this.stop(),new Promise(ht=>{this.hasAnimated=!0,this.animation=$(ht),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(_e,$){return new MotionValue(_e,$)}function setMotionValue(_e,$,ht){_e.hasValue($)?_e.getValue($).set(ht):_e.addValue($,motionValue(ht))}function setTarget(_e,$){const ht=resolveVariant(_e,$);let{transitionEnd:vt={},transition:bt={},...Et}=ht||{};Et={...Et,...vt};for(const At in Et){const _t=resolveFinalValueInKeyframes(Et[At]);setMotionValue(_e,At,_t)}}function getOptimisedAppearId(_e){return _e.getProps()[optimizedAppearDataAttribute]}function shouldBlockAnimation({protectedKeys:_e,needsAnimating:$},ht){const vt=_e.hasOwnProperty(ht)&&$[ht]!==!0;return $[ht]=!1,vt}function animateTarget(_e,$,{delay:ht=0,transitionOverride:vt,type:bt}={}){var Et;let{transition:At=_e.getDefaultTransition(),transitionEnd:_t,...wt}=$;const Ct=_e.getValue("willChange");vt&&(At=vt);const xt=[],Pt=bt&&_e.animationState&&_e.animationState.getState()[bt];for(const Rt in wt){const kt=_e.getValue(Rt,(Et=_e.latestValues[Rt])!==null&&Et!==void 0?Et:null),Mt=wt[Rt];if(Mt===void 0||Pt&&shouldBlockAnimation(Pt,Rt))continue;const Lt={delay:ht,elapsed:0,...getValueTransition(At||{},Rt)};let Ot=!1;if(window.HandoffAppearAnimations){const Dt=getOptimisedAppearId(_e);if(Dt){const $t=window.HandoffAppearAnimations(Dt,Rt,kt,frame);$t!==null&&(Lt.elapsed=$t,Ot=!0)}}kt.start(animateMotionValue(Rt,kt,Mt,_e.shouldReduceMotion&&transformProps.has(Rt)?{type:!1}:Lt,_e,Ot));const Ft=kt.animation;Ft&&(isWillChangeMotionValue(Ct)&&(Ct.add(Rt),Ft.then(()=>Ct.remove(Rt))),xt.push(Ft))}return _t&&Promise.all(xt).then(()=>{frame.update(()=>{_t&&setTarget(_e,_t)})}),xt}function animateVariant(_e,$,ht={}){var vt;const bt=resolveVariant(_e,$,ht.type==="exit"?(vt=_e.presenceContext)===null||vt===void 0?void 0:vt.custom:void 0);let{transition:Et=_e.getDefaultTransition()||{}}=bt||{};ht.transitionOverride&&(Et=ht.transitionOverride);const At=bt?()=>Promise.all(animateTarget(_e,bt,ht)):()=>Promise.resolve(),_t=_e.variantChildren&&_e.variantChildren.size?(Ct=0)=>{const{delayChildren:xt=0,staggerChildren:Pt,staggerDirection:Rt}=Et;return animateChildren(_e,$,xt+Ct,Pt,Rt,ht)}:()=>Promise.resolve(),{when:wt}=Et;if(wt){const[Ct,xt]=wt==="beforeChildren"?[At,_t]:[_t,At];return Ct().then(()=>xt())}else return Promise.all([At(),_t(ht.delay)])}function animateChildren(_e,$,ht=0,vt=0,bt=1,Et){const At=[],_t=(_e.variantChildren.size-1)*vt,wt=bt===1?(Ct=0)=>Ct*vt:(Ct=0)=>_t-Ct*vt;return Array.from(_e.variantChildren).sort(sortByTreeOrder).forEach((Ct,xt)=>{Ct.notify("AnimationStart",$),At.push(animateVariant(Ct,$,{...Et,delay:ht+wt(xt)}).then(()=>Ct.notify("AnimationComplete",$)))}),Promise.all(At)}function sortByTreeOrder(_e,$){return _e.sortNodePosition($)}function animateVisualElement(_e,$,ht={}){_e.notify("AnimationStart",$);let vt;if(Array.isArray($)){const bt=$.map(Et=>animateVariant(_e,Et,ht));vt=Promise.all(bt)}else if(typeof $=="string")vt=animateVariant(_e,$,ht);else{const bt=typeof $=="function"?resolveVariant(_e,$,ht.custom):$;vt=Promise.all(animateTarget(_e,bt,ht))}return vt.then(()=>{frame.postRender(()=>{_e.notify("AnimationComplete",$)})})}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(_e){return $=>Promise.all($.map(({animation:ht,options:vt})=>animateVisualElement(_e,ht,vt)))}function createAnimationState(_e){let $=animateList(_e),ht=createState(),vt=!0;const bt=wt=>(Ct,xt)=>{var Pt;const Rt=resolveVariant(_e,xt,wt==="exit"?(Pt=_e.presenceContext)===null||Pt===void 0?void 0:Pt.custom:void 0);if(Rt){const{transition:kt,transitionEnd:Mt,...Lt}=Rt;Ct={...Ct,...Lt,...Mt}}return Ct};function Et(wt){$=wt(_e)}function At(wt){const Ct=_e.getProps(),xt=_e.getVariantContext(!0)||{},Pt=[],Rt=new Set;let kt={},Mt=1/0;for(let Ot=0;Ot<numAnimationTypes;Ot++){const Ft=reversePriorityOrder[Ot],Dt=ht[Ft],$t=Ct[Ft]!==void 0?Ct[Ft]:xt[Ft],Bt=isVariantLabel($t),Nt=Ft===wt?Dt.isActive:null;Nt===!1&&(Mt=Ot);let Ht=$t===xt[Ft]&&$t!==Ct[Ft]&&Bt;if(Ht&&vt&&_e.manuallyAnimateOnMount&&(Ht=!1),Dt.protectedKeys={...kt},!Dt.isActive&&Nt===null||!$t&&!Dt.prevProp||isAnimationControls($t)||typeof $t=="boolean")continue;let jt=checkVariantsDidChange(Dt.prevProp,$t)||Ft===wt&&Dt.isActive&&!Ht&&Bt||Ot>Mt&&Bt,Xt=!1;const Jt=Array.isArray($t)?$t:[$t];let Gt=Jt.reduce(bt(Ft),{});Nt===!1&&(Gt={});const{prevResolvedValues:en={}}=Dt,on={...en,...Gt},_n=ln=>{jt=!0,Rt.has(ln)&&(Xt=!0,Rt.delete(ln)),Dt.needsAnimating[ln]=!0;const En=_e.getValue(ln);En&&(En.liveStyle=!1)};for(const ln in on){const En=Gt[ln],un=en[ln];if(kt.hasOwnProperty(ln))continue;let hn=!1;isKeyframesTarget(En)&&isKeyframesTarget(un)?hn=!shallowCompare(En,un):hn=En!==un,hn?En!=null?_n(ln):Rt.add(ln):En!==void 0&&Rt.has(ln)?_n(ln):Dt.protectedKeys[ln]=!0}Dt.prevProp=$t,Dt.prevResolvedValues=Gt,Dt.isActive&&(kt={...kt,...Gt}),vt&&_e.blockInitialAnimation&&(jt=!1),jt&&(!Ht||Xt)&&Pt.push(...Jt.map(ln=>({animation:ln,options:{type:Ft}})))}if(Rt.size){const Ot={};Rt.forEach(Ft=>{const Dt=_e.getBaseTarget(Ft),$t=_e.getValue(Ft);$t&&($t.liveStyle=!0),Ot[Ft]=Dt??null}),Pt.push({animation:Ot})}let Lt=!!Pt.length;return vt&&(Ct.initial===!1||Ct.initial===Ct.animate)&&!_e.manuallyAnimateOnMount&&(Lt=!1),vt=!1,Lt?$(Pt):Promise.resolve()}function _t(wt,Ct){var xt;if(ht[wt].isActive===Ct)return Promise.resolve();(xt=_e.variantChildren)===null||xt===void 0||xt.forEach(Rt=>{var kt;return(kt=Rt.animationState)===null||kt===void 0?void 0:kt.setActive(wt,Ct)}),ht[wt].isActive=Ct;const Pt=At(wt);for(const Rt in ht)ht[Rt].protectedKeys={};return Pt}return{animateChanges:At,setActive:_t,setAnimateFunction:Et,getState:()=>ht,reset:()=>{ht=createState(),vt=!0}}}function checkVariantsDidChange(_e,$){return typeof $=="string"?$!==_e:Array.isArray($)?!shallowCompare($,_e):!1}function createTypeState(_e=!1){return{isActive:_e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class AnimationFeature extends Feature{constructor($){super($),$.animationState||($.animationState=createAnimationState($))}updateAnimationControlsSubscription(){const{animate:$}=this.node.getProps();isAnimationControls($)&&(this.unmountControls=$.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:$}=this.node.getProps(),{animate:ht}=this.node.prevProps||{};$!==ht&&this.updateAnimationControlsSubscription()}unmount(){var $;this.node.animationState.reset(),($=this.unmountControls)===null||$===void 0||$.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:$,onExitComplete:ht}=this.node.presenceContext,{isPresent:vt}=this.node.prevPresenceContext||{};if(!this.node.animationState||$===vt)return;const bt=this.node.animationState.setActive("exit",!$);ht&&!$&&bt.then(()=>ht(this.id))}mount(){const{register:$}=this.node.presenceContext||{};$&&(this.unmount=$(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}},distance=(_e,$)=>Math.abs(_e-$);function distance2D(_e,$){const ht=distance(_e.x,$.x),vt=distance(_e.y,$.y);return Math.sqrt(ht**2+vt**2)}class PanSession{constructor($,ht,{transformPagePoint:vt,contextWindow:bt,dragSnapToOrigin:Et=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Pt=getPanInfo(this.lastMoveEventInfo,this.history),Rt=this.startEvent!==null,kt=distance2D(Pt.offset,{x:0,y:0})>=3;if(!Rt&&!kt)return;const{point:Mt}=Pt,{timestamp:Lt}=frameData;this.history.push({...Mt,timestamp:Lt});const{onStart:Ot,onMove:Ft}=this.handlers;Rt||(Ot&&Ot(this.lastMoveEvent,Pt),this.startEvent=this.lastMoveEvent),Ft&&Ft(this.lastMoveEvent,Pt)},this.handlePointerMove=(Pt,Rt)=>{this.lastMoveEvent=Pt,this.lastMoveEventInfo=transformPoint(Rt,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(Pt,Rt)=>{this.end();const{onEnd:kt,onSessionEnd:Mt,resumeAnimation:Lt}=this.handlers;if(this.dragSnapToOrigin&&Lt&&Lt(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Ot=getPanInfo(Pt.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(Rt,this.transformPagePoint),this.history);this.startEvent&&kt&&kt(Pt,Ot),Mt&&Mt(Pt,Ot)},!isPrimaryPointer($))return;this.dragSnapToOrigin=Et,this.handlers=ht,this.transformPagePoint=vt,this.contextWindow=bt||window;const At=extractEventInfo($),_t=transformPoint(At,this.transformPagePoint),{point:wt}=_t,{timestamp:Ct}=frameData;this.history=[{...wt,timestamp:Ct}];const{onSessionStart:xt}=ht;xt&&xt($,getPanInfo(_t,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers($){this.handlers=$}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(_e,$){return $?{point:$(_e.point)}:_e}function subtractPoint(_e,$){return{x:_e.x-$.x,y:_e.y-$.y}}function getPanInfo({point:_e},$){return{point:_e,delta:subtractPoint(_e,lastDevicePoint($)),offset:subtractPoint(_e,startDevicePoint($)),velocity:getVelocity($,.1)}}function startDevicePoint(_e){return _e[0]}function lastDevicePoint(_e){return _e[_e.length-1]}function getVelocity(_e,$){if(_e.length<2)return{x:0,y:0};let ht=_e.length-1,vt=null;const bt=lastDevicePoint(_e);for(;ht>=0&&(vt=_e[ht],!(bt.timestamp-vt.timestamp>secondsToMilliseconds($)));)ht--;if(!vt)return{x:0,y:0};const Et=millisecondsToSeconds(bt.timestamp-vt.timestamp);if(Et===0)return{x:0,y:0};const At={x:(bt.x-vt.x)/Et,y:(bt.y-vt.y)/Et};return At.x===1/0&&(At.x=0),At.y===1/0&&(At.y=0),At}function calcLength(_e){return _e.max-_e.min}function isNear(_e,$=0,ht=.01){return Math.abs(_e-$)<=ht}function calcAxisDelta(_e,$,ht,vt=.5){_e.origin=vt,_e.originPoint=mixNumber$1($.min,$.max,_e.origin),_e.scale=calcLength(ht)/calcLength($),(isNear(_e.scale,1,1e-4)||isNaN(_e.scale))&&(_e.scale=1),_e.translate=mixNumber$1(ht.min,ht.max,_e.origin)-_e.originPoint,(isNear(_e.translate)||isNaN(_e.translate))&&(_e.translate=0)}function calcBoxDelta(_e,$,ht,vt){calcAxisDelta(_e.x,$.x,ht.x,vt?vt.originX:void 0),calcAxisDelta(_e.y,$.y,ht.y,vt?vt.originY:void 0)}function calcRelativeAxis(_e,$,ht){_e.min=ht.min+$.min,_e.max=_e.min+calcLength($)}function calcRelativeBox(_e,$,ht){calcRelativeAxis(_e.x,$.x,ht.x),calcRelativeAxis(_e.y,$.y,ht.y)}function calcRelativeAxisPosition(_e,$,ht){_e.min=$.min-ht.min,_e.max=_e.min+calcLength($)}function calcRelativePosition(_e,$,ht){calcRelativeAxisPosition(_e.x,$.x,ht.x),calcRelativeAxisPosition(_e.y,$.y,ht.y)}function applyConstraints(_e,{min:$,max:ht},vt){return $!==void 0&&_e<$?_e=vt?mixNumber$1($,_e,vt.min):Math.max(_e,$):ht!==void 0&&_e>ht&&(_e=vt?mixNumber$1(ht,_e,vt.max):Math.min(_e,ht)),_e}function calcRelativeAxisConstraints(_e,$,ht){return{min:$!==void 0?_e.min+$:void 0,max:ht!==void 0?_e.max+ht-(_e.max-_e.min):void 0}}function calcRelativeConstraints(_e,{top:$,left:ht,bottom:vt,right:bt}){return{x:calcRelativeAxisConstraints(_e.x,ht,bt),y:calcRelativeAxisConstraints(_e.y,$,vt)}}function calcViewportAxisConstraints(_e,$){let ht=$.min-_e.min,vt=$.max-_e.max;return $.max-$.min<_e.max-_e.min&&([ht,vt]=[vt,ht]),{min:ht,max:vt}}function calcViewportConstraints(_e,$){return{x:calcViewportAxisConstraints(_e.x,$.x),y:calcViewportAxisConstraints(_e.y,$.y)}}function calcOrigin(_e,$){let ht=.5;const vt=calcLength(_e),bt=calcLength($);return bt>vt?ht=progress($.min,$.max-vt,_e.min):vt>bt&&(ht=progress(_e.min,_e.max-bt,$.min)),clamp(0,1,ht)}function rebaseAxisConstraints(_e,$){const ht={};return $.min!==void 0&&(ht.min=$.min-_e.min),$.max!==void 0&&(ht.max=$.max-_e.min),ht}const defaultElastic=.35;function resolveDragElastic(_e=defaultElastic){return _e===!1?_e=0:_e===!0&&(_e=defaultElastic),{x:resolveAxisElastic(_e,"left","right"),y:resolveAxisElastic(_e,"top","bottom")}}function resolveAxisElastic(_e,$,ht){return{min:resolvePointElastic(_e,$),max:resolvePointElastic(_e,ht)}}function resolvePointElastic(_e,$){return typeof _e=="number"?_e:_e[$]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(_e){return[_e("x"),_e("y")]}function convertBoundingBoxToBox({top:_e,left:$,right:ht,bottom:vt}){return{x:{min:$,max:ht},y:{min:_e,max:vt}}}function convertBoxToBoundingBox({x:_e,y:$}){return{top:$.min,right:_e.max,bottom:$.max,left:_e.min}}function transformBoxPoints(_e,$){if(!$)return _e;const ht=$({x:_e.left,y:_e.top}),vt=$({x:_e.right,y:_e.bottom});return{top:ht.y,left:ht.x,bottom:vt.y,right:vt.x}}function isIdentityScale(_e){return _e===void 0||_e===1}function hasScale({scale:_e,scaleX:$,scaleY:ht}){return!isIdentityScale(_e)||!isIdentityScale($)||!isIdentityScale(ht)}function hasTransform(_e){return hasScale(_e)||has2DTranslate(_e)||_e.z||_e.rotate||_e.rotateX||_e.rotateY||_e.skewX||_e.skewY}function has2DTranslate(_e){return is2DTranslate(_e.x)||is2DTranslate(_e.y)}function is2DTranslate(_e){return _e&&_e!=="0%"}function scalePoint(_e,$,ht){const vt=_e-ht,bt=$*vt;return ht+bt}function applyPointDelta(_e,$,ht,vt,bt){return bt!==void 0&&(_e=scalePoint(_e,bt,vt)),scalePoint(_e,ht,vt)+$}function applyAxisDelta(_e,$=0,ht=1,vt,bt){_e.min=applyPointDelta(_e.min,$,ht,vt,bt),_e.max=applyPointDelta(_e.max,$,ht,vt,bt)}function applyBoxDelta(_e,{x:$,y:ht}){applyAxisDelta(_e.x,$.translate,$.scale,$.originPoint),applyAxisDelta(_e.y,ht.translate,ht.scale,ht.originPoint)}function applyTreeDeltas(_e,$,ht,vt=!1){const bt=ht.length;if(!bt)return;$.x=$.y=1;let Et,At;for(let _t=0;_t<bt;_t++){Et=ht[_t],At=Et.projectionDelta;const wt=Et.instance;wt&&wt.style&&wt.style.display==="contents"||(vt&&Et.options.layoutScroll&&Et.scroll&&Et!==Et.root&&transformBox(_e,{x:-Et.scroll.offset.x,y:-Et.scroll.offset.y}),At&&($.x*=At.x.scale,$.y*=At.y.scale,applyBoxDelta(_e,At)),vt&&hasTransform(Et.latestValues)&&transformBox(_e,Et.latestValues))}$.x=snapToDefault($.x),$.y=snapToDefault($.y)}function snapToDefault(_e){return Number.isInteger(_e)||_e>1.0000000000001||_e<.999999999999?_e:1}function translateAxis(_e,$){_e.min=_e.min+$,_e.max=_e.max+$}function transformAxis(_e,$,[ht,vt,bt]){const Et=$[bt]!==void 0?$[bt]:.5,At=mixNumber$1(_e.min,_e.max,Et);applyAxisDelta(_e,$[ht],$[vt],At,$.scale)}const xKeys$1=["x","scaleX","originX"],yKeys$1=["y","scaleY","originY"];function transformBox(_e,$){transformAxis(_e.x,$,xKeys$1),transformAxis(_e.y,$,yKeys$1)}function measureViewportBox(_e,$){return convertBoundingBoxToBox(transformBoxPoints(_e.getBoundingClientRect(),$))}function measurePageBox(_e,$,ht){const vt=measureViewportBox(_e,ht),{scroll:bt}=$;return bt&&(translateAxis(vt.x,bt.offset.x),translateAxis(vt.y,bt.offset.y)),vt}const getContextWindow=({current:_e})=>_e?_e.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor($){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=$}start($,{snapToCursor:ht=!1}={}){const{presenceContext:vt}=this.visualElement;if(vt&&vt.isPresent===!1)return;const bt=xt=>{const{dragSnapToOrigin:Pt}=this.getProps();Pt?this.pauseAnimation():this.stopAnimation(),ht&&this.snapToCursor(extractEventInfo(xt,"page").point)},Et=(xt,Pt)=>{const{drag:Rt,dragPropagation:kt,onDragStart:Mt}=this.getProps();if(Rt&&!kt&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=getGlobalLock(Rt),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(Ot=>{let Ft=this.getAxisMotionValue(Ot).get()||0;if(percent.test(Ft)){const{projection:Dt}=this.visualElement;if(Dt&&Dt.layout){const $t=Dt.layout.layoutBox[Ot];$t&&(Ft=calcLength($t)*(parseFloat(Ft)/100))}}this.originPoint[Ot]=Ft}),Mt&&frame.postRender(()=>Mt(xt,Pt));const{animationState:Lt}=this.visualElement;Lt&&Lt.setActive("whileDrag",!0)},At=(xt,Pt)=>{const{dragPropagation:Rt,dragDirectionLock:kt,onDirectionLock:Mt,onDrag:Lt}=this.getProps();if(!Rt&&!this.openGlobalLock)return;const{offset:Ot}=Pt;if(kt&&this.currentDirection===null){this.currentDirection=getCurrentDirection(Ot),this.currentDirection!==null&&Mt&&Mt(this.currentDirection);return}this.updateAxis("x",Pt.point,Ot),this.updateAxis("y",Pt.point,Ot),this.visualElement.render(),Lt&&Lt(xt,Pt)},_t=(xt,Pt)=>this.stop(xt,Pt),wt=()=>eachAxis(xt=>{var Pt;return this.getAnimationState(xt)==="paused"&&((Pt=this.getAxisMotionValue(xt).animation)===null||Pt===void 0?void 0:Pt.play())}),{dragSnapToOrigin:Ct}=this.getProps();this.panSession=new PanSession($,{onSessionStart:bt,onStart:Et,onMove:At,onSessionEnd:_t,resumeAnimation:wt},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:Ct,contextWindow:getContextWindow(this.visualElement)})}stop($,ht){const vt=this.isDragging;if(this.cancel(),!vt)return;const{velocity:bt}=ht;this.startAnimation(bt);const{onDragEnd:Et}=this.getProps();Et&&frame.postRender(()=>Et($,ht))}cancel(){this.isDragging=!1;const{projection:$,animationState:ht}=this.visualElement;$&&($.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:vt}=this.getProps();!vt&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),ht&&ht.setActive("whileDrag",!1)}updateAxis($,ht,vt){const{drag:bt}=this.getProps();if(!vt||!shouldDrag($,bt,this.currentDirection))return;const Et=this.getAxisMotionValue($);let At=this.originPoint[$]+vt[$];this.constraints&&this.constraints[$]&&(At=applyConstraints(At,this.constraints[$],this.elastic[$])),Et.set(At)}resolveConstraints(){var $;const{dragConstraints:ht,dragElastic:vt}=this.getProps(),bt=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):($=this.visualElement.projection)===null||$===void 0?void 0:$.layout,Et=this.constraints;ht&&isRefObject(ht)?this.constraints||(this.constraints=this.resolveRefConstraints()):ht&&bt?this.constraints=calcRelativeConstraints(bt.layoutBox,ht):this.constraints=!1,this.elastic=resolveDragElastic(vt),Et!==this.constraints&&bt&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(At=>{this.constraints!==!1&&this.getAxisMotionValue(At)&&(this.constraints[At]=rebaseAxisConstraints(bt.layoutBox[At],this.constraints[At]))})}resolveRefConstraints(){const{dragConstraints:$,onMeasureDragConstraints:ht}=this.getProps();if(!$||!isRefObject($))return!1;const vt=$.current,{projection:bt}=this.visualElement;if(!bt||!bt.layout)return!1;const Et=measurePageBox(vt,bt.root,this.visualElement.getTransformPagePoint());let At=calcViewportConstraints(bt.layout.layoutBox,Et);if(ht){const _t=ht(convertBoxToBoundingBox(At));this.hasMutatedConstraints=!!_t,_t&&(At=convertBoundingBoxToBox(_t))}return At}startAnimation($){const{drag:ht,dragMomentum:vt,dragElastic:bt,dragTransition:Et,dragSnapToOrigin:At,onDragTransitionEnd:_t}=this.getProps(),wt=this.constraints||{},Ct=eachAxis(xt=>{if(!shouldDrag(xt,ht,this.currentDirection))return;let Pt=wt&&wt[xt]||{};At&&(Pt={min:0,max:0});const Rt=bt?200:1e6,kt=bt?40:1e7,Mt={type:"inertia",velocity:vt?$[xt]:0,bounceStiffness:Rt,bounceDamping:kt,timeConstant:750,restDelta:1,restSpeed:10,...Et,...Pt};return this.startAxisValueAnimation(xt,Mt)});return Promise.all(Ct).then(_t)}startAxisValueAnimation($,ht){const vt=this.getAxisMotionValue($);return vt.start(animateMotionValue($,vt,0,ht,this.visualElement))}stopAnimation(){eachAxis($=>this.getAxisMotionValue($).stop())}pauseAnimation(){eachAxis($=>{var ht;return(ht=this.getAxisMotionValue($).animation)===null||ht===void 0?void 0:ht.pause()})}getAnimationState($){var ht;return(ht=this.getAxisMotionValue($).animation)===null||ht===void 0?void 0:ht.state}getAxisMotionValue($){const ht=`_drag${$.toUpperCase()}`,vt=this.visualElement.getProps(),bt=vt[ht];return bt||this.visualElement.getValue($,(vt.initial?vt.initial[$]:void 0)||0)}snapToCursor($){eachAxis(ht=>{const{drag:vt}=this.getProps();if(!shouldDrag(ht,vt,this.currentDirection))return;const{projection:bt}=this.visualElement,Et=this.getAxisMotionValue(ht);if(bt&&bt.layout){const{min:At,max:_t}=bt.layout.layoutBox[ht];Et.set($[ht]-mixNumber$1(At,_t,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:$,dragConstraints:ht}=this.getProps(),{projection:vt}=this.visualElement;if(!isRefObject(ht)||!vt||!this.constraints)return;this.stopAnimation();const bt={x:0,y:0};eachAxis(At=>{const _t=this.getAxisMotionValue(At);if(_t&&this.constraints!==!1){const wt=_t.get();bt[At]=calcOrigin({min:wt,max:wt},this.constraints[At])}});const{transformTemplate:Et}=this.visualElement.getProps();this.visualElement.current.style.transform=Et?Et({},""):"none",vt.root&&vt.root.updateScroll(),vt.updateLayout(),this.resolveConstraints(),eachAxis(At=>{if(!shouldDrag(At,$,null))return;const _t=this.getAxisMotionValue(At),{min:wt,max:Ct}=this.constraints[At];_t.set(mixNumber$1(wt,Ct,bt[At]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const $=this.visualElement.current,ht=addPointerEvent($,"pointerdown",wt=>{const{drag:Ct,dragListener:xt=!0}=this.getProps();Ct&&xt&&this.start(wt)}),vt=()=>{const{dragConstraints:wt}=this.getProps();isRefObject(wt)&&wt.current&&(this.constraints=this.resolveRefConstraints())},{projection:bt}=this.visualElement,Et=bt.addEventListener("measure",vt);bt&&!bt.layout&&(bt.root&&bt.root.updateScroll(),bt.updateLayout()),frame.read(vt);const At=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),_t=bt.addEventListener("didUpdate",({delta:wt,hasLayoutChanged:Ct})=>{this.isDragging&&Ct&&(eachAxis(xt=>{const Pt=this.getAxisMotionValue(xt);Pt&&(this.originPoint[xt]+=wt[xt].translate,Pt.set(Pt.get()+wt[xt].translate))}),this.visualElement.render())});return()=>{At(),ht(),Et(),_t&&_t()}}getProps(){const $=this.visualElement.getProps(),{drag:ht=!1,dragDirectionLock:vt=!1,dragPropagation:bt=!1,dragConstraints:Et=!1,dragElastic:At=defaultElastic,dragMomentum:_t=!0}=$;return{...$,drag:ht,dragDirectionLock:vt,dragPropagation:bt,dragConstraints:Et,dragElastic:At,dragMomentum:_t}}}function shouldDrag(_e,$,ht){return($===!0||$===_e)&&(ht===null||ht===_e)}function getCurrentDirection(_e,$=10){let ht=null;return Math.abs(_e.y)>$?ht="y":Math.abs(_e.x)>$&&(ht="x"),ht}class DragGesture extends Feature{constructor($){super($),this.removeGroupControls=noop,this.removeListeners=noop,this.controls=new VisualElementDragControls($)}mount(){const{dragControls:$}=this.node.getProps();$&&(this.removeGroupControls=$.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=_e=>($,ht)=>{_e&&frame.postRender(()=>_e($,ht))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop}onPointerDown($){this.session=new PanSession($,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:$,onPanStart:ht,onPan:vt,onPanEnd:bt}=this.node.getProps();return{onSessionStart:asyncHandler($),onStart:asyncHandler(ht),onMove:vt,onEnd:(Et,At)=>{delete this.session,bt&&frame.postRender(()=>bt(Et,At))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",$=>this.onPointerDown($))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function usePresence(){const _e=reactExports.useContext(PresenceContext);if(_e===null)return[!0,null];const{isPresent:$,onExitComplete:ht,register:vt}=_e,bt=reactExports.useId();return reactExports.useEffect(()=>vt(bt),[]),!$&&ht?[!1,()=>ht&&ht(bt)]:[!0]}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(_e,$){return $.max===$.min?0:_e/($.max-$.min)*100}const correctBorderRadius={correct:(_e,$)=>{if(!$.target)return _e;if(typeof _e=="string")if(px.test(_e))_e=parseFloat(_e);else return _e;const ht=pixelsToPercent(_e,$.target.x),vt=pixelsToPercent(_e,$.target.y);return`${ht}% ${vt}%`}},correctBoxShadow={correct:(_e,{treeScale:$,projectionDelta:ht})=>{const vt=_e,bt=complex.parse(_e);if(bt.length>5)return vt;const Et=complex.createTransformer(_e),At=typeof bt[0]!="number"?1:0,_t=ht.x.scale*$.x,wt=ht.y.scale*$.y;bt[0+At]/=_t,bt[1+At]/=wt;const Ct=mixNumber$1(_t,wt,.5);return typeof bt[2+At]=="number"&&(bt[2+At]/=Ct),typeof bt[3+At]=="number"&&(bt[3+At]/=Ct),Et(bt)}};class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:$,layoutGroup:ht,switchLayoutGroup:vt,layoutId:bt}=this.props,{projection:Et}=$;addScaleCorrector(defaultScaleCorrectors),Et&&(ht.group&&ht.group.add(Et),vt&&vt.register&&bt&&vt.register(Et),Et.root.didUpdate(),Et.addEventListener("animationComplete",()=>{this.safeToRemove()}),Et.setOptions({...Et.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate($){const{layoutDependency:ht,visualElement:vt,drag:bt,isPresent:Et}=this.props,At=vt.projection;return At&&(At.isPresent=Et,bt||$.layoutDependency!==ht||ht===void 0?At.willUpdate():this.safeToRemove(),$.isPresent!==Et&&(Et?At.promote():At.relegate()||frame.postRender(()=>{const _t=At.getStack();(!_t||!_t.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:$}=this.props.visualElement;$&&($.root.didUpdate(),microtask.postRender(()=>{!$.currentAnimation&&$.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:$,layoutGroup:ht,switchLayoutGroup:vt}=this.props,{projection:bt}=$;bt&&(bt.scheduleCheckAfterUnmount(),ht&&ht.group&&ht.group.remove(bt),vt&&vt.deregister&&vt.deregister(bt))}safeToRemove(){const{safeToRemove:$}=this.props;$&&$()}render(){return null}}function MeasureLayout(_e){const[$,ht]=usePresence(),vt=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{..._e,layoutGroup:vt,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:$,safeToRemove:ht})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow},borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=_e=>typeof _e=="string"?parseFloat(_e):_e,isPx=_e=>typeof _e=="number"||px.test(_e);function mixValues(_e,$,ht,vt,bt,Et){bt?(_e.opacity=mixNumber$1(0,ht.opacity!==void 0?ht.opacity:1,easeCrossfadeIn(vt)),_e.opacityExit=mixNumber$1($.opacity!==void 0?$.opacity:1,0,easeCrossfadeOut(vt))):Et&&(_e.opacity=mixNumber$1($.opacity!==void 0?$.opacity:1,ht.opacity!==void 0?ht.opacity:1,vt));for(let At=0;At<numBorders;At++){const _t=`border${borders[At]}Radius`;let wt=getRadius($,_t),Ct=getRadius(ht,_t);if(wt===void 0&&Ct===void 0)continue;wt||(wt=0),Ct||(Ct=0),wt===0||Ct===0||isPx(wt)===isPx(Ct)?(_e[_t]=Math.max(mixNumber$1(asNumber(wt),asNumber(Ct),vt),0),(percent.test(Ct)||percent.test(wt))&&(_e[_t]+="%")):_e[_t]=Ct}($.rotate||ht.rotate)&&(_e.rotate=mixNumber$1($.rotate||0,ht.rotate||0,vt))}function getRadius(_e,$){return _e[$]!==void 0?_e[$]:_e.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop);function compress(_e,$,ht){return vt=>vt<_e?0:vt>$?1:ht(progress(_e,$,vt))}function copyAxisInto(_e,$){_e.min=$.min,_e.max=$.max}function copyBoxInto(_e,$){copyAxisInto(_e.x,$.x),copyAxisInto(_e.y,$.y)}function removePointDelta(_e,$,ht,vt,bt){return _e-=$,_e=scalePoint(_e,1/ht,vt),bt!==void 0&&(_e=scalePoint(_e,1/bt,vt)),_e}function removeAxisDelta(_e,$=0,ht=1,vt=.5,bt,Et=_e,At=_e){if(percent.test($)&&($=parseFloat($),$=mixNumber$1(At.min,At.max,$/100)-At.min),typeof $!="number")return;let _t=mixNumber$1(Et.min,Et.max,vt);_e===Et&&(_t-=$),_e.min=removePointDelta(_e.min,$,ht,_t,bt),_e.max=removePointDelta(_e.max,$,ht,_t,bt)}function removeAxisTransforms(_e,$,[ht,vt,bt],Et,At){removeAxisDelta(_e,$[ht],$[vt],$[bt],$.scale,Et,At)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(_e,$,ht,vt){removeAxisTransforms(_e.x,$,xKeys,ht?ht.x:void 0,vt?vt.x:void 0),removeAxisTransforms(_e.y,$,yKeys,ht?ht.y:void 0,vt?vt.y:void 0)}function isAxisDeltaZero(_e){return _e.translate===0&&_e.scale===1}function isDeltaZero(_e){return isAxisDeltaZero(_e.x)&&isAxisDeltaZero(_e.y)}function boxEquals(_e,$){return _e.x.min===$.x.min&&_e.x.max===$.x.max&&_e.y.min===$.y.min&&_e.y.max===$.y.max}function boxEqualsRounded(_e,$){return Math.round(_e.x.min)===Math.round($.x.min)&&Math.round(_e.x.max)===Math.round($.x.max)&&Math.round(_e.y.min)===Math.round($.y.min)&&Math.round(_e.y.max)===Math.round($.y.max)}function aspectRatio(_e){return calcLength(_e.x)/calcLength(_e.y)}class NodeStack{constructor(){this.members=[]}add($){addUniqueItem(this.members,$),$.scheduleRender()}remove($){if(removeItem(this.members,$),$===this.prevLead&&(this.prevLead=void 0),$===this.lead){const ht=this.members[this.members.length-1];ht&&this.promote(ht)}}relegate($){const ht=this.members.findIndex(bt=>$===bt);if(ht===0)return!1;let vt;for(let bt=ht;bt>=0;bt--){const Et=this.members[bt];if(Et.isPresent!==!1){vt=Et;break}}return vt?(this.promote(vt),!0):!1}promote($,ht){const vt=this.lead;if($!==vt&&(this.prevLead=vt,this.lead=$,$.show(),vt)){vt.instance&&vt.scheduleRender(),$.scheduleRender(),$.resumeFrom=vt,ht&&($.resumeFrom.preserveOpacity=!0),vt.snapshot&&($.snapshot=vt.snapshot,$.snapshot.latestValues=vt.animationValues||vt.latestValues),$.root&&$.root.isUpdating&&($.isLayoutDirty=!0);const{crossfade:bt}=$.options;bt===!1&&vt.hide()}}exitAnimationComplete(){this.members.forEach($=>{const{options:ht,resumingFrom:vt}=$;ht.onExitComplete&&ht.onExitComplete(),vt&&vt.options.onExitComplete&&vt.options.onExitComplete()})}scheduleRender(){this.members.forEach($=>{$.instance&&$.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(_e,$,ht){let vt="";const bt=_e.x.translate/$.x,Et=_e.y.translate/$.y,At=(ht==null?void 0:ht.z)||0;if((bt||Et||At)&&(vt=`translate3d(${bt}px, ${Et}px, ${At}px) `),($.x!==1||$.y!==1)&&(vt+=`scale(${1/$.x}, ${1/$.y}) `),ht){const{transformPerspective:Ct,rotate:xt,rotateX:Pt,rotateY:Rt,skewX:kt,skewY:Mt}=ht;Ct&&(vt=`perspective(${Ct}px) ${vt}`),xt&&(vt+=`rotate(${xt}deg) `),Pt&&(vt+=`rotateX(${Pt}deg) `),Rt&&(vt+=`rotateY(${Rt}deg) `),kt&&(vt+=`skewX(${kt}deg) `),Mt&&(vt+=`skewY(${Mt}deg) `)}const _t=_e.x.scale*$.x,wt=_e.y.scale*$.y;return(_t!==1||wt!==1)&&(vt+=`scale(${_t}, ${wt})`),vt||"none"}const compareByDepth=(_e,$)=>_e.depth-$.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add($){addUniqueItem(this.children,$),this.isDirty=!0}remove($){removeItem(this.children,$),this.isDirty=!0}forEach($){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach($)}}function delay(_e,$){const ht=time.now(),vt=({timestamp:bt})=>{const Et=bt-ht;Et>=$&&(cancelFrame(vt),_e(Et-$))};return frame.read(vt,!0),()=>cancelFrame(vt)}function record(_e){window.MotionDebug&&window.MotionDebug.record(_e)}function isSVGElement(_e){return _e instanceof SVGElement&&_e.tagName!=="svg"}function animateSingleValue(_e,$,ht){const vt=isMotionValue(_e)?_e:motionValue(_e);return vt.start(animateMotionValue("",vt,$,ht)),vt.animation}const transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;const projectionFrameData={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function resetDistortingTransform(_e,$,ht,vt){const{latestValues:bt}=$;bt[_e]&&(ht[_e]=bt[_e],$.setStaticValue(_e,0),vt&&(vt[_e]=0))}function isOptimisedAppearTree(_e){if(_e.hasCheckedOptimisedAppear=!0,_e.root===_e)return!1;const{visualElement:$}=_e.options;return $?getOptimisedAppearId($)?!0:_e.parent&&!_e.parent.hasCheckedOptimisedAppear?isOptimisedAppearTree(_e.parent):!1:!1}function createProjectionNode({attachResizeListener:_e,defaultParent:$,measureScroll:ht,checkIsScrollRoot:vt,resetTransform:bt}){return class{constructor(At={},_t=$==null?void 0:$()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,projectionFrameData.totalNodes=projectionFrameData.resolvedTargetDeltas=projectionFrameData.recalculatedProjection=0,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),record(projectionFrameData)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=At,this.root=_t?_t.root||_t:this,this.path=_t?[..._t.path,_t]:[],this.parent=_t,this.depth=_t?_t.depth+1:0;for(let wt=0;wt<this.path.length;wt++)this.path[wt].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(At,_t){return this.eventHandlers.has(At)||this.eventHandlers.set(At,new SubscriptionManager),this.eventHandlers.get(At).add(_t)}notifyListeners(At,..._t){const wt=this.eventHandlers.get(At);wt&&wt.notify(..._t)}hasListeners(At){return this.eventHandlers.has(At)}mount(At,_t=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(At),this.instance=At;const{layoutId:wt,layout:Ct,visualElement:xt}=this.options;if(xt&&!xt.current&&xt.mount(At),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),_t&&(Ct||wt)&&(this.isLayoutDirty=!0),_e){let Pt;const Rt=()=>this.root.updateBlockedByResize=!1;_e(At,()=>{this.root.updateBlockedByResize=!0,Pt&&Pt(),Pt=delay(Rt,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}wt&&this.root.registerSharedNode(wt,this),this.options.animate!==!1&&xt&&(wt||Ct)&&this.addEventListener("didUpdate",({delta:Pt,hasLayoutChanged:Rt,hasRelativeTargetChanged:kt,layout:Mt})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const Lt=this.options.transition||xt.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:Ot,onLayoutAnimationComplete:Ft}=xt.getProps(),Dt=!this.targetLayout||!boxEqualsRounded(this.targetLayout,Mt)||kt,$t=!Rt&&kt;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||$t||Rt&&(Dt||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(Pt,$t);const Bt={...getValueTransition(Lt,"layout"),onPlay:Ot,onComplete:Ft};(xt.shouldReduceMotion||this.options.layoutRoot)&&(Bt.delay=0,Bt.type=!1),this.startAnimation(Bt)}else Rt||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=Mt})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const At=this.getStack();At&&At.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:At}=this.options;return At&&At.getProps().transformTemplate}willUpdate(At=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.HandoffCancelAllAnimations&&isOptimisedAppearTree(this)&&window.HandoffCancelAllAnimations(),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let xt=0;xt<this.path.length;xt++){const Pt=this.path[xt];Pt.shouldResetTransform=!0,Pt.updateScroll("snapshot"),Pt.options.layoutRoot&&Pt.willUpdate(!1)}const{layoutId:_t,layout:wt}=this.options;if(_t===void 0&&!wt)return;const Ct=this.getTransformTemplate();this.prevTransformTemplateValue=Ct?Ct(this.latestValues,""):void 0,this.updateSnapshot(),At&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const _t=time.now();frameData.delta=clamp(0,1e3/60,_t-frameData.timestamp),frameData.timestamp=_t,frameData.isProcessing=!0,steps.update.process(frameData),steps.preRender.process(frameData),steps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let wt=0;wt<this.path.length;wt++)this.path[wt].updateScroll();const At=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:_t}=this.options;_t&&_t.notify("LayoutMeasure",this.layout.layoutBox,At?At.layoutBox:void 0)}updateScroll(At="measure"){let _t=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===At&&(_t=!1),_t&&(this.scroll={animationId:this.root.animationId,phase:At,isRoot:vt(this.instance),offset:ht(this.instance)})}resetTransform(){if(!bt)return;const At=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,_t=this.projectionDelta&&!isDeltaZero(this.projectionDelta),wt=this.getTransformTemplate(),Ct=wt?wt(this.latestValues,""):void 0,xt=Ct!==this.prevTransformTemplateValue;At&&(_t||hasTransform(this.latestValues)||xt)&&(bt(this.instance,Ct),this.shouldResetTransform=!1,this.scheduleRender())}measure(At=!0){const _t=this.measurePageBox();let wt=this.removeElementScroll(_t);return At&&(wt=this.removeTransform(wt)),roundBox(wt),{animationId:this.root.animationId,measuredBox:_t,layoutBox:wt,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:At}=this.options;if(!At)return createBox();const _t=At.measureViewportBox(),{scroll:wt}=this.root;return wt&&(translateAxis(_t.x,wt.offset.x),translateAxis(_t.y,wt.offset.y)),_t}removeElementScroll(At){const _t=createBox();copyBoxInto(_t,At);for(let wt=0;wt<this.path.length;wt++){const Ct=this.path[wt],{scroll:xt,options:Pt}=Ct;if(Ct!==this.root&&xt&&Pt.layoutScroll){if(xt.isRoot){copyBoxInto(_t,At);const{scroll:Rt}=this.root;Rt&&(translateAxis(_t.x,-Rt.offset.x),translateAxis(_t.y,-Rt.offset.y))}translateAxis(_t.x,xt.offset.x),translateAxis(_t.y,xt.offset.y)}}return _t}applyTransform(At,_t=!1){const wt=createBox();copyBoxInto(wt,At);for(let Ct=0;Ct<this.path.length;Ct++){const xt=this.path[Ct];!_t&&xt.options.layoutScroll&&xt.scroll&&xt!==xt.root&&transformBox(wt,{x:-xt.scroll.offset.x,y:-xt.scroll.offset.y}),hasTransform(xt.latestValues)&&transformBox(wt,xt.latestValues)}return hasTransform(this.latestValues)&&transformBox(wt,this.latestValues),wt}removeTransform(At){const _t=createBox();copyBoxInto(_t,At);for(let wt=0;wt<this.path.length;wt++){const Ct=this.path[wt];if(!Ct.instance||!hasTransform(Ct.latestValues))continue;hasScale(Ct.latestValues)&&Ct.updateSnapshot();const xt=createBox(),Pt=Ct.measurePageBox();copyBoxInto(xt,Pt),removeBoxTransforms(_t,Ct.latestValues,Ct.snapshot?Ct.snapshot.layoutBox:void 0,xt)}return hasTransform(this.latestValues)&&removeBoxTransforms(_t,this.latestValues),_t}setTargetDelta(At){this.targetDelta=At,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(At){this.options={...this.options,...At,crossfade:At.crossfade!==void 0?At.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(At=!1){var _t;const wt=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=wt.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=wt.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=wt.isSharedProjectionDirty);const Ct=!!this.resumingFrom||this!==wt;if(!(At||Ct&&this.isSharedProjectionDirty||this.isProjectionDirty||!((_t=this.parent)===null||_t===void 0)&&_t.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:Pt,layoutId:Rt}=this.options;if(!(!this.layout||!(Pt||Rt))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const kt=this.getClosestProjectingParent();kt&&kt.layout&&this.animationProgress!==1?(this.relativeParent=kt,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,kt.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const kt=this.getClosestProjectingParent();kt&&!!kt.resumingFrom==!!this.resumingFrom&&!kt.options.layoutScroll&&kt.target&&this.animationProgress!==1?(this.relativeParent=kt,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,kt.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}projectionFrameData.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var At;const _t=this.getLead(),wt=!!this.resumingFrom||this!==_t;let Ct=!0;if((this.isProjectionDirty||!((At=this.parent)===null||At===void 0)&&At.isProjectionDirty)&&(Ct=!1),wt&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(Ct=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(Ct=!1),Ct)return;const{layout:xt,layoutId:Pt}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(xt||Pt))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const Rt=this.treeScale.x,kt=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,wt),_t.layout&&!_t.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(_t.target=_t.layout.layoutBox,_t.targetWithTransforms=createBox());const{target:Mt}=_t;if(!Mt){this.projectionTransform&&(this.projectionDelta=createDelta(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta());const Lt=this.projectionTransform;calcBoxDelta(this.projectionDelta,this.layoutCorrected,Mt,this.latestValues),this.projectionTransform=buildProjectionTransform(this.projectionDelta,this.treeScale),(this.projectionTransform!==Lt||this.treeScale.x!==Rt||this.treeScale.y!==kt)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",Mt)),projectionFrameData.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(At=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),At){const _t=this.getStack();_t&&_t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(At,_t=!1){const wt=this.snapshot,Ct=wt?wt.latestValues:{},xt={...this.latestValues},Pt=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!_t;const Rt=createBox(),kt=wt?wt.source:void 0,Mt=this.layout?this.layout.source:void 0,Lt=kt!==Mt,Ot=this.getStack(),Ft=!Ot||Ot.members.length<=1,Dt=!!(Lt&&!Ft&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let $t;this.mixTargetDelta=Bt=>{const Nt=Bt/1e3;mixAxisDelta(Pt.x,At.x,Nt),mixAxisDelta(Pt.y,At.y,Nt),this.setTargetDelta(Pt),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(Rt,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,Rt,Nt),$t&&boxEquals(this.relativeTarget,$t)&&(this.isProjectionDirty=!1),$t||($t=createBox()),copyBoxInto($t,this.relativeTarget)),Lt&&(this.animationValues=xt,mixValues(xt,Ct,this.latestValues,Nt,Dt,Ft)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Nt},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(At){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...At,onUpdate:_t=>{this.mixTargetDelta(_t),At.onUpdate&&At.onUpdate(_t)},onComplete:()=>{At.onComplete&&At.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const At=this.getStack();At&&At.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const At=this.getLead();let{targetWithTransforms:_t,target:wt,layout:Ct,latestValues:xt}=At;if(!(!_t||!wt||!Ct)){if(this!==At&&this.layout&&Ct&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,Ct.layoutBox)){wt=this.target||createBox();const Pt=calcLength(this.layout.layoutBox.x);wt.x.min=At.target.x.min,wt.x.max=wt.x.min+Pt;const Rt=calcLength(this.layout.layoutBox.y);wt.y.min=At.target.y.min,wt.y.max=wt.y.min+Rt}copyBoxInto(_t,wt),transformBox(_t,xt),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,_t,xt)}}registerSharedNode(At,_t){this.sharedNodes.has(At)||this.sharedNodes.set(At,new NodeStack),this.sharedNodes.get(At).add(_t);const Ct=_t.options.initialPromotionConfig;_t.promote({transition:Ct?Ct.transition:void 0,preserveFollowOpacity:Ct&&Ct.shouldPreserveFollowOpacity?Ct.shouldPreserveFollowOpacity(_t):void 0})}isLead(){const At=this.getStack();return At?At.lead===this:!0}getLead(){var At;const{layoutId:_t}=this.options;return _t?((At=this.getStack())===null||At===void 0?void 0:At.lead)||this:this}getPrevLead(){var At;const{layoutId:_t}=this.options;return _t?(At=this.getStack())===null||At===void 0?void 0:At.prevLead:void 0}getStack(){const{layoutId:At}=this.options;if(At)return this.root.sharedNodes.get(At)}promote({needsReset:At,transition:_t,preserveFollowOpacity:wt}={}){const Ct=this.getStack();Ct&&Ct.promote(this,wt),At&&(this.projectionDelta=void 0,this.needsReset=!0),_t&&this.setOptions({transition:_t})}relegate(){const At=this.getStack();return At?At.relegate(this):!1}resetSkewAndRotation(){const{visualElement:At}=this.options;if(!At)return;let _t=!1;const{latestValues:wt}=At;if((wt.z||wt.rotate||wt.rotateX||wt.rotateY||wt.rotateZ||wt.skewX||wt.skewY)&&(_t=!0),!_t)return;const Ct={};wt.z&&resetDistortingTransform("z",At,Ct,this.animationValues);for(let xt=0;xt<transformAxes.length;xt++)resetDistortingTransform(`rotate${transformAxes[xt]}`,At,Ct,this.animationValues),resetDistortingTransform(`skew${transformAxes[xt]}`,At,Ct,this.animationValues);At.render();for(const xt in Ct)At.setStaticValue(xt,Ct[xt]),this.animationValues&&(this.animationValues[xt]=Ct[xt]);At.scheduleRender()}getProjectionStyles(At){var _t,wt;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const Ct={visibility:""},xt=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,Ct.opacity="",Ct.pointerEvents=resolveMotionValue(At==null?void 0:At.pointerEvents)||"",Ct.transform=xt?xt(this.latestValues,""):"none",Ct;const Pt=this.getLead();if(!this.projectionDelta||!this.layout||!Pt.target){const Lt={};return this.options.layoutId&&(Lt.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,Lt.pointerEvents=resolveMotionValue(At==null?void 0:At.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(Lt.transform=xt?xt({},""):"none",this.hasProjected=!1),Lt}const Rt=Pt.animationValues||Pt.latestValues;this.applyTransformsToTarget(),Ct.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,Rt),xt&&(Ct.transform=xt(Rt,Ct.transform));const{x:kt,y:Mt}=this.projectionDelta;Ct.transformOrigin=`${kt.origin*100}% ${Mt.origin*100}% 0`,Pt.animationValues?Ct.opacity=Pt===this?(wt=(_t=Rt.opacity)!==null&&_t!==void 0?_t:this.latestValues.opacity)!==null&&wt!==void 0?wt:1:this.preserveOpacity?this.latestValues.opacity:Rt.opacityExit:Ct.opacity=Pt===this?Rt.opacity!==void 0?Rt.opacity:"":Rt.opacityExit!==void 0?Rt.opacityExit:0;for(const Lt in scaleCorrectors){if(Rt[Lt]===void 0)continue;const{correct:Ot,applyTo:Ft}=scaleCorrectors[Lt],Dt=Ct.transform==="none"?Rt[Lt]:Ot(Rt[Lt],Pt);if(Ft){const $t=Ft.length;for(let Bt=0;Bt<$t;Bt++)Ct[Ft[Bt]]=Dt}else Ct[Lt]=Dt}return this.options.layoutId&&(Ct.pointerEvents=Pt===this?resolveMotionValue(At==null?void 0:At.pointerEvents)||"":"none"),Ct}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(At=>{var _t;return(_t=At.currentAnimation)===null||_t===void 0?void 0:_t.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(_e){_e.updateLayout()}function notifyLayoutUpdate(_e){var $;const ht=(($=_e.resumeFrom)===null||$===void 0?void 0:$.snapshot)||_e.snapshot;if(_e.isLead()&&_e.layout&&ht&&_e.hasListeners("didUpdate")){const{layoutBox:vt,measuredBox:bt}=_e.layout,{animationType:Et}=_e.options,At=ht.source!==_e.layout.source;Et==="size"?eachAxis(Pt=>{const Rt=At?ht.measuredBox[Pt]:ht.layoutBox[Pt],kt=calcLength(Rt);Rt.min=vt[Pt].min,Rt.max=Rt.min+kt}):shouldAnimatePositionOnly(Et,ht.layoutBox,vt)&&eachAxis(Pt=>{const Rt=At?ht.measuredBox[Pt]:ht.layoutBox[Pt],kt=calcLength(vt[Pt]);Rt.max=Rt.min+kt,_e.relativeTarget&&!_e.currentAnimation&&(_e.isProjectionDirty=!0,_e.relativeTarget[Pt].max=_e.relativeTarget[Pt].min+kt)});const _t=createDelta();calcBoxDelta(_t,vt,ht.layoutBox);const wt=createDelta();At?calcBoxDelta(wt,_e.applyTransform(bt,!0),ht.measuredBox):calcBoxDelta(wt,vt,ht.layoutBox);const Ct=!isDeltaZero(_t);let xt=!1;if(!_e.resumeFrom){const Pt=_e.getClosestProjectingParent();if(Pt&&!Pt.resumeFrom){const{snapshot:Rt,layout:kt}=Pt;if(Rt&&kt){const Mt=createBox();calcRelativePosition(Mt,ht.layoutBox,Rt.layoutBox);const Lt=createBox();calcRelativePosition(Lt,vt,kt.layoutBox),boxEqualsRounded(Mt,Lt)||(xt=!0),Pt.options.layoutRoot&&(_e.relativeTarget=Lt,_e.relativeTargetOrigin=Mt,_e.relativeParent=Pt)}}}_e.notifyListeners("didUpdate",{layout:vt,snapshot:ht,delta:wt,layoutDelta:_t,hasLayoutChanged:Ct,hasRelativeTargetChanged:xt})}else if(_e.isLead()){const{onExitComplete:vt}=_e.options;vt&&vt()}_e.options.transition=void 0}function propagateDirtyNodes(_e){projectionFrameData.totalNodes++,_e.parent&&(_e.isProjecting()||(_e.isProjectionDirty=_e.parent.isProjectionDirty),_e.isSharedProjectionDirty||(_e.isSharedProjectionDirty=!!(_e.isProjectionDirty||_e.parent.isProjectionDirty||_e.parent.isSharedProjectionDirty)),_e.isTransformDirty||(_e.isTransformDirty=_e.parent.isTransformDirty))}function cleanDirtyNodes(_e){_e.isProjectionDirty=_e.isSharedProjectionDirty=_e.isTransformDirty=!1}function clearSnapshot(_e){_e.clearSnapshot()}function clearMeasurements(_e){_e.clearMeasurements()}function clearIsLayoutDirty(_e){_e.isLayoutDirty=!1}function resetTransformStyle(_e){const{visualElement:$}=_e.options;$&&$.getProps().onBeforeLayoutMeasure&&$.notify("BeforeLayoutMeasure"),_e.resetTransform()}function finishAnimation(_e){_e.finishAnimation(),_e.targetDelta=_e.relativeTarget=_e.target=void 0,_e.isProjectionDirty=!0}function resolveTargetDelta(_e){_e.resolveTargetDelta()}function calcProjection(_e){_e.calcProjection()}function resetSkewAndRotation(_e){_e.resetSkewAndRotation()}function removeLeadSnapshots(_e){_e.removeLeadSnapshot()}function mixAxisDelta(_e,$,ht){_e.translate=mixNumber$1($.translate,0,ht),_e.scale=mixNumber$1($.scale,1,ht),_e.origin=$.origin,_e.originPoint=$.originPoint}function mixAxis(_e,$,ht,vt){_e.min=mixNumber$1($.min,ht.min,vt),_e.max=mixNumber$1($.max,ht.max,vt)}function mixBox(_e,$,ht,vt){mixAxis(_e.x,$.x,ht.x,vt),mixAxis(_e.y,$.y,ht.y,vt)}function hasOpacityCrossfade(_e){return _e.animationValues&&_e.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=_e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(_e),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop;function roundAxis(_e){_e.min=roundPoint(_e.min),_e.max=roundPoint(_e.max)}function roundBox(_e){roundAxis(_e.x),roundAxis(_e.y)}function shouldAnimatePositionOnly(_e,$,ht){return _e==="position"||_e==="preserve-aspect"&&!isNear(aspectRatio($),aspectRatio(ht),.2)}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(_e,$)=>addDomEvent(_e,"resize",$),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:_e=>({x:_e.scrollLeft,y:_e.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const _e=new DocumentProjectionNode({});_e.mount(window),_e.setOptions({layoutScroll:!0}),rootProjectionNode.current=_e}return rootProjectionNode.current},resetTransform:(_e,$)=>{_e.style.transform=$!==void 0?$:"none"},checkIsScrollRoot:_e=>window.getComputedStyle(_e).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}},prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const _e=window.matchMedia("(prefers-reduced-motion)"),$=()=>prefersReducedMotion.current=_e.matches;_e.addListener($),$()}else prefersReducedMotion.current=!1}function updateMotionValuesFromProps(_e,$,ht){const{willChange:vt}=$;for(const bt in $){const Et=$[bt],At=ht[bt];if(isMotionValue(Et))_e.addValue(bt,Et),isWillChangeMotionValue(vt)&&vt.add(bt);else if(isMotionValue(At))_e.addValue(bt,motionValue(Et,{owner:_e})),isWillChangeMotionValue(vt)&&vt.remove(bt);else if(At!==Et)if(_e.hasValue(bt)){const _t=_e.getValue(bt);_t.liveStyle===!0?_t.jump(Et):_t.hasAnimated||_t.set(Et)}else{const _t=_e.getStaticValue(bt);_e.addValue(bt,motionValue(_t!==void 0?_t:Et,{owner:_e}))}}for(const bt in ht)$[bt]===void 0&&_e.removeValue(bt);return $}const visualElementStore=new WeakMap,valueTypes=[...dimensionValueTypes,color,complex],findValueType=_e=>valueTypes.find(testValueType(_e)),propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],numVariantProps=variantProps.length;class VisualElement{scrapeMotionValuesFromProps($,ht,vt){return{}}constructor({parent:$,props:ht,presenceContext:vt,reducedMotionConfig:bt,blockInitialAnimation:Et,visualState:At},_t={}){this.resolveKeyframes=(Rt,kt,Mt,Lt)=>new this.KeyframeResolver(Rt,kt,Mt,Lt,this),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>frame.render(this.render,!1,!0);const{latestValues:wt,renderState:Ct}=At;this.latestValues=wt,this.baseTarget={...wt},this.initialValues=ht.initial?{...wt}:{},this.renderState=Ct,this.parent=$,this.props=ht,this.presenceContext=vt,this.depth=$?$.depth+1:0,this.reducedMotionConfig=bt,this.options=_t,this.blockInitialAnimation=!!Et,this.isControllingVariants=isControllingVariants(ht),this.isVariantNode=isVariantNode(ht),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!($&&$.current);const{willChange:xt,...Pt}=this.scrapeMotionValuesFromProps(ht,{},this);for(const Rt in Pt){const kt=Pt[Rt];wt[Rt]!==void 0&&isMotionValue(kt)&&(kt.set(wt[Rt],!1),isWillChangeMotionValue(xt)&&xt.add(Rt))}}mount($){this.current=$,visualElementStore.set($,this),this.projection&&!this.projection.instance&&this.projection.mount($),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((ht,vt)=>this.bindToMotionValue(vt,ht)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach($=>$()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const $ in this.events)this.events[$].clear();for(const $ in this.features){const ht=this.features[$];ht&&(ht.unmount(),ht.isMounted=!1)}this.current=null}bindToMotionValue($,ht){const vt=transformProps.has($),bt=ht.on("change",At=>{this.latestValues[$]=At,this.props.onUpdate&&frame.preRender(this.notifyUpdate),vt&&this.projection&&(this.projection.isTransformDirty=!0)}),Et=ht.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set($,()=>{bt(),Et(),ht.owner&&ht.stop()})}sortNodePosition($){return!this.current||!this.sortInstanceNodePosition||this.type!==$.type?0:this.sortInstanceNodePosition(this.current,$.current)}updateFeatures(){let $="animation";for($ in featureDefinitions){const ht=featureDefinitions[$];if(!ht)continue;const{isEnabled:vt,Feature:bt}=ht;if(!this.features[$]&&bt&&vt(this.props)&&(this.features[$]=new bt(this)),this.features[$]){const Et=this.features[$];Et.isMounted?Et.update():(Et.mount(),Et.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue($){return this.latestValues[$]}setStaticValue($,ht){this.latestValues[$]=ht}update($,ht){($.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=$,this.prevPresenceContext=this.presenceContext,this.presenceContext=ht;for(let vt=0;vt<propEventHandlers.length;vt++){const bt=propEventHandlers[vt];this.propEventSubscriptions[bt]&&(this.propEventSubscriptions[bt](),delete this.propEventSubscriptions[bt]);const Et="on"+bt,At=$[Et];At&&(this.propEventSubscriptions[bt]=this.on(bt,At))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps($,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant($){return this.props.variants?this.props.variants[$]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext($=!1){if($)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const vt=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(vt.initial=this.props.initial),vt}const ht={};for(let vt=0;vt<numVariantProps;vt++){const bt=variantProps[vt],Et=this.props[bt];(isVariantLabel(Et)||Et===!1)&&(ht[bt]=Et)}return ht}addVariantChild($){const ht=this.getClosestVariantNode();if(ht)return ht.variantChildren&&ht.variantChildren.add($),()=>ht.variantChildren.delete($)}addValue($,ht){const vt=this.values.get($);ht!==vt&&(vt&&this.removeValue($),this.bindToMotionValue($,ht),this.values.set($,ht),this.latestValues[$]=ht.get())}removeValue($){this.values.delete($);const ht=this.valueSubscriptions.get($);ht&&(ht(),this.valueSubscriptions.delete($)),delete this.latestValues[$],this.removeValueFromRenderState($,this.renderState)}hasValue($){return this.values.has($)}getValue($,ht){if(this.props.values&&this.props.values[$])return this.props.values[$];let vt=this.values.get($);return vt===void 0&&ht!==void 0&&(vt=motionValue(ht===null?void 0:ht,{owner:this}),this.addValue($,vt)),vt}readValue($,ht){var vt;let bt=this.latestValues[$]!==void 0||!this.current?this.latestValues[$]:(vt=this.getBaseTargetFromProps(this.props,$))!==null&&vt!==void 0?vt:this.readValueFromInstance(this.current,$,this.options);return bt!=null&&(typeof bt=="string"&&(isNumericalString(bt)||isZeroValueString(bt))?bt=parseFloat(bt):!findValueType(bt)&&complex.test(ht)&&(bt=getAnimatableNone($,ht)),this.setBaseTarget($,isMotionValue(bt)?bt.get():bt)),isMotionValue(bt)?bt.get():bt}setBaseTarget($,ht){this.baseTarget[$]=ht}getBaseTarget($){var ht;const{initial:vt}=this.props;let bt;if(typeof vt=="string"||typeof vt=="object"){const At=resolveVariantFromProps(this.props,vt,(ht=this.presenceContext)===null||ht===void 0?void 0:ht.custom);At&&(bt=At[$])}if(vt&&bt!==void 0)return bt;const Et=this.getBaseTargetFromProps(this.props,$);return Et!==void 0&&!isMotionValue(Et)?Et:this.initialValues[$]!==void 0&&bt===void 0?void 0:this.baseTarget[$]}on($,ht){return this.events[$]||(this.events[$]=new SubscriptionManager),this.events[$].add(ht)}notify($,...ht){this.events[$]&&this.events[$].notify(...ht)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition($,ht){return $.compareDocumentPosition(ht)&2?1:-1}getBaseTargetFromProps($,ht){return $.style?$.style[ht]:void 0}removeValueFromRenderState($,{vars:ht,style:vt}){delete ht[$],delete vt[$]}}function getComputedStyle$1(_e){return window.getComputedStyle(_e)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html"}readValueFromInstance($,ht){if(transformProps.has(ht)){const vt=getDefaultValueType(ht);return vt&&vt.default||0}else{const vt=getComputedStyle$1($),bt=(isCSSVariableName(ht)?vt.getPropertyValue(ht):vt[ht])||0;return typeof bt=="string"?bt.trim():bt}}measureInstanceViewportBox($,{transformPagePoint:ht}){return measureViewportBox($,ht)}build($,ht,vt,bt){buildHTMLStyles($,ht,vt,bt.transformTemplate)}scrapeMotionValuesFromProps($,ht,vt){return scrapeMotionValuesFromProps$1($,ht,vt)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:$}=this.props;isMotionValue($)&&(this.childSubscription=$.on("change",ht=>{this.current&&(this.current.textContent=`${ht}`)}))}renderInstance($,ht,vt,bt){renderHTML($,ht,vt,bt)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps($,ht){return $[ht]}readValueFromInstance($,ht){if(transformProps.has(ht)){const vt=getDefaultValueType(ht);return vt&&vt.default||0}return ht=camelCaseAttributes.has(ht)?ht:camelToDash(ht),$.getAttribute(ht)}measureInstanceViewportBox(){return createBox()}scrapeMotionValuesFromProps($,ht,vt){return scrapeMotionValuesFromProps($,ht,vt)}build($,ht,vt,bt){buildSVGAttrs($,ht,vt,this.isSVGTag,bt.transformTemplate)}renderInstance($,ht,vt,bt){renderSVG($,ht,vt,bt)}mount($){this.isSVGTag=isSVGTag($.tagName),super.mount($)}}const createDomVisualElement=(_e,$)=>isSVGComponent(_e)?new SVGVisualElement($,{enableHardwareAcceleration:!1}):new HTMLVisualElement($,{allowProjection:_e!==reactExports.Fragment,enableHardwareAcceleration:!0}),layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},preloadedFeatures={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy((_e,$)=>createDomMotionConfig(_e,$,preloadedFeatures,createDomVisualElement));function useIsMounted(){const _e=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>(_e.current=!0,()=>{_e.current=!1}),[]),_e}function useForceUpdate(){const _e=useIsMounted(),[$,ht]=reactExports.useState(0),vt=reactExports.useCallback(()=>{_e.current&&ht($+1)},[$]);return[reactExports.useCallback(()=>frame.postRender(vt),[vt]),$]}class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate($){const ht=this.props.childRef.current;if(ht&&$.isPresent&&!this.props.isPresent){const vt=this.props.sizeRef.current;vt.height=ht.offsetHeight||0,vt.width=ht.offsetWidth||0,vt.top=ht.offsetTop,vt.left=ht.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:_e,isPresent:$}){const ht=reactExports.useId(),vt=reactExports.useRef(null),bt=reactExports.useRef({width:0,height:0,top:0,left:0}),{nonce:Et}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:At,height:_t,top:wt,left:Ct}=bt.current;if($||!vt.current||!At||!_t)return;vt.current.dataset.motionPopId=ht;const xt=document.createElement("style");return Et&&(xt.nonce=Et),document.head.appendChild(xt),xt.sheet&&xt.sheet.insertRule(`
          [data-motion-pop-id="${ht}"] {
            position: absolute !important;
            width: ${At}px !important;
            height: ${_t}px !important;
            top: ${wt}px !important;
            left: ${Ct}px !important;
          }
        `),()=>{document.head.removeChild(xt)}},[$]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:$,childRef:vt,sizeRef:bt,children:reactExports.cloneElement(_e,{ref:vt})})}const PresenceChild=({children:_e,initial:$,isPresent:ht,onExitComplete:vt,custom:bt,presenceAffectsLayout:Et,mode:At})=>{const _t=useConstant(newChildrenMap),wt=reactExports.useId(),Ct=reactExports.useMemo(()=>({id:wt,initial:$,isPresent:ht,custom:bt,onExitComplete:xt=>{_t.set(xt,!0);for(const Pt of _t.values())if(!Pt)return;vt&&vt()},register:xt=>(_t.set(xt,!1),()=>_t.delete(xt))}),Et?[Math.random()]:[ht]);return reactExports.useMemo(()=>{_t.forEach((xt,Pt)=>_t.set(Pt,!1))},[ht]),reactExports.useEffect(()=>{!ht&&!_t.size&&vt&&vt()},[ht]),At==="popLayout"&&(_e=jsxRuntimeExports.jsx(PopChild,{isPresent:ht,children:_e})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:Ct,children:_e})};function newChildrenMap(){return new Map}function useUnmountEffect(_e){return reactExports.useEffect(()=>()=>_e(),[])}const getChildKey=_e=>_e.key||"";function updateChildLookup(_e,$){_e.forEach(ht=>{const vt=getChildKey(ht);$.set(vt,ht)})}function onlyElements(_e){const $=[];return reactExports.Children.forEach(_e,ht=>{reactExports.isValidElement(ht)&&$.push(ht)}),$}const AnimatePresence=({children:_e,custom:$,initial:ht=!0,onExitComplete:vt,exitBeforeEnter:bt,presenceAffectsLayout:Et=!0,mode:At="sync"})=>{const _t=reactExports.useContext(LayoutGroupContext).forceRender||useForceUpdate()[0],wt=useIsMounted(),Ct=onlyElements(_e);let xt=Ct;const Pt=reactExports.useRef(new Map).current,Rt=reactExports.useRef(xt),kt=reactExports.useRef(new Map).current,Mt=reactExports.useRef(!0);if(useIsomorphicLayoutEffect(()=>{Mt.current=!1,updateChildLookup(Ct,kt),Rt.current=xt}),useUnmountEffect(()=>{Mt.current=!0,kt.clear(),Pt.clear()}),Mt.current)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:xt.map(Dt=>jsxRuntimeExports.jsx(PresenceChild,{isPresent:!0,initial:ht?void 0:!1,presenceAffectsLayout:Et,mode:At,children:Dt},getChildKey(Dt)))});xt=[...xt];const Lt=Rt.current.map(getChildKey),Ot=Ct.map(getChildKey),Ft=Lt.length;for(let Dt=0;Dt<Ft;Dt++){const $t=Lt[Dt];Ot.indexOf($t)===-1&&!Pt.has($t)&&Pt.set($t,void 0)}return At==="wait"&&Pt.size&&(xt=[]),Pt.forEach((Dt,$t)=>{if(Ot.indexOf($t)!==-1)return;const Bt=kt.get($t);if(!Bt)return;const Nt=Lt.indexOf($t);let Ht=Dt;if(!Ht){const Vt=()=>{Pt.delete($t);const jt=Array.from(kt.keys()).filter(Xt=>!Ot.includes(Xt));if(jt.forEach(Xt=>kt.delete(Xt)),Rt.current=Ct.filter(Xt=>{const Jt=getChildKey(Xt);return Jt===$t||jt.includes(Jt)}),!Pt.size){if(wt.current===!1)return;_t(),vt&&vt()}};Ht=jsxRuntimeExports.jsx(PresenceChild,{isPresent:!1,onExitComplete:Vt,custom:$,presenceAffectsLayout:Et,mode:At,children:Bt},getChildKey(Bt)),Pt.set($t,Ht)}xt.splice(Nt,0,Ht)}),xt=xt.map(Dt=>{const $t=Dt.key;return Pt.has($t)?Dt:jsxRuntimeExports.jsx(PresenceChild,{isPresent:!0,presenceAffectsLayout:Et,mode:At,children:Dt},getChildKey(Dt))}),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Pt.size?xt:xt.map(Dt=>reactExports.cloneElement(Dt))})},scriptRel="modulepreload",assetsURL=function(_e){return"/"+_e},seen={},__vitePreload=function($,ht,vt){let bt=Promise.resolve();if(ht&&ht.length>0){document.getElementsByTagName("link");const Et=document.querySelector("meta[property=csp-nonce]"),At=(Et==null?void 0:Et.nonce)||(Et==null?void 0:Et.getAttribute("nonce"));bt=Promise.all(ht.map(_t=>{if(_t=assetsURL(_t),_t in seen)return;seen[_t]=!0;const wt=_t.endsWith(".css"),Ct=wt?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_t}"]${Ct}`))return;const xt=document.createElement("link");if(xt.rel=wt?"stylesheet":scriptRel,wt||(xt.as="script",xt.crossOrigin=""),xt.href=_t,At&&xt.setAttribute("nonce",At),document.head.appendChild(xt),wt)return new Promise((Pt,Rt)=>{xt.addEventListener("load",Pt),xt.addEventListener("error",()=>Rt(new Error(`Unable to preload CSS for ${_t}`)))})}))}return bt.then(()=>$()).catch(Et=>{const At=new Event("vite:preloadError",{cancelable:!0});if(At.payload=Et,window.dispatchEvent(At),!At.defaultPrevented)throw Et})};var __webpack_require__={};__webpack_require__.d=(_e,$)=>{for(var ht in $)__webpack_require__.o($,ht)&&!__webpack_require__.o(_e,ht)&&Object.defineProperty(_e,ht,{enumerable:!0,get:$[ht]})};__webpack_require__.o=(_e,$)=>Object.prototype.hasOwnProperty.call(_e,$);var __webpack_exports__=globalThis.pdfjsLib={};__webpack_require__.d(__webpack_exports__,{AbortException:()=>AbortException,AnnotationEditorLayer:()=>AnnotationEditorLayer,AnnotationEditorParamsType:()=>AnnotationEditorParamsType,AnnotationEditorType:()=>AnnotationEditorType,AnnotationEditorUIManager:()=>AnnotationEditorUIManager,AnnotationLayer:()=>AnnotationLayer,AnnotationMode:()=>AnnotationMode,CMapCompressionType:()=>CMapCompressionType,ColorPicker:()=>ColorPicker,DOMSVGFactory:()=>DOMSVGFactory,DrawLayer:()=>DrawLayer,FeatureTest:()=>util_FeatureTest,GlobalWorkerOptions:()=>GlobalWorkerOptions,ImageKind:()=>util_ImageKind,InvalidPDFException:()=>InvalidPDFException,MissingPDFException:()=>MissingPDFException,OPS:()=>OPS,Outliner:()=>Outliner,PDFDataRangeTransport:()=>PDFDataRangeTransport,PDFDateString:()=>PDFDateString,PDFWorker:()=>PDFWorker,PasswordResponses:()=>PasswordResponses,PermissionFlag:()=>PermissionFlag,PixelsPerInch:()=>PixelsPerInch,RenderingCancelledException:()=>RenderingCancelledException,TextLayer:()=>TextLayer,UnexpectedResponseException:()=>UnexpectedResponseException,Util:()=>Util,VerbosityLevel:()=>VerbosityLevel,XfaLayer:()=>XfaLayer,build:()=>build,createValidAbsoluteUrl:()=>createValidAbsoluteUrl,fetchData:()=>fetchData,getDocument:()=>getDocument,getFilenameFromUrl:()=>getFilenameFromUrl,getPdfFilenameFromUrl:()=>getPdfFilenameFromUrl,getXfaPageViewport:()=>getXfaPageViewport,isDataScheme:()=>isDataScheme,isPdfFile:()=>isPdfFile,noContextMenu:()=>noContextMenu,normalizeUnicode:()=>normalizeUnicode,renderTextLayer:()=>renderTextLayer,setLayerDimensions:()=>setLayerDimensions,shadow:()=>shadow,updateTextLayer:()=>updateTextLayer,version:()=>version});const isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),IDENTITY_MATRIX=[1,0,0,1,0,0],FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],MAX_IMAGE_SIZE_TO_CACHE=1e7,LINE_FACTOR=1.35,RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AnnotationEditorPrefix="pdfjs_internal_editor_",AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5},CMapCompressionType={NONE:0,BINARY:1},OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(_e){Number.isInteger(_e)&&(verbosity=_e)}function getVerbosityLevel(){return verbosity}function info(_e){verbosity>=VerbosityLevel.INFOS&&console.log(`Info: ${_e}`)}function warn(_e){verbosity>=VerbosityLevel.WARNINGS&&console.log(`Warning: ${_e}`)}function unreachable(_e){throw new Error(_e)}function assert(_e,$){_e||unreachable($)}function _isValidProtocol(_e){switch(_e==null?void 0:_e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function createValidAbsoluteUrl(_e,$=null,ht=null){if(!_e)return null;try{if(ht&&typeof _e=="string"){if(ht.addDefaultProtocol&&_e.startsWith("www.")){const bt=_e.match(/\./g);(bt==null?void 0:bt.length)>=2&&(_e=`http://${_e}`)}if(ht.tryConvertEncoding)try{_e=stringToUTF8String(_e)}catch{}}const vt=$?new URL(_e,$):new URL(_e);if(_isValidProtocol(vt))return vt}catch{}return null}function shadow(_e,$,ht,vt=!1){return Object.defineProperty(_e,$,{value:ht,enumerable:!vt,configurable:!0,writable:!1}),ht}const BaseException=function(){function $(ht,vt){this.constructor===$&&unreachable("Cannot initialize BaseException."),this.message=ht,this.name=vt}return $.prototype=new Error,$.constructor=$,$}();class PasswordException extends BaseException{constructor($,ht){super($,"PasswordException"),this.code=ht}}class UnknownErrorException extends BaseException{constructor($,ht){super($,"UnknownErrorException"),this.details=ht}}class InvalidPDFException extends BaseException{constructor($){super($,"InvalidPDFException")}}class MissingPDFException extends BaseException{constructor($){super($,"MissingPDFException")}}class UnexpectedResponseException extends BaseException{constructor($,ht){super($,"UnexpectedResponseException"),this.status=ht}}class FormatError extends BaseException{constructor($){super($,"FormatError")}}class AbortException extends BaseException{constructor($){super($,"AbortException")}}function bytesToString(_e){(typeof _e!="object"||(_e==null?void 0:_e.length)===void 0)&&unreachable("Invalid argument for bytesToString");const $=_e.length,ht=8192;if($<ht)return String.fromCharCode.apply(null,_e);const vt=[];for(let bt=0;bt<$;bt+=ht){const Et=Math.min(bt+ht,$),At=_e.subarray(bt,Et);vt.push(String.fromCharCode.apply(null,At))}return vt.join("")}function stringToBytes(_e){typeof _e!="string"&&unreachable("Invalid argument for stringToBytes");const $=_e.length,ht=new Uint8Array($);for(let vt=0;vt<$;++vt)ht[vt]=_e.charCodeAt(vt)&255;return ht}function string32(_e){return String.fromCharCode(_e>>24&255,_e>>16&255,_e>>8&255,_e&255)}function objectFromMap(_e){const $=Object.create(null);for(const[ht,vt]of _e)$[ht]=vt;return $}function isLittleEndian(){const _e=new Uint8Array(4);return _e[0]=1,new Uint32Array(_e.buffer,0,1)[0]===1}function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}class util_FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?shadow(this,"platform",{isMac:navigator.platform.includes("Mac")}):shadow(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var $,ht;return shadow(this,"isCSSRoundSupported",(ht=($=globalThis.CSS)==null?void 0:$.supports)==null?void 0:ht.call($,"width: round(1.5px, 1px)"))}}const hexNumbers=Array.from(Array(256).keys(),_e=>_e.toString(16).padStart(2,"0"));var du,u0,xE;class Util{static makeHexColor($,ht,vt){return`#${hexNumbers[$]}${hexNumbers[ht]}${hexNumbers[vt]}`}static scaleMinMax($,ht){let vt;$[0]?($[0]<0&&(vt=ht[0],ht[0]=ht[2],ht[2]=vt),ht[0]*=$[0],ht[2]*=$[0],$[3]<0&&(vt=ht[1],ht[1]=ht[3],ht[3]=vt),ht[1]*=$[3],ht[3]*=$[3]):(vt=ht[0],ht[0]=ht[1],ht[1]=vt,vt=ht[2],ht[2]=ht[3],ht[3]=vt,$[1]<0&&(vt=ht[1],ht[1]=ht[3],ht[3]=vt),ht[1]*=$[1],ht[3]*=$[1],$[2]<0&&(vt=ht[0],ht[0]=ht[2],ht[2]=vt),ht[0]*=$[2],ht[2]*=$[2]),ht[0]+=$[4],ht[1]+=$[5],ht[2]+=$[4],ht[3]+=$[5]}static transform($,ht){return[$[0]*ht[0]+$[2]*ht[1],$[1]*ht[0]+$[3]*ht[1],$[0]*ht[2]+$[2]*ht[3],$[1]*ht[2]+$[3]*ht[3],$[0]*ht[4]+$[2]*ht[5]+$[4],$[1]*ht[4]+$[3]*ht[5]+$[5]]}static applyTransform($,ht){const vt=$[0]*ht[0]+$[1]*ht[2]+ht[4],bt=$[0]*ht[1]+$[1]*ht[3]+ht[5];return[vt,bt]}static applyInverseTransform($,ht){const vt=ht[0]*ht[3]-ht[1]*ht[2],bt=($[0]*ht[3]-$[1]*ht[2]+ht[2]*ht[5]-ht[4]*ht[3])/vt,Et=(-$[0]*ht[1]+$[1]*ht[0]+ht[4]*ht[1]-ht[5]*ht[0])/vt;return[bt,Et]}static getAxialAlignedBoundingBox($,ht){const vt=this.applyTransform($,ht),bt=this.applyTransform($.slice(2,4),ht),Et=this.applyTransform([$[0],$[3]],ht),At=this.applyTransform([$[2],$[1]],ht);return[Math.min(vt[0],bt[0],Et[0],At[0]),Math.min(vt[1],bt[1],Et[1],At[1]),Math.max(vt[0],bt[0],Et[0],At[0]),Math.max(vt[1],bt[1],Et[1],At[1])]}static inverseTransform($){const ht=$[0]*$[3]-$[1]*$[2];return[$[3]/ht,-$[1]/ht,-$[2]/ht,$[0]/ht,($[2]*$[5]-$[4]*$[3])/ht,($[4]*$[1]-$[5]*$[0])/ht]}static singularValueDecompose2dScale($){const ht=[$[0],$[2],$[1],$[3]],vt=$[0]*ht[0]+$[1]*ht[2],bt=$[0]*ht[1]+$[1]*ht[3],Et=$[2]*ht[0]+$[3]*ht[2],At=$[2]*ht[1]+$[3]*ht[3],_t=(vt+At)/2,wt=Math.sqrt((vt+At)**2-4*(vt*At-Et*bt))/2,Ct=_t+wt||1,xt=_t-wt||1;return[Math.sqrt(Ct),Math.sqrt(xt)]}static normalizeRect($){const ht=$.slice(0);return $[0]>$[2]&&(ht[0]=$[2],ht[2]=$[0]),$[1]>$[3]&&(ht[1]=$[3],ht[3]=$[1]),ht}static intersect($,ht){const vt=Math.max(Math.min($[0],$[2]),Math.min(ht[0],ht[2])),bt=Math.min(Math.max($[0],$[2]),Math.max(ht[0],ht[2]));if(vt>bt)return null;const Et=Math.max(Math.min($[1],$[3]),Math.min(ht[1],ht[3])),At=Math.min(Math.max($[1],$[3]),Math.max(ht[1],ht[3]));return Et>At?null:[vt,Et,bt,At]}static bezierBoundingBox($,ht,vt,bt,Et,At,_t,wt,Ct){return Ct?(Ct[0]=Math.min(Ct[0],$,_t),Ct[1]=Math.min(Ct[1],ht,wt),Ct[2]=Math.max(Ct[2],$,_t),Ct[3]=Math.max(Ct[3],ht,wt)):Ct=[Math.min($,_t),Math.min(ht,wt),Math.max($,_t),Math.max(ht,wt)],Ut(this,du,xE).call(this,$,vt,Et,_t,ht,bt,At,wt,3*(-$+3*(vt-Et)+_t),6*($-2*vt+Et),3*(vt-$),Ct),Ut(this,du,xE).call(this,$,vt,Et,_t,ht,bt,At,wt,3*(-ht+3*(bt-At)+wt),6*(ht-2*bt+At),3*(bt-ht),Ct),Ct}}du=new WeakSet,u0=function($,ht,vt,bt,Et,At,_t,wt,Ct,xt){if(Ct<=0||Ct>=1)return;const Pt=1-Ct,Rt=Ct*Ct,kt=Rt*Ct,Mt=Pt*(Pt*(Pt*$+3*Ct*ht)+3*Rt*vt)+kt*bt,Lt=Pt*(Pt*(Pt*Et+3*Ct*At)+3*Rt*_t)+kt*wt;xt[0]=Math.min(xt[0],Mt),xt[1]=Math.min(xt[1],Lt),xt[2]=Math.max(xt[2],Mt),xt[3]=Math.max(xt[3],Lt)},xE=function($,ht,vt,bt,Et,At,_t,wt,Ct,xt,Pt,Rt){if(Math.abs(Ct)<1e-12){Math.abs(xt)>=1e-12&&Ut(this,du,u0).call(this,$,ht,vt,bt,Et,At,_t,wt,-Pt/xt,Rt);return}const kt=xt**2-4*Pt*Ct;if(kt<0)return;const Mt=Math.sqrt(kt),Lt=2*Ct;Ut(this,du,u0).call(this,$,ht,vt,bt,Et,At,_t,wt,(-xt+Mt)/Lt,Rt),Ut(this,du,u0).call(this,$,ht,vt,bt,Et,At,_t,wt,(-xt-Mt)/Lt,Rt)},Kt(Util,du);function stringToUTF8String(_e){return decodeURIComponent(escape(_e))}let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(_e){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["ﬅ","ſt"]])),_e.replaceAll(NormalizeRegex,($,ht,vt)=>ht?ht.normalize("NFKC"):NormalizationMap.get(vt))}function getUuid(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const _e=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(_e);else for(let $=0;$<32;$++)_e[$]=Math.floor(Math.random()*255);return bytesToString(_e)}const AnnotationPrefix="pdfjs_internal_id_",FontRenderOps={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class BaseFilterFactory{constructor(){this.constructor===BaseFilterFactory&&unreachable("Cannot initialize BaseFilterFactory.")}addFilter($){return"none"}addHCMFilter($,ht){return"none"}addAlphaFilter($){return"none"}addLuminosityFilter($){return"none"}addHighlightHCMFilter($,ht,vt,bt,Et){return"none"}destroy($=!1){}}class BaseCanvasFactory{constructor(){this.constructor===BaseCanvasFactory&&unreachable("Cannot initialize BaseCanvasFactory.")}create($,ht){if($<=0||ht<=0)throw new Error("Invalid canvas size");const vt=this._createCanvas($,ht);return{canvas:vt,context:vt.getContext("2d")}}reset($,ht,vt){if(!$.canvas)throw new Error("Canvas is not specified");if(ht<=0||vt<=0)throw new Error("Invalid canvas size");$.canvas.width=ht,$.canvas.height=vt}destroy($){if(!$.canvas)throw new Error("Canvas is not specified");$.canvas.width=0,$.canvas.height=0,$.canvas=null,$.context=null}_createCanvas($,ht){unreachable("Abstract method `_createCanvas` called.")}}class BaseCMapReaderFactory{constructor({baseUrl:$=null,isCompressed:ht=!0}){this.constructor===BaseCMapReaderFactory&&unreachable("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=$,this.isCompressed=ht}async fetch({name:$}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!$)throw new Error("CMap name must be specified.");const ht=this.baseUrl+$+(this.isCompressed?".bcmap":""),vt=this.isCompressed?CMapCompressionType.BINARY:CMapCompressionType.NONE;return this._fetchData(ht,vt).catch(bt=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${ht}`)})}_fetchData($,ht){unreachable("Abstract method `_fetchData` called.")}}class BaseStandardFontDataFactory{constructor({baseUrl:$=null}){this.constructor===BaseStandardFontDataFactory&&unreachable("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=$}async fetch({filename:$}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!$)throw new Error("Font filename must be specified.");const ht=`${this.baseUrl}${$}`;return this._fetchData(ht).catch(vt=>{throw new Error(`Unable to load font data at: ${ht}`)})}_fetchData($){unreachable("Abstract method `_fetchData` called.")}}class BaseSVGFactory{constructor(){this.constructor===BaseSVGFactory&&unreachable("Cannot initialize BaseSVGFactory.")}create($,ht,vt=!1){if($<=0||ht<=0)throw new Error("Invalid SVG dimensions");const bt=this._createSVG("svg:svg");return bt.setAttribute("version","1.1"),vt||(bt.setAttribute("width",`${$}px`),bt.setAttribute("height",`${ht}px`)),bt.setAttribute("preserveAspectRatio","none"),bt.setAttribute("viewBox",`0 0 ${$} ${ht}`),bt}createElement($){if(typeof $!="string")throw new Error("Invalid SVG element type");return this._createSVG($)}_createSVG($){unreachable("Abstract method `_createSVG` called.")}}const SVG_NS="http://www.w3.org/2000/svg",Qu=class Qu{};Sr(Qu,"CSS",96),Sr(Qu,"PDF",72),Sr(Qu,"PDF_TO_CSS_UNITS",Qu.CSS/Qu.PDF);let PixelsPerInch=Qu;var Ju,_a,Vl,bo,X0,_d,Fr,co,Yp,Qp,d0,x_,CE,Zp,nv,iv,TE,rv;class DOMFilterFactory extends BaseFilterFactory{constructor({docId:ht,ownerDocument:vt=globalThis.document}={}){super();Kt(this,Fr);Kt(this,Ju);Kt(this,_a);Kt(this,Vl);Kt(this,bo);Kt(this,X0);Kt(this,_d,0);zt(this,Vl,ht),zt(this,bo,vt)}addFilter(ht){if(!ht)return"none";let vt=St(this,Fr,co).get(ht);if(vt)return vt;const[bt,Et,At]=Ut(this,Fr,d0).call(this,ht),_t=ht.length===1?bt:`${bt}${Et}${At}`;if(vt=St(this,Fr,co).get(_t),vt)return St(this,Fr,co).set(ht,vt),vt;const wt=`g_${St(this,Vl)}_transfer_map_${eo(this,_d)._++}`,Ct=`url(#${wt})`;St(this,Fr,co).set(ht,Ct),St(this,Fr,co).set(_t,Ct);const xt=Ut(this,Fr,Zp).call(this,wt);return Ut(this,Fr,iv).call(this,bt,Et,At,xt),Ct}addHCMFilter(ht,vt){var Mt;const bt=`${ht}-${vt}`,Et="base";let At=St(this,Fr,Yp).get(Et);if((At==null?void 0:At.key)===bt||(At?((Mt=At.filter)==null||Mt.remove(),At.key=bt,At.url="none",At.filter=null):(At={key:bt,url:"none",filter:null},St(this,Fr,Yp).set(Et,At)),!ht||!vt))return At.url;const _t=Ut(this,Fr,rv).call(this,ht);ht=Util.makeHexColor(..._t);const wt=Ut(this,Fr,rv).call(this,vt);if(vt=Util.makeHexColor(...wt),St(this,Fr,Qp).style.color="",ht==="#000000"&&vt==="#ffffff"||ht===vt)return At.url;const Ct=new Array(256);for(let Lt=0;Lt<=255;Lt++){const Ot=Lt/255;Ct[Lt]=Ot<=.03928?Ot/12.92:((Ot+.055)/1.055)**2.4}const xt=Ct.join(","),Pt=`g_${St(this,Vl)}_hcm_filter`,Rt=At.filter=Ut(this,Fr,Zp).call(this,Pt);Ut(this,Fr,iv).call(this,xt,xt,xt,Rt),Ut(this,Fr,CE).call(this,Rt);const kt=(Lt,Ot)=>{const Ft=_t[Lt]/255,Dt=wt[Lt]/255,$t=new Array(Ot+1);for(let Bt=0;Bt<=Ot;Bt++)$t[Bt]=Ft+Bt/Ot*(Dt-Ft);return $t.join(",")};return Ut(this,Fr,iv).call(this,kt(0,5),kt(1,5),kt(2,5),Rt),At.url=`url(#${Pt})`,At.url}addAlphaFilter(ht){let vt=St(this,Fr,co).get(ht);if(vt)return vt;const[bt]=Ut(this,Fr,d0).call(this,[ht]),Et=`alpha_${bt}`;if(vt=St(this,Fr,co).get(Et),vt)return St(this,Fr,co).set(ht,vt),vt;const At=`g_${St(this,Vl)}_alpha_map_${eo(this,_d)._++}`,_t=`url(#${At})`;St(this,Fr,co).set(ht,_t),St(this,Fr,co).set(Et,_t);const wt=Ut(this,Fr,Zp).call(this,At);return Ut(this,Fr,TE).call(this,bt,wt),_t}addLuminosityFilter(ht){let vt=St(this,Fr,co).get(ht||"luminosity");if(vt)return vt;let bt,Et;if(ht?([bt]=Ut(this,Fr,d0).call(this,[ht]),Et=`luminosity_${bt}`):Et="luminosity",vt=St(this,Fr,co).get(Et),vt)return St(this,Fr,co).set(ht,vt),vt;const At=`g_${St(this,Vl)}_luminosity_map_${eo(this,_d)._++}`,_t=`url(#${At})`;St(this,Fr,co).set(ht,_t),St(this,Fr,co).set(Et,_t);const wt=Ut(this,Fr,Zp).call(this,At);return Ut(this,Fr,x_).call(this,wt),ht&&Ut(this,Fr,TE).call(this,bt,wt),_t}addHighlightHCMFilter(ht,vt,bt,Et,At){var Dt;const _t=`${vt}-${bt}-${Et}-${At}`;let wt=St(this,Fr,Yp).get(ht);if((wt==null?void 0:wt.key)===_t||(wt?((Dt=wt.filter)==null||Dt.remove(),wt.key=_t,wt.url="none",wt.filter=null):(wt={key:_t,url:"none",filter:null},St(this,Fr,Yp).set(ht,wt)),!vt||!bt))return wt.url;const[Ct,xt]=[vt,bt].map(Ut(this,Fr,rv).bind(this));let Pt=Math.round(.2126*Ct[0]+.7152*Ct[1]+.0722*Ct[2]),Rt=Math.round(.2126*xt[0]+.7152*xt[1]+.0722*xt[2]),[kt,Mt]=[Et,At].map(Ut(this,Fr,rv).bind(this));Rt<Pt&&([Pt,Rt,kt,Mt]=[Rt,Pt,Mt,kt]),St(this,Fr,Qp).style.color="";const Lt=($t,Bt,Nt)=>{const Ht=new Array(256),Vt=(Rt-Pt)/Nt,jt=$t/255,Xt=(Bt-$t)/(255*Nt);let Jt=0;for(let Gt=0;Gt<=Nt;Gt++){const en=Math.round(Pt+Gt*Vt),on=jt+Gt*Xt;for(let _n=Jt;_n<=en;_n++)Ht[_n]=on;Jt=en+1}for(let Gt=Jt;Gt<256;Gt++)Ht[Gt]=Ht[Jt-1];return Ht.join(",")},Ot=`g_${St(this,Vl)}_hcm_${ht}_filter`,Ft=wt.filter=Ut(this,Fr,Zp).call(this,Ot);return Ut(this,Fr,CE).call(this,Ft),Ut(this,Fr,iv).call(this,Lt(kt[0],Mt[0],5),Lt(kt[1],Mt[1],5),Lt(kt[2],Mt[2],5),Ft),wt.url=`url(#${Ot})`,wt.url}destroy(ht=!1){ht&&St(this,Fr,Yp).size!==0||(St(this,_a)&&(St(this,_a).parentNode.parentNode.remove(),zt(this,_a,null)),St(this,Ju)&&(St(this,Ju).clear(),zt(this,Ju,null)),zt(this,_d,0))}}Ju=new WeakMap,_a=new WeakMap,Vl=new WeakMap,bo=new WeakMap,X0=new WeakMap,_d=new WeakMap,Fr=new WeakSet,co=function(){return St(this,Ju)||zt(this,Ju,new Map)},Yp=function(){return St(this,X0)||zt(this,X0,new Map)},Qp=function(){if(!St(this,_a)){const ht=St(this,bo).createElement("div"),{style:vt}=ht;vt.visibility="hidden",vt.contain="strict",vt.width=vt.height=0,vt.position="absolute",vt.top=vt.left=0,vt.zIndex=-1;const bt=St(this,bo).createElementNS(SVG_NS,"svg");bt.setAttribute("width",0),bt.setAttribute("height",0),zt(this,_a,St(this,bo).createElementNS(SVG_NS,"defs")),ht.append(bt),bt.append(St(this,_a)),St(this,bo).body.append(ht)}return St(this,_a)},d0=function(ht){if(ht.length===1){const Ct=ht[0],xt=new Array(256);for(let Rt=0;Rt<256;Rt++)xt[Rt]=Ct[Rt]/255;const Pt=xt.join(",");return[Pt,Pt,Pt]}const[vt,bt,Et]=ht,At=new Array(256),_t=new Array(256),wt=new Array(256);for(let Ct=0;Ct<256;Ct++)At[Ct]=vt[Ct]/255,_t[Ct]=bt[Ct]/255,wt[Ct]=Et[Ct]/255;return[At.join(","),_t.join(","),wt.join(",")]},x_=function(ht){const vt=St(this,bo).createElementNS(SVG_NS,"feColorMatrix");vt.setAttribute("type","matrix"),vt.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),ht.append(vt)},CE=function(ht){const vt=St(this,bo).createElementNS(SVG_NS,"feColorMatrix");vt.setAttribute("type","matrix"),vt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),ht.append(vt)},Zp=function(ht){const vt=St(this,bo).createElementNS(SVG_NS,"filter");return vt.setAttribute("color-interpolation-filters","sRGB"),vt.setAttribute("id",ht),St(this,Fr,Qp).append(vt),vt},nv=function(ht,vt,bt){const Et=St(this,bo).createElementNS(SVG_NS,vt);Et.setAttribute("type","discrete"),Et.setAttribute("tableValues",bt),ht.append(Et)},iv=function(ht,vt,bt,Et){const At=St(this,bo).createElementNS(SVG_NS,"feComponentTransfer");Et.append(At),Ut(this,Fr,nv).call(this,At,"feFuncR",ht),Ut(this,Fr,nv).call(this,At,"feFuncG",vt),Ut(this,Fr,nv).call(this,At,"feFuncB",bt)},TE=function(ht,vt){const bt=St(this,bo).createElementNS(SVG_NS,"feComponentTransfer");vt.append(bt),Ut(this,Fr,nv).call(this,bt,"feFuncA",ht)},rv=function(ht){return St(this,Fr,Qp).style.color=ht,getRGB(getComputedStyle(St(this,Fr,Qp)).getPropertyValue("color"))};class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:$=globalThis.document}={}){super(),this._document=$}_createCanvas($,ht){const vt=this._document.createElement("canvas");return vt.width=$,vt.height=ht,vt}}async function fetchData(_e,$="text"){if(isValidFetchUrl(_e,document.baseURI)){const ht=await fetch(_e);if(!ht.ok)throw new Error(ht.statusText);switch($){case"arraybuffer":return ht.arrayBuffer();case"blob":return ht.blob();case"json":return ht.json()}return ht.text()}return new Promise((ht,vt)=>{const bt=new XMLHttpRequest;bt.open("GET",_e,!0),bt.responseType=$,bt.onreadystatechange=()=>{if(bt.readyState===XMLHttpRequest.DONE){if(bt.status===200||bt.status===0){switch($){case"arraybuffer":case"blob":case"json":ht(bt.response);return}ht(bt.responseText);return}vt(new Error(bt.statusText))}},bt.send(null)})}class DOMCMapReaderFactory extends BaseCMapReaderFactory{_fetchData($,ht){return fetchData($,this.isCompressed?"arraybuffer":"text").then(vt=>({cMapData:vt instanceof ArrayBuffer?new Uint8Array(vt):stringToBytes(vt),compressionType:ht}))}}class DOMStandardFontDataFactory extends BaseStandardFontDataFactory{_fetchData($){return fetchData($,"arraybuffer").then(ht=>new Uint8Array(ht))}}class DOMSVGFactory extends BaseSVGFactory{_createSVG($){return document.createElementNS(SVG_NS,$)}}class PageViewport{constructor({viewBox:$,scale:ht,rotation:vt,offsetX:bt=0,offsetY:Et=0,dontFlip:At=!1}){this.viewBox=$,this.scale=ht,this.rotation=vt,this.offsetX=bt,this.offsetY=Et;const _t=($[2]+$[0])/2,wt=($[3]+$[1])/2;let Ct,xt,Pt,Rt;switch(vt%=360,vt<0&&(vt+=360),vt){case 180:Ct=-1,xt=0,Pt=0,Rt=1;break;case 90:Ct=0,xt=1,Pt=1,Rt=0;break;case 270:Ct=0,xt=-1,Pt=-1,Rt=0;break;case 0:Ct=1,xt=0,Pt=0,Rt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}At&&(Pt=-Pt,Rt=-Rt);let kt,Mt,Lt,Ot;Ct===0?(kt=Math.abs(wt-$[1])*ht+bt,Mt=Math.abs(_t-$[0])*ht+Et,Lt=($[3]-$[1])*ht,Ot=($[2]-$[0])*ht):(kt=Math.abs(_t-$[0])*ht+bt,Mt=Math.abs(wt-$[1])*ht+Et,Lt=($[2]-$[0])*ht,Ot=($[3]-$[1])*ht),this.transform=[Ct*ht,xt*ht,Pt*ht,Rt*ht,kt-Ct*ht*_t-Pt*ht*wt,Mt-xt*ht*_t-Rt*ht*wt],this.width=Lt,this.height=Ot}get rawDims(){const{viewBox:$}=this;return shadow(this,"rawDims",{pageWidth:$[2]-$[0],pageHeight:$[3]-$[1],pageX:$[0],pageY:$[1]})}clone({scale:$=this.scale,rotation:ht=this.rotation,offsetX:vt=this.offsetX,offsetY:bt=this.offsetY,dontFlip:Et=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),scale:$,rotation:ht,offsetX:vt,offsetY:bt,dontFlip:Et})}convertToViewportPoint($,ht){return Util.applyTransform([$,ht],this.transform)}convertToViewportRectangle($){const ht=Util.applyTransform([$[0],$[1]],this.transform),vt=Util.applyTransform([$[2],$[3]],this.transform);return[ht[0],ht[1],vt[0],vt[1]]}convertToPdfPoint($,ht){return Util.applyInverseTransform([$,ht],this.transform)}}class RenderingCancelledException extends BaseException{constructor($,ht=0){super($,"RenderingCancelledException"),this.extraDelay=ht}}function isDataScheme(_e){const $=_e.length;let ht=0;for(;ht<$&&_e[ht].trim()==="";)ht++;return _e.substring(ht,ht+5).toLowerCase()==="data:"}function isPdfFile(_e){return typeof _e=="string"&&/\.pdf$/i.test(_e)}function getFilenameFromUrl(_e){return[_e]=_e.split(/[#?]/,1),_e.substring(_e.lastIndexOf("/")+1)}function getPdfFilenameFromUrl(_e,$="document.pdf"){if(typeof _e!="string")return $;if(isDataScheme(_e))return warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),$;const ht=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,vt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,bt=ht.exec(_e);let Et=vt.exec(bt[1])||vt.exec(bt[2])||vt.exec(bt[3]);if(Et&&(Et=Et[0],Et.includes("%")))try{Et=vt.exec(decodeURIComponent(Et))[0]}catch{}return Et||$}class StatTimer{constructor(){Sr(this,"started",Object.create(null));Sr(this,"times",[])}time($){$ in this.started&&warn(`Timer is already running for ${$}`),this.started[$]=Date.now()}timeEnd($){$ in this.started||warn(`Timer has not been started for ${$}`),this.times.push({name:$,start:this.started[$],end:Date.now()}),delete this.started[$]}toString(){const $=[];let ht=0;for(const{name:vt}of this.times)ht=Math.max(vt.length,ht);for(const{name:vt,start:bt,end:Et}of this.times)$.push(`${vt.padEnd(ht)} ${Et-bt}ms
`);return $.join("")}}function isValidFetchUrl(_e,$){try{const{protocol:ht}=$?new URL(_e,$):new URL(_e);return ht==="http:"||ht==="https:"}catch{return!1}}function noContextMenu(_e){_e.preventDefault()}function deprecated(_e){console.log("Deprecated API usage: "+_e)}let pdfDateStringRegex;class PDFDateString{static toDateObject($){if(!$||typeof $!="string")return null;pdfDateStringRegex||(pdfDateStringRegex=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const ht=pdfDateStringRegex.exec($);if(!ht)return null;const vt=parseInt(ht[1],10);let bt=parseInt(ht[2],10);bt=bt>=1&&bt<=12?bt-1:0;let Et=parseInt(ht[3],10);Et=Et>=1&&Et<=31?Et:1;let At=parseInt(ht[4],10);At=At>=0&&At<=23?At:0;let _t=parseInt(ht[5],10);_t=_t>=0&&_t<=59?_t:0;let wt=parseInt(ht[6],10);wt=wt>=0&&wt<=59?wt:0;const Ct=ht[7]||"Z";let xt=parseInt(ht[8],10);xt=xt>=0&&xt<=23?xt:0;let Pt=parseInt(ht[9],10)||0;return Pt=Pt>=0&&Pt<=59?Pt:0,Ct==="-"?(At+=xt,_t+=Pt):Ct==="+"&&(At-=xt,_t-=Pt),new Date(Date.UTC(vt,bt,Et,At,_t,wt))}}function getXfaPageViewport(_e,{scale:$=1,rotation:ht=0}){const{width:vt,height:bt}=_e.attributes.style,Et=[0,0,parseInt(vt),parseInt(bt)];return new PageViewport({viewBox:Et,scale:$,rotation:ht})}function getRGB(_e){if(_e.startsWith("#")){const $=parseInt(_e.slice(1),16);return[($&16711680)>>16,($&65280)>>8,$&255]}return _e.startsWith("rgb(")?_e.slice(4,-1).split(",").map($=>parseInt($)):_e.startsWith("rgba(")?_e.slice(5,-1).split(",").map($=>parseInt($)).slice(0,3):(warn(`Not a valid color format: "${_e}"`),[0,0,0])}function getColorValues(_e){const $=document.createElement("span");$.style.visibility="hidden",document.body.append($);for(const ht of _e.keys()){$.style.color=ht;const vt=window.getComputedStyle($).color;_e.set(ht,getRGB(vt))}$.remove()}function getCurrentTransform(_e){const{a:$,b:ht,c:vt,d:bt,e:Et,f:At}=_e.getTransform();return[$,ht,vt,bt,Et,At]}function getCurrentTransformInverse(_e){const{a:$,b:ht,c:vt,d:bt,e:Et,f:At}=_e.getTransform().invertSelf();return[$,ht,vt,bt,Et,At]}function setLayerDimensions(_e,$,ht=!1,vt=!0){if($ instanceof PageViewport){const{pageWidth:bt,pageHeight:Et}=$.rawDims,{style:At}=_e,_t=util_FeatureTest.isCSSRoundSupported,wt=`var(--scale-factor) * ${bt}px`,Ct=`var(--scale-factor) * ${Et}px`,xt=_t?`round(${wt}, 1px)`:`calc(${wt})`,Pt=_t?`round(${Ct}, 1px)`:`calc(${Ct})`;!ht||$.rotation%180===0?(At.width=xt,At.height=Pt):(At.width=Pt,At.height=xt)}vt&&_e.setAttribute("data-main-rotation",$.rotation)}var _h,_f,xa,ep,q0,C_,go,T_,P_,h0,R_,PE;const Y0=class Y0{constructor($){Kt(this,go);Kt(this,_h,null);Kt(this,_f,null);Kt(this,xa);Kt(this,ep,null);zt(this,xa,$)}render(){const $=zt(this,_h,document.createElement("div"));$.className="editToolbar",$.setAttribute("role","toolbar"),$.addEventListener("contextmenu",noContextMenu),$.addEventListener("pointerdown",Ut(Y0,q0,C_));const ht=zt(this,ep,document.createElement("div"));ht.className="buttons",$.append(ht);const vt=St(this,xa).toolbarPosition;if(vt){const{style:bt}=$,Et=St(this,xa)._uiManager.direction==="ltr"?1-vt[0]:vt[0];bt.insetInlineEnd=`${100*Et}%`,bt.top=`calc(${100*vt[1]}% + var(--editor-toolbar-vert-offset))`}return Ut(this,go,R_).call(this),$}hide(){var $;St(this,_h).classList.add("hidden"),($=St(this,_f))==null||$.hideDropdown()}show(){St(this,_h).classList.remove("hidden")}addAltTextButton($){Ut(this,go,h0).call(this,$),St(this,ep).prepend($,St(this,go,PE))}addColorPicker($){zt(this,_f,$);const ht=$.renderButton();Ut(this,go,h0).call(this,ht),St(this,ep).prepend(ht,St(this,go,PE))}remove(){var $;St(this,_h).remove(),($=St(this,_f))==null||$.destroy(),zt(this,_f,null)}};_h=new WeakMap,_f=new WeakMap,xa=new WeakMap,ep=new WeakMap,q0=new WeakSet,C_=function($){$.stopPropagation()},go=new WeakSet,T_=function($){St(this,xa)._focusEventsAllowed=!1,$.preventDefault(),$.stopPropagation()},P_=function($){St(this,xa)._focusEventsAllowed=!0,$.preventDefault(),$.stopPropagation()},h0=function($){$.addEventListener("focusin",Ut(this,go,T_).bind(this),{capture:!0}),$.addEventListener("focusout",Ut(this,go,P_).bind(this),{capture:!0}),$.addEventListener("contextmenu",noContextMenu)},R_=function(){const $=document.createElement("button");$.className="delete",$.tabIndex=0,$.setAttribute("data-l10n-id",`pdfjs-editor-remove-${St(this,xa).editorType}-button`),Ut(this,go,h0).call(this,$),$.addEventListener("click",ht=>{St(this,xa)._uiManager.delete()}),St(this,ep).append($)},PE=function(){const $=document.createElement("div");return $.className="divider",$},Kt(Y0,q0);let EditorToolbar=Y0;var wv,tp,Sv,Uu,k_,M_,F_;class HighlightToolbar{constructor($){Kt(this,Uu);Kt(this,wv,null);Kt(this,tp,null);Kt(this,Sv);zt(this,Sv,$)}show($,ht,vt){const[bt,Et]=Ut(this,Uu,M_).call(this,ht,vt),{style:At}=St(this,tp)||zt(this,tp,Ut(this,Uu,k_).call(this));$.append(St(this,tp)),At.insetInlineEnd=`${100*bt}%`,At.top=`calc(${100*Et}% + var(--editor-toolbar-vert-offset))`}hide(){St(this,tp).remove()}}wv=new WeakMap,tp=new WeakMap,Sv=new WeakMap,Uu=new WeakSet,k_=function(){const $=zt(this,tp,document.createElement("div"));$.className="editToolbar",$.setAttribute("role","toolbar"),$.addEventListener("contextmenu",noContextMenu);const ht=zt(this,wv,document.createElement("div"));return ht.className="buttons",$.append(ht),Ut(this,Uu,F_).call(this),$},M_=function($,ht){let vt=0,bt=0;for(const Et of $){const At=Et.y+Et.height;if(At<vt)continue;const _t=Et.x+(ht?Et.width:0);if(At>vt){bt=_t,vt=At;continue}ht?_t>bt&&(bt=_t):_t<bt&&(bt=_t)}return[ht?1-bt:bt,vt]},F_=function(){const $=document.createElement("button");$.className="highlightButton",$.tabIndex=0,$.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const ht=document.createElement("span");$.append(ht),ht.className="visuallyHidden",ht.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),$.addEventListener("contextmenu",noContextMenu),$.addEventListener("click",()=>{St(this,Sv).highlightSelection("floating_button")}),St(this,wv).append($)};function bindEvents(_e,$,ht){for(const vt of ht)$.addEventListener(vt,_e[vt].bind(_e))}function opacityToHex(_e){return Math.round(Math.min(255,Math.max(1,255*_e))).toString(16).padStart(2,"0")}var Q0;class IdManager{constructor(){Kt(this,Q0,0)}get id(){return`${AnnotationEditorPrefix}${eo(this,Q0)._++}`}}Q0=new WeakMap;var xv,Z0,Lo,Cv,RE;const n_=class n_{constructor(){Kt(this,Cv);Kt(this,xv,getUuid());Kt(this,Z0,0);Kt(this,Lo,null)}static get _isSVGFittingCanvas(){const $='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',vt=new OffscreenCanvas(1,3).getContext("2d"),bt=new Image;bt.src=$;const Et=bt.decode().then(()=>(vt.drawImage(bt,0,0,1,1,0,0,1,3),new Uint32Array(vt.getImageData(0,0,1,1).data.buffer)[0]===0));return shadow(this,"_isSVGFittingCanvas",Et)}async getFromFile($){const{lastModified:ht,name:vt,size:bt,type:Et}=$;return Ut(this,Cv,RE).call(this,`${ht}_${vt}_${bt}_${Et}`,$)}async getFromUrl($){return Ut(this,Cv,RE).call(this,$,$)}async getFromId($){St(this,Lo)||zt(this,Lo,new Map);const ht=St(this,Lo).get($);return ht?ht.bitmap?(ht.refCounter+=1,ht):ht.file?this.getFromFile(ht.file):this.getFromUrl(ht.url):null}getSvgUrl($){const ht=St(this,Lo).get($);return ht!=null&&ht.isSvg?ht.svgUrl:null}deleteId($){St(this,Lo)||zt(this,Lo,new Map);const ht=St(this,Lo).get($);ht&&(ht.refCounter-=1,ht.refCounter===0&&(ht.bitmap=null))}isValidId($){return $.startsWith(`image_${St(this,xv)}_`)}};xv=new WeakMap,Z0=new WeakMap,Lo=new WeakMap,Cv=new WeakSet,RE=async function($,ht){St(this,Lo)||zt(this,Lo,new Map);let vt=St(this,Lo).get($);if(vt===null)return null;if(vt!=null&&vt.bitmap)return vt.refCounter+=1,vt;try{vt||(vt={bitmap:null,id:`image_${St(this,xv)}_${eo(this,Z0)._++}`,refCounter:0,isSvg:!1});let bt;if(typeof ht=="string"?(vt.url=ht,bt=await fetchData(ht,"blob")):bt=vt.file=ht,bt.type==="image/svg+xml"){const Et=n_._isSVGFittingCanvas,At=new FileReader,_t=new Image,wt=new Promise((Ct,xt)=>{_t.onload=()=>{vt.bitmap=_t,vt.isSvg=!0,Ct()},At.onload=async()=>{const Pt=vt.svgUrl=At.result;_t.src=await Et?`${Pt}#svgView(preserveAspectRatio(none))`:Pt},_t.onerror=At.onerror=xt});At.readAsDataURL(bt),await wt}else vt.bitmap=await createImageBitmap(bt);vt.refCounter=1}catch(bt){console.error(bt),vt=null}return St(this,Lo).set($,vt),vt&&St(this,Lo).set(vt.id,vt),vt};let ImageManager=n_;var Qs,_u,Tv,Zs;class CommandManager{constructor($=128){Kt(this,Qs,[]);Kt(this,_u,!1);Kt(this,Tv);Kt(this,Zs,-1);zt(this,Tv,$)}add({cmd:$,undo:ht,post:vt,mustExec:bt,type:Et=NaN,overwriteIfSameType:At=!1,keepUndo:_t=!1}){if(bt&&$(),St(this,_u))return;const wt={cmd:$,undo:ht,post:vt,type:Et};if(St(this,Zs)===-1){St(this,Qs).length>0&&(St(this,Qs).length=0),zt(this,Zs,0),St(this,Qs).push(wt);return}if(At&&St(this,Qs)[St(this,Zs)].type===Et){_t&&(wt.undo=St(this,Qs)[St(this,Zs)].undo),St(this,Qs)[St(this,Zs)]=wt;return}const Ct=St(this,Zs)+1;Ct===St(this,Tv)?St(this,Qs).splice(0,1):(zt(this,Zs,Ct),Ct<St(this,Qs).length&&St(this,Qs).splice(Ct)),St(this,Qs).push(wt)}undo(){if(St(this,Zs)===-1)return;zt(this,_u,!0);const{undo:$,post:ht}=St(this,Qs)[St(this,Zs)];$(),ht==null||ht(),zt(this,_u,!1),zt(this,Zs,St(this,Zs)-1)}redo(){if(St(this,Zs)<St(this,Qs).length-1){zt(this,Zs,St(this,Zs)+1),zt(this,_u,!0);const{cmd:$,post:ht}=St(this,Qs)[St(this,Zs)];$(),ht==null||ht(),zt(this,_u,!1)}}hasSomethingToUndo(){return St(this,Zs)!==-1}hasSomethingToRedo(){return St(this,Zs)<St(this,Qs).length-1}destroy(){zt(this,Qs,null)}}Qs=new WeakMap,_u=new WeakMap,Tv=new WeakMap,Zs=new WeakMap;var J0,L_;class KeyboardManager{constructor($){Kt(this,J0);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:ht}=util_FeatureTest.platform;for(const[vt,bt,Et={}]of $)for(const At of vt){const _t=At.startsWith("mac+");ht&&_t?(this.callbacks.set(At.slice(4),{callback:bt,options:Et}),this.allKeys.add(At.split("+").at(-1))):!ht&&!_t&&(this.callbacks.set(At,{callback:bt,options:Et}),this.allKeys.add(At.split("+").at(-1)))}}exec($,ht){if(!this.allKeys.has(ht.key))return;const vt=this.callbacks.get(Ut(this,J0,L_).call(this,ht));if(!vt)return;const{callback:bt,options:{bubbles:Et=!1,args:At=[],checker:_t=null}}=vt;_t&&!_t($,ht)||(bt.bind($,...At,ht)(),Et||(ht.stopPropagation(),ht.preventDefault()))}}J0=new WeakSet,L_=function($){$.altKey&&this.buffer.push("alt"),$.ctrlKey&&this.buffer.push("ctrl"),$.metaKey&&this.buffer.push("meta"),$.shiftKey&&this.buffer.push("shift"),this.buffer.push($.key);const ht=this.buffer.join("+");return this.buffer.length=0,ht};const _b=class _b{get _colors(){const $=new Map([["CanvasText",null],["Canvas",null]]);return getColorValues($),shadow(this,"_colors",$)}convert($){const ht=getRGB($);if(!window.matchMedia("(forced-colors: active)").matches)return ht;for(const[vt,bt]of this._colors)if(bt.every((Et,At)=>Et===ht[At]))return _b._colorsMapping.get(vt);return ht}getHexCode($){const ht=this._colors.get($);return ht?Util.makeHexColor(...ht):$}};Sr(_b,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ColorManager=_b;var xo,Ws,no,lm,Hl,cm,Uo,um,np,$a,Ul,ip,Pv,Rv,yl,dm,wu,El,eE,Su,kv,rp,Mv,hm,io,Es,zl,sp,Fv,Lv,Dv,Iv,Ov,$v,Nv,Bv,Vv,Hv,jv,Uv,zv,Wv,xu,Al,Wl,Gv,Ar,f0,D_,I_,p0,O_,$_,N_,kE,ME,FE,LE,DE,ho,Eu,B_,V_,IE,H_,sv,OE;const am=class am{constructor($,ht,vt,bt,Et,At,_t,wt,Ct){Kt(this,Ar);Kt(this,xo,null);Kt(this,Ws,new Map);Kt(this,no,new Map);Kt(this,lm,null);Kt(this,Hl,null);Kt(this,cm,null);Kt(this,Uo,new CommandManager);Kt(this,um,0);Kt(this,np,new Set);Kt(this,$a,null);Kt(this,Ul,null);Kt(this,ip,new Set);Kt(this,Pv,!1);Kt(this,Rv,null);Kt(this,yl,null);Kt(this,dm,null);Kt(this,wu,!1);Kt(this,El,null);Kt(this,eE,new IdManager);Kt(this,Su,!1);Kt(this,kv,!1);Kt(this,rp,null);Kt(this,Mv,null);Kt(this,hm,null);Kt(this,io,AnnotationEditorType.NONE);Kt(this,Es,new Set);Kt(this,zl,null);Kt(this,sp,null);Kt(this,Fv,null);Kt(this,Lv,this.blur.bind(this));Kt(this,Dv,this.focus.bind(this));Kt(this,Iv,this.copy.bind(this));Kt(this,Ov,this.cut.bind(this));Kt(this,$v,this.paste.bind(this));Kt(this,Nv,this.keydown.bind(this));Kt(this,Bv,this.keyup.bind(this));Kt(this,Vv,this.onEditingAction.bind(this));Kt(this,Hv,this.onPageChanging.bind(this));Kt(this,jv,this.onScaleChanging.bind(this));Kt(this,Uv,Ut(this,Ar,I_).bind(this));Kt(this,zv,this.onRotationChanging.bind(this));Kt(this,Wv,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});Kt(this,xu,[0,0]);Kt(this,Al,null);Kt(this,Wl,null);Kt(this,Gv,null);zt(this,Wl,$),zt(this,Gv,ht),zt(this,lm,vt),this._eventBus=bt,this._eventBus._on("editingaction",St(this,Vv)),this._eventBus._on("pagechanging",St(this,Hv)),this._eventBus._on("scalechanging",St(this,jv)),this._eventBus._on("rotationchanging",St(this,zv)),Ut(this,Ar,O_).call(this),Ut(this,Ar,ME).call(this),zt(this,Hl,Et.annotationStorage),zt(this,Rv,Et.filterFactory),zt(this,sp,At),zt(this,dm,_t||null),zt(this,Pv,wt),zt(this,hm,Ct||null),this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const $=am.prototype,ht=At=>St(At,Wl).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&At.hasSomethingToControl(),vt=(At,{target:_t})=>{if(_t instanceof HTMLInputElement){const{type:wt}=_t;return wt!=="text"&&wt!=="number"}return!0},bt=this.TRANSLATE_SMALL,Et=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],$.selectAll,{checker:vt}],[["ctrl+z","mac+meta+z"],$.undo,{checker:vt}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],$.redo,{checker:vt}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],$.delete,{checker:vt}],[["Enter","mac+Enter"],$.addNewEditorFromKeyboard,{checker:(At,{target:_t})=>!(_t instanceof HTMLButtonElement)&&St(At,Wl).contains(_t)&&!At.isEnterHandled}],[[" ","mac+ "],$.addNewEditorFromKeyboard,{checker:(At,{target:_t})=>!(_t instanceof HTMLButtonElement)&&St(At,Wl).contains(document.activeElement)}],[["Escape","mac+Escape"],$.unselectAll],[["ArrowLeft","mac+ArrowLeft"],$.translateSelectedEditors,{args:[-bt,0],checker:ht}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],$.translateSelectedEditors,{args:[-Et,0],checker:ht}],[["ArrowRight","mac+ArrowRight"],$.translateSelectedEditors,{args:[bt,0],checker:ht}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],$.translateSelectedEditors,{args:[Et,0],checker:ht}],[["ArrowUp","mac+ArrowUp"],$.translateSelectedEditors,{args:[0,-bt],checker:ht}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],$.translateSelectedEditors,{args:[0,-Et],checker:ht}],[["ArrowDown","mac+ArrowDown"],$.translateSelectedEditors,{args:[0,bt],checker:ht}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],$.translateSelectedEditors,{args:[0,Et],checker:ht}]]))}destroy(){var $,ht;Ut(this,Ar,FE).call(this),Ut(this,Ar,kE).call(this),this._eventBus._off("editingaction",St(this,Vv)),this._eventBus._off("pagechanging",St(this,Hv)),this._eventBus._off("scalechanging",St(this,jv)),this._eventBus._off("rotationchanging",St(this,zv));for(const vt of St(this,no).values())vt.destroy();St(this,no).clear(),St(this,Ws).clear(),St(this,ip).clear(),zt(this,xo,null),St(this,Es).clear(),St(this,Uo).destroy(),($=St(this,lm))==null||$.destroy(),(ht=St(this,El))==null||ht.hide(),zt(this,El,null),St(this,yl)&&(clearTimeout(St(this,yl)),zt(this,yl,null)),St(this,Al)&&(clearTimeout(St(this,Al)),zt(this,Al,null)),Ut(this,Ar,$_).call(this)}async mlGuess($){var ht;return((ht=St(this,hm))==null?void 0:ht.guess($))||null}get hasMLManager(){return!!St(this,hm)}get hcmFilter(){return shadow(this,"hcmFilter",St(this,sp)?St(this,Rv).addHCMFilter(St(this,sp).foreground,St(this,sp).background):"none")}get direction(){return shadow(this,"direction",getComputedStyle(St(this,Wl)).direction)}get highlightColors(){return shadow(this,"highlightColors",St(this,dm)?new Map(St(this,dm).split(",").map($=>$.split("=").map(ht=>ht.trim()))):null)}get highlightColorNames(){return shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,$=>$.reverse())):null)}setMainHighlightColorPicker($){zt(this,Mv,$)}editAltText($){var ht;(ht=St(this,lm))==null||ht.editAltText(this,$)}onPageChanging({pageNumber:$}){zt(this,um,$-1)}focusMainContainer(){St(this,Wl).focus()}findParent($,ht){for(const vt of St(this,no).values()){const{x:bt,y:Et,width:At,height:_t}=vt.div.getBoundingClientRect();if($>=bt&&$<=bt+At&&ht>=Et&&ht<=Et+_t)return vt}return null}disableUserSelect($=!1){St(this,Gv).classList.toggle("noUserSelect",$)}addShouldRescale($){St(this,ip).add($)}removeShouldRescale($){St(this,ip).delete($)}onScaleChanging({scale:$}){this.commitOrRemove(),this.viewParameters.realScale=$*PixelsPerInch.PDF_TO_CSS_UNITS;for(const ht of St(this,ip))ht.onScaleChanging()}onRotationChanging({pagesRotation:$}){this.commitOrRemove(),this.viewParameters.rotation=$}highlightSelection($=""){const ht=document.getSelection();if(!ht||ht.isCollapsed)return;const{anchorNode:vt,anchorOffset:bt,focusNode:Et,focusOffset:At}=ht,_t=ht.toString(),Ct=Ut(this,Ar,f0).call(this,ht).closest(".textLayer"),xt=this.getSelectionBoxes(Ct);if(xt){ht.empty(),St(this,io)===AnnotationEditorType.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:AnnotationEditorType.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const Pt of St(this,no).values())if(Pt.hasTextLayer(Ct)){Pt.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:$,boxes:xt,anchorNode:vt,anchorOffset:bt,focusNode:Et,focusOffset:At,text:_t});break}}}addToAnnotationStorage($){!$.isEmpty()&&St(this,Hl)&&!St(this,Hl).has($.id)&&St(this,Hl).setValue($.id,$)}blur(){if(this.isShiftKeyDown=!1,St(this,wu)&&(zt(this,wu,!1),Ut(this,Ar,p0).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:$}=document;for(const ht of St(this,Es))if(ht.div.contains($)){zt(this,rp,[ht,$]),ht._focusEventsAllowed=!1;break}}focus(){if(!St(this,rp))return;const[$,ht]=St(this,rp);zt(this,rp,null),ht.addEventListener("focusin",()=>{$._focusEventsAllowed=!0},{once:!0}),ht.focus()}addEditListeners(){Ut(this,Ar,ME).call(this),Ut(this,Ar,LE).call(this)}removeEditListeners(){Ut(this,Ar,FE).call(this),Ut(this,Ar,DE).call(this)}copy($){var vt;if($.preventDefault(),(vt=St(this,xo))==null||vt.commitOrRemove(),!this.hasSelection)return;const ht=[];for(const bt of St(this,Es)){const Et=bt.serialize(!0);Et&&ht.push(Et)}ht.length!==0&&$.clipboardData.setData("application/pdfjs",JSON.stringify(ht))}cut($){this.copy($),this.delete()}paste($){$.preventDefault();const{clipboardData:ht}=$;for(const Et of ht.items)for(const At of St(this,Ul))if(At.isHandlingMimeForPasting(Et.type)){At.paste(Et,this.currentLayer);return}let vt=ht.getData("application/pdfjs");if(!vt)return;try{vt=JSON.parse(vt)}catch(Et){warn(`paste: "${Et.message}".`);return}if(!Array.isArray(vt))return;this.unselectAll();const bt=this.currentLayer;try{const Et=[];for(const wt of vt){const Ct=bt.deserialize(wt);if(!Ct)return;Et.push(Ct)}const At=()=>{for(const wt of Et)Ut(this,Ar,IE).call(this,wt);Ut(this,Ar,OE).call(this,Et)},_t=()=>{for(const wt of Et)wt.remove()};this.addCommands({cmd:At,undo:_t,mustExec:!0})}catch(Et){warn(`paste: "${Et.message}".`)}}keydown($){!this.isShiftKeyDown&&$.key==="Shift"&&(this.isShiftKeyDown=!0),St(this,io)!==AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&am._keyboardManager.exec(this,$)}keyup($){this.isShiftKeyDown&&$.key==="Shift"&&(this.isShiftKeyDown=!1,St(this,wu)&&(zt(this,wu,!1),Ut(this,Ar,p0).call(this,"main_toolbar")))}onEditingAction({name:$}){switch($){case"undo":case"redo":case"delete":case"selectAll":this[$]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState($){$?(Ut(this,Ar,N_).call(this),Ut(this,Ar,LE).call(this),Ut(this,Ar,ho).call(this,{isEditing:St(this,io)!==AnnotationEditorType.NONE,isEmpty:Ut(this,Ar,sv).call(this),hasSomethingToUndo:St(this,Uo).hasSomethingToUndo(),hasSomethingToRedo:St(this,Uo).hasSomethingToRedo(),hasSelectedEditor:!1})):(Ut(this,Ar,kE).call(this),Ut(this,Ar,DE).call(this),Ut(this,Ar,ho).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes($){if(!St(this,Ul)){zt(this,Ul,$);for(const ht of St(this,Ul))Ut(this,Ar,Eu).call(this,ht.defaultPropertiesToUpdate)}}getId(){return St(this,eE).id}get currentLayer(){return St(this,no).get(St(this,um))}getLayer($){return St(this,no).get($)}get currentPageIndex(){return St(this,um)}addLayer($){St(this,no).set($.pageIndex,$),St(this,Su)?$.enable():$.disable()}removeLayer($){St(this,no).delete($.pageIndex)}updateMode($,ht=null,vt=!1){if(St(this,io)!==$){if(zt(this,io,$),$===AnnotationEditorType.NONE){this.setEditingState(!1),Ut(this,Ar,V_).call(this);return}this.setEditingState(!0),Ut(this,Ar,B_).call(this),this.unselectAll();for(const bt of St(this,no).values())bt.updateMode($);if(!ht&&vt){this.addNewEditorFromKeyboard();return}if(ht){for(const bt of St(this,Ws).values())if(bt.annotationElementId===ht){this.setSelected(bt),bt.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar($){$!==St(this,io)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:$})}updateParams($,ht){var vt;if(St(this,Ul)){switch($){case AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor();return;case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:(vt=St(this,Mv))==null||vt.updateColor(ht);break;case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(St(this,Fv)||zt(this,Fv,new Map)).set($,ht),this.showAllEditors("highlight",ht);break}for(const bt of St(this,Es))bt.updateParams($,ht);for(const bt of St(this,Ul))bt.updateDefaultParams($,ht)}}showAllEditors($,ht,vt=!1){var Et;for(const At of St(this,Ws).values())At.editorType===$&&At.show(ht);(((Et=St(this,Fv))==null?void 0:Et.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==ht&&Ut(this,Ar,Eu).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,ht]])}enableWaiting($=!1){if(St(this,kv)!==$){zt(this,kv,$);for(const ht of St(this,no).values())$?ht.disableClick():ht.enableClick(),ht.div.classList.toggle("waiting",$)}}getEditors($){const ht=[];for(const vt of St(this,Ws).values())vt.pageIndex===$&&ht.push(vt);return ht}getEditor($){return St(this,Ws).get($)}addEditor($){St(this,Ws).set($.id,$)}removeEditor($){var ht;$.div.contains(document.activeElement)&&(St(this,yl)&&clearTimeout(St(this,yl)),zt(this,yl,setTimeout(()=>{this.focusMainContainer(),zt(this,yl,null)},0))),St(this,Ws).delete($.id),this.unselect($),(!$.annotationElementId||!St(this,np).has($.annotationElementId))&&((ht=St(this,Hl))==null||ht.remove($.id))}addDeletedAnnotationElement($){St(this,np).add($.annotationElementId),this.addChangedExistingAnnotation($),$.deleted=!0}isDeletedAnnotationElement($){return St(this,np).has($)}removeDeletedAnnotationElement($){St(this,np).delete($.annotationElementId),this.removeChangedExistingAnnotation($),$.deleted=!1}setActiveEditor($){St(this,xo)!==$&&(zt(this,xo,$),$&&Ut(this,Ar,Eu).call(this,$.propertiesToUpdate))}updateUI($){St(this,Ar,H_)===$&&Ut(this,Ar,Eu).call(this,$.propertiesToUpdate)}toggleSelected($){if(St(this,Es).has($)){St(this,Es).delete($),$.unselect(),Ut(this,Ar,ho).call(this,{hasSelectedEditor:this.hasSelection});return}St(this,Es).add($),$.select(),Ut(this,Ar,Eu).call(this,$.propertiesToUpdate),Ut(this,Ar,ho).call(this,{hasSelectedEditor:!0})}setSelected($){for(const ht of St(this,Es))ht!==$&&ht.unselect();St(this,Es).clear(),St(this,Es).add($),$.select(),Ut(this,Ar,Eu).call(this,$.propertiesToUpdate),Ut(this,Ar,ho).call(this,{hasSelectedEditor:!0})}isSelected($){return St(this,Es).has($)}get firstSelectedEditor(){return St(this,Es).values().next().value}unselect($){$.unselect(),St(this,Es).delete($),Ut(this,Ar,ho).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return St(this,Es).size!==0}get isEnterHandled(){return St(this,Es).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){St(this,Uo).undo(),Ut(this,Ar,ho).call(this,{hasSomethingToUndo:St(this,Uo).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Ut(this,Ar,sv).call(this)})}redo(){St(this,Uo).redo(),Ut(this,Ar,ho).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:St(this,Uo).hasSomethingToRedo(),isEmpty:Ut(this,Ar,sv).call(this)})}addCommands($){St(this,Uo).add($),Ut(this,Ar,ho).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Ut(this,Ar,sv).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const $=[...St(this,Es)],ht=()=>{for(const bt of $)bt.remove()},vt=()=>{for(const bt of $)Ut(this,Ar,IE).call(this,bt)};this.addCommands({cmd:ht,undo:vt,mustExec:!0})}commitOrRemove(){var $;($=St(this,xo))==null||$.commitOrRemove()}hasSomethingToControl(){return St(this,xo)||this.hasSelection}selectAll(){for(const $ of St(this,Es))$.commit();Ut(this,Ar,OE).call(this,St(this,Ws).values())}unselectAll(){if(!(St(this,xo)&&(St(this,xo).commitOrRemove(),St(this,io)!==AnnotationEditorType.NONE))&&this.hasSelection){for(const $ of St(this,Es))$.unselect();St(this,Es).clear(),Ut(this,Ar,ho).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors($,ht,vt=!1){if(vt||this.commitOrRemove(),!this.hasSelection)return;St(this,xu)[0]+=$,St(this,xu)[1]+=ht;const[bt,Et]=St(this,xu),At=[...St(this,Es)],_t=1e3;St(this,Al)&&clearTimeout(St(this,Al)),zt(this,Al,setTimeout(()=>{zt(this,Al,null),St(this,xu)[0]=St(this,xu)[1]=0,this.addCommands({cmd:()=>{for(const wt of At)St(this,Ws).has(wt.id)&&wt.translateInPage(bt,Et)},undo:()=>{for(const wt of At)St(this,Ws).has(wt.id)&&wt.translateInPage(-bt,-Et)},mustExec:!1})},_t));for(const wt of At)wt.translateInPage($,ht)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),zt(this,$a,new Map);for(const $ of St(this,Es))St(this,$a).set($,{savedX:$.x,savedY:$.y,savedPageIndex:$.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!St(this,$a))return!1;this.disableUserSelect(!1);const $=St(this,$a);zt(this,$a,null);let ht=!1;for(const[{x:bt,y:Et,pageIndex:At},_t]of $)_t.newX=bt,_t.newY=Et,_t.newPageIndex=At,ht||(ht=bt!==_t.savedX||Et!==_t.savedY||At!==_t.savedPageIndex);if(!ht)return!1;const vt=(bt,Et,At,_t)=>{if(St(this,Ws).has(bt.id)){const wt=St(this,no).get(_t);wt?bt._setParentAndPosition(wt,Et,At):(bt.pageIndex=_t,bt.x=Et,bt.y=At)}};return this.addCommands({cmd:()=>{for(const[bt,{newX:Et,newY:At,newPageIndex:_t}]of $)vt(bt,Et,At,_t)},undo:()=>{for(const[bt,{savedX:Et,savedY:At,savedPageIndex:_t}]of $)vt(bt,Et,At,_t)},mustExec:!0}),!0}dragSelectedEditors($,ht){if(St(this,$a))for(const vt of St(this,$a).keys())vt.drag($,ht)}rebuild($){if($.parent===null){const ht=this.getLayer($.pageIndex);ht?(ht.changeParent($),ht.addOrRebuild($)):(this.addEditor($),this.addToAnnotationStorage($),$.rebuild())}else $.parent.addOrRebuild($)}get isEditorHandlingKeyboard(){var $;return(($=this.getActive())==null?void 0:$.shouldGetKeyboardEvents())||St(this,Es).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive($){return St(this,xo)===$}getActive(){return St(this,xo)}getMode(){return St(this,io)}get imageManager(){return shadow(this,"imageManager",new ImageManager)}getSelectionBoxes($){if(!$)return null;const ht=document.getSelection();for(let Ct=0,xt=ht.rangeCount;Ct<xt;Ct++)if(!$.contains(ht.getRangeAt(Ct).commonAncestorContainer))return null;const{x:vt,y:bt,width:Et,height:At}=$.getBoundingClientRect();let _t;switch($.getAttribute("data-main-rotation")){case"90":_t=(Ct,xt,Pt,Rt)=>({x:(xt-bt)/At,y:1-(Ct+Pt-vt)/Et,width:Rt/At,height:Pt/Et});break;case"180":_t=(Ct,xt,Pt,Rt)=>({x:1-(Ct+Pt-vt)/Et,y:1-(xt+Rt-bt)/At,width:Pt/Et,height:Rt/At});break;case"270":_t=(Ct,xt,Pt,Rt)=>({x:1-(xt+Rt-bt)/At,y:(Ct-vt)/Et,width:Rt/At,height:Pt/Et});break;default:_t=(Ct,xt,Pt,Rt)=>({x:(Ct-vt)/Et,y:(xt-bt)/At,width:Pt/Et,height:Rt/At});break}const wt=[];for(let Ct=0,xt=ht.rangeCount;Ct<xt;Ct++){const Pt=ht.getRangeAt(Ct);if(!Pt.collapsed)for(const{x:Rt,y:kt,width:Mt,height:Lt}of Pt.getClientRects())Mt===0||Lt===0||wt.push(_t(Rt,kt,Mt,Lt))}return wt.length===0?null:wt}addChangedExistingAnnotation({annotationElementId:$,id:ht}){(St(this,cm)||zt(this,cm,new Map)).set($,ht)}removeChangedExistingAnnotation({annotationElementId:$}){var ht;(ht=St(this,cm))==null||ht.delete($)}renderAnnotationElement($){var bt;const ht=(bt=St(this,cm))==null?void 0:bt.get($.data.id);if(!ht)return;const vt=St(this,Hl).getRawValue(ht);vt&&(St(this,io)===AnnotationEditorType.NONE&&!vt.hasBeenModified||vt.renderAnnotationElement($))}};xo=new WeakMap,Ws=new WeakMap,no=new WeakMap,lm=new WeakMap,Hl=new WeakMap,cm=new WeakMap,Uo=new WeakMap,um=new WeakMap,np=new WeakMap,$a=new WeakMap,Ul=new WeakMap,ip=new WeakMap,Pv=new WeakMap,Rv=new WeakMap,yl=new WeakMap,dm=new WeakMap,wu=new WeakMap,El=new WeakMap,eE=new WeakMap,Su=new WeakMap,kv=new WeakMap,rp=new WeakMap,Mv=new WeakMap,hm=new WeakMap,io=new WeakMap,Es=new WeakMap,zl=new WeakMap,sp=new WeakMap,Fv=new WeakMap,Lv=new WeakMap,Dv=new WeakMap,Iv=new WeakMap,Ov=new WeakMap,$v=new WeakMap,Nv=new WeakMap,Bv=new WeakMap,Vv=new WeakMap,Hv=new WeakMap,jv=new WeakMap,Uv=new WeakMap,zv=new WeakMap,Wv=new WeakMap,xu=new WeakMap,Al=new WeakMap,Wl=new WeakMap,Gv=new WeakMap,Ar=new WeakSet,f0=function({anchorNode:$}){return $.nodeType===Node.TEXT_NODE?$.parentElement:$},D_=function(){const $=document.getSelection();if(!$||$.isCollapsed)return;const vt=Ut(this,Ar,f0).call(this,$).closest(".textLayer"),bt=this.getSelectionBoxes(vt);bt&&(St(this,El)||zt(this,El,new HighlightToolbar(this)),St(this,El).show(vt,bt,this.direction==="ltr"))},I_=function(){var Et,At,_t;const $=document.getSelection();if(!$||$.isCollapsed){St(this,zl)&&((Et=St(this,El))==null||Et.hide(),zt(this,zl,null),Ut(this,Ar,ho).call(this,{hasSelectedText:!1}));return}const{anchorNode:ht}=$;if(ht===St(this,zl))return;if(!Ut(this,Ar,f0).call(this,$).closest(".textLayer")){St(this,zl)&&((At=St(this,El))==null||At.hide(),zt(this,zl,null),Ut(this,Ar,ho).call(this,{hasSelectedText:!1}));return}if((_t=St(this,El))==null||_t.hide(),zt(this,zl,ht),Ut(this,Ar,ho).call(this,{hasSelectedText:!0}),!(St(this,io)!==AnnotationEditorType.HIGHLIGHT&&St(this,io)!==AnnotationEditorType.NONE)&&(St(this,io)===AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),zt(this,wu,this.isShiftKeyDown),!this.isShiftKeyDown)){const wt=Ct=>{Ct.type==="pointerup"&&Ct.button!==0||(window.removeEventListener("pointerup",wt),window.removeEventListener("blur",wt),Ct.type==="pointerup"&&Ut(this,Ar,p0).call(this,"main_toolbar"))};window.addEventListener("pointerup",wt),window.addEventListener("blur",wt)}},p0=function($=""){St(this,io)===AnnotationEditorType.HIGHLIGHT?this.highlightSelection($):St(this,Pv)&&Ut(this,Ar,D_).call(this)},O_=function(){document.addEventListener("selectionchange",St(this,Uv))},$_=function(){document.removeEventListener("selectionchange",St(this,Uv))},N_=function(){window.addEventListener("focus",St(this,Dv)),window.addEventListener("blur",St(this,Lv))},kE=function(){window.removeEventListener("focus",St(this,Dv)),window.removeEventListener("blur",St(this,Lv))},ME=function(){window.addEventListener("keydown",St(this,Nv)),window.addEventListener("keyup",St(this,Bv))},FE=function(){window.removeEventListener("keydown",St(this,Nv)),window.removeEventListener("keyup",St(this,Bv))},LE=function(){document.addEventListener("copy",St(this,Iv)),document.addEventListener("cut",St(this,Ov)),document.addEventListener("paste",St(this,$v))},DE=function(){document.removeEventListener("copy",St(this,Iv)),document.removeEventListener("cut",St(this,Ov)),document.removeEventListener("paste",St(this,$v))},ho=function($){Object.entries($).some(([vt,bt])=>St(this,Wv)[vt]!==bt)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(St(this,Wv),$)}),St(this,io)===AnnotationEditorType.HIGHLIGHT&&$.hasSelectedEditor===!1&&Ut(this,Ar,Eu).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},Eu=function($){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:$})},B_=function(){if(!St(this,Su)){zt(this,Su,!0);for(const $ of St(this,no).values())$.enable();for(const $ of St(this,Ws).values())$.enable()}},V_=function(){if(this.unselectAll(),St(this,Su)){zt(this,Su,!1);for(const $ of St(this,no).values())$.disable();for(const $ of St(this,Ws).values())$.disable()}},IE=function($){const ht=St(this,no).get($.pageIndex);ht?ht.addOrRebuild($):(this.addEditor($),this.addToAnnotationStorage($))},H_=function(){let $=null;for($ of St(this,Es));return $},sv=function(){if(St(this,Ws).size===0)return!0;if(St(this,Ws).size===1)for(const $ of St(this,Ws).values())return $.isEmpty();return!1},OE=function($){for(const ht of St(this,Es))ht.unselect();St(this,Es).clear();for(const ht of $)ht.isEmpty()||(St(this,Es).add(ht),ht.select());Ut(this,Ar,ho).call(this,{hasSelectedEditor:this.hasSelection})},Sr(am,"TRANSLATE_SMALL",1),Sr(am,"TRANSLATE_BIG",10);let AnnotationEditorUIManager=am;var Gl,Kl,zo,Xl,Wo,fm,Yl,Kv,$E;const $l=class $l{constructor($){Kt(this,Kv);Kt(this,Gl,"");Kt(this,Kl,!1);Kt(this,zo,null);Kt(this,Xl,null);Kt(this,Wo,null);Kt(this,fm,!1);Kt(this,Yl,null);zt(this,Yl,$)}static initialize($){$l._l10nPromise||($l._l10nPromise=$)}async render(){const $=zt(this,zo,document.createElement("button"));$.className="altText";const ht=await $l._l10nPromise.get("pdfjs-editor-alt-text-button-label");$.textContent=ht,$.setAttribute("aria-label",ht),$.tabIndex="0",$.addEventListener("contextmenu",noContextMenu),$.addEventListener("pointerdown",bt=>bt.stopPropagation());const vt=bt=>{bt.preventDefault(),St(this,Yl)._uiManager.editAltText(St(this,Yl))};return $.addEventListener("click",vt,{capture:!0}),$.addEventListener("keydown",bt=>{bt.target===$&&bt.key==="Enter"&&(zt(this,fm,!0),vt(bt))}),await Ut(this,Kv,$E).call(this),$}finish(){St(this,zo)&&(St(this,zo).focus({focusVisible:St(this,fm)}),zt(this,fm,!1))}isEmpty(){return!St(this,Gl)&&!St(this,Kl)}get data(){return{altText:St(this,Gl),decorative:St(this,Kl)}}set data({altText:$,decorative:ht}){St(this,Gl)===$&&St(this,Kl)===ht||(zt(this,Gl,$),zt(this,Kl,ht),Ut(this,Kv,$E).call(this))}toggle($=!1){St(this,zo)&&(!$&&St(this,Wo)&&(clearTimeout(St(this,Wo)),zt(this,Wo,null)),St(this,zo).disabled=!$)}destroy(){var $;($=St(this,zo))==null||$.remove(),zt(this,zo,null),zt(this,Xl,null)}};Gl=new WeakMap,Kl=new WeakMap,zo=new WeakMap,Xl=new WeakMap,Wo=new WeakMap,fm=new WeakMap,Yl=new WeakMap,Kv=new WeakSet,$E=async function(){var bt;const $=St(this,zo);if(!$)return;if(!St(this,Gl)&&!St(this,Kl)){$.classList.remove("done"),(bt=St(this,Xl))==null||bt.remove();return}$.classList.add("done"),$l._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(Et=>{$.setAttribute("aria-label",Et)});let ht=St(this,Xl);if(!ht){zt(this,Xl,ht=document.createElement("span")),ht.className="tooltip",ht.setAttribute("role","tooltip");const Et=ht.id=`alt-text-tooltip-${St(this,Yl).id}`;$.setAttribute("aria-describedby",Et);const At=100;$.addEventListener("mouseenter",()=>{zt(this,Wo,setTimeout(()=>{zt(this,Wo,null),St(this,Xl).classList.add("show"),St(this,Yl)._reportTelemetry({action:"alt_text_tooltip"})},At))}),$.addEventListener("mouseleave",()=>{var _t;St(this,Wo)&&(clearTimeout(St(this,Wo)),zt(this,Wo,null)),(_t=St(this,Xl))==null||_t.classList.remove("show")})}ht.innerText=St(this,Kl)?await $l._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):St(this,Gl),ht.parentNode||$.append(ht);const vt=St(this,Yl).getImageForAltText();vt==null||vt.setAttribute("aria-describedby",ht.id)},Sr($l,"_l10nPromise",null);let AltText=$l;var Go,fo,pm,op,ro,ap,mm,gm,uo,Xv,lp,Cu,qv,cp,Ql,_l,vm,ym,Do,Yv,tE,ss,NE,Qv,BE,VE,j_,U_,HE,jE,UE,z_,W_,G_,K_,zE,ov;const Ts=class Ts{constructor($){Kt(this,ss);Kt(this,Go,null);Kt(this,fo,null);Kt(this,pm,!1);Kt(this,op,!1);Kt(this,ro,null);Kt(this,ap,null);Kt(this,mm,this.focusin.bind(this));Kt(this,gm,this.focusout.bind(this));Kt(this,uo,null);Kt(this,Xv,"");Kt(this,lp,!1);Kt(this,Cu,null);Kt(this,qv,!1);Kt(this,cp,!1);Kt(this,Ql,!1);Kt(this,_l,null);Kt(this,vm,0);Kt(this,ym,0);Kt(this,Do,null);Sr(this,"_initialOptions",Object.create(null));Sr(this,"_isVisible",!0);Sr(this,"_uiManager",null);Sr(this,"_focusEventsAllowed",!0);Sr(this,"_l10nPromise",null);Kt(this,Yv,!1);Kt(this,tE,Ts._zIndex++);this.constructor===Ts&&unreachable("Cannot initialize AnnotationEditor."),this.parent=$.parent,this.id=$.id,this.width=this.height=null,this.pageIndex=$.parent.pageIndex,this.name=$.name,this.div=null,this._uiManager=$.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=$.isCentered,this._structTreeParentId=null;const{rotation:ht,rawDims:{pageWidth:vt,pageHeight:bt,pageX:Et,pageY:At}}=this.parent.viewport;this.rotation=ht,this.pageRotation=(360+ht-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[vt,bt],this.pageTranslation=[Et,At];const[_t,wt]=this.parentDimensions;this.x=$.x/_t,this.y=$.y/wt,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const $=Ts.prototype._resizeWithKeyboard,ht=AnnotationEditorUIManager.TRANSLATE_SMALL,vt=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],$,{args:[-ht,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],$,{args:[-vt,0]}],[["ArrowRight","mac+ArrowRight"],$,{args:[ht,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],$,{args:[vt,0]}],[["ArrowUp","mac+ArrowUp"],$,{args:[0,-ht]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],$,{args:[0,-vt]}],[["ArrowDown","mac+ArrowDown"],$,{args:[0,ht]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],$,{args:[0,vt]}],[["Escape","mac+Escape"],Ts.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement($){const ht=new FakeEditor({id:$.parent.getNextId(),parent:$.parent,uiManager:$._uiManager});ht.annotationElementId=$.annotationElementId,ht.deleted=!0,ht._uiManager.addToAnnotationStorage(ht)}static initialize($,ht,vt){if(Ts._l10nPromise||(Ts._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(Et=>[Et,$.get(Et.replaceAll(/([A-Z])/g,At=>`-${At.toLowerCase()}`))]))),vt!=null&&vt.strings)for(const Et of vt.strings)Ts._l10nPromise.set(Et,$.get(Et));if(Ts._borderLineWidth!==-1)return;const bt=getComputedStyle(document.documentElement);Ts._borderLineWidth=parseFloat(bt.getPropertyValue("--outline-width"))||0}static updateDefaultParams($,ht){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting($){return!1}static paste($,ht){unreachable("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return St(this,Yv)}set _isDraggable($){var ht;zt(this,Yv,$),(ht=this.div)==null||ht.classList.toggle("draggable",$)}get isEnterHandled(){return!0}center(){const[$,ht]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*ht/($*2),this.y+=this.width*$/(ht*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*ht/($*2),this.y-=this.width*$/(ht*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands($){this._uiManager.addCommands($)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=St(this,tE)}setParent($){$!==null?(this.pageIndex=$.pageIndex,this.pageDimensions=$.pageDimensions):Ut(this,ss,ov).call(this),this.parent=$}focusin($){this._focusEventsAllowed&&(St(this,lp)?zt(this,lp,!1):this.parent.setSelected(this))}focusout($){var vt;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const ht=$.relatedTarget;ht!=null&&ht.closest(`#${this.id}`)||($.preventDefault(),(vt=this.parent)!=null&&vt.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt($,ht,vt,bt){const[Et,At]=this.parentDimensions;[vt,bt]=this.screenToPageTranslation(vt,bt),this.x=($+vt)/Et,this.y=(ht+bt)/At,this.fixAndSetPosition()}translate($,ht){Ut(this,ss,NE).call(this,this.parentDimensions,$,ht)}translateInPage($,ht){St(this,Cu)||zt(this,Cu,[this.x,this.y]),Ut(this,ss,NE).call(this,this.pageDimensions,$,ht),this.div.scrollIntoView({block:"nearest"})}drag($,ht){St(this,Cu)||zt(this,Cu,[this.x,this.y]);const[vt,bt]=this.parentDimensions;if(this.x+=$/vt,this.y+=ht/bt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Ct,y:xt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Ct,xt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Et,y:At}=this;const[_t,wt]=this.getBaseTranslation();Et+=_t,At+=wt,this.div.style.left=`${(100*Et).toFixed(2)}%`,this.div.style.top=`${(100*At).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!St(this,Cu)&&(St(this,Cu)[0]!==this.x||St(this,Cu)[1]!==this.y)}getBaseTranslation(){const[$,ht]=this.parentDimensions,{_borderLineWidth:vt}=Ts,bt=vt/$,Et=vt/ht;switch(this.rotation){case 90:return[-bt,Et];case 180:return[bt,Et];case 270:return[bt,-Et];default:return[-bt,-Et]}}get _mustFixPosition(){return!0}fixAndSetPosition($=this.rotation){const[ht,vt]=this.pageDimensions;let{x:bt,y:Et,width:At,height:_t}=this;if(At*=ht,_t*=vt,bt*=ht,Et*=vt,this._mustFixPosition)switch($){case 0:bt=Math.max(0,Math.min(ht-At,bt)),Et=Math.max(0,Math.min(vt-_t,Et));break;case 90:bt=Math.max(0,Math.min(ht-_t,bt)),Et=Math.min(vt,Math.max(At,Et));break;case 180:bt=Math.min(ht,Math.max(At,bt)),Et=Math.min(vt,Math.max(_t,Et));break;case 270:bt=Math.min(ht,Math.max(_t,bt)),Et=Math.max(0,Math.min(vt-At,Et));break}this.x=bt/=ht,this.y=Et/=vt;const[wt,Ct]=this.getBaseTranslation();bt+=wt,Et+=Ct;const{style:xt}=this.div;xt.left=`${(100*bt).toFixed(2)}%`,xt.top=`${(100*Et).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation($,ht){var vt;return Ut(vt=Ts,Qv,BE).call(vt,$,ht,this.parentRotation)}pageTranslationToScreen($,ht){var vt;return Ut(vt=Ts,Qv,BE).call(vt,$,ht,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:$,pageDimensions:[ht,vt]}=this,bt=ht*$,Et=vt*$;return util_FeatureTest.isCSSRoundSupported?[Math.round(bt),Math.round(Et)]:[bt,Et]}setDims($,ht){const[vt,bt]=this.parentDimensions;this.div.style.width=`${(100*$/vt).toFixed(2)}%`,St(this,op)||(this.div.style.height=`${(100*ht/bt).toFixed(2)}%`)}fixDims(){const{style:$}=this.div,{height:ht,width:vt}=$,bt=vt.endsWith("%"),Et=!St(this,op)&&ht.endsWith("%");if(bt&&Et)return;const[At,_t]=this.parentDimensions;bt||($.width=`${(100*parseFloat(vt)/At).toFixed(2)}%`),!St(this,op)&&!Et&&($.height=`${(100*parseFloat(ht)/_t).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var $;($=St(this,fo))==null||$.finish()}async addEditToolbar(){return St(this,uo)||St(this,cp)?St(this,uo):(zt(this,uo,new EditorToolbar(this)),this.div.append(St(this,uo).render()),St(this,fo)&&St(this,uo).addAltTextButton(await St(this,fo).render()),St(this,uo))}removeEditToolbar(){var $;St(this,uo)&&(St(this,uo).remove(),zt(this,uo,null),($=St(this,fo))==null||$.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){St(this,fo)||(AltText.initialize(Ts._l10nPromise),zt(this,fo,new AltText(this)),await this.addEditToolbar())}get altTextData(){var $;return($=St(this,fo))==null?void 0:$.data}set altTextData($){St(this,fo)&&(St(this,fo).data=$)}hasAltText(){var $;return!(($=St(this,fo))!=null&&$.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=St(this,pm)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",St(this,mm)),this.div.addEventListener("focusout",St(this,gm));const[$,ht]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*ht/$).toFixed(2)}%`,this.div.style.maxHeight=`${(100*$/ht).toFixed(2)}%`);const[vt,bt]=this.getInitialTranslation();return this.translate(vt,bt),bindEvents(this,this.div,["pointerdown"]),this.div}pointerdown($){const{isMac:ht}=util_FeatureTest.platform;if($.button!==0||$.ctrlKey&&ht){$.preventDefault();return}if(zt(this,lp,!0),this._isDraggable){Ut(this,ss,z_).call(this,$);return}Ut(this,ss,UE).call(this,$)}moveInDOM(){St(this,_l)&&clearTimeout(St(this,_l)),zt(this,_l,setTimeout(()=>{var $;zt(this,_l,null),($=this.parent)==null||$.moveEditorInDOM(this)},0))}_setParentAndPosition($,ht,vt){$.changeParent(this),this.x=ht,this.y=vt,this.fixAndSetPosition()}getRect($,ht,vt=this.rotation){const bt=this.parentScale,[Et,At]=this.pageDimensions,[_t,wt]=this.pageTranslation,Ct=$/bt,xt=ht/bt,Pt=this.x*Et,Rt=this.y*At,kt=this.width*Et,Mt=this.height*At;switch(vt){case 0:return[Pt+Ct+_t,At-Rt-xt-Mt+wt,Pt+Ct+kt+_t,At-Rt-xt+wt];case 90:return[Pt+xt+_t,At-Rt+Ct+wt,Pt+xt+Mt+_t,At-Rt+Ct+kt+wt];case 180:return[Pt-Ct-kt+_t,At-Rt+xt+wt,Pt-Ct+_t,At-Rt+xt+Mt+wt];case 270:return[Pt-xt-Mt+_t,At-Rt-Ct-kt+wt,Pt-xt+_t,At-Rt-Ct+wt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords($,ht){const[vt,bt,Et,At]=$,_t=Et-vt,wt=At-bt;switch(this.rotation){case 0:return[vt,ht-At,_t,wt];case 90:return[vt,ht-bt,wt,_t];case 180:return[Et,ht-bt,_t,wt];case 270:return[Et,ht-At,wt,_t];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){zt(this,cp,!0)}disableEditMode(){zt(this,cp,!1)}isInEditMode(){return St(this,cp)}shouldGetKeyboardEvents(){return St(this,Ql)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var $,ht;($=this.div)==null||$.addEventListener("focusin",St(this,mm)),(ht=this.div)==null||ht.addEventListener("focusout",St(this,gm))}rotate($){}serialize($=!1,ht=null){unreachable("An editor must be serializable")}static deserialize($,ht,vt){const bt=new this.prototype.constructor({parent:ht,id:ht.getNextId(),uiManager:vt});bt.rotation=$.rotation;const[Et,At]=bt.pageDimensions,[_t,wt,Ct,xt]=bt.getRectInCurrentCoords($.rect,At);return bt.x=_t/Et,bt.y=wt/At,bt.width=Ct/Et,bt.height=xt/At,bt}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",St(this,mm)),this.div.removeEventListener("focusout",St(this,gm)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),St(this,_l)&&(clearTimeout(St(this,_l)),zt(this,_l,null)),Ut(this,ss,ov).call(this),this.removeEditToolbar(),St(this,Do)){for(const $ of St(this,Do).values())clearTimeout($);zt(this,Do,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(Ut(this,ss,j_).call(this),St(this,ro).classList.remove("hidden"),bindEvents(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown($){if(!this.isResizable||$.target!==this.div||$.key!=="Enter")return;this._uiManager.setSelected(this),zt(this,ap,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const ht=St(this,ro).children;if(!St(this,Go)){zt(this,Go,Array.from(ht));const At=Ut(this,ss,W_).bind(this),_t=Ut(this,ss,G_).bind(this);for(const wt of St(this,Go)){const Ct=wt.getAttribute("data-resizer-name");wt.setAttribute("role","spinbutton"),wt.addEventListener("keydown",At),wt.addEventListener("blur",_t),wt.addEventListener("focus",Ut(this,ss,K_).bind(this,Ct)),Ts._l10nPromise.get(`pdfjs-editor-resizer-label-${Ct}`).then(xt=>wt.setAttribute("aria-label",xt))}}const vt=St(this,Go)[0];let bt=0;for(const At of ht){if(At===vt)break;bt++}const Et=(360-this.rotation+this.parentRotation)%360/90*(St(this,Go).length/4);if(Et!==bt){if(Et<bt)for(let _t=0;_t<bt-Et;_t++)St(this,ro).append(St(this,ro).firstChild);else if(Et>bt)for(let _t=0;_t<Et-bt;_t++)St(this,ro).firstChild.before(St(this,ro).lastChild);let At=0;for(const _t of ht){const Ct=St(this,Go)[At++].getAttribute("data-resizer-name");Ts._l10nPromise.get(`pdfjs-editor-resizer-label-${Ct}`).then(xt=>_t.setAttribute("aria-label",xt))}}Ut(this,ss,zE).call(this,0),zt(this,Ql,!0),St(this,ro).firstChild.focus({focusVisible:!0}),$.preventDefault(),$.stopImmediatePropagation()}_resizeWithKeyboard($,ht){St(this,Ql)&&Ut(this,ss,jE).call(this,St(this,Xv),{movementX:$,movementY:ht})}_stopResizingWithKeyboard(){Ut(this,ss,ov).call(this),this.div.focus()}select(){var $,ht;if(this.makeResizable(),($=this.div)==null||$.classList.add("selectedEditor"),!St(this,uo)){this.addEditToolbar().then(()=>{var vt,bt;(vt=this.div)!=null&&vt.classList.contains("selectedEditor")&&((bt=St(this,uo))==null||bt.show())});return}(ht=St(this,uo))==null||ht.show()}unselect(){var $,ht,vt,bt;($=St(this,ro))==null||$.classList.add("hidden"),(ht=this.div)==null||ht.classList.remove("selectedEditor"),(vt=this.div)!=null&&vt.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(bt=St(this,uo))==null||bt.hide()}updateParams($,ht){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return St(this,qv)}set isEditing($){zt(this,qv,$),this.parent&&($?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio($,ht){zt(this,op,!0);const vt=$/ht,{style:bt}=this.div;bt.aspectRatio=vt,bt.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry($,ht=!1){if(ht){St(this,Do)||zt(this,Do,new Map);const{action:vt}=$;let bt=St(this,Do).get(vt);bt&&clearTimeout(bt),bt=setTimeout(()=>{this._reportTelemetry($),St(this,Do).delete(vt),St(this,Do).size===0&&zt(this,Do,null)},Ts._telemetryTimeout),St(this,Do).set(vt,bt);return}$.type||($.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:$}})}show($=this._isVisible){this.div.classList.toggle("hidden",!$),this._isVisible=$}enable(){this.div&&(this.div.tabIndex=0),zt(this,pm,!1)}disable(){this.div&&(this.div.tabIndex=-1),zt(this,pm,!0)}renderAnnotationElement($){let ht=$.container.querySelector(".annotationContent");if(!ht)ht=document.createElement("div"),ht.classList.add("annotationContent",this.editorType),$.container.prepend(ht);else if(ht.nodeName==="CANVAS"){const vt=ht;ht=document.createElement("div"),ht.classList.add("annotationContent",this.editorType),vt.before(ht)}return ht}resetAnnotationElement($){const{firstChild:ht}=$.container;ht.nodeName==="DIV"&&ht.classList.contains("annotationContent")&&ht.remove()}};Go=new WeakMap,fo=new WeakMap,pm=new WeakMap,op=new WeakMap,ro=new WeakMap,ap=new WeakMap,mm=new WeakMap,gm=new WeakMap,uo=new WeakMap,Xv=new WeakMap,lp=new WeakMap,Cu=new WeakMap,qv=new WeakMap,cp=new WeakMap,Ql=new WeakMap,_l=new WeakMap,vm=new WeakMap,ym=new WeakMap,Do=new WeakMap,Yv=new WeakMap,tE=new WeakMap,ss=new WeakSet,NE=function([$,ht],vt,bt){[vt,bt]=this.screenToPageTranslation(vt,bt),this.x+=vt/$,this.y+=bt/ht,this.fixAndSetPosition()},Qv=new WeakSet,BE=function($,ht,vt){switch(vt){case 90:return[ht,-$];case 180:return[-$,-ht];case 270:return[-ht,$];default:return[$,ht]}},VE=function($){switch($){case 90:{const[ht,vt]=this.pageDimensions;return[0,-ht/vt,vt/ht,0]}case 180:return[-1,0,0,-1];case 270:{const[ht,vt]=this.pageDimensions;return[0,ht/vt,-vt/ht,0]}default:return[1,0,0,1]}},j_=function(){if(St(this,ro))return;zt(this,ro,document.createElement("div")),St(this,ro).classList.add("resizers");const $=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const ht of $){const vt=document.createElement("div");St(this,ro).append(vt),vt.classList.add("resizer",ht),vt.setAttribute("data-resizer-name",ht),vt.addEventListener("pointerdown",Ut(this,ss,U_).bind(this,ht)),vt.addEventListener("contextmenu",noContextMenu),vt.tabIndex=-1}this.div.prepend(St(this,ro))},U_=function($,ht){var Mt;ht.preventDefault();const{isMac:vt}=util_FeatureTest.platform;if(ht.button!==0||ht.ctrlKey&&vt)return;(Mt=St(this,fo))==null||Mt.toggle(!1);const bt=Ut(this,ss,jE).bind(this,$),Et=this._isDraggable;this._isDraggable=!1;const At={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",bt,At),window.addEventListener("contextmenu",noContextMenu);const _t=this.x,wt=this.y,Ct=this.width,xt=this.height,Pt=this.parent.div.style.cursor,Rt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(ht.target).cursor;const kt=()=>{var Lt;this.parent.togglePointerEvents(!0),(Lt=St(this,fo))==null||Lt.toggle(!0),this._isDraggable=Et,window.removeEventListener("pointerup",kt),window.removeEventListener("blur",kt),window.removeEventListener("pointermove",bt,At),window.removeEventListener("contextmenu",noContextMenu),this.parent.div.style.cursor=Pt,this.div.style.cursor=Rt,Ut(this,ss,HE).call(this,_t,wt,Ct,xt)};window.addEventListener("pointerup",kt),window.addEventListener("blur",kt)},HE=function($,ht,vt,bt){const Et=this.x,At=this.y,_t=this.width,wt=this.height;Et===$&&At===ht&&_t===vt&&wt===bt||this.addCommands({cmd:()=>{this.width=_t,this.height=wt,this.x=Et,this.y=At;const[Ct,xt]=this.parentDimensions;this.setDims(Ct*_t,xt*wt),this.fixAndSetPosition()},undo:()=>{this.width=vt,this.height=bt,this.x=$,this.y=ht;const[Ct,xt]=this.parentDimensions;this.setDims(Ct*vt,xt*bt),this.fixAndSetPosition()},mustExec:!0})},jE=function($,ht){const[vt,bt]=this.parentDimensions,Et=this.x,At=this.y,_t=this.width,wt=this.height,Ct=Ts.MIN_SIZE/vt,xt=Ts.MIN_SIZE/bt,Pt=un=>Math.round(un*1e4)/1e4,Rt=Ut(this,ss,VE).call(this,this.rotation),kt=(un,hn)=>[Rt[0]*un+Rt[2]*hn,Rt[1]*un+Rt[3]*hn],Mt=Ut(this,ss,VE).call(this,360-this.rotation),Lt=(un,hn)=>[Mt[0]*un+Mt[2]*hn,Mt[1]*un+Mt[3]*hn];let Ot,Ft,Dt=!1,$t=!1;switch($){case"topLeft":Dt=!0,Ot=(un,hn)=>[0,0],Ft=(un,hn)=>[un,hn];break;case"topMiddle":Ot=(un,hn)=>[un/2,0],Ft=(un,hn)=>[un/2,hn];break;case"topRight":Dt=!0,Ot=(un,hn)=>[un,0],Ft=(un,hn)=>[0,hn];break;case"middleRight":$t=!0,Ot=(un,hn)=>[un,hn/2],Ft=(un,hn)=>[0,hn/2];break;case"bottomRight":Dt=!0,Ot=(un,hn)=>[un,hn],Ft=(un,hn)=>[0,0];break;case"bottomMiddle":Ot=(un,hn)=>[un/2,hn],Ft=(un,hn)=>[un/2,0];break;case"bottomLeft":Dt=!0,Ot=(un,hn)=>[0,hn],Ft=(un,hn)=>[un,0];break;case"middleLeft":$t=!0,Ot=(un,hn)=>[0,hn/2],Ft=(un,hn)=>[un,hn/2];break}const Bt=Ot(_t,wt),Nt=Ft(_t,wt);let Ht=kt(...Nt);const Vt=Pt(Et+Ht[0]),jt=Pt(At+Ht[1]);let Xt=1,Jt=1,[Gt,en]=this.screenToPageTranslation(ht.movementX,ht.movementY);if([Gt,en]=Lt(Gt/vt,en/bt),Dt){const un=Math.hypot(_t,wt);Xt=Jt=Math.max(Math.min(Math.hypot(Nt[0]-Bt[0]-Gt,Nt[1]-Bt[1]-en)/un,1/_t,1/wt),Ct/_t,xt/wt)}else $t?Xt=Math.max(Ct,Math.min(1,Math.abs(Nt[0]-Bt[0]-Gt)))/_t:Jt=Math.max(xt,Math.min(1,Math.abs(Nt[1]-Bt[1]-en)))/wt;const on=Pt(_t*Xt),_n=Pt(wt*Jt);Ht=kt(...Ft(on,_n));const ln=Vt-Ht[0],En=jt-Ht[1];this.width=on,this.height=_n,this.x=ln,this.y=En,this.setDims(vt*on,bt*_n),this.fixAndSetPosition()},UE=function($){const{isMac:ht}=util_FeatureTest.platform;$.ctrlKey&&!ht||$.shiftKey||$.metaKey&&ht?this.parent.toggleSelected(this):this.parent.setSelected(this)},z_=function($){const ht=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let vt,bt;ht&&(this.div.classList.add("moving"),vt={passive:!0,capture:!0},zt(this,vm,$.clientX),zt(this,ym,$.clientY),bt=At=>{const{clientX:_t,clientY:wt}=At,[Ct,xt]=this.screenToPageTranslation(_t-St(this,vm),wt-St(this,ym));zt(this,vm,_t),zt(this,ym,wt),this._uiManager.dragSelectedEditors(Ct,xt)},window.addEventListener("pointermove",bt,vt));const Et=()=>{window.removeEventListener("pointerup",Et),window.removeEventListener("blur",Et),ht&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",bt,vt)),zt(this,lp,!1),this._uiManager.endDragSession()||Ut(this,ss,UE).call(this,$)};window.addEventListener("pointerup",Et),window.addEventListener("blur",Et)},W_=function($){Ts._resizerKeyboardManager.exec(this,$)},G_=function($){var ht;St(this,Ql)&&((ht=$.relatedTarget)==null?void 0:ht.parentNode)!==St(this,ro)&&Ut(this,ss,ov).call(this)},K_=function($){zt(this,Xv,St(this,Ql)?$:"")},zE=function($){if(St(this,Go))for(const ht of St(this,Go))ht.tabIndex=$},ov=function(){if(zt(this,Ql,!1),Ut(this,ss,zE).call(this,-1),St(this,ap)){const{savedX:$,savedY:ht,savedWidth:vt,savedHeight:bt}=St(this,ap);Ut(this,ss,HE).call(this,$,ht,vt,bt),zt(this,ap,null)}},Kt(Ts,Qv),Sr(Ts,"_borderLineWidth",-1),Sr(Ts,"_colorManager",new ColorManager),Sr(Ts,"_zIndex",1),Sr(Ts,"_telemetryTimeout",1e3);let AnnotationEditor=Ts;class FakeEditor extends AnnotationEditor{constructor($){super($),this.annotationElementId=$.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor($){this.h1=$?$&4294967295:SEED,this.h2=$?$&4294967295:SEED}update($){let ht,vt;if(typeof $=="string"){ht=new Uint8Array($.length*2),vt=0;for(let Lt=0,Ot=$.length;Lt<Ot;Lt++){const Ft=$.charCodeAt(Lt);Ft<=255?ht[vt++]=Ft:(ht[vt++]=Ft>>>8,ht[vt++]=Ft&255)}}else if(ArrayBuffer.isView($))ht=$.slice(),vt=ht.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const bt=vt>>2,Et=vt-bt*4,At=new Uint32Array(ht.buffer,0,bt);let _t=0,wt=0,Ct=this.h1,xt=this.h2;const Pt=3432918353,Rt=461845907,kt=Pt&MASK_LOW,Mt=Rt&MASK_LOW;for(let Lt=0;Lt<bt;Lt++)Lt&1?(_t=At[Lt],_t=_t*Pt&MASK_HIGH|_t*kt&MASK_LOW,_t=_t<<15|_t>>>17,_t=_t*Rt&MASK_HIGH|_t*Mt&MASK_LOW,Ct^=_t,Ct=Ct<<13|Ct>>>19,Ct=Ct*5+3864292196):(wt=At[Lt],wt=wt*Pt&MASK_HIGH|wt*kt&MASK_LOW,wt=wt<<15|wt>>>17,wt=wt*Rt&MASK_HIGH|wt*Mt&MASK_LOW,xt^=wt,xt=xt<<13|xt>>>19,xt=xt*5+3864292196);switch(_t=0,Et){case 3:_t^=ht[bt*4+2]<<16;case 2:_t^=ht[bt*4+1]<<8;case 1:_t^=ht[bt*4],_t=_t*Pt&MASK_HIGH|_t*kt&MASK_LOW,_t=_t<<15|_t>>>17,_t=_t*Rt&MASK_HIGH|_t*Mt&MASK_LOW,bt&1?Ct^=_t:xt^=_t}this.h1=Ct,this.h2=xt}hexdigest(){let $=this.h1,ht=this.h2;return $^=ht>>>1,$=$*3981806797&MASK_HIGH|$*36045&MASK_LOW,ht=ht*4283543511&MASK_HIGH|((ht<<16|$>>>16)*2950163797&MASK_HIGH)>>>16,$^=ht>>>1,$=$*444984403&MASK_HIGH|$*60499&MASK_LOW,ht=ht*3301882366&MASK_HIGH|((ht<<16|$>>>16)*3120437893&MASK_HIGH)>>>16,$^=ht>>>1,($>>>0).toString(16).padStart(8,"0")+(ht>>>0).toString(16).padStart(8,"0")}}const SerializableEmpty=Object.freeze({map:null,hash:"",transfer:void 0});var up,so,nE,X_;class AnnotationStorage{constructor(){Kt(this,nE);Kt(this,up,!1);Kt(this,so,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue($,ht){const vt=St(this,so).get($);return vt===void 0?ht:Object.assign(ht,vt)}getRawValue($){return St(this,so).get($)}remove($){if(St(this,so).delete($),St(this,so).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const ht of St(this,so).values())if(ht instanceof AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue($,ht){const vt=St(this,so).get($);let bt=!1;if(vt!==void 0)for(const[Et,At]of Object.entries(ht))vt[Et]!==At&&(bt=!0,vt[Et]=At);else bt=!0,St(this,so).set($,ht);bt&&Ut(this,nE,X_).call(this),ht instanceof AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(ht.constructor._type)}has($){return St(this,so).has($)}getAll(){return St(this,so).size>0?objectFromMap(St(this,so)):null}setAll($){for(const[ht,vt]of Object.entries($))this.setValue(ht,vt)}get size(){return St(this,so).size}resetModified(){St(this,up)&&(zt(this,up,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(St(this,so).size===0)return SerializableEmpty;const $=new Map,ht=new MurmurHash3_64,vt=[],bt=Object.create(null);let Et=!1;for(const[At,_t]of St(this,so)){const wt=_t instanceof AnnotationEditor?_t.serialize(!1,bt):_t;wt&&($.set(At,wt),ht.update(`${At}:${JSON.stringify(wt)}`),Et||(Et=!!wt.bitmap))}if(Et)for(const At of $.values())At.bitmap&&vt.push(At.bitmap);return $.size>0?{map:$,hash:ht.hexdigest(),transfer:vt}:SerializableEmpty}get editorStats(){let $=null;const ht=new Map;for(const vt of St(this,so).values()){if(!(vt instanceof AnnotationEditor))continue;const bt=vt.telemetryFinalData;if(!bt)continue;const{type:Et}=bt;ht.has(Et)||ht.set(Et,Object.getPrototypeOf(vt).constructor),$||($=Object.create(null));const At=$[Et]||($[Et]=new Map);for(const[_t,wt]of Object.entries(bt)){if(_t==="type")continue;let Ct=At.get(_t);Ct||(Ct=new Map,At.set(_t,Ct));const xt=Ct.get(wt)??0;Ct.set(wt,xt+1)}}for(const[vt,bt]of ht)$[vt]=bt.computeTelemetryFinalData($[vt]);return $}}up=new WeakMap,so=new WeakMap,nE=new WeakSet,X_=function(){St(this,up)||(zt(this,up,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Zv;class PrintAnnotationStorage extends AnnotationStorage{constructor(ht){super();Kt(this,Zv);const{map:vt,hash:bt,transfer:Et}=ht.serializable,At=structuredClone(vt,Et?{transfer:Et}:null);zt(this,Zv,{map:At,hash:bt,transfer:Et})}get print(){unreachable("Should not call PrintAnnotationStorage.print")}get serializable(){return St(this,Zv)}}Zv=new WeakMap;var bm;class FontLoader{constructor({ownerDocument:$=globalThis.document,styleElement:ht=null}){Kt(this,bm,new Set);this._document=$,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace($){this.nativeFontFaces.add($),this._document.fonts.add($)}removeNativeFontFace($){this.nativeFontFaces.delete($),this._document.fonts.delete($)}insertRule($){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const ht=this.styleElement.sheet;ht.insertRule($,ht.cssRules.length)}clear(){for(const $ of this.nativeFontFaces)this._document.fonts.delete($);this.nativeFontFaces.clear(),St(this,bm).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:$,_inspectFont:ht}){if(!(!$||St(this,bm).has($.loadedName))){if(assert(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:vt,src:bt,style:Et}=$,At=new FontFace(vt,bt,Et);this.addNativeFontFace(At);try{await At.load(),St(this,bm).add(vt),ht==null||ht($)}catch{warn(`Cannot load system font: ${$.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(At)}return}unreachable("Not implemented: loadSystemFont without the Font Loading API.")}}async bind($){if($.attached||$.missingFile&&!$.systemFontInfo)return;if($.attached=!0,$.systemFontInfo){await this.loadSystemFont($);return}if(this.isFontLoadingAPISupported){const vt=$.createNativeFontFace();if(vt){this.addNativeFontFace(vt);try{await vt.loaded}catch(bt){throw warn(`Failed to load font '${vt.family}': '${bt}'.`),$.disableFontFace=!0,bt}}return}const ht=$.createFontFaceRule();if(ht){if(this.insertRule(ht),this.isSyncFontLoadingSupported)return;await new Promise(vt=>{const bt=this._queueLoadingCallback(vt);this._prepareFontLoadEvent($,bt)})}}get isFontLoadingAPISupported(){var ht;const $=!!((ht=this._document)!=null&&ht.fonts);return shadow(this,"isFontLoadingAPISupported",$)}get isSyncFontLoadingSupported(){let $=!1;return(isNodeJS||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&($=!0),shadow(this,"isSyncFontLoadingSupported",$)}_queueLoadingCallback($){function ht(){for(assert(!bt.done,"completeRequest() cannot be called twice."),bt.done=!0;vt.length>0&&vt[0].done;){const Et=vt.shift();setTimeout(Et.callback,0)}}const{loadingRequests:vt}=this,bt={done:!1,complete:ht,callback:$};return vt.push(bt),bt}get _loadTestFont(){const $=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return shadow(this,"_loadTestFont",$)}_prepareFontLoadEvent($,ht){function vt(Bt,Nt){return Bt.charCodeAt(Nt)<<24|Bt.charCodeAt(Nt+1)<<16|Bt.charCodeAt(Nt+2)<<8|Bt.charCodeAt(Nt+3)&255}function bt(Bt,Nt,Ht,Vt){const jt=Bt.substring(0,Nt),Xt=Bt.substring(Nt+Ht);return jt+Vt+Xt}let Et,At;const _t=this._document.createElement("canvas");_t.width=1,_t.height=1;const wt=_t.getContext("2d");let Ct=0;function xt(Bt,Nt){if(++Ct>30){warn("Load test font never loaded."),Nt();return}if(wt.font="30px "+Bt,wt.fillText(".",0,20),wt.getImageData(0,0,1,1).data[3]>0){Nt();return}setTimeout(xt.bind(null,Bt,Nt))}const Pt=`lt${Date.now()}${this.loadTestFontId++}`;let Rt=this._loadTestFont;Rt=bt(Rt,976,Pt.length,Pt);const Mt=16,Lt=1482184792;let Ot=vt(Rt,Mt);for(Et=0,At=Pt.length-3;Et<At;Et+=4)Ot=Ot-Lt+vt(Pt,Et)|0;Et<Pt.length&&(Ot=Ot-Lt+vt(Pt+"XXX",Et)|0),Rt=bt(Rt,Mt,4,string32(Ot));const Ft=`url(data:font/opentype;base64,${btoa(Rt)});`,Dt=`@font-face {font-family:"${Pt}";src:${Ft}}`;this.insertRule(Dt);const $t=this._document.createElement("div");$t.style.visibility="hidden",$t.style.width=$t.style.height="10px",$t.style.position="absolute",$t.style.top=$t.style.left="0px";for(const Bt of[$.loadedName,Pt]){const Nt=this._document.createElement("span");Nt.textContent="Hi",Nt.style.fontFamily=Bt,$t.append(Nt)}this._document.body.append($t),xt(Pt,()=>{$t.remove(),ht.complete()})}}bm=new WeakMap;class FontFaceObject{constructor($,{disableFontFace:ht=!1,inspectFont:vt=null}){this.compiledGlyphs=Object.create(null);for(const bt in $)this[bt]=$[bt];this.disableFontFace=ht===!0,this._inspectFont=vt}createNativeFontFace(){var ht;if(!this.data||this.disableFontFace)return null;let $;if(!this.cssFontInfo)$=new FontFace(this.loadedName,this.data,{});else{const vt={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(vt.style=`oblique ${this.cssFontInfo.italicAngle}deg`),$=new FontFace(this.cssFontInfo.fontFamily,this.data,vt)}return(ht=this._inspectFont)==null||ht.call(this,this),$}createFontFaceRule(){var bt;if(!this.data||this.disableFontFace)return null;const $=bytesToString(this.data),ht=`url(data:${this.mimetype};base64,${btoa($)});`;let vt;if(!this.cssFontInfo)vt=`@font-face {font-family:"${this.loadedName}";src:${ht}}`;else{let Et=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(Et+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),vt=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${Et}src:${ht}}`}return(bt=this._inspectFont)==null||bt.call(this,this,ht),vt}getPathGenerator($,ht){if(this.compiledGlyphs[ht]!==void 0)return this.compiledGlyphs[ht];let vt;try{vt=$.get(this.loadedName+"_path_"+ht)}catch(Et){warn(`getPathGenerator - ignoring character: "${Et}".`)}if(!Array.isArray(vt)||vt.length===0)return this.compiledGlyphs[ht]=function(Et,At){};const bt=[];for(let Et=0,At=vt.length;Et<At;)switch(vt[Et++]){case FontRenderOps.BEZIER_CURVE_TO:{const[_t,wt,Ct,xt,Pt,Rt]=vt.slice(Et,Et+6);bt.push(kt=>kt.bezierCurveTo(_t,wt,Ct,xt,Pt,Rt)),Et+=6}break;case FontRenderOps.MOVE_TO:{const[_t,wt]=vt.slice(Et,Et+2);bt.push(Ct=>Ct.moveTo(_t,wt)),Et+=2}break;case FontRenderOps.LINE_TO:{const[_t,wt]=vt.slice(Et,Et+2);bt.push(Ct=>Ct.lineTo(_t,wt)),Et+=2}break;case FontRenderOps.QUADRATIC_CURVE_TO:{const[_t,wt,Ct,xt]=vt.slice(Et,Et+4);bt.push(Pt=>Pt.quadraticCurveTo(_t,wt,Ct,xt)),Et+=4}break;case FontRenderOps.RESTORE:bt.push(_t=>_t.restore());break;case FontRenderOps.SAVE:bt.push(_t=>_t.save());break;case FontRenderOps.SCALE:assert(bt.length===2,"Scale command is only valid at the third position.");break;case FontRenderOps.TRANSFORM:{const[_t,wt,Ct,xt,Pt,Rt]=vt.slice(Et,Et+6);bt.push(kt=>kt.transform(_t,wt,Ct,xt,Pt,Rt)),Et+=6}break;case FontRenderOps.TRANSLATE:{const[_t,wt]=vt.slice(Et,Et+2);bt.push(Ct=>Ct.translate(_t,wt)),Et+=2}break}return this.compiledGlyphs[ht]=function(At,_t){bt[0](At),bt[1](At),At.scale(_t,-_t);for(let wt=2,Ct=bt.length;wt<Ct;wt++)bt[wt](At)}}}if(isNodeJS){var packageCapability=Promise.withResolvers(),packageMap=null;(async()=>{const $=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),[]),ht=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),vt=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),bt=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0);let Et,At;return new Map(Object.entries({fs:$,http:ht,https:vt,url:bt,canvas:Et,path2d:At}))})().then($=>{packageMap=$,packageCapability.resolve()},$=>{warn(`loadPackages: ${$}`),packageMap=new Map,packageCapability.resolve()})}class NodePackages{static get promise(){return packageCapability.promise}static get($){return packageMap==null?void 0:packageMap.get($)}}const node_utils_fetchData=function(_e){return NodePackages.get("fs").promises.readFile(_e).then(ht=>new Uint8Array(ht))};class NodeFilterFactory extends BaseFilterFactory{}class NodeCanvasFactory extends BaseCanvasFactory{_createCanvas($,ht){return NodePackages.get("canvas").createCanvas($,ht)}}class NodeCMapReaderFactory extends BaseCMapReaderFactory{_fetchData($,ht){return node_utils_fetchData($).then(vt=>({cMapData:vt,compressionType:ht}))}}class NodeStandardFontDataFactory extends BaseStandardFontDataFactory{_fetchData($){return node_utils_fetchData($)}}const PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(_e,$){if(!$)return;const ht=$[2]-$[0],vt=$[3]-$[1],bt=new Path2D;bt.rect($[0],$[1],ht,vt),_e.clip(bt)}class BaseShadingPattern{constructor(){this.constructor===BaseShadingPattern&&unreachable("Cannot initialize BaseShadingPattern.")}getPattern(){unreachable("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor($){super(),this._type=$[1],this._bbox=$[2],this._colorStops=$[3],this._p0=$[4],this._p1=$[5],this._r0=$[6],this._r1=$[7],this.matrix=null}_createGradient($){let ht;this._type==="axial"?ht=$.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(ht=$.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const vt of this._colorStops)ht.addColorStop(vt[0],vt[1]);return ht}getPattern($,ht,vt,bt){let Et;if(bt===PathType.STROKE||bt===PathType.FILL){const At=ht.current.getClippedPathBoundingBox(bt,getCurrentTransform($))||[0,0,0,0],_t=Math.ceil(At[2]-At[0])||1,wt=Math.ceil(At[3]-At[1])||1,Ct=ht.cachedCanvases.getCanvas("pattern",_t,wt,!0),xt=Ct.context;xt.clearRect(0,0,xt.canvas.width,xt.canvas.height),xt.beginPath(),xt.rect(0,0,xt.canvas.width,xt.canvas.height),xt.translate(-At[0],-At[1]),vt=Util.transform(vt,[1,0,0,1,At[0],At[1]]),xt.transform(...ht.baseTransform),this.matrix&&xt.transform(...this.matrix),applyBoundingBox(xt,this._bbox),xt.fillStyle=this._createGradient(xt),xt.fill(),Et=$.createPattern(Ct.canvas,"no-repeat");const Pt=new DOMMatrix(vt);Et.setTransform(Pt)}else applyBoundingBox($,this._bbox),Et=this._createGradient($);return Et}}function drawTriangle(_e,$,ht,vt,bt,Et,At,_t){const wt=$.coords,Ct=$.colors,xt=_e.data,Pt=_e.width*4;let Rt;wt[ht+1]>wt[vt+1]&&(Rt=ht,ht=vt,vt=Rt,Rt=Et,Et=At,At=Rt),wt[vt+1]>wt[bt+1]&&(Rt=vt,vt=bt,bt=Rt,Rt=At,At=_t,_t=Rt),wt[ht+1]>wt[vt+1]&&(Rt=ht,ht=vt,vt=Rt,Rt=Et,Et=At,At=Rt);const kt=(wt[ht]+$.offsetX)*$.scaleX,Mt=(wt[ht+1]+$.offsetY)*$.scaleY,Lt=(wt[vt]+$.offsetX)*$.scaleX,Ot=(wt[vt+1]+$.offsetY)*$.scaleY,Ft=(wt[bt]+$.offsetX)*$.scaleX,Dt=(wt[bt+1]+$.offsetY)*$.scaleY;if(Mt>=Dt)return;const $t=Ct[Et],Bt=Ct[Et+1],Nt=Ct[Et+2],Ht=Ct[At],Vt=Ct[At+1],jt=Ct[At+2],Xt=Ct[_t],Jt=Ct[_t+1],Gt=Ct[_t+2],en=Math.round(Mt),on=Math.round(Dt);let _n,ln,En,un,hn,nn,mn,xn;for(let rn=en;rn<=on;rn++){if(rn<Ot){const cn=rn<Mt?0:(Mt-rn)/(Mt-Ot);_n=kt-(kt-Lt)*cn,ln=$t-($t-Ht)*cn,En=Bt-(Bt-Vt)*cn,un=Nt-(Nt-jt)*cn}else{let cn;rn>Dt?cn=1:Ot===Dt?cn=0:cn=(Ot-rn)/(Ot-Dt),_n=Lt-(Lt-Ft)*cn,ln=Ht-(Ht-Xt)*cn,En=Vt-(Vt-Jt)*cn,un=jt-(jt-Gt)*cn}let qt;rn<Mt?qt=0:rn>Dt?qt=1:qt=(Mt-rn)/(Mt-Dt),hn=kt-(kt-Ft)*qt,nn=$t-($t-Xt)*qt,mn=Bt-(Bt-Jt)*qt,xn=Nt-(Nt-Gt)*qt;const Yt=Math.round(Math.min(_n,hn)),tn=Math.round(Math.max(_n,hn));let dn=Pt*rn+Yt*4;for(let cn=Yt;cn<=tn;cn++)qt=(_n-cn)/(_n-hn),qt<0?qt=0:qt>1&&(qt=1),xt[dn++]=ln-(ln-nn)*qt|0,xt[dn++]=En-(En-mn)*qt|0,xt[dn++]=un-(un-xn)*qt|0,xt[dn++]=255}}function drawFigure(_e,$,ht){const vt=$.coords,bt=$.colors;let Et,At;switch($.type){case"lattice":const _t=$.verticesPerRow,wt=Math.floor(vt.length/_t)-1,Ct=_t-1;for(Et=0;Et<wt;Et++){let xt=Et*_t;for(let Pt=0;Pt<Ct;Pt++,xt++)drawTriangle(_e,ht,vt[xt],vt[xt+1],vt[xt+_t],bt[xt],bt[xt+1],bt[xt+_t]),drawTriangle(_e,ht,vt[xt+_t+1],vt[xt+1],vt[xt+_t],bt[xt+_t+1],bt[xt+1],bt[xt+_t])}break;case"triangles":for(Et=0,At=vt.length;Et<At;Et+=3)drawTriangle(_e,ht,vt[Et],vt[Et+1],vt[Et+2],bt[Et],bt[Et+1],bt[Et+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor($){super(),this._coords=$[2],this._colors=$[3],this._figures=$[4],this._bounds=$[5],this._bbox=$[7],this._background=$[8],this.matrix=null}_createMeshCanvas($,ht,vt){const _t=Math.floor(this._bounds[0]),wt=Math.floor(this._bounds[1]),Ct=Math.ceil(this._bounds[2])-_t,xt=Math.ceil(this._bounds[3])-wt,Pt=Math.min(Math.ceil(Math.abs(Ct*$[0]*1.1)),3e3),Rt=Math.min(Math.ceil(Math.abs(xt*$[1]*1.1)),3e3),kt=Ct/Pt,Mt=xt/Rt,Lt={coords:this._coords,colors:this._colors,offsetX:-_t,offsetY:-wt,scaleX:1/kt,scaleY:1/Mt},Ot=Pt+2*2,Ft=Rt+2*2,Dt=vt.getCanvas("mesh",Ot,Ft,!1),$t=Dt.context,Bt=$t.createImageData(Pt,Rt);if(ht){const Ht=Bt.data;for(let Vt=0,jt=Ht.length;Vt<jt;Vt+=4)Ht[Vt]=ht[0],Ht[Vt+1]=ht[1],Ht[Vt+2]=ht[2],Ht[Vt+3]=255}for(const Ht of this._figures)drawFigure(Bt,Ht,Lt);return $t.putImageData(Bt,2,2),{canvas:Dt.canvas,offsetX:_t-2*kt,offsetY:wt-2*Mt,scaleX:kt,scaleY:Mt}}getPattern($,ht,vt,bt){applyBoundingBox($,this._bbox);let Et;if(bt===PathType.SHADING)Et=Util.singularValueDecompose2dScale(getCurrentTransform($));else if(Et=Util.singularValueDecompose2dScale(ht.baseTransform),this.matrix){const _t=Util.singularValueDecompose2dScale(this.matrix);Et=[Et[0]*_t[0],Et[1]*_t[1]]}const At=this._createMeshCanvas(Et,bt===PathType.SHADING?null:this._background,ht.cachedCanvases);return bt!==PathType.SHADING&&($.setTransform(...ht.baseTransform),this.matrix&&$.transform(...this.matrix)),$.translate(At.offsetX,At.offsetY),$.scale(At.scaleX,At.scaleY),$.createPattern(At.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}function getShadingPattern(_e){switch(_e[0]){case"RadialAxial":return new RadialAxialShadingPattern(_e);case"Mesh":return new MeshShadingPattern(_e);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${_e[0]}`)}const PaintType={COLORED:1,UNCOLORED:2},iE=class iE{constructor($,ht,vt,bt,Et){this.operatorList=$[2],this.matrix=$[3],this.bbox=$[4],this.xstep=$[5],this.ystep=$[6],this.paintType=$[7],this.tilingType=$[8],this.color=ht,this.ctx=vt,this.canvasGraphicsFactory=bt,this.baseTransform=Et}createPatternCanvas($){const ht=this.operatorList,vt=this.bbox,bt=this.xstep,Et=this.ystep,At=this.paintType,_t=this.tilingType,wt=this.color,Ct=this.canvasGraphicsFactory;info("TilingType: "+_t);const xt=vt[0],Pt=vt[1],Rt=vt[2],kt=vt[3],Mt=Util.singularValueDecompose2dScale(this.matrix),Lt=Util.singularValueDecompose2dScale(this.baseTransform),Ot=[Mt[0]*Lt[0],Mt[1]*Lt[1]],Ft=this.getSizeAndScale(bt,this.ctx.canvas.width,Ot[0]),Dt=this.getSizeAndScale(Et,this.ctx.canvas.height,Ot[1]),$t=$.cachedCanvases.getCanvas("pattern",Ft.size,Dt.size,!0),Bt=$t.context,Nt=Ct.createCanvasGraphics(Bt);Nt.groupLevel=$.groupLevel,this.setFillAndStrokeStyleToContext(Nt,At,wt);let Ht=xt,Vt=Pt,jt=Rt,Xt=kt;return xt<0&&(Ht=0,jt+=Math.abs(xt)),Pt<0&&(Vt=0,Xt+=Math.abs(Pt)),Bt.translate(-(Ft.scale*Ht),-(Dt.scale*Vt)),Nt.transform(Ft.scale,0,0,Dt.scale,0,0),Bt.save(),this.clipBbox(Nt,Ht,Vt,jt,Xt),Nt.baseTransform=getCurrentTransform(Nt.ctx),Nt.executeOperatorList(ht),Nt.endDrawing(),{canvas:$t.canvas,scaleX:Ft.scale,scaleY:Dt.scale,offsetX:Ht,offsetY:Vt}}getSizeAndScale($,ht,vt){$=Math.abs($);const bt=Math.max(iE.MAX_PATTERN_SIZE,ht);let Et=Math.ceil($*vt);return Et>=bt?Et=bt:vt=Et/$,{scale:vt,size:Et}}clipBbox($,ht,vt,bt,Et){const At=bt-ht,_t=Et-vt;$.ctx.rect(ht,vt,At,_t),$.current.updateRectMinMax(getCurrentTransform($.ctx),[ht,vt,bt,Et]),$.clip(),$.endPath()}setFillAndStrokeStyleToContext($,ht,vt){const bt=$.ctx,Et=$.current;switch(ht){case PaintType.COLORED:const At=this.ctx;bt.fillStyle=At.fillStyle,bt.strokeStyle=At.strokeStyle,Et.fillColor=At.fillStyle,Et.strokeColor=At.strokeStyle;break;case PaintType.UNCOLORED:const _t=Util.makeHexColor(vt[0],vt[1],vt[2]);bt.fillStyle=_t,bt.strokeStyle=_t,Et.fillColor=_t,Et.strokeColor=_t;break;default:throw new FormatError(`Unsupported paint type: ${ht}`)}}getPattern($,ht,vt,bt){let Et=vt;bt!==PathType.SHADING&&(Et=Util.transform(Et,ht.baseTransform),this.matrix&&(Et=Util.transform(Et,this.matrix)));const At=this.createPatternCanvas(ht);let _t=new DOMMatrix(Et);_t=_t.translate(At.offsetX,At.offsetY),_t=_t.scale(1/At.scaleX,1/At.scaleY);const wt=$.createPattern(At.canvas,"repeat");return wt.setTransform(_t),wt}};Sr(iE,"MAX_PATTERN_SIZE",3e3);let TilingPattern=iE;function convertBlackAndWhiteToRGBA({src:_e,srcPos:$=0,dest:ht,width:vt,height:bt,nonBlackColor:Et=4294967295,inverseDecode:At=!1}){const _t=util_FeatureTest.isLittleEndian?4278190080:255,[wt,Ct]=At?[Et,_t]:[_t,Et],xt=vt>>3,Pt=vt&7,Rt=_e.length;ht=new Uint32Array(ht.buffer);let kt=0;for(let Mt=0;Mt<bt;Mt++){for(const Ot=$+xt;$<Ot;$++){const Ft=$<Rt?_e[$]:255;ht[kt++]=Ft&128?Ct:wt,ht[kt++]=Ft&64?Ct:wt,ht[kt++]=Ft&32?Ct:wt,ht[kt++]=Ft&16?Ct:wt,ht[kt++]=Ft&8?Ct:wt,ht[kt++]=Ft&4?Ct:wt,ht[kt++]=Ft&2?Ct:wt,ht[kt++]=Ft&1?Ct:wt}if(Pt===0)continue;const Lt=$<Rt?_e[$++]:255;for(let Ot=0;Ot<Pt;Ot++)ht[kt++]=Lt&1<<7-Ot?Ct:wt}return{srcPos:$,destPos:kt}}const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,EXECUTION_TIME=15,EXECUTION_STEPS=10,MAX_SIZE_TO_COMPILE=1e3,FULL_CHUNK_HEIGHT=16;function mirrorContextOperations(_e,$){if(_e._removeMirroring)throw new Error("Context is already forwarding operations.");_e.__originalSave=_e.save,_e.__originalRestore=_e.restore,_e.__originalRotate=_e.rotate,_e.__originalScale=_e.scale,_e.__originalTranslate=_e.translate,_e.__originalTransform=_e.transform,_e.__originalSetTransform=_e.setTransform,_e.__originalResetTransform=_e.resetTransform,_e.__originalClip=_e.clip,_e.__originalMoveTo=_e.moveTo,_e.__originalLineTo=_e.lineTo,_e.__originalBezierCurveTo=_e.bezierCurveTo,_e.__originalRect=_e.rect,_e.__originalClosePath=_e.closePath,_e.__originalBeginPath=_e.beginPath,_e._removeMirroring=()=>{_e.save=_e.__originalSave,_e.restore=_e.__originalRestore,_e.rotate=_e.__originalRotate,_e.scale=_e.__originalScale,_e.translate=_e.__originalTranslate,_e.transform=_e.__originalTransform,_e.setTransform=_e.__originalSetTransform,_e.resetTransform=_e.__originalResetTransform,_e.clip=_e.__originalClip,_e.moveTo=_e.__originalMoveTo,_e.lineTo=_e.__originalLineTo,_e.bezierCurveTo=_e.__originalBezierCurveTo,_e.rect=_e.__originalRect,_e.closePath=_e.__originalClosePath,_e.beginPath=_e.__originalBeginPath,delete _e._removeMirroring},_e.save=function(){$.save(),this.__originalSave()},_e.restore=function(){$.restore(),this.__originalRestore()},_e.translate=function(vt,bt){$.translate(vt,bt),this.__originalTranslate(vt,bt)},_e.scale=function(vt,bt){$.scale(vt,bt),this.__originalScale(vt,bt)},_e.transform=function(vt,bt,Et,At,_t,wt){$.transform(vt,bt,Et,At,_t,wt),this.__originalTransform(vt,bt,Et,At,_t,wt)},_e.setTransform=function(vt,bt,Et,At,_t,wt){$.setTransform(vt,bt,Et,At,_t,wt),this.__originalSetTransform(vt,bt,Et,At,_t,wt)},_e.resetTransform=function(){$.resetTransform(),this.__originalResetTransform()},_e.rotate=function(vt){$.rotate(vt),this.__originalRotate(vt)},_e.clip=function(vt){$.clip(vt),this.__originalClip(vt)},_e.moveTo=function(ht,vt){$.moveTo(ht,vt),this.__originalMoveTo(ht,vt)},_e.lineTo=function(ht,vt){$.lineTo(ht,vt),this.__originalLineTo(ht,vt)},_e.bezierCurveTo=function(ht,vt,bt,Et,At,_t){$.bezierCurveTo(ht,vt,bt,Et,At,_t),this.__originalBezierCurveTo(ht,vt,bt,Et,At,_t)},_e.rect=function(ht,vt,bt,Et){$.rect(ht,vt,bt,Et),this.__originalRect(ht,vt,bt,Et)},_e.closePath=function(){$.closePath(),this.__originalClosePath()},_e.beginPath=function(){$.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor($){this.canvasFactory=$,this.cache=Object.create(null)}getCanvas($,ht,vt){let bt;return this.cache[$]!==void 0?(bt=this.cache[$],this.canvasFactory.reset(bt,ht,vt)):(bt=this.canvasFactory.create(ht,vt),this.cache[$]=bt),bt}delete($){delete this.cache[$]}clear(){for(const $ in this.cache){const ht=this.cache[$];this.canvasFactory.destroy(ht),delete this.cache[$]}}}function drawImageAtIntegerCoords(_e,$,ht,vt,bt,Et,At,_t,wt,Ct){const[xt,Pt,Rt,kt,Mt,Lt]=getCurrentTransform(_e);if(Pt===0&&Rt===0){const Dt=At*xt+Mt,$t=Math.round(Dt),Bt=_t*kt+Lt,Nt=Math.round(Bt),Ht=(At+wt)*xt+Mt,Vt=Math.abs(Math.round(Ht)-$t)||1,jt=(_t+Ct)*kt+Lt,Xt=Math.abs(Math.round(jt)-Nt)||1;return _e.setTransform(Math.sign(xt),0,0,Math.sign(kt),$t,Nt),_e.drawImage($,ht,vt,bt,Et,0,0,Vt,Xt),_e.setTransform(xt,Pt,Rt,kt,Mt,Lt),[Vt,Xt]}if(xt===0&&kt===0){const Dt=_t*Rt+Mt,$t=Math.round(Dt),Bt=At*Pt+Lt,Nt=Math.round(Bt),Ht=(_t+Ct)*Rt+Mt,Vt=Math.abs(Math.round(Ht)-$t)||1,jt=(At+wt)*Pt+Lt,Xt=Math.abs(Math.round(jt)-Nt)||1;return _e.setTransform(0,Math.sign(Pt),Math.sign(Rt),0,$t,Nt),_e.drawImage($,ht,vt,bt,Et,0,0,Xt,Vt),_e.setTransform(xt,Pt,Rt,kt,Mt,Lt),[Xt,Vt]}_e.drawImage($,ht,vt,bt,Et,At,_t,wt,Ct);const Ot=Math.hypot(xt,Pt),Ft=Math.hypot(Rt,kt);return[Ot*wt,Ft*Ct]}function compileType3Glyph(_e){const{width:$,height:ht}=_e;if($>MAX_SIZE_TO_COMPILE||ht>MAX_SIZE_TO_COMPILE)return null;const vt=1e3,bt=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),Et=$+1;let At=new Uint8Array(Et*(ht+1)),_t,wt,Ct;const xt=$+7&-8;let Pt=new Uint8Array(xt*ht),Rt=0;for(const Ft of _e.data){let Dt=128;for(;Dt>0;)Pt[Rt++]=Ft&Dt?0:255,Dt>>=1}let kt=0;for(Rt=0,Pt[Rt]!==0&&(At[0]=1,++kt),wt=1;wt<$;wt++)Pt[Rt]!==Pt[Rt+1]&&(At[wt]=Pt[Rt]?2:1,++kt),Rt++;for(Pt[Rt]!==0&&(At[wt]=2,++kt),_t=1;_t<ht;_t++){Rt=_t*xt,Ct=_t*Et,Pt[Rt-xt]!==Pt[Rt]&&(At[Ct]=Pt[Rt]?1:8,++kt);let Ft=(Pt[Rt]?4:0)+(Pt[Rt-xt]?8:0);for(wt=1;wt<$;wt++)Ft=(Ft>>2)+(Pt[Rt+1]?4:0)+(Pt[Rt-xt+1]?8:0),bt[Ft]&&(At[Ct+wt]=bt[Ft],++kt),Rt++;if(Pt[Rt-xt]!==Pt[Rt]&&(At[Ct+wt]=Pt[Rt]?2:4,++kt),kt>vt)return null}for(Rt=xt*(ht-1),Ct=_t*Et,Pt[Rt]!==0&&(At[Ct]=8,++kt),wt=1;wt<$;wt++)Pt[Rt]!==Pt[Rt+1]&&(At[Ct+wt]=Pt[Rt]?4:8,++kt),Rt++;if(Pt[Rt]!==0&&(At[Ct+wt]=4,++kt),kt>vt)return null;const Mt=new Int32Array([0,Et,-1,0,-Et,0,0,0,1]),Lt=new Path2D;for(_t=0;kt&&_t<=ht;_t++){let Ft=_t*Et;const Dt=Ft+$;for(;Ft<Dt&&!At[Ft];)Ft++;if(Ft===Dt)continue;Lt.moveTo(Ft%Et,_t);const $t=Ft;let Bt=At[Ft];do{const Nt=Mt[Bt];do Ft+=Nt;while(!At[Ft]);const Ht=At[Ft];Ht!==5&&Ht!==10?(Bt=Ht,At[Ft]=0):(Bt=Ht&51*Bt>>4,At[Ft]&=Bt>>2|Bt<<2),Lt.lineTo(Ft%Et,Ft/Et|0),At[Ft]||--kt}while($t!==Ft);--_t}return Pt=null,At=null,function(Ft){Ft.save(),Ft.scale(1/$,-1/ht),Ft.translate(0,-ht),Ft.fill(Lt),Ft.beginPath(),Ft.restore()}}class CanvasExtraState{constructor($,ht){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,$,ht])}clone(){const $=Object.create(this);return $.clipBox=this.clipBox.slice(),$}setCurrentPoint($,ht){this.x=$,this.y=ht}updatePathMinMax($,ht,vt){[ht,vt]=Util.applyTransform([ht,vt],$),this.minX=Math.min(this.minX,ht),this.minY=Math.min(this.minY,vt),this.maxX=Math.max(this.maxX,ht),this.maxY=Math.max(this.maxY,vt)}updateRectMinMax($,ht){const vt=Util.applyTransform(ht,$),bt=Util.applyTransform(ht.slice(2),$),Et=Util.applyTransform([ht[0],ht[3]],$),At=Util.applyTransform([ht[2],ht[1]],$);this.minX=Math.min(this.minX,vt[0],bt[0],Et[0],At[0]),this.minY=Math.min(this.minY,vt[1],bt[1],Et[1],At[1]),this.maxX=Math.max(this.maxX,vt[0],bt[0],Et[0],At[0]),this.maxY=Math.max(this.maxY,vt[1],bt[1],Et[1],At[1])}updateScalingPathMinMax($,ht){Util.scaleMinMax($,ht),this.minX=Math.min(this.minX,ht[0]),this.minY=Math.min(this.minY,ht[1]),this.maxX=Math.max(this.maxX,ht[2]),this.maxY=Math.max(this.maxY,ht[3])}updateCurvePathMinMax($,ht,vt,bt,Et,At,_t,wt,Ct,xt){const Pt=Util.bezierBoundingBox(ht,vt,bt,Et,At,_t,wt,Ct,xt);xt||this.updateRectMinMax($,Pt)}getPathBoundingBox($=PathType.FILL,ht=null){const vt=[this.minX,this.minY,this.maxX,this.maxY];if($===PathType.STROKE){ht||unreachable("Stroke bounding box must include transform.");const bt=Util.singularValueDecompose2dScale(ht),Et=bt[0]*this.lineWidth/2,At=bt[1]*this.lineWidth/2;vt[0]-=Et,vt[1]-=At,vt[2]+=Et,vt[3]+=At}return vt}updateClipFromPath(){const $=Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox($||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox($){this.clipBox=$,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox($=PathType.FILL,ht=null){return Util.intersect(this.clipBox,this.getPathBoundingBox($,ht))}}function putBinaryImageData(_e,$){if(typeof ImageData<"u"&&$ instanceof ImageData){_e.putImageData($,0,0);return}const ht=$.height,vt=$.width,bt=ht%FULL_CHUNK_HEIGHT,Et=(ht-bt)/FULL_CHUNK_HEIGHT,At=bt===0?Et:Et+1,_t=_e.createImageData(vt,FULL_CHUNK_HEIGHT);let wt=0,Ct;const xt=$.data,Pt=_t.data;let Rt,kt,Mt,Lt;if($.kind===util_ImageKind.GRAYSCALE_1BPP){const Ot=xt.byteLength,Ft=new Uint32Array(Pt.buffer,0,Pt.byteLength>>2),Dt=Ft.length,$t=vt+7>>3,Bt=4294967295,Nt=util_FeatureTest.isLittleEndian?4278190080:255;for(Rt=0;Rt<At;Rt++){for(Mt=Rt<Et?FULL_CHUNK_HEIGHT:bt,Ct=0,kt=0;kt<Mt;kt++){const Ht=Ot-wt;let Vt=0;const jt=Ht>$t?vt:Ht*8-7,Xt=jt&-8;let Jt=0,Gt=0;for(;Vt<Xt;Vt+=8)Gt=xt[wt++],Ft[Ct++]=Gt&128?Bt:Nt,Ft[Ct++]=Gt&64?Bt:Nt,Ft[Ct++]=Gt&32?Bt:Nt,Ft[Ct++]=Gt&16?Bt:Nt,Ft[Ct++]=Gt&8?Bt:Nt,Ft[Ct++]=Gt&4?Bt:Nt,Ft[Ct++]=Gt&2?Bt:Nt,Ft[Ct++]=Gt&1?Bt:Nt;for(;Vt<jt;Vt++)Jt===0&&(Gt=xt[wt++],Jt=128),Ft[Ct++]=Gt&Jt?Bt:Nt,Jt>>=1}for(;Ct<Dt;)Ft[Ct++]=0;_e.putImageData(_t,0,Rt*FULL_CHUNK_HEIGHT)}}else if($.kind===util_ImageKind.RGBA_32BPP){for(kt=0,Lt=vt*FULL_CHUNK_HEIGHT*4,Rt=0;Rt<Et;Rt++)Pt.set(xt.subarray(wt,wt+Lt)),wt+=Lt,_e.putImageData(_t,0,kt),kt+=FULL_CHUNK_HEIGHT;Rt<At&&(Lt=vt*bt*4,Pt.set(xt.subarray(wt,wt+Lt)),_e.putImageData(_t,0,kt))}else if($.kind===util_ImageKind.RGB_24BPP)for(Mt=FULL_CHUNK_HEIGHT,Lt=vt*Mt,Rt=0;Rt<At;Rt++){for(Rt>=Et&&(Mt=bt,Lt=vt*Mt),Ct=0,kt=Lt;kt--;)Pt[Ct++]=xt[wt++],Pt[Ct++]=xt[wt++],Pt[Ct++]=xt[wt++],Pt[Ct++]=255;_e.putImageData(_t,0,Rt*FULL_CHUNK_HEIGHT)}else throw new Error(`bad image kind: ${$.kind}`)}function putBinaryImageMask(_e,$){if($.bitmap){_e.drawImage($.bitmap,0,0);return}const ht=$.height,vt=$.width,bt=ht%FULL_CHUNK_HEIGHT,Et=(ht-bt)/FULL_CHUNK_HEIGHT,At=bt===0?Et:Et+1,_t=_e.createImageData(vt,FULL_CHUNK_HEIGHT);let wt=0;const Ct=$.data,xt=_t.data;for(let Pt=0;Pt<At;Pt++){const Rt=Pt<Et?FULL_CHUNK_HEIGHT:bt;({srcPos:wt}=convertBlackAndWhiteToRGBA({src:Ct,srcPos:wt,dest:xt,width:vt,height:Rt,nonBlackColor:0})),_e.putImageData(_t,0,Pt*FULL_CHUNK_HEIGHT)}}function copyCtxState(_e,$){const ht=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const vt of ht)_e[vt]!==void 0&&($[vt]=_e[vt]);_e.setLineDash!==void 0&&($.setLineDash(_e.getLineDash()),$.lineDashOffset=_e.lineDashOffset)}function resetCtxToDefault(_e){if(_e.strokeStyle=_e.fillStyle="#000000",_e.fillRule="nonzero",_e.globalAlpha=1,_e.lineWidth=1,_e.lineCap="butt",_e.lineJoin="miter",_e.miterLimit=10,_e.globalCompositeOperation="source-over",_e.font="10px sans-serif",_e.setLineDash!==void 0&&(_e.setLineDash([]),_e.lineDashOffset=0),!isNodeJS){const{filter:$}=_e;$!=="none"&&$!==""&&(_e.filter="none")}}function getImageSmoothingEnabled(_e,$){if($)return!0;const ht=Util.singularValueDecompose2dScale(_e);ht[0]=Math.fround(ht[0]),ht[1]=Math.fround(ht[1]);const vt=Math.fround((globalThis.devicePixelRatio||1)*PixelsPerInch.PDF_TO_CSS_UNITS);return ht[0]<=vt&&ht[1]<=vt}const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};var zu,WE,GE;const i_=class i_{constructor($,ht,vt,bt,Et,{optionalContentConfig:At,markedContentStack:_t=null},wt,Ct){Kt(this,zu);this.ctx=$,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=ht,this.objs=vt,this.canvasFactory=bt,this.filterFactory=Et,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=_t||[],this.optionalContentConfig=At,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=wt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Ct,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject($,ht=null){return typeof $=="string"?$.startsWith("g_")?this.commonObjs.get($):this.objs.get($):ht}beginDrawing({transform:$,viewport:ht,transparency:vt=!1,background:bt=null}){const Et=this.ctx.canvas.width,At=this.ctx.canvas.height,_t=this.ctx.fillStyle;if(this.ctx.fillStyle=bt||"#ffffff",this.ctx.fillRect(0,0,Et,At),this.ctx.fillStyle=_t,vt){const wt=this.cachedCanvases.getCanvas("transparent",Et,At);this.compositeCtx=this.ctx,this.transparentCanvas=wt.canvas,this.ctx=wt.context,this.ctx.save(),this.ctx.transform(...getCurrentTransform(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),$&&(this.ctx.transform(...$),this.outputScaleX=$[0],this.outputScaleY=$[0]),this.ctx.transform(...ht.transform),this.viewportScale=ht.scale,this.baseTransform=getCurrentTransform(this.ctx)}executeOperatorList($,ht,vt,bt){const Et=$.argsArray,At=$.fnArray;let _t=ht||0;const wt=Et.length;if(wt===_t)return _t;const Ct=wt-_t>EXECUTION_STEPS&&typeof vt=="function",xt=Ct?Date.now()+EXECUTION_TIME:0;let Pt=0;const Rt=this.commonObjs,kt=this.objs;let Mt;for(;;){if(bt!==void 0&&_t===bt.nextBreakPoint)return bt.breakIt(_t,vt),_t;if(Mt=At[_t],Mt!==OPS.dependency)this[Mt].apply(this,Et[_t]);else for(const Lt of Et[_t]){const Ot=Lt.startsWith("g_")?Rt:kt;if(!Ot.has(Lt))return Ot.get(Lt,vt),_t}if(_t++,_t===wt)return _t;if(Ct&&++Pt>EXECUTION_STEPS){if(Date.now()>xt)return vt(),_t;Pt=0}}}endDrawing(){Ut(this,zu,WE).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const $ of this._cachedBitmapsMap.values()){for(const ht of $.values())typeof HTMLCanvasElement<"u"&&ht instanceof HTMLCanvasElement&&(ht.width=ht.height=0);$.clear()}this._cachedBitmapsMap.clear(),Ut(this,zu,GE).call(this)}_scaleImage($,ht){const vt=$.width,bt=$.height;let Et=Math.max(Math.hypot(ht[0],ht[1]),1),At=Math.max(Math.hypot(ht[2],ht[3]),1),_t=vt,wt=bt,Ct="prescale1",xt,Pt;for(;Et>2&&_t>1||At>2&&wt>1;){let Rt=_t,kt=wt;Et>2&&_t>1&&(Rt=_t>=16384?Math.floor(_t/2)-1||1:Math.ceil(_t/2),Et/=_t/Rt),At>2&&wt>1&&(kt=wt>=16384?Math.floor(wt/2)-1||1:Math.ceil(wt)/2,At/=wt/kt),xt=this.cachedCanvases.getCanvas(Ct,Rt,kt),Pt=xt.context,Pt.clearRect(0,0,Rt,kt),Pt.drawImage($,0,0,_t,wt,0,0,Rt,kt),$=xt.canvas,_t=Rt,wt=kt,Ct=Ct==="prescale1"?"prescale2":"prescale1"}return{img:$,paintWidth:_t,paintHeight:wt}}_createMaskCanvas($){const ht=this.ctx,{width:vt,height:bt}=$,Et=this.current.fillColor,At=this.current.patternFill,_t=getCurrentTransform(ht);let wt,Ct,xt,Pt;if(($.bitmap||$.data)&&$.count>1){const jt=$.bitmap||$.data.buffer;Ct=JSON.stringify(At?_t:[_t.slice(0,4),Et]),wt=this._cachedBitmapsMap.get(jt),wt||(wt=new Map,this._cachedBitmapsMap.set(jt,wt));const Xt=wt.get(Ct);if(Xt&&!At){const Jt=Math.round(Math.min(_t[0],_t[2])+_t[4]),Gt=Math.round(Math.min(_t[1],_t[3])+_t[5]);return{canvas:Xt,offsetX:Jt,offsetY:Gt}}xt=Xt}xt||(Pt=this.cachedCanvases.getCanvas("maskCanvas",vt,bt),putBinaryImageMask(Pt.context,$));let Rt=Util.transform(_t,[1/vt,0,0,-1/bt,0,0]);Rt=Util.transform(Rt,[1,0,0,1,0,-bt]);const[kt,Mt,Lt,Ot]=Util.getAxialAlignedBoundingBox([0,0,vt,bt],Rt),Ft=Math.round(Lt-kt)||1,Dt=Math.round(Ot-Mt)||1,$t=this.cachedCanvases.getCanvas("fillCanvas",Ft,Dt),Bt=$t.context,Nt=kt,Ht=Mt;Bt.translate(-Nt,-Ht),Bt.transform(...Rt),xt||(xt=this._scaleImage(Pt.canvas,getCurrentTransformInverse(Bt)),xt=xt.img,wt&&At&&wt.set(Ct,xt)),Bt.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(Bt),$.interpolate),drawImageAtIntegerCoords(Bt,xt,0,0,xt.width,xt.height,0,0,vt,bt),Bt.globalCompositeOperation="source-in";const Vt=Util.transform(getCurrentTransformInverse(Bt),[1,0,0,1,-Nt,-Ht]);return Bt.fillStyle=At?Et.getPattern(ht,this,Vt,PathType.FILL):Et,Bt.fillRect(0,0,vt,bt),wt&&!At&&(this.cachedCanvases.delete("fillCanvas"),wt.set(Ct,$t.canvas)),{canvas:$t.canvas,offsetX:Math.round(Nt),offsetY:Math.round(Ht)}}setLineWidth($){$!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=$,this.ctx.lineWidth=$}setLineCap($){this.ctx.lineCap=LINE_CAP_STYLES[$]}setLineJoin($){this.ctx.lineJoin=LINE_JOIN_STYLES[$]}setMiterLimit($){this.ctx.miterLimit=$}setDash($,ht){const vt=this.ctx;vt.setLineDash!==void 0&&(vt.setLineDash($),vt.lineDashOffset=ht)}setRenderingIntent($){}setFlatness($){}setGState($){for(const[ht,vt]of $)switch(ht){case"LW":this.setLineWidth(vt);break;case"LC":this.setLineCap(vt);break;case"LJ":this.setLineJoin(vt);break;case"ML":this.setMiterLimit(vt);break;case"D":this.setDash(vt[0],vt[1]);break;case"RI":this.setRenderingIntent(vt);break;case"FL":this.setFlatness(vt);break;case"Font":this.setFont(vt[0],vt[1]);break;case"CA":this.current.strokeAlpha=vt;break;case"ca":this.current.fillAlpha=vt,this.ctx.globalAlpha=vt;break;case"BM":this.ctx.globalCompositeOperation=vt;break;case"SMask":this.current.activeSMask=vt?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(vt);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const $=this.inSMaskMode;this.current.activeSMask&&!$?this.beginSMaskMode():!this.current.activeSMask&&$&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const $=this.ctx.canvas.width,ht=this.ctx.canvas.height,vt="smaskGroupAt"+this.groupLevel,bt=this.cachedCanvases.getCanvas(vt,$,ht);this.suspendedCtx=this.ctx,this.ctx=bt.context;const Et=this.ctx;Et.setTransform(...getCurrentTransform(this.suspendedCtx)),copyCtxState(this.suspendedCtx,Et),mirrorContextOperations(Et,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose($){if(!this.current.activeSMask)return;$?($[0]=Math.floor($[0]),$[1]=Math.floor($[1]),$[2]=Math.ceil($[2]),$[3]=Math.ceil($[3])):$=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const ht=this.current.activeSMask,vt=this.suspendedCtx;this.composeSMask(vt,ht,this.ctx,$),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask($,ht,vt,bt){const Et=bt[0],At=bt[1],_t=bt[2]-Et,wt=bt[3]-At;_t===0||wt===0||(this.genericComposeSMask(ht.context,vt,_t,wt,ht.subtype,ht.backdrop,ht.transferMap,Et,At,ht.offsetX,ht.offsetY),$.save(),$.globalAlpha=1,$.globalCompositeOperation="source-over",$.setTransform(1,0,0,1,0,0),$.drawImage(vt.canvas,0,0),$.restore())}genericComposeSMask($,ht,vt,bt,Et,At,_t,wt,Ct,xt,Pt){let Rt=$.canvas,kt=wt-xt,Mt=Ct-Pt;if(At){if(kt<0||Mt<0||kt+vt>Rt.width||Mt+bt>Rt.height){const Ot=this.cachedCanvases.getCanvas("maskExtension",vt,bt),Ft=Ot.context;Ft.drawImage(Rt,-kt,-Mt),At.some(Dt=>Dt!==0)&&(Ft.globalCompositeOperation="destination-atop",Ft.fillStyle=Util.makeHexColor(...At),Ft.fillRect(0,0,vt,bt),Ft.globalCompositeOperation="source-over"),Rt=Ot.canvas,kt=Mt=0}else if(At.some(Ot=>Ot!==0)){$.save(),$.globalAlpha=1,$.setTransform(1,0,0,1,0,0);const Ot=new Path2D;Ot.rect(kt,Mt,vt,bt),$.clip(Ot),$.globalCompositeOperation="destination-atop",$.fillStyle=Util.makeHexColor(...At),$.fillRect(kt,Mt,vt,bt),$.restore()}}ht.save(),ht.globalAlpha=1,ht.setTransform(1,0,0,1,0,0),Et==="Alpha"&&_t?ht.filter=this.filterFactory.addAlphaFilter(_t):Et==="Luminosity"&&(ht.filter=this.filterFactory.addLuminosityFilter(_t));const Lt=new Path2D;Lt.rect(wt,Ct,vt,bt),ht.clip(Lt),ht.globalCompositeOperation="destination-in",ht.drawImage(Rt,kt,Mt,vt,bt,wt,Ct,vt,bt),ht.restore()}save(){this.inSMaskMode?(copyCtxState(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const $=this.current;this.stateStack.push($),this.current=$.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),copyCtxState(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform($,ht,vt,bt,Et,At){this.ctx.transform($,ht,vt,bt,Et,At),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath($,ht,vt){const bt=this.ctx,Et=this.current;let At=Et.x,_t=Et.y,wt,Ct;const xt=getCurrentTransform(bt),Pt=xt[0]===0&&xt[3]===0||xt[1]===0&&xt[2]===0,Rt=Pt?vt.slice(0):null;for(let kt=0,Mt=0,Lt=$.length;kt<Lt;kt++)switch($[kt]|0){case OPS.rectangle:At=ht[Mt++],_t=ht[Mt++];const Ot=ht[Mt++],Ft=ht[Mt++],Dt=At+Ot,$t=_t+Ft;bt.moveTo(At,_t),Ot===0||Ft===0?bt.lineTo(Dt,$t):(bt.lineTo(Dt,_t),bt.lineTo(Dt,$t),bt.lineTo(At,$t)),Pt||Et.updateRectMinMax(xt,[At,_t,Dt,$t]),bt.closePath();break;case OPS.moveTo:At=ht[Mt++],_t=ht[Mt++],bt.moveTo(At,_t),Pt||Et.updatePathMinMax(xt,At,_t);break;case OPS.lineTo:At=ht[Mt++],_t=ht[Mt++],bt.lineTo(At,_t),Pt||Et.updatePathMinMax(xt,At,_t);break;case OPS.curveTo:wt=At,Ct=_t,At=ht[Mt+4],_t=ht[Mt+5],bt.bezierCurveTo(ht[Mt],ht[Mt+1],ht[Mt+2],ht[Mt+3],At,_t),Et.updateCurvePathMinMax(xt,wt,Ct,ht[Mt],ht[Mt+1],ht[Mt+2],ht[Mt+3],At,_t,Rt),Mt+=6;break;case OPS.curveTo2:wt=At,Ct=_t,bt.bezierCurveTo(At,_t,ht[Mt],ht[Mt+1],ht[Mt+2],ht[Mt+3]),Et.updateCurvePathMinMax(xt,wt,Ct,At,_t,ht[Mt],ht[Mt+1],ht[Mt+2],ht[Mt+3],Rt),At=ht[Mt+2],_t=ht[Mt+3],Mt+=4;break;case OPS.curveTo3:wt=At,Ct=_t,At=ht[Mt+2],_t=ht[Mt+3],bt.bezierCurveTo(ht[Mt],ht[Mt+1],At,_t,At,_t),Et.updateCurvePathMinMax(xt,wt,Ct,ht[Mt],ht[Mt+1],At,_t,At,_t,Rt),Mt+=4;break;case OPS.closePath:bt.closePath();break}Pt&&Et.updateScalingPathMinMax(xt,Rt),Et.setCurrentPoint(At,_t)}closePath(){this.ctx.closePath()}stroke($=!0){const ht=this.ctx,vt=this.current.strokeColor;ht.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof vt=="object"&&(vt!=null&&vt.getPattern)?(ht.save(),ht.strokeStyle=vt.getPattern(ht,this,getCurrentTransformInverse(ht),PathType.STROKE),this.rescaleAndStroke(!1),ht.restore()):this.rescaleAndStroke(!0)),$&&this.consumePath(this.current.getClippedPathBoundingBox()),ht.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill($=!0){const ht=this.ctx,vt=this.current.fillColor,bt=this.current.patternFill;let Et=!1;bt&&(ht.save(),ht.fillStyle=vt.getPattern(ht,this,getCurrentTransformInverse(ht),PathType.FILL),Et=!0);const At=this.current.getClippedPathBoundingBox();this.contentVisible&&At!==null&&(this.pendingEOFill?(ht.fill("evenodd"),this.pendingEOFill=!1):ht.fill()),Et&&ht.restore(),$&&this.consumePath(At)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=NORMAL_CLIP}eoClip(){this.pendingClip=EO_CLIP}beginText(){this.current.textMatrix=IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const $=this.pendingTextPaths,ht=this.ctx;if($===void 0){ht.beginPath();return}ht.save(),ht.beginPath();for(const vt of $)ht.setTransform(...vt.transform),ht.translate(vt.x,vt.y),vt.addToPath(ht,vt.fontSize);ht.restore(),ht.clip(),ht.beginPath(),delete this.pendingTextPaths}setCharSpacing($){this.current.charSpacing=$}setWordSpacing($){this.current.wordSpacing=$}setHScale($){this.current.textHScale=$/100}setLeading($){this.current.leading=-$}setFont($,ht){var xt;const vt=this.commonObjs.get($),bt=this.current;if(!vt)throw new Error(`Can't find font for ${$}`);if(bt.fontMatrix=vt.fontMatrix||FONT_IDENTITY_MATRIX,(bt.fontMatrix[0]===0||bt.fontMatrix[3]===0)&&warn("Invalid font matrix for font "+$),ht<0?(ht=-ht,bt.fontDirection=-1):bt.fontDirection=1,this.current.font=vt,this.current.fontSize=ht,vt.isType3Font)return;const Et=vt.loadedName||"sans-serif",At=((xt=vt.systemFontInfo)==null?void 0:xt.css)||`"${Et}", ${vt.fallbackName}`;let _t="normal";vt.black?_t="900":vt.bold&&(_t="bold");const wt=vt.italic?"italic":"normal";let Ct=ht;ht<MIN_FONT_SIZE?Ct=MIN_FONT_SIZE:ht>MAX_FONT_SIZE&&(Ct=MAX_FONT_SIZE),this.current.fontSizeScale=ht/Ct,this.ctx.font=`${wt} ${_t} ${Ct}px ${At}`}setTextRenderingMode($){this.current.textRenderingMode=$}setTextRise($){this.current.textRise=$}moveText($,ht){this.current.x=this.current.lineX+=$,this.current.y=this.current.lineY+=ht}setLeadingMoveText($,ht){this.setLeading(-ht),this.moveText($,ht)}setTextMatrix($,ht,vt,bt,Et,At){this.current.textMatrix=[$,ht,vt,bt,Et,At],this.current.textMatrixScale=Math.hypot($,ht),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar($,ht,vt,bt){const Et=this.ctx,At=this.current,_t=At.font,wt=At.textRenderingMode,Ct=At.fontSize/At.fontSizeScale,xt=wt&TextRenderingMode.FILL_STROKE_MASK,Pt=!!(wt&TextRenderingMode.ADD_TO_PATH_FLAG),Rt=At.patternFill&&!_t.missingFile;let kt;(_t.disableFontFace||Pt||Rt)&&(kt=_t.getPathGenerator(this.commonObjs,$)),_t.disableFontFace||Rt?(Et.save(),Et.translate(ht,vt),Et.beginPath(),kt(Et,Ct),bt&&Et.setTransform(...bt),(xt===TextRenderingMode.FILL||xt===TextRenderingMode.FILL_STROKE)&&Et.fill(),(xt===TextRenderingMode.STROKE||xt===TextRenderingMode.FILL_STROKE)&&Et.stroke(),Et.restore()):((xt===TextRenderingMode.FILL||xt===TextRenderingMode.FILL_STROKE)&&Et.fillText($,ht,vt),(xt===TextRenderingMode.STROKE||xt===TextRenderingMode.FILL_STROKE)&&Et.strokeText($,ht,vt)),Pt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:getCurrentTransform(Et),x:ht,y:vt,fontSize:Ct,addToPath:kt})}get isFontSubpixelAAEnabled(){const{context:$}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);$.scale(1.5,1),$.fillText("I",0,10);const ht=$.getImageData(0,0,10,10).data;let vt=!1;for(let bt=3;bt<ht.length;bt+=4)if(ht[bt]>0&&ht[bt]<255){vt=!0;break}return shadow(this,"isFontSubpixelAAEnabled",vt)}showText($){const ht=this.current,vt=ht.font;if(vt.isType3Font)return this.showType3Text($);const bt=ht.fontSize;if(bt===0)return;const Et=this.ctx,At=ht.fontSizeScale,_t=ht.charSpacing,wt=ht.wordSpacing,Ct=ht.fontDirection,xt=ht.textHScale*Ct,Pt=$.length,Rt=vt.vertical,kt=Rt?1:-1,Mt=vt.defaultVMetrics,Lt=bt*ht.fontMatrix[0],Ot=ht.textRenderingMode===TextRenderingMode.FILL&&!vt.disableFontFace&&!ht.patternFill;Et.save(),Et.transform(...ht.textMatrix),Et.translate(ht.x,ht.y+ht.textRise),Ct>0?Et.scale(xt,-1):Et.scale(xt,1);let Ft;if(ht.patternFill){Et.save();const Ht=ht.fillColor.getPattern(Et,this,getCurrentTransformInverse(Et),PathType.FILL);Ft=getCurrentTransform(Et),Et.restore(),Et.fillStyle=Ht}let Dt=ht.lineWidth;const $t=ht.textMatrixScale;if($t===0||Dt===0){const Ht=ht.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;(Ht===TextRenderingMode.STROKE||Ht===TextRenderingMode.FILL_STROKE)&&(Dt=this.getSinglePixelWidth())}else Dt/=$t;if(At!==1&&(Et.scale(At,At),Dt/=At),Et.lineWidth=Dt,vt.isInvalidPDFjsFont){const Ht=[];let Vt=0;for(const jt of $)Ht.push(jt.unicode),Vt+=jt.width;Et.fillText(Ht.join(""),0,0),ht.x+=Vt*Lt*xt,Et.restore(),this.compose();return}let Bt=0,Nt;for(Nt=0;Nt<Pt;++Nt){const Ht=$[Nt];if(typeof Ht=="number"){Bt+=kt*Ht*bt/1e3;continue}let Vt=!1;const jt=(Ht.isSpace?wt:0)+_t,Xt=Ht.fontChar,Jt=Ht.accent;let Gt,en,on=Ht.width;if(Rt){const ln=Ht.vmetric||Mt,En=-(Ht.vmetric?ln[1]:on*.5)*Lt,un=ln[2]*Lt;on=ln?-ln[0]:on,Gt=En/At,en=(Bt+un)/At}else Gt=Bt/At,en=0;if(vt.remeasure&&on>0){const ln=Et.measureText(Xt).width*1e3/bt*At;if(on<ln&&this.isFontSubpixelAAEnabled){const En=on/ln;Vt=!0,Et.save(),Et.scale(En,1),Gt/=En}else on!==ln&&(Gt+=(on-ln)/2e3*bt/At)}if(this.contentVisible&&(Ht.isInFont||vt.missingFile)){if(Ot&&!Jt)Et.fillText(Xt,Gt,en);else if(this.paintChar(Xt,Gt,en,Ft),Jt){const ln=Gt+bt*Jt.offset.x/At,En=en-bt*Jt.offset.y/At;this.paintChar(Jt.fontChar,ln,En,Ft)}}const _n=Rt?on*Lt-jt*Ct:on*Lt+jt*Ct;Bt+=_n,Vt&&Et.restore()}Rt?ht.y-=Bt:ht.x+=Bt*xt,Et.restore(),this.compose()}showType3Text($){const ht=this.ctx,vt=this.current,bt=vt.font,Et=vt.fontSize,At=vt.fontDirection,_t=bt.vertical?1:-1,wt=vt.charSpacing,Ct=vt.wordSpacing,xt=vt.textHScale*At,Pt=vt.fontMatrix||FONT_IDENTITY_MATRIX,Rt=$.length,kt=vt.textRenderingMode===TextRenderingMode.INVISIBLE;let Mt,Lt,Ot,Ft;if(!(kt||Et===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,ht.save(),ht.transform(...vt.textMatrix),ht.translate(vt.x,vt.y),ht.scale(xt,At),Mt=0;Mt<Rt;++Mt){if(Lt=$[Mt],typeof Lt=="number"){Ft=_t*Lt*Et/1e3,this.ctx.translate(Ft,0),vt.x+=Ft*xt;continue}const Dt=(Lt.isSpace?Ct:0)+wt,$t=bt.charProcOperatorList[Lt.operatorListId];if(!$t){warn(`Type3 character "${Lt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Lt,this.save(),ht.scale(Et,Et),ht.transform(...Pt),this.executeOperatorList($t),this.restore()),Ot=Util.applyTransform([Lt.width,0],Pt)[0]*Et+Dt,ht.translate(Ot,0),vt.x+=Ot*xt}ht.restore(),this.processingType3=null}}setCharWidth($,ht){}setCharWidthAndBounds($,ht,vt,bt,Et,At){this.ctx.rect(vt,bt,Et-vt,At-bt),this.ctx.clip(),this.endPath()}getColorN_Pattern($){let ht;if($[0]==="TilingPattern"){const vt=$[1],bt=this.baseTransform||getCurrentTransform(this.ctx),Et={createCanvasGraphics:At=>new i_(At,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};ht=new TilingPattern($,vt,this.ctx,Et,bt)}else ht=this._getPattern($[1],$[2]);return ht}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor($,ht,vt){const bt=Util.makeHexColor($,ht,vt);this.ctx.strokeStyle=bt,this.current.strokeColor=bt}setFillRGBColor($,ht,vt){const bt=Util.makeHexColor($,ht,vt);this.ctx.fillStyle=bt,this.current.fillColor=bt,this.current.patternFill=!1}_getPattern($,ht=null){let vt;return this.cachedPatterns.has($)?vt=this.cachedPatterns.get($):(vt=getShadingPattern(this.getObject($)),this.cachedPatterns.set($,vt)),ht&&(vt.matrix=ht),vt}shadingFill($){if(!this.contentVisible)return;const ht=this.ctx;this.save();const vt=this._getPattern($);ht.fillStyle=vt.getPattern(ht,this,getCurrentTransformInverse(ht),PathType.SHADING);const bt=getCurrentTransformInverse(ht);if(bt){const{width:Et,height:At}=ht.canvas,[_t,wt,Ct,xt]=Util.getAxialAlignedBoundingBox([0,0,Et,At],bt);this.ctx.fillRect(_t,wt,Ct-_t,xt-wt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){unreachable("Should not call beginInlineImage")}beginImageData(){unreachable("Should not call beginImageData")}paintFormXObjectBegin($,ht){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),$&&this.transform(...$),this.baseTransform=getCurrentTransform(this.ctx),ht)){const vt=ht[2]-ht[0],bt=ht[3]-ht[1];this.ctx.rect(ht[0],ht[1],vt,bt),this.current.updateRectMinMax(getCurrentTransform(this.ctx),ht),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup($){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const ht=this.ctx;$.isolated||info("TODO: Support non-isolated groups."),$.knockout&&warn("Knockout groups not supported.");const vt=getCurrentTransform(ht);if($.matrix&&ht.transform(...$.matrix),!$.bbox)throw new Error("Bounding box is required.");let bt=Util.getAxialAlignedBoundingBox($.bbox,getCurrentTransform(ht));const Et=[0,0,ht.canvas.width,ht.canvas.height];bt=Util.intersect(bt,Et)||[0,0,0,0];const At=Math.floor(bt[0]),_t=Math.floor(bt[1]),wt=Math.max(Math.ceil(bt[2])-At,1),Ct=Math.max(Math.ceil(bt[3])-_t,1);this.current.startNewPathAndClipBox([0,0,wt,Ct]);let xt="groupAt"+this.groupLevel;$.smask&&(xt+="_smask_"+this.smaskCounter++%2);const Pt=this.cachedCanvases.getCanvas(xt,wt,Ct),Rt=Pt.context;Rt.translate(-At,-_t),Rt.transform(...vt),$.smask?this.smaskStack.push({canvas:Pt.canvas,context:Rt,offsetX:At,offsetY:_t,subtype:$.smask.subtype,backdrop:$.smask.backdrop,transferMap:$.smask.transferMap||null,startTransformInverse:null}):(ht.setTransform(1,0,0,1,0,0),ht.translate(At,_t),ht.save()),copyCtxState(ht,Rt),this.ctx=Rt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(ht),this.groupLevel++}endGroup($){if(!this.contentVisible)return;this.groupLevel--;const ht=this.ctx,vt=this.groupStack.pop();if(this.ctx=vt,this.ctx.imageSmoothingEnabled=!1,$.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const bt=getCurrentTransform(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...bt);const Et=Util.getAxialAlignedBoundingBox([0,0,ht.canvas.width,ht.canvas.height],bt);this.ctx.drawImage(ht.canvas,0,0),this.ctx.restore(),this.compose(Et)}}beginAnnotation($,ht,vt,bt,Et){if(Ut(this,zu,WE).call(this),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),ht){const At=ht[2]-ht[0],_t=ht[3]-ht[1];if(Et&&this.annotationCanvasMap){vt=vt.slice(),vt[4]-=ht[0],vt[5]-=ht[1],ht=ht.slice(),ht[0]=ht[1]=0,ht[2]=At,ht[3]=_t;const[wt,Ct]=Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx)),{viewportScale:xt}=this,Pt=Math.ceil(At*this.outputScaleX*xt),Rt=Math.ceil(_t*this.outputScaleY*xt);this.annotationCanvas=this.canvasFactory.create(Pt,Rt);const{canvas:kt,context:Mt}=this.annotationCanvas;this.annotationCanvasMap.set($,kt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Mt,this.ctx.save(),this.ctx.setTransform(wt,0,0,-Ct,0,_t*Ct),resetCtxToDefault(this.ctx)}else resetCtxToDefault(this.ctx),this.ctx.rect(ht[0],ht[1],At,_t),this.ctx.clip(),this.endPath()}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...vt),this.transform(...bt)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Ut(this,zu,GE).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject($){if(!this.contentVisible)return;const ht=$.count;$=this.getObject($.data,$),$.count=ht;const vt=this.ctx,bt=this.processingType3;if(bt&&(bt.compiled===void 0&&(bt.compiled=compileType3Glyph($)),bt.compiled)){bt.compiled(vt);return}const Et=this._createMaskCanvas($),At=Et.canvas;vt.save(),vt.setTransform(1,0,0,1,0,0),vt.drawImage(At,Et.offsetX,Et.offsetY),vt.restore(),this.compose()}paintImageMaskXObjectRepeat($,ht,vt=0,bt=0,Et,At){if(!this.contentVisible)return;$=this.getObject($.data,$);const _t=this.ctx;_t.save();const wt=getCurrentTransform(_t);_t.transform(ht,vt,bt,Et,0,0);const Ct=this._createMaskCanvas($);_t.setTransform(1,0,0,1,Ct.offsetX-wt[4],Ct.offsetY-wt[5]);for(let xt=0,Pt=At.length;xt<Pt;xt+=2){const Rt=Util.transform(wt,[ht,vt,bt,Et,At[xt],At[xt+1]]),[kt,Mt]=Util.applyTransform([0,0],Rt);_t.drawImage(Ct.canvas,kt,Mt)}_t.restore(),this.compose()}paintImageMaskXObjectGroup($){if(!this.contentVisible)return;const ht=this.ctx,vt=this.current.fillColor,bt=this.current.patternFill;for(const Et of $){const{data:At,width:_t,height:wt,transform:Ct}=Et,xt=this.cachedCanvases.getCanvas("maskCanvas",_t,wt),Pt=xt.context;Pt.save();const Rt=this.getObject(At,Et);putBinaryImageMask(Pt,Rt),Pt.globalCompositeOperation="source-in",Pt.fillStyle=bt?vt.getPattern(Pt,this,getCurrentTransformInverse(ht),PathType.FILL):vt,Pt.fillRect(0,0,_t,wt),Pt.restore(),ht.save(),ht.transform(...Ct),ht.scale(1,-1),drawImageAtIntegerCoords(ht,xt.canvas,0,0,_t,wt,0,-1,1,1),ht.restore()}this.compose()}paintImageXObject($){if(!this.contentVisible)return;const ht=this.getObject($);if(!ht){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(ht)}paintImageXObjectRepeat($,ht,vt,bt){if(!this.contentVisible)return;const Et=this.getObject($);if(!Et){warn("Dependent image isn't ready yet");return}const At=Et.width,_t=Et.height,wt=[];for(let Ct=0,xt=bt.length;Ct<xt;Ct+=2)wt.push({transform:[ht,0,0,vt,bt[Ct],bt[Ct+1]],x:0,y:0,w:At,h:_t});this.paintInlineImageXObjectGroup(Et,wt)}applyTransferMapsToCanvas($){return this.current.transferMaps!=="none"&&($.filter=this.current.transferMaps,$.drawImage($.canvas,0,0),$.filter="none"),$.canvas}applyTransferMapsToBitmap($){if(this.current.transferMaps==="none")return $.bitmap;const{bitmap:ht,width:vt,height:bt}=$,Et=this.cachedCanvases.getCanvas("inlineImage",vt,bt),At=Et.context;return At.filter=this.current.transferMaps,At.drawImage(ht,0,0),At.filter="none",Et.canvas}paintInlineImageXObject($){if(!this.contentVisible)return;const ht=$.width,vt=$.height,bt=this.ctx;if(this.save(),!isNodeJS){const{filter:_t}=bt;_t!=="none"&&_t!==""&&(bt.filter="none")}bt.scale(1/ht,-1/vt);let Et;if($.bitmap)Et=this.applyTransferMapsToBitmap($);else if(typeof HTMLElement=="function"&&$ instanceof HTMLElement||!$.data)Et=$;else{const wt=this.cachedCanvases.getCanvas("inlineImage",ht,vt).context;putBinaryImageData(wt,$),Et=this.applyTransferMapsToCanvas(wt)}const At=this._scaleImage(Et,getCurrentTransformInverse(bt));bt.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(bt),$.interpolate),drawImageAtIntegerCoords(bt,At.img,0,0,At.paintWidth,At.paintHeight,0,-vt,ht,vt),this.compose(),this.restore()}paintInlineImageXObjectGroup($,ht){if(!this.contentVisible)return;const vt=this.ctx;let bt;if($.bitmap)bt=$.bitmap;else{const Et=$.width,At=$.height,wt=this.cachedCanvases.getCanvas("inlineImage",Et,At).context;putBinaryImageData(wt,$),bt=this.applyTransferMapsToCanvas(wt)}for(const Et of ht)vt.save(),vt.transform(...Et.transform),vt.scale(1,-1),drawImageAtIntegerCoords(vt,bt,Et.x,Et.y,Et.w,Et.h,0,-1,1,1),vt.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint($){}markPointProps($,ht){}beginMarkedContent($){this.markedContentStack.push({visible:!0})}beginMarkedContentProps($,ht){$==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(ht)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath($){const ht=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose($);const vt=this.ctx;this.pendingClip&&(ht||(this.pendingClip===EO_CLIP?vt.clip("evenodd"):vt.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),vt.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const $=getCurrentTransform(this.ctx);if($[1]===0&&$[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs($[0]),Math.abs($[3]));else{const ht=Math.abs($[0]*$[3]-$[2]*$[1]),vt=Math.hypot($[0],$[2]),bt=Math.hypot($[1],$[3]);this._cachedGetSinglePixelWidth=Math.max(vt,bt)/ht}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:$}=this.current,{a:ht,b:vt,c:bt,d:Et}=this.ctx.getTransform();let At,_t;if(vt===0&&bt===0){const wt=Math.abs(ht),Ct=Math.abs(Et);if(wt===Ct)if($===0)At=_t=1/wt;else{const xt=wt*$;At=_t=xt<1?1/xt:1}else if($===0)At=1/wt,_t=1/Ct;else{const xt=wt*$,Pt=Ct*$;At=xt<1?1/xt:1,_t=Pt<1?1/Pt:1}}else{const wt=Math.abs(ht*Et-vt*bt),Ct=Math.hypot(ht,vt),xt=Math.hypot(bt,Et);if($===0)At=xt/wt,_t=Ct/wt;else{const Pt=$*wt;At=xt>Pt?xt/Pt:1,_t=Ct>Pt?Ct/Pt:1}}this._cachedScaleForStroking[0]=At,this._cachedScaleForStroking[1]=_t}return this._cachedScaleForStroking}rescaleAndStroke($){const{ctx:ht}=this,{lineWidth:vt}=this.current,[bt,Et]=this.getScaleForStroking();if(ht.lineWidth=vt||1,bt===1&&Et===1){ht.stroke();return}const At=ht.getLineDash();if($&&ht.save(),ht.scale(bt,Et),At.length>0){const _t=Math.max(bt,Et);ht.setLineDash(At.map(wt=>wt/_t)),ht.lineDashOffset/=_t}ht.stroke(),$&&ht.restore()}isContentVisible(){for(let $=this.markedContentStack.length-1;$>=0;$--)if(!this.markedContentStack[$].visible)return!1;return!0}};zu=new WeakSet,WE=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},GE=function(){if(this.pageColors){const $=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if($!=="none"){const ht=this.ctx.filter;this.ctx.filter=$,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=ht}}};let CanvasGraphics=i_;for(const _e in OPS)CanvasGraphics.prototype[_e]!==void 0&&(CanvasGraphics.prototype[OPS[_e]]=CanvasGraphics.prototype[_e]);var Jv,ey;class GlobalWorkerOptions{static get workerPort(){return St(this,Jv)}static set workerPort($){if(!(typeof Worker<"u"&&$ instanceof Worker)&&$!==null)throw new Error("Invalid `workerPort` type.");zt(this,Jv,$)}static get workerSrc(){return St(this,ey)}static set workerSrc($){if(typeof $!="string")throw new Error("Invalid `workerSrc` type.");zt(this,ey,$)}}Jv=new WeakMap,ey=new WeakMap,Kt(GlobalWorkerOptions,Jv,null),Kt(GlobalWorkerOptions,ey,"");const CallbackKind={UNKNOWN:0,DATA:1,ERROR:2},StreamKind={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wrapReason(_e){switch(_e instanceof Error||typeof _e=="object"&&_e!==null||unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),_e.name){case"AbortException":return new AbortException(_e.message);case"MissingPDFException":return new MissingPDFException(_e.message);case"PasswordException":return new PasswordException(_e.message,_e.code);case"UnexpectedResponseException":return new UnexpectedResponseException(_e.message,_e.status);case"UnknownErrorException":return new UnknownErrorException(_e.message,_e.details);default:return new UnknownErrorException(_e.message,_e.toString())}}var Dl,q_,Y_,m0;class MessageHandler{constructor($,ht,vt){Kt(this,Dl);this.sourceName=$,this.targetName=ht,this.comObj=vt,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=bt=>{const Et=bt.data;if(Et.targetName!==this.sourceName)return;if(Et.stream){Ut(this,Dl,Y_).call(this,Et);return}if(Et.callback){const _t=Et.callbackId,wt=this.callbackCapabilities[_t];if(!wt)throw new Error(`Cannot resolve callback ${_t}`);if(delete this.callbackCapabilities[_t],Et.callback===CallbackKind.DATA)wt.resolve(Et.data);else if(Et.callback===CallbackKind.ERROR)wt.reject(wrapReason(Et.reason));else throw new Error("Unexpected callback case");return}const At=this.actionHandler[Et.action];if(!At)throw new Error(`Unknown action from worker: ${Et.action}`);if(Et.callbackId){const _t=this.sourceName,wt=Et.sourceName;new Promise(function(Ct){Ct(At(Et.data))}).then(function(Ct){vt.postMessage({sourceName:_t,targetName:wt,callback:CallbackKind.DATA,callbackId:Et.callbackId,data:Ct})},function(Ct){vt.postMessage({sourceName:_t,targetName:wt,callback:CallbackKind.ERROR,callbackId:Et.callbackId,reason:wrapReason(Ct)})});return}if(Et.streamId){Ut(this,Dl,q_).call(this,Et);return}At(Et.data)},vt.addEventListener("message",this._onComObjOnMessage)}on($,ht){const vt=this.actionHandler;if(vt[$])throw new Error(`There is already an actionName called "${$}"`);vt[$]=ht}send($,ht,vt){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:$,data:ht},vt)}sendWithPromise($,ht,vt){const bt=this.callbackId++,Et=Promise.withResolvers();this.callbackCapabilities[bt]=Et;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:$,callbackId:bt,data:ht},vt)}catch(At){Et.reject(At)}return Et.promise}sendWithStream($,ht,vt,bt){const Et=this.streamId++,At=this.sourceName,_t=this.targetName,wt=this.comObj;return new ReadableStream({start:Ct=>{const xt=Promise.withResolvers();return this.streamControllers[Et]={controller:Ct,startCall:xt,pullCall:null,cancelCall:null,isClosed:!1},wt.postMessage({sourceName:At,targetName:_t,action:$,streamId:Et,data:ht,desiredSize:Ct.desiredSize},bt),xt.promise},pull:Ct=>{const xt=Promise.withResolvers();return this.streamControllers[Et].pullCall=xt,wt.postMessage({sourceName:At,targetName:_t,stream:StreamKind.PULL,streamId:Et,desiredSize:Ct.desiredSize}),xt.promise},cancel:Ct=>{assert(Ct instanceof Error,"cancel must have a valid reason");const xt=Promise.withResolvers();return this.streamControllers[Et].cancelCall=xt,this.streamControllers[Et].isClosed=!0,wt.postMessage({sourceName:At,targetName:_t,stream:StreamKind.CANCEL,streamId:Et,reason:wrapReason(Ct)}),xt.promise}},vt)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Dl=new WeakSet,q_=function($){const ht=$.streamId,vt=this.sourceName,bt=$.sourceName,Et=this.comObj,At=this,_t=this.actionHandler[$.action],wt={enqueue(Ct,xt=1,Pt){if(this.isCancelled)return;const Rt=this.desiredSize;this.desiredSize-=xt,Rt>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),Et.postMessage({sourceName:vt,targetName:bt,stream:StreamKind.ENQUEUE,streamId:ht,chunk:Ct},Pt)},close(){this.isCancelled||(this.isCancelled=!0,Et.postMessage({sourceName:vt,targetName:bt,stream:StreamKind.CLOSE,streamId:ht}),delete At.streamSinks[ht])},error(Ct){assert(Ct instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,Et.postMessage({sourceName:vt,targetName:bt,stream:StreamKind.ERROR,streamId:ht,reason:wrapReason(Ct)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:$.desiredSize,ready:null};wt.sinkCapability.resolve(),wt.ready=wt.sinkCapability.promise,this.streamSinks[ht]=wt,new Promise(function(Ct){Ct(_t($.data,wt))}).then(function(){Et.postMessage({sourceName:vt,targetName:bt,stream:StreamKind.START_COMPLETE,streamId:ht,success:!0})},function(Ct){Et.postMessage({sourceName:vt,targetName:bt,stream:StreamKind.START_COMPLETE,streamId:ht,reason:wrapReason(Ct)})})},Y_=function($){const ht=$.streamId,vt=this.sourceName,bt=$.sourceName,Et=this.comObj,At=this.streamControllers[ht],_t=this.streamSinks[ht];switch($.stream){case StreamKind.START_COMPLETE:$.success?At.startCall.resolve():At.startCall.reject(wrapReason($.reason));break;case StreamKind.PULL_COMPLETE:$.success?At.pullCall.resolve():At.pullCall.reject(wrapReason($.reason));break;case StreamKind.PULL:if(!_t){Et.postMessage({sourceName:vt,targetName:bt,stream:StreamKind.PULL_COMPLETE,streamId:ht,success:!0});break}_t.desiredSize<=0&&$.desiredSize>0&&_t.sinkCapability.resolve(),_t.desiredSize=$.desiredSize,new Promise(function(wt){var Ct;wt((Ct=_t.onPull)==null?void 0:Ct.call(_t))}).then(function(){Et.postMessage({sourceName:vt,targetName:bt,stream:StreamKind.PULL_COMPLETE,streamId:ht,success:!0})},function(wt){Et.postMessage({sourceName:vt,targetName:bt,stream:StreamKind.PULL_COMPLETE,streamId:ht,reason:wrapReason(wt)})});break;case StreamKind.ENQUEUE:if(assert(At,"enqueue should have stream controller"),At.isClosed)break;At.controller.enqueue($.chunk);break;case StreamKind.CLOSE:if(assert(At,"close should have stream controller"),At.isClosed)break;At.isClosed=!0,At.controller.close(),Ut(this,Dl,m0).call(this,At,ht);break;case StreamKind.ERROR:assert(At,"error should have stream controller"),At.controller.error(wrapReason($.reason)),Ut(this,Dl,m0).call(this,At,ht);break;case StreamKind.CANCEL_COMPLETE:$.success?At.cancelCall.resolve():At.cancelCall.reject(wrapReason($.reason)),Ut(this,Dl,m0).call(this,At,ht);break;case StreamKind.CANCEL:if(!_t)break;new Promise(function(wt){var Ct;wt((Ct=_t.onCancel)==null?void 0:Ct.call(_t,wrapReason($.reason)))}).then(function(){Et.postMessage({sourceName:vt,targetName:bt,stream:StreamKind.CANCEL_COMPLETE,streamId:ht,success:!0})},function(wt){Et.postMessage({sourceName:vt,targetName:bt,stream:StreamKind.CANCEL_COMPLETE,streamId:ht,reason:wrapReason(wt)})}),_t.sinkCapability.reject(wrapReason($.reason)),_t.isCancelled=!0,delete this.streamSinks[ht];break;default:throw new Error("Unexpected stream case")}},m0=async function($,ht){var vt,bt,Et;await Promise.allSettled([(vt=$.startCall)==null?void 0:vt.promise,(bt=$.pullCall)==null?void 0:bt.promise,(Et=$.cancelCall)==null?void 0:Et.promise]),delete this.streamControllers[ht]};var dp,ty;class Metadata{constructor({parsedData:$,rawData:ht}){Kt(this,dp);Kt(this,ty);zt(this,dp,$),zt(this,ty,ht)}getRaw(){return St(this,ty)}get($){return St(this,dp).get($)??null}getAll(){return objectFromMap(St(this,dp))}has($){return St(this,dp).has($)}}dp=new WeakMap,ty=new WeakMap;const INTERNAL=Symbol("INTERNAL");var ny,iy,ry,Em;class OptionalContentGroup{constructor($,{name:ht,intent:vt,usage:bt}){Kt(this,ny,!1);Kt(this,iy,!1);Kt(this,ry,!1);Kt(this,Em,!0);zt(this,ny,!!($&RenderingIntentFlag.DISPLAY)),zt(this,iy,!!($&RenderingIntentFlag.PRINT)),this.name=ht,this.intent=vt,this.usage=bt}get visible(){if(St(this,ry))return St(this,Em);if(!St(this,Em))return!1;const{print:$,view:ht}=this.usage;return St(this,ny)?(ht==null?void 0:ht.viewState)!=="OFF":St(this,iy)?($==null?void 0:$.printState)!=="OFF":!0}_setVisible($,ht,vt=!1){$!==INTERNAL&&unreachable("Internal method `_setVisible` called."),zt(this,ry,vt),zt(this,Em,ht)}}ny=new WeakMap,iy=new WeakMap,ry=new WeakMap,Em=new WeakMap;var Tu,ws,Am,_m,sy,KE;class OptionalContentConfig{constructor($,ht=RenderingIntentFlag.DISPLAY){Kt(this,sy);Kt(this,Tu,null);Kt(this,ws,new Map);Kt(this,Am,null);Kt(this,_m,null);if(this.renderingIntent=ht,this.name=null,this.creator=null,$!==null){this.name=$.name,this.creator=$.creator,zt(this,_m,$.order);for(const vt of $.groups)St(this,ws).set(vt.id,new OptionalContentGroup(ht,vt));if($.baseState==="OFF")for(const vt of St(this,ws).values())vt._setVisible(INTERNAL,!1);for(const vt of $.on)St(this,ws).get(vt)._setVisible(INTERNAL,!0);for(const vt of $.off)St(this,ws).get(vt)._setVisible(INTERNAL,!1);zt(this,Am,this.getHash())}}isVisible($){if(St(this,ws).size===0)return!0;if(!$)return info("Optional content group not defined."),!0;if($.type==="OCG")return St(this,ws).has($.id)?St(this,ws).get($.id).visible:(warn(`Optional content group not found: ${$.id}`),!0);if($.type==="OCMD"){if($.expression)return Ut(this,sy,KE).call(this,$.expression);if(!$.policy||$.policy==="AnyOn"){for(const ht of $.ids){if(!St(this,ws).has(ht))return warn(`Optional content group not found: ${ht}`),!0;if(St(this,ws).get(ht).visible)return!0}return!1}else if($.policy==="AllOn"){for(const ht of $.ids){if(!St(this,ws).has(ht))return warn(`Optional content group not found: ${ht}`),!0;if(!St(this,ws).get(ht).visible)return!1}return!0}else if($.policy==="AnyOff"){for(const ht of $.ids){if(!St(this,ws).has(ht))return warn(`Optional content group not found: ${ht}`),!0;if(!St(this,ws).get(ht).visible)return!0}return!1}else if($.policy==="AllOff"){for(const ht of $.ids){if(!St(this,ws).has(ht))return warn(`Optional content group not found: ${ht}`),!0;if(St(this,ws).get(ht).visible)return!1}return!0}return warn(`Unknown optional content policy ${$.policy}.`),!0}return warn(`Unknown group type ${$.type}.`),!0}setVisibility($,ht=!0){const vt=St(this,ws).get($);if(!vt){warn(`Optional content group not found: ${$}`);return}vt._setVisible(INTERNAL,!!ht,!0),zt(this,Tu,null)}setOCGState({state:$,preserveRB:ht}){let vt;for(const bt of $){switch(bt){case"ON":case"OFF":case"Toggle":vt=bt;continue}const Et=St(this,ws).get(bt);if(Et)switch(vt){case"ON":Et._setVisible(INTERNAL,!0);break;case"OFF":Et._setVisible(INTERNAL,!1);break;case"Toggle":Et._setVisible(INTERNAL,!Et.visible);break}}zt(this,Tu,null)}get hasInitialVisibility(){return St(this,Am)===null||this.getHash()===St(this,Am)}getOrder(){return St(this,ws).size?St(this,_m)?St(this,_m).slice():[...St(this,ws).keys()]:null}getGroups(){return St(this,ws).size>0?objectFromMap(St(this,ws)):null}getGroup($){return St(this,ws).get($)||null}getHash(){if(St(this,Tu)!==null)return St(this,Tu);const $=new MurmurHash3_64;for(const[ht,vt]of St(this,ws))$.update(`${ht}:${vt.visible}`);return zt(this,Tu,$.hexdigest())}}Tu=new WeakMap,ws=new WeakMap,Am=new WeakMap,_m=new WeakMap,sy=new WeakSet,KE=function($){const ht=$.length;if(ht<2)return!0;const vt=$[0];for(let bt=1;bt<ht;bt++){const Et=$[bt];let At;if(Array.isArray(Et))At=Ut(this,sy,KE).call(this,Et);else if(St(this,ws).has(Et))At=St(this,ws).get(Et).visible;else return warn(`Optional content group not found: ${Et}`),!0;switch(vt){case"And":if(!At)return!1;break;case"Or":if(At)return!0;break;case"Not":return!At;default:return!0}}return vt==="And"};class PDFDataTransportStream{constructor($,{disableRange:ht=!1,disableStream:vt=!1}){assert($,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:bt,initialData:Et,progressiveDone:At,contentDispositionFilename:_t}=$;if(this._queuedChunks=[],this._progressiveDone=At,this._contentDispositionFilename=_t,(Et==null?void 0:Et.length)>0){const wt=Et instanceof Uint8Array&&Et.byteLength===Et.buffer.byteLength?Et.buffer:new Uint8Array(Et).buffer;this._queuedChunks.push(wt)}this._pdfDataRangeTransport=$,this._isStreamingSupported=!vt,this._isRangeSupported=!ht,this._contentLength=bt,this._fullRequestReader=null,this._rangeReaders=[],$.addRangeListener((wt,Ct)=>{this._onReceiveData({begin:wt,chunk:Ct})}),$.addProgressListener((wt,Ct)=>{this._onProgress({loaded:wt,total:Ct})}),$.addProgressiveReadListener(wt=>{this._onReceiveData({chunk:wt})}),$.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),$.transportReady()}_onReceiveData({begin:$,chunk:ht}){const vt=ht instanceof Uint8Array&&ht.byteLength===ht.buffer.byteLength?ht.buffer:new Uint8Array(ht).buffer;if($===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(vt):this._queuedChunks.push(vt);else{const bt=this._rangeReaders.some(function(Et){return Et._begin!==$?!1:(Et._enqueue(vt),!0)});assert(bt,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var $;return(($=this._fullRequestReader)==null?void 0:$._loaded)??0}_onProgress($){var ht,vt,bt,Et;$.total===void 0?(vt=(ht=this._rangeReaders[0])==null?void 0:ht.onProgress)==null||vt.call(ht,{loaded:$.loaded}):(Et=(bt=this._fullRequestReader)==null?void 0:bt.onProgress)==null||Et.call(bt,{loaded:$.loaded,total:$.total})}_onProgressiveDone(){var $;($=this._fullRequestReader)==null||$.progressiveDone(),this._progressiveDone=!0}_removeRangeReader($){const ht=this._rangeReaders.indexOf($);ht>=0&&this._rangeReaders.splice(ht,1)}getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const $=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,$,this._progressiveDone,this._contentDispositionFilename)}getRangeReader($,ht){if(ht<=this._progressiveDataLength)return null;const vt=new PDFDataTransportStreamRangeReader(this,$,ht);return this._pdfDataRangeTransport.requestDataRange($,ht),this._rangeReaders.push(vt),vt}cancelAllRequests($){var ht;(ht=this._fullRequestReader)==null||ht.cancel($);for(const vt of this._rangeReaders.slice(0))vt.cancel($);this._pdfDataRangeTransport.abort()}}class PDFDataTransportStreamReader{constructor($,ht,vt=!1,bt=null){this._stream=$,this._done=vt||!1,this._filename=isPdfFile(bt)?bt:null,this._queuedChunks=ht||[],this._loaded=0;for(const Et of this._queuedChunks)this._loaded+=Et.byteLength;this._requests=[],this._headersReady=Promise.resolve(),$._fullRequestReader=this,this.onProgress=null}_enqueue($){this._done||(this._requests.length>0?this._requests.shift().resolve({value:$,done:!1}):this._queuedChunks.push($),this._loaded+=$.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const $=Promise.withResolvers();return this._requests.push($),$.promise}cancel($){this._done=!0;for(const ht of this._requests)ht.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor($,ht,vt){this._stream=$,this._begin=ht,this._end=vt,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue($){if(!this._done){if(this._requests.length===0)this._queuedChunk=$;else{this._requests.shift().resolve({value:$,done:!1});for(const vt of this._requests)vt.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const ht=this._queuedChunk;return this._queuedChunk=null,{value:ht,done:!1}}if(this._done)return{value:void 0,done:!0};const $=Promise.withResolvers();return this._requests.push($),$.promise}cancel($){this._done=!0;for(const ht of this._requests)ht.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function getFilenameFromContentDispositionHeader(_e){let $=!0,ht=vt("filename\\*","i").exec(_e);if(ht){ht=ht[1];let xt=_t(ht);return xt=unescape(xt),xt=wt(xt),xt=Ct(xt),Et(xt)}if(ht=At(_e),ht){const xt=Ct(ht);return Et(xt)}if(ht=vt("filename","i").exec(_e),ht){ht=ht[1];let xt=_t(ht);return xt=Ct(xt),Et(xt)}function vt(xt,Pt){return new RegExp("(?:^|;)\\s*"+xt+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Pt)}function bt(xt,Pt){if(xt){if(!/^[\x00-\xFF]+$/.test(Pt))return Pt;try{const Rt=new TextDecoder(xt,{fatal:!0}),kt=stringToBytes(Pt);Pt=Rt.decode(kt),$=!1}catch{}}return Pt}function Et(xt){return $&&/[\x80-\xff]/.test(xt)&&(xt=bt("utf-8",xt),$&&(xt=bt("iso-8859-1",xt))),xt}function At(xt){const Pt=[];let Rt;const kt=vt("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(Rt=kt.exec(xt))!==null;){let[,Lt,Ot,Ft]=Rt;if(Lt=parseInt(Lt,10),Lt in Pt){if(Lt===0)break;continue}Pt[Lt]=[Ot,Ft]}const Mt=[];for(let Lt=0;Lt<Pt.length&&Lt in Pt;++Lt){let[Ot,Ft]=Pt[Lt];Ft=_t(Ft),Ot&&(Ft=unescape(Ft),Lt===0&&(Ft=wt(Ft))),Mt.push(Ft)}return Mt.join("")}function _t(xt){if(xt.startsWith('"')){const Pt=xt.slice(1).split('\\"');for(let Rt=0;Rt<Pt.length;++Rt){const kt=Pt[Rt].indexOf('"');kt!==-1&&(Pt[Rt]=Pt[Rt].slice(0,kt),Pt.length=Rt+1),Pt[Rt]=Pt[Rt].replaceAll(/\\(.)/g,"$1")}xt=Pt.join('"')}return xt}function wt(xt){const Pt=xt.indexOf("'");if(Pt===-1)return xt;const Rt=xt.slice(0,Pt),Mt=xt.slice(Pt+1).replace(/^[^']*'/,"");return bt(Rt,Mt)}function Ct(xt){return!xt.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(xt)?xt:xt.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Pt,Rt,kt,Mt){if(kt==="q"||kt==="Q")return Mt=Mt.replaceAll("_"," "),Mt=Mt.replaceAll(/=([0-9a-fA-F]{2})/g,function(Lt,Ot){return String.fromCharCode(parseInt(Ot,16))}),bt(Rt,Mt);try{Mt=atob(Mt)}catch{}return bt(Rt,Mt)})}return""}function validateRangeRequestCapabilities({getResponseHeader:_e,isHttp:$,rangeChunkSize:ht,disableRange:vt}){const bt={allowRangeRequests:!1,suggestedLength:void 0},Et=parseInt(_e("Content-Length"),10);return!Number.isInteger(Et)||(bt.suggestedLength=Et,Et<=2*ht)||vt||!$||_e("Accept-Ranges")!=="bytes"||(_e("Content-Encoding")||"identity")!=="identity"||(bt.allowRangeRequests=!0),bt}function extractFilenameFromHeader(_e){const $=_e("Content-Disposition");if($){let ht=getFilenameFromContentDispositionHeader($);if(ht.includes("%"))try{ht=decodeURIComponent(ht)}catch{}if(isPdfFile(ht))return ht}return null}function createResponseStatusError(_e,$){return _e===404||_e===0&&$.startsWith("file:")?new MissingPDFException('Missing PDF "'+$+'".'):new UnexpectedResponseException(`Unexpected server response (${_e}) while retrieving PDF "${$}".`,_e)}function validateResponseStatus(_e){return _e===200||_e===206}function createFetchOptions(_e,$,ht){return{method:"GET",headers:_e,signal:ht.signal,mode:"cors",credentials:$?"include":"same-origin",redirect:"follow"}}function createHeaders(_e){const $=new Headers;for(const ht in _e){const vt=_e[ht];vt!==void 0&&$.append(ht,vt)}return $}function getArrayBuffer(_e){return _e instanceof Uint8Array?_e.buffer:_e instanceof ArrayBuffer?_e:(warn(`getArrayBuffer - unexpected data format: ${_e}`),new Uint8Array(_e).buffer)}class PDFFetchStream{constructor($){this.source=$,this.isHttp=/^https?:/i.test($.url),this.httpHeaders=this.isHttp&&$.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var $;return(($=this._fullRequestReader)==null?void 0:$._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader($,ht){if(ht<=this._progressiveDataLength)return null;const vt=new PDFFetchStreamRangeReader(this,$,ht);return this._rangeRequestReaders.push(vt),vt}cancelAllRequests($){var ht;(ht=this._fullRequestReader)==null||ht.cancel($);for(const vt of this._rangeRequestReaders.slice(0))vt.cancel($)}}class PDFFetchStreamReader{constructor($){this._stream=$,this._reader=null,this._loaded=0,this._filename=null;const ht=$.source;this._withCredentials=ht.withCredentials||!1,this._contentLength=ht.length,this._headersCapability=Promise.withResolvers(),this._disableRange=ht.disableRange||!1,this._rangeChunkSize=ht.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!ht.disableStream,this._isRangeSupported=!ht.disableRange,this._headers=createHeaders(this._stream.httpHeaders);const vt=ht.url;fetch(vt,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(bt=>{if(!validateResponseStatus(bt.status))throw createResponseStatusError(bt.status,vt);this._reader=bt.body.getReader(),this._headersCapability.resolve();const Et=wt=>bt.headers.get(wt),{allowRangeRequests:At,suggestedLength:_t}=validateRangeRequestCapabilities({getResponseHeader:Et,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=At,this._contentLength=_t||this._contentLength,this._filename=extractFilenameFromHeader(Et),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var vt;await this._headersCapability.promise;const{value:$,done:ht}=await this._reader.read();return ht?{value:$,done:ht}:(this._loaded+=$.byteLength,(vt=this.onProgress)==null||vt.call(this,{loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer($),done:!1})}cancel($){var ht;(ht=this._reader)==null||ht.cancel($),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor($,ht,vt){this._stream=$,this._reader=null,this._loaded=0;const bt=$.source;this._withCredentials=bt.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!bt.disableStream,this._abortController=new AbortController,this._headers=createHeaders(this._stream.httpHeaders),this._headers.append("Range",`bytes=${ht}-${vt-1}`);const Et=bt.url;fetch(Et,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(At=>{if(!validateResponseStatus(At.status))throw createResponseStatusError(At.status,Et);this._readCapability.resolve(),this._reader=At.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var vt;await this._readCapability.promise;const{value:$,done:ht}=await this._reader.read();return ht?{value:$,done:ht}:(this._loaded+=$.byteLength,(vt=this.onProgress)==null||vt.call(this,{loaded:this._loaded}),{value:getArrayBuffer($),done:!1})}cancel($){var ht;(ht=this._reader)==null||ht.cancel($),this._abortController.abort()}}const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(_e){const $=_e.response;return typeof $!="string"?$:stringToBytes($).buffer}class NetworkManager{constructor($,ht={}){this.url=$,this.isHttp=/^https?:/i.test($),this.httpHeaders=this.isHttp&&ht.httpHeaders||Object.create(null),this.withCredentials=ht.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange($,ht,vt){const bt={begin:$,end:ht};for(const Et in vt)bt[Et]=vt[Et];return this.request(bt)}requestFull($){return this.request($)}request($){const ht=new XMLHttpRequest,vt=this.currXhrId++,bt=this.pendingRequests[vt]={xhr:ht};ht.open("GET",this.url),ht.withCredentials=this.withCredentials;for(const Et in this.httpHeaders){const At=this.httpHeaders[Et];At!==void 0&&ht.setRequestHeader(Et,At)}return this.isHttp&&"begin"in $&&"end"in $?(ht.setRequestHeader("Range",`bytes=${$.begin}-${$.end-1}`),bt.expectedStatus=PARTIAL_CONTENT_RESPONSE):bt.expectedStatus=OK_RESPONSE,ht.responseType="arraybuffer",$.onError&&(ht.onerror=function(Et){$.onError(ht.status)}),ht.onreadystatechange=this.onStateChange.bind(this,vt),ht.onprogress=this.onProgress.bind(this,vt),bt.onHeadersReceived=$.onHeadersReceived,bt.onDone=$.onDone,bt.onError=$.onError,bt.onProgress=$.onProgress,ht.send(null),vt}onProgress($,ht){var bt;const vt=this.pendingRequests[$];vt&&((bt=vt.onProgress)==null||bt.call(vt,ht))}onStateChange($,ht){var wt,Ct,xt;const vt=this.pendingRequests[$];if(!vt)return;const bt=vt.xhr;if(bt.readyState>=2&&vt.onHeadersReceived&&(vt.onHeadersReceived(),delete vt.onHeadersReceived),bt.readyState!==4||!($ in this.pendingRequests))return;if(delete this.pendingRequests[$],bt.status===0&&this.isHttp){(wt=vt.onError)==null||wt.call(vt,bt.status);return}const Et=bt.status||OK_RESPONSE;if(!(Et===OK_RESPONSE&&vt.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&Et!==vt.expectedStatus){(Ct=vt.onError)==null||Ct.call(vt,bt.status);return}const _t=network_getArrayBuffer(bt);if(Et===PARTIAL_CONTENT_RESPONSE){const Pt=bt.getResponseHeader("Content-Range"),Rt=/bytes (\d+)-(\d+)\/(\d+)/.exec(Pt);vt.onDone({begin:parseInt(Rt[1],10),chunk:_t})}else _t?vt.onDone({begin:0,chunk:_t}):(xt=vt.onError)==null||xt.call(vt,bt.status)}getRequestXhr($){return this.pendingRequests[$].xhr}isPendingRequest($){return $ in this.pendingRequests}abortRequest($){const ht=this.pendingRequests[$].xhr;delete this.pendingRequests[$],ht.abort()}}class PDFNetworkStream{constructor($){this._source=$,this._manager=new NetworkManager($.url,{httpHeaders:$.httpHeaders,withCredentials:$.withCredentials}),this._rangeChunkSize=$.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed($){const ht=this._rangeRequestReaders.indexOf($);ht>=0&&this._rangeRequestReaders.splice(ht,1)}getFullReader(){return assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader($,ht){const vt=new PDFNetworkStreamRangeRequestReader(this._manager,$,ht);return vt.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(vt),vt}cancelAllRequests($){var ht;(ht=this._fullRequestReader)==null||ht.cancel($);for(const vt of this._rangeRequestReaders.slice(0))vt.cancel($)}}class PDFNetworkStreamFullRequestReader{constructor($,ht){this._manager=$;const vt={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ht.url,this._fullRequestId=$.requestFull(vt),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=ht.disableRange||!1,this._contentLength=ht.length,this._rangeChunkSize=ht.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const $=this._fullRequestId,ht=this._manager.getRequestXhr($),vt=At=>ht.getResponseHeader(At),{allowRangeRequests:bt,suggestedLength:Et}=validateRangeRequestCapabilities({getResponseHeader:vt,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});bt&&(this._isRangeSupported=!0),this._contentLength=Et||this._contentLength,this._filename=extractFilenameFromHeader(vt),this._isRangeSupported&&this._manager.abortRequest($),this._headersReceivedCapability.resolve()}_onDone($){if($&&(this._requests.length>0?this._requests.shift().resolve({value:$.chunk,done:!1}):this._cachedChunks.push($.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const ht of this._requests)ht.resolve({value:void 0,done:!0});this._requests.length=0}}_onError($){this._storedError=createResponseStatusError($,this._url),this._headersReceivedCapability.reject(this._storedError);for(const ht of this._requests)ht.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress($){var ht;(ht=this.onProgress)==null||ht.call(this,{loaded:$.loaded,total:$.lengthComputable?$.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const $=Promise.withResolvers();return this._requests.push($),$.promise}cancel($){this._done=!0,this._headersReceivedCapability.reject($);for(const ht of this._requests)ht.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor($,ht,vt){this._manager=$;const bt={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=$.url,this._requestId=$.requestRange(ht,vt,bt),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var $;($=this.onClosed)==null||$.call(this,this)}_onDone($){const ht=$.chunk;this._requests.length>0?this._requests.shift().resolve({value:ht,done:!1}):this._queuedChunk=ht,this._done=!0;for(const vt of this._requests)vt.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError($){this._storedError=createResponseStatusError($,this._url);for(const ht of this._requests)ht.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress($){var ht;this.isStreamingSupported||(ht=this.onProgress)==null||ht.call(this,{loaded:$.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const ht=this._queuedChunk;return this._queuedChunk=null,{value:ht,done:!1}}if(this._done)return{value:void 0,done:!0};const $=Promise.withResolvers();return this._requests.push($),$.promise}cancel($){this._done=!0;for(const ht of this._requests)ht.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const fileUriRegex=/^file:\/\/\/[a-zA-Z]:\//;function parseUrl(_e){const $=NodePackages.get("url"),ht=$.parse(_e);return ht.protocol==="file:"||ht.host?ht:/^[a-z]:[/\\]/i.test(_e)?$.parse(`file:///${_e}`):(ht.host||(ht.protocol="file:"),ht)}class PDFNodeStream{constructor($){this.source=$,this.url=parseUrl($.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&$.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var $;return(($=this._fullRequestReader)==null?void 0:$._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this),this._fullRequestReader}getRangeReader($,ht){if(ht<=this._progressiveDataLength)return null;const vt=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,$,ht):new PDFNodeStreamRangeReader(this,$,ht);return this._rangeRequestReaders.push(vt),vt}cancelAllRequests($){var ht;(ht=this._fullRequestReader)==null||ht.cancel($);for(const vt of this._rangeRequestReaders.slice(0))vt.cancel($)}}class BaseFullReader{constructor($){this._url=$.url,this._done=!1,this._storedError=null,this.onProgress=null;const ht=$.source;this._contentLength=ht.length,this._loaded=0,this._filename=null,this._disableRange=ht.disableRange||!1,this._rangeChunkSize=ht.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!ht.disableStream,this._isRangeSupported=!ht.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var vt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const $=this._readableStream.read();return $===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=$.length,(vt=this.onProgress)==null||vt.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array($).buffer,done:!1})}cancel($){if(!this._readableStream){this._error($);return}this._readableStream.destroy($)}_error($){this._storedError=$,this._readCapability.resolve()}_setReadableStream($){this._readableStream=$,$.on("readable",()=>{this._readCapability.resolve()}),$.on("end",()=>{$.destroy(),this._done=!0,this._readCapability.resolve()}),$.on("error",ht=>{this._error(ht)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class BaseRangeReader{constructor($){this._url=$.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const ht=$.source;this._isStreamingSupported=!ht.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var vt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const $=this._readableStream.read();return $===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=$.length,(vt=this.onProgress)==null||vt.call(this,{loaded:this._loaded}),{value:new Uint8Array($).buffer,done:!1})}cancel($){if(!this._readableStream){this._error($);return}this._readableStream.destroy($)}_error($){this._storedError=$,this._readCapability.resolve()}_setReadableStream($){this._readableStream=$,$.on("readable",()=>{this._readCapability.resolve()}),$.on("end",()=>{$.destroy(),this._done=!0,this._readCapability.resolve()}),$.on("error",ht=>{this._error(ht)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function createRequestOptions(_e,$){return{protocol:_e.protocol,auth:_e.auth,host:_e.hostname,port:_e.port,path:_e.path,method:"GET",headers:$}}class PDFNodeStreamFullReader extends BaseFullReader{constructor($){super($);const ht=vt=>{if(vt.statusCode===404){const _t=new MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=_t,this._headersCapability.reject(_t);return}this._headersCapability.resolve(),this._setReadableStream(vt);const bt=_t=>this._readableStream.headers[_t.toLowerCase()],{allowRangeRequests:Et,suggestedLength:At}=validateRangeRequestCapabilities({getResponseHeader:bt,isHttp:$.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Et,this._contentLength=At||this._contentLength,this._filename=extractFilenameFromHeader(bt)};if(this._request=null,this._url.protocol==="http:"){const vt=NodePackages.get("http");this._request=vt.request(createRequestOptions(this._url,$.httpHeaders),ht)}else{const vt=NodePackages.get("https");this._request=vt.request(createRequestOptions(this._url,$.httpHeaders),ht)}this._request.on("error",vt=>{this._storedError=vt,this._headersCapability.reject(vt)}),this._request.end()}}class PDFNodeStreamRangeReader extends BaseRangeReader{constructor($,ht,vt){super($),this._httpHeaders={};for(const Et in $.httpHeaders){const At=$.httpHeaders[Et];At!==void 0&&(this._httpHeaders[Et]=At)}this._httpHeaders.Range=`bytes=${ht}-${vt-1}`;const bt=Et=>{if(Et.statusCode===404){const At=new MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=At;return}this._setReadableStream(Et)};if(this._request=null,this._url.protocol==="http:"){const Et=NodePackages.get("http");this._request=Et.request(createRequestOptions(this._url,this._httpHeaders),bt)}else{const Et=NodePackages.get("https");this._request=Et.request(createRequestOptions(this._url,this._httpHeaders),bt)}this._request.on("error",Et=>{this._storedError=Et}),this._request.end()}}class PDFNodeStreamFsFullReader extends BaseFullReader{constructor($){super($);let ht=decodeURIComponent(this._url.path);fileUriRegex.test(this._url.href)&&(ht=ht.replace(/^\//,""));const vt=NodePackages.get("fs");vt.promises.lstat(ht).then(bt=>{this._contentLength=bt.size,this._setReadableStream(vt.createReadStream(ht)),this._headersCapability.resolve()},bt=>{bt.code==="ENOENT"&&(bt=new MissingPDFException(`Missing PDF "${ht}".`)),this._storedError=bt,this._headersCapability.reject(bt)})}}class PDFNodeStreamFsRangeReader extends BaseRangeReader{constructor($,ht,vt){super($);let bt=decodeURIComponent(this._url.path);fileUriRegex.test(this._url.href)&&(bt=bt.replace(/^\//,""));const Et=NodePackages.get("fs");this._setReadableStream(Et.createReadStream(bt,{start:ht,end:vt-1}))}}const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30,DEFAULT_FONT_ASCENT=.8;var S_,Pu,Eo,oy,ay,hp,Zl,ly,cy,fp,wm,Sm,Ru,xm,uy,Cm,pp,dy,hy,mp,gp,Tm,fu,Q_,Z_,XE,ju,g0,J_;const Ho=class Ho{constructor({textContentSource:$,container:ht,viewport:vt}){Kt(this,fu);Kt(this,Pu,Promise.withResolvers());Kt(this,Eo,null);Kt(this,oy,!1);Kt(this,ay,!!((S_=globalThis.FontInspector)!=null&&S_.enabled));Kt(this,hp,null);Kt(this,Zl,null);Kt(this,ly,0);Kt(this,cy,0);Kt(this,fp,null);Kt(this,wm,null);Kt(this,Sm,0);Kt(this,Ru,0);Kt(this,xm,Object.create(null));Kt(this,uy,[]);Kt(this,Cm,null);Kt(this,pp,[]);Kt(this,dy,new WeakMap);Kt(this,hy,null);if($ instanceof ReadableStream)zt(this,Cm,$);else if(typeof $=="object")zt(this,Cm,new ReadableStream({start(wt){wt.enqueue($),wt.close()}}));else throw new Error('No "textContentSource" parameter specified.');zt(this,Eo,zt(this,wm,ht)),zt(this,Ru,vt.scale*(globalThis.devicePixelRatio||1)),zt(this,Sm,vt.rotation),zt(this,Zl,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:bt,pageHeight:Et,pageX:At,pageY:_t}=vt.rawDims;zt(this,hy,[1,0,0,-1,-At,_t+Et]),zt(this,cy,bt),zt(this,ly,Et),setLayerDimensions(ht,vt),St(this,Pu).promise.catch(()=>{}).then(()=>{St(Ho,Tm).delete(this),zt(this,Zl,null),zt(this,xm,null)})}render(){const $=()=>{St(this,fp).read().then(({value:ht,done:vt})=>{if(vt){St(this,Pu).resolve();return}St(this,hp)??zt(this,hp,ht.lang),Object.assign(St(this,xm),ht.styles),Ut(this,fu,Q_).call(this,ht.items),$()},St(this,Pu).reject)};return zt(this,fp,St(this,Cm).getReader()),St(Ho,Tm).add(this),$(),St(this,Pu).promise}update({viewport:$,onBefore:ht=null}){var Et;const vt=$.scale*(globalThis.devicePixelRatio||1),bt=$.rotation;if(bt!==St(this,Sm)&&(ht==null||ht(),zt(this,Sm,bt),setLayerDimensions(St(this,wm),{rotation:bt})),vt!==St(this,Ru)){ht==null||ht(),zt(this,Ru,vt);const At={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:Ut(Et=Ho,ju,g0).call(Et,St(this,hp))};for(const _t of St(this,pp))At.properties=St(this,dy).get(_t),At.div=_t,Ut(this,fu,XE).call(this,At)}}cancel(){var ht;const $=new AbortException("TextLayer task cancelled.");(ht=St(this,fp))==null||ht.cancel($).catch(()=>{}),zt(this,fp,null),St(this,Pu).reject($)}get textDivs(){return St(this,pp)}get textContentItemsStr(){return St(this,uy)}static cleanup(){if(!(St(this,Tm).size>0)){St(this,mp).clear();for(const{canvas:$}of St(this,gp).values())$.remove();St(this,gp).clear()}}};Pu=new WeakMap,Eo=new WeakMap,oy=new WeakMap,ay=new WeakMap,hp=new WeakMap,Zl=new WeakMap,ly=new WeakMap,cy=new WeakMap,fp=new WeakMap,wm=new WeakMap,Sm=new WeakMap,Ru=new WeakMap,xm=new WeakMap,uy=new WeakMap,Cm=new WeakMap,pp=new WeakMap,dy=new WeakMap,hy=new WeakMap,mp=new WeakMap,gp=new WeakMap,Tm=new WeakMap,fu=new WeakSet,Q_=function($){var bt,Et;if(St(this,oy))return;(Et=St(this,Zl)).ctx||(Et.ctx=Ut(bt=Ho,ju,g0).call(bt,St(this,hp)));const ht=St(this,pp),vt=St(this,uy);for(const At of $){if(ht.length>MAX_TEXT_DIVS_TO_RENDER){warn("Ignoring additional textDivs for performance reasons."),zt(this,oy,!0);return}if(At.str===void 0){if(At.type==="beginMarkedContentProps"||At.type==="beginMarkedContent"){const _t=St(this,Eo);zt(this,Eo,document.createElement("span")),St(this,Eo).classList.add("markedContent"),At.id!==null&&St(this,Eo).setAttribute("id",`${At.id}`),_t.append(St(this,Eo))}else At.type==="endMarkedContent"&&zt(this,Eo,St(this,Eo).parentNode);continue}vt.push(At.str),Ut(this,fu,Z_).call(this,At)}},Z_=function($){var Lt;const ht=document.createElement("span"),vt={angle:0,canvasWidth:0,hasText:$.str!=="",hasEOL:$.hasEOL,fontSize:0};St(this,pp).push(ht);const bt=Util.transform(St(this,hy),$.transform);let Et=Math.atan2(bt[1],bt[0]);const At=St(this,xm)[$.fontName];At.vertical&&(Et+=Math.PI/2);const _t=St(this,ay)&&At.fontSubstitution||At.fontFamily,wt=Math.hypot(bt[2],bt[3]),Ct=wt*Ut(Lt=Ho,ju,J_).call(Lt,_t,St(this,hp));let xt,Pt;Et===0?(xt=bt[4],Pt=bt[5]-Ct):(xt=bt[4]+Ct*Math.sin(Et),Pt=bt[5]-Ct*Math.cos(Et));const Rt="calc(var(--scale-factor)*",kt=ht.style;St(this,Eo)===St(this,wm)?(kt.left=`${(100*xt/St(this,cy)).toFixed(2)}%`,kt.top=`${(100*Pt/St(this,ly)).toFixed(2)}%`):(kt.left=`${Rt}${xt.toFixed(2)}px)`,kt.top=`${Rt}${Pt.toFixed(2)}px)`),kt.fontSize=`${Rt}${wt.toFixed(2)}px)`,kt.fontFamily=_t,vt.fontSize=wt,ht.setAttribute("role","presentation"),ht.textContent=$.str,ht.dir=$.dir,St(this,ay)&&(ht.dataset.fontName=At.fontSubstitutionLoadedName||$.fontName),Et!==0&&(vt.angle=Et*(180/Math.PI));let Mt=!1;if($.str.length>1)Mt=!0;else if($.str!==" "&&$.transform[0]!==$.transform[3]){const Ot=Math.abs($.transform[0]),Ft=Math.abs($.transform[3]);Ot!==Ft&&Math.max(Ot,Ft)/Math.min(Ot,Ft)>1.5&&(Mt=!0)}if(Mt&&(vt.canvasWidth=At.vertical?$.height:$.width),St(this,dy).set(ht,vt),St(this,Zl).div=ht,St(this,Zl).properties=vt,Ut(this,fu,XE).call(this,St(this,Zl)),vt.hasText&&St(this,Eo).append(ht),vt.hasEOL){const Ot=document.createElement("br");Ot.setAttribute("role","presentation"),St(this,Eo).append(Ot)}},XE=function($){const{div:ht,properties:vt,ctx:bt,prevFontSize:Et,prevFontFamily:At}=$,{style:_t}=ht;let wt="";if(vt.canvasWidth!==0&&vt.hasText){const{fontFamily:Ct}=_t,{canvasWidth:xt,fontSize:Pt}=vt;(Et!==Pt||At!==Ct)&&(bt.font=`${Pt*St(this,Ru)}px ${Ct}`,$.prevFontSize=Pt,$.prevFontFamily=Ct);const{width:Rt}=bt.measureText(ht.textContent);Rt>0&&(wt=`scaleX(${xt*St(this,Ru)/Rt})`)}vt.angle!==0&&(wt=`rotate(${vt.angle}deg) ${wt}`),wt.length>0&&(_t.transform=wt)},ju=new WeakSet,g0=function($=null){let ht=St(this,gp).get($||($=""));if(!ht){const vt=document.createElement("canvas");vt.className="hiddenCanvasElement",vt.lang=$,document.body.append(vt),ht=vt.getContext("2d",{alpha:!1}),St(this,gp).set($,ht)}return ht},J_=function($,ht){const vt=St(this,mp).get($);if(vt)return vt;const bt=Ut(this,ju,g0).call(this,ht),Et=bt.font;bt.canvas.width=bt.canvas.height=DEFAULT_FONT_SIZE,bt.font=`${DEFAULT_FONT_SIZE}px ${$}`;const At=bt.measureText("");let _t=At.fontBoundingBoxAscent,wt=Math.abs(At.fontBoundingBoxDescent);if(_t){const Pt=_t/(_t+wt);return St(this,mp).set($,Pt),bt.canvas.width=bt.canvas.height=0,bt.font=Et,Pt}bt.strokeStyle="red",bt.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),bt.strokeText("g",0,0);let Ct=bt.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;wt=0;for(let Pt=Ct.length-1-3;Pt>=0;Pt-=4)if(Ct[Pt]>0){wt=Math.ceil(Pt/4/DEFAULT_FONT_SIZE);break}bt.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),bt.strokeText("A",0,DEFAULT_FONT_SIZE),Ct=bt.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data,_t=0;for(let Pt=0,Rt=Ct.length;Pt<Rt;Pt+=4)if(Ct[Pt]>0){_t=DEFAULT_FONT_SIZE-Math.floor(Pt/4/DEFAULT_FONT_SIZE);break}bt.canvas.width=bt.canvas.height=0,bt.font=Et;const xt=_t?_t/(_t+wt):DEFAULT_FONT_ASCENT;return St(this,mp).set($,xt),xt},Kt(Ho,ju),Kt(Ho,mp,new Map),Kt(Ho,gp,new Map),Kt(Ho,Tm,new Set);let TextLayer=Ho;function renderTextLayer(){deprecated("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:_e,container:$,viewport:ht,...vt}=arguments[0],bt=Object.keys(vt);bt.length>0&&warn("Ignoring `renderTextLayer` parameters: "+bt.join(", "));const Et=new TextLayer({textContentSource:_e,container:$,viewport:ht}),{textDivs:At,textContentItemsStr:_t}=Et;return{promise:Et.render(),textDivs:At,textContentItemsStr:_t}}function updateTextLayer(){deprecated("`updateTextLayer`, please use `TextLayer` instead.")}class XfaText{static textContent($){const ht=[],vt={items:ht,styles:Object.create(null)};function bt(Et){var wt;if(!Et)return;let At=null;const _t=Et.name;if(_t==="#text")At=Et.value;else if(XfaText.shouldBuildText(_t))(wt=Et==null?void 0:Et.attributes)!=null&&wt.textContent?At=Et.attributes.textContent:Et.value&&(At=Et.value);else return;if(At!==null&&ht.push({str:At}),!!Et.children)for(const Ct of Et.children)bt(Ct)}return bt($),vt}static shouldBuildText($){return!($==="textarea"||$==="input"||$==="option"||$==="select")}}const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=isNodeJS?NodeCanvasFactory:DOMCanvasFactory,DefaultCMapReaderFactory=isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory,DefaultFilterFactory=isNodeJS?NodeFilterFactory:DOMFilterFactory,DefaultStandardFontDataFactory=isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory;function getDocument(_e){if(typeof _e=="string"||_e instanceof URL?_e={url:_e}:(_e instanceof ArrayBuffer||ArrayBuffer.isView(_e))&&(_e={data:_e}),typeof _e!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!_e.url&&!_e.data&&!_e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const $=new PDFDocumentLoadingTask,{docId:ht}=$,vt=_e.url?getUrlProp(_e.url):null,bt=_e.data?getDataProp(_e.data):null,Et=_e.httpHeaders||null,At=_e.withCredentials===!0,_t=_e.password??null,wt=_e.range instanceof PDFDataRangeTransport?_e.range:null,Ct=Number.isInteger(_e.rangeChunkSize)&&_e.rangeChunkSize>0?_e.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let xt=_e.worker instanceof PDFWorker?_e.worker:null;const Pt=_e.verbosity,Rt=typeof _e.docBaseUrl=="string"&&!isDataScheme(_e.docBaseUrl)?_e.docBaseUrl:null,kt=typeof _e.cMapUrl=="string"?_e.cMapUrl:null,Mt=_e.cMapPacked!==!1,Lt=_e.CMapReaderFactory||DefaultCMapReaderFactory,Ot=typeof _e.standardFontDataUrl=="string"?_e.standardFontDataUrl:null,Ft=_e.StandardFontDataFactory||DefaultStandardFontDataFactory,Dt=_e.stopAtErrors!==!0,$t=Number.isInteger(_e.maxImageSize)&&_e.maxImageSize>-1?_e.maxImageSize:-1,Bt=_e.isEvalSupported!==!1,Nt=typeof _e.isOffscreenCanvasSupported=="boolean"?_e.isOffscreenCanvasSupported:!isNodeJS,Ht=Number.isInteger(_e.canvasMaxAreaInBytes)?_e.canvasMaxAreaInBytes:-1,Vt=typeof _e.disableFontFace=="boolean"?_e.disableFontFace:isNodeJS,jt=_e.fontExtraProperties===!0,Xt=_e.enableXfa===!0,Jt=_e.ownerDocument||globalThis.document,Gt=_e.disableRange===!0,en=_e.disableStream===!0,on=_e.disableAutoFetch===!0,_n=_e.pdfBug===!0,ln=wt?wt.length:_e.length??NaN,En=typeof _e.useSystemFonts=="boolean"?_e.useSystemFonts:!isNodeJS&&!Vt,un=typeof _e.useWorkerFetch=="boolean"?_e.useWorkerFetch:Lt===DOMCMapReaderFactory&&Ft===DOMStandardFontDataFactory&&kt&&Ot&&isValidFetchUrl(kt,document.baseURI)&&isValidFetchUrl(Ot,document.baseURI),hn=_e.canvasFactory||new DefaultCanvasFactory({ownerDocument:Jt}),nn=_e.filterFactory||new DefaultFilterFactory({docId:ht,ownerDocument:Jt}),mn=null;setVerbosityLevel(Pt);const xn={canvasFactory:hn,filterFactory:nn};if(un||(xn.cMapReaderFactory=new Lt({baseUrl:kt,isCompressed:Mt}),xn.standardFontDataFactory=new Ft({baseUrl:Ot})),!xt){const Yt={verbosity:Pt,port:GlobalWorkerOptions.workerPort};xt=Yt.port?PDFWorker.fromPort(Yt):new PDFWorker(Yt),$._worker=xt}const rn={docId:ht,apiVersion:"4.3.136",data:bt,password:_t,disableAutoFetch:on,rangeChunkSize:Ct,length:ln,docBaseUrl:Rt,enableXfa:Xt,evaluatorOptions:{maxImageSize:$t,disableFontFace:Vt,ignoreErrors:Dt,isEvalSupported:Bt,isOffscreenCanvasSupported:Nt,canvasMaxAreaInBytes:Ht,fontExtraProperties:jt,useSystemFonts:En,cMapUrl:un?kt:null,standardFontDataUrl:un?Ot:null}},qt={disableFontFace:Vt,fontExtraProperties:jt,ownerDocument:Jt,pdfBug:_n,styleElement:mn,loadingParams:{disableAutoFetch:on,enableXfa:Xt}};return xt.promise.then(function(){if($.destroyed)throw new Error("Loading aborted");if(xt.destroyed)throw new Error("Worker was destroyed");const Yt=xt.messageHandler.sendWithPromise("GetDocRequest",rn,bt?[bt.buffer]:null);let tn;return wt?tn=new PDFDataTransportStream(wt,{disableRange:Gt,disableStream:en}):bt||(tn=(cn=>isNodeJS?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&isValidFetchUrl(cn.url)?new PDFFetchStream(cn):new PDFNodeStream(cn):isValidFetchUrl(cn.url)?new PDFFetchStream(cn):new PDFNetworkStream(cn))({url:vt,length:ln,httpHeaders:Et,withCredentials:At,rangeChunkSize:Ct,disableRange:Gt,disableStream:en})),Yt.then(dn=>{if($.destroyed)throw new Error("Loading aborted");if(xt.destroyed)throw new Error("Worker was destroyed");const cn=new MessageHandler(ht,dn,xt.port),fn=new WorkerTransport(cn,$,tn,qt,xn);$._transport=fn,cn.send("Ready",null)})}).catch($._capability.reject),$}function getUrlProp(_e){if(_e instanceof URL)return _e.href;try{return new URL(_e,window.location).href}catch{if(isNodeJS&&typeof _e=="string")return _e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(_e){if(isNodeJS&&typeof Buffer<"u"&&_e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(_e instanceof Uint8Array&&_e.byteLength===_e.buffer.byteLength)return _e;if(typeof _e=="string")return stringToBytes(_e);if(_e instanceof ArrayBuffer||ArrayBuffer.isView(_e)||typeof _e=="object"&&!isNaN(_e==null?void 0:_e.length))return new Uint8Array(_e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function isRefProxy(_e){return typeof _e=="object"&&Number.isInteger(_e==null?void 0:_e.num)&&_e.num>=0&&Number.isInteger(_e==null?void 0:_e.gen)&&_e.gen>=0}var rE;const sE=class sE{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${eo(sE,rE)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var $,ht,vt;this.destroyed=!0;try{($=this._worker)!=null&&$.port&&(this._worker._pendingDestroy=!0),await((ht=this._transport)==null?void 0:ht.destroy())}catch(bt){throw(vt=this._worker)!=null&&vt.port&&delete this._worker._pendingDestroy,bt}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};rE=new WeakMap,Kt(sE,rE,0);let PDFDocumentLoadingTask=sE;class PDFDataRangeTransport{constructor($,ht,vt=!1,bt=null){this.length=$,this.initialData=ht,this.progressiveDone=vt,this.contentDispositionFilename=bt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener($){this._rangeListeners.push($)}addProgressListener($){this._progressListeners.push($)}addProgressiveReadListener($){this._progressiveReadListeners.push($)}addProgressiveDoneListener($){this._progressiveDoneListeners.push($)}onDataRange($,ht){for(const vt of this._rangeListeners)vt($,ht)}onDataProgress($,ht){this._readyCapability.promise.then(()=>{for(const vt of this._progressListeners)vt($,ht)})}onDataProgressiveRead($){this._readyCapability.promise.then(()=>{for(const ht of this._progressiveReadListeners)ht($)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const $ of this._progressiveDoneListeners)$()})}transportReady(){this._readyCapability.resolve()}requestDataRange($,ht){unreachable("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class PDFDocumentProxy{constructor($,ht){this._pdfInfo=$,this._transport=ht}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage($){return this._transport.getPage($)}getPageIndex($){return this._transport.getPageIndex($)}getDestinations(){return this._transport.getDestinations()}getDestination($){return this._transport.getDestination($)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:$="display"}={}){const{renderingIntent:ht}=this._transport.getRenderingIntent($);return this._transport.getOptionalContentConfig(ht)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup($=!1){return this._transport.startCleanup($||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber($){return this._transport.cachedPageNumber($)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var ku,Jl,$o,Jp,v0;class PDFPageProxy{constructor($,ht,vt,bt=!1){Kt(this,$o);Kt(this,ku,null);Kt(this,Jl,!1);this._pageIndex=$,this._pageInfo=ht,this._transport=vt,this._stats=bt?new StatTimer:null,this._pdfBug=bt,this.commonObjs=vt.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:$,rotation:ht=this.rotate,offsetX:vt=0,offsetY:bt=0,dontFlip:Et=!1}={}){return new PageViewport({viewBox:this.view,scale:$,rotation:ht,offsetX:vt,offsetY:bt,dontFlip:Et})}getAnnotations({intent:$="display"}={}){const{renderingIntent:ht}=this._transport.getRenderingIntent($);return this._transport.getAnnotations(this._pageIndex,ht)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var $;return(($=this._transport._htmlForXfa)==null?void 0:$.children[this._pageIndex])||null}render({canvasContext:$,viewport:ht,intent:vt="display",annotationMode:bt=AnnotationMode.ENABLE,transform:Et=null,background:At=null,optionalContentConfigPromise:_t=null,annotationCanvasMap:wt=null,pageColors:Ct=null,printAnnotationStorage:xt=null}){var $t,Bt;($t=this._stats)==null||$t.time("Overall");const Pt=this._transport.getRenderingIntent(vt,bt,xt),{renderingIntent:Rt,cacheKey:kt}=Pt;zt(this,Jl,!1),Ut(this,$o,v0).call(this),_t||(_t=this._transport.getOptionalContentConfig(Rt));let Mt=this._intentStates.get(kt);Mt||(Mt=Object.create(null),this._intentStates.set(kt,Mt)),Mt.streamReaderCancelTimeout&&(clearTimeout(Mt.streamReaderCancelTimeout),Mt.streamReaderCancelTimeout=null);const Lt=!!(Rt&RenderingIntentFlag.PRINT);Mt.displayReadyCapability||(Mt.displayReadyCapability=Promise.withResolvers(),Mt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Bt=this._stats)==null||Bt.time("Page Request"),this._pumpOperatorList(Pt));const Ot=Nt=>{var Ht;Mt.renderTasks.delete(Ft),(this._maybeCleanupAfterRender||Lt)&&zt(this,Jl,!0),Ut(this,$o,Jp).call(this,!Lt),Nt?(Ft.capability.reject(Nt),this._abortOperatorList({intentState:Mt,reason:Nt instanceof Error?Nt:new Error(Nt)})):Ft.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(Ht=globalThis.Stats)!=null&&Ht.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},Ft=new InternalRenderTask({callback:Ot,params:{canvasContext:$,viewport:ht,transform:Et,background:At},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:wt,operatorList:Mt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Lt,pdfBug:this._pdfBug,pageColors:Ct});(Mt.renderTasks||(Mt.renderTasks=new Set)).add(Ft);const Dt=Ft.task;return Promise.all([Mt.displayReadyCapability.promise,_t]).then(([Nt,Ht])=>{var Vt;if(this.destroyed){Ot();return}if((Vt=this._stats)==null||Vt.time("Rendering"),!(Ht.renderingIntent&Rt))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");Ft.initializeGraphics({transparency:Nt,optionalContentConfig:Ht}),Ft.operatorListChanged()}).catch(Ot),Dt}getOperatorList({intent:$="display",annotationMode:ht=AnnotationMode.ENABLE,printAnnotationStorage:vt=null}={}){var wt;function bt(){At.operatorList.lastChunk&&(At.opListReadCapability.resolve(At.operatorList),At.renderTasks.delete(_t))}const Et=this._transport.getRenderingIntent($,ht,vt,!0);let At=this._intentStates.get(Et.cacheKey);At||(At=Object.create(null),this._intentStates.set(Et.cacheKey,At));let _t;return At.opListReadCapability||(_t=Object.create(null),_t.operatorListChanged=bt,At.opListReadCapability=Promise.withResolvers(),(At.renderTasks||(At.renderTasks=new Set)).add(_t),At.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(wt=this._stats)==null||wt.time("Page Request"),this._pumpOperatorList(Et)),At.opListReadCapability.promise}streamTextContent({includeMarkedContent:$=!1,disableNormalization:ht=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:$===!0,disableNormalization:ht===!0},{highWaterMark:100,size(bt){return bt.items.length}})}getTextContent($={}){if(this._transport._htmlForXfa)return this.getXfa().then(vt=>XfaText.textContent(vt));const ht=this.streamTextContent($);return new Promise(function(vt,bt){function Et(){At.read().then(function({value:wt,done:Ct}){if(Ct){vt(_t);return}_t.lang??(_t.lang=wt.lang),Object.assign(_t.styles,wt.styles),_t.items.push(...wt.items),Et()},bt)}const At=ht.getReader(),_t={items:[],styles:Object.create(null),lang:null};Et()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const $=[];for(const ht of this._intentStates.values())if(this._abortOperatorList({intentState:ht,reason:new Error("Page was destroyed."),force:!0}),!ht.opListReadCapability)for(const vt of ht.renderTasks)$.push(vt.completed),vt.cancel();return this.objs.clear(),zt(this,Jl,!1),Ut(this,$o,v0).call(this),Promise.all($)}cleanup($=!1){zt(this,Jl,!0);const ht=Ut(this,$o,Jp).call(this,!1);return $&&ht&&this._stats&&(this._stats=new StatTimer),ht}_startRenderPage($,ht){var bt,Et;const vt=this._intentStates.get(ht);vt&&((bt=this._stats)==null||bt.timeEnd("Page Request"),(Et=vt.displayReadyCapability)==null||Et.resolve($))}_renderPageChunk($,ht){for(let vt=0,bt=$.length;vt<bt;vt++)ht.operatorList.fnArray.push($.fnArray[vt]),ht.operatorList.argsArray.push($.argsArray[vt]);ht.operatorList.lastChunk=$.lastChunk,ht.operatorList.separateAnnots=$.separateAnnots;for(const vt of ht.renderTasks)vt.operatorListChanged();$.lastChunk&&Ut(this,$o,Jp).call(this,!0)}_pumpOperatorList({renderingIntent:$,cacheKey:ht,annotationStorageSerializable:vt}){const{map:bt,transfer:Et}=vt,_t=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:$,cacheKey:ht,annotationStorage:bt},Et).getReader(),wt=this._intentStates.get(ht);wt.streamReader=_t;const Ct=()=>{_t.read().then(({value:xt,done:Pt})=>{if(Pt){wt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(xt,wt),Ct())},xt=>{if(wt.streamReader=null,!this._transport.destroyed){if(wt.operatorList){wt.operatorList.lastChunk=!0;for(const Pt of wt.renderTasks)Pt.operatorListChanged();Ut(this,$o,Jp).call(this,!0)}if(wt.displayReadyCapability)wt.displayReadyCapability.reject(xt);else if(wt.opListReadCapability)wt.opListReadCapability.reject(xt);else throw xt}})};Ct()}_abortOperatorList({intentState:$,reason:ht,force:vt=!1}){if($.streamReader){if($.streamReaderCancelTimeout&&(clearTimeout($.streamReaderCancelTimeout),$.streamReaderCancelTimeout=null),!vt){if($.renderTasks.size>0)return;if(ht instanceof RenderingCancelledException){let bt=RENDERING_CANCELLED_TIMEOUT;ht.extraDelay>0&&ht.extraDelay<1e3&&(bt+=ht.extraDelay),$.streamReaderCancelTimeout=setTimeout(()=>{$.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:$,reason:ht,force:!0})},bt);return}}if($.streamReader.cancel(new AbortException(ht.message)).catch(()=>{}),$.streamReader=null,!this._transport.destroyed){for(const[bt,Et]of this._intentStates)if(Et===$){this._intentStates.delete(bt);break}this.cleanup()}}}get stats(){return this._stats}}ku=new WeakMap,Jl=new WeakMap,$o=new WeakSet,Jp=function($=!1){if(Ut(this,$o,v0).call(this),!St(this,Jl)||this.destroyed)return!1;if($)return zt(this,ku,setTimeout(()=>{zt(this,ku,null),Ut(this,$o,Jp).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:ht,operatorList:vt}of this._intentStates.values())if(ht.size>0||!vt.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),zt(this,Jl,!1),!0},v0=function(){St(this,ku)&&(clearTimeout(St(this,ku)),zt(this,ku,null))};var vp,oE;class LoopbackPort{constructor(){Kt(this,vp,new Set);Kt(this,oE,Promise.resolve())}postMessage($,ht){const vt={data:structuredClone($,ht?{transfer:ht}:null)};St(this,oE).then(()=>{for(const bt of St(this,vp))bt.call(this,vt)})}addEventListener($,ht){St(this,vp).add(ht)}removeEventListener($,ht){St(this,vp).delete(ht)}terminate(){St(this,vp).clear()}}vp=new WeakMap,oE=new WeakMap;const PDFWorkerUtil={isWorkerDisabled:!1,fakeWorkerId:0};isNodeJS&&(PDFWorkerUtil.isWorkerDisabled=!0,GlobalWorkerOptions.workerSrc||(GlobalWorkerOptions.workerSrc="./pdf.worker.mjs")),PDFWorkerUtil.isSameOrigin=function(_e,$){let ht;try{if(ht=new URL(_e),!ht.origin||ht.origin==="null")return!1}catch{return!1}const vt=new URL($,ht);return ht.origin===vt.origin},PDFWorkerUtil.createCDNWrapper=function(_e){const $=`await import("${_e}");`;return URL.createObjectURL(new Blob([$],{type:"text/javascript"}))};var yp,Pm,y0;const So=class So{constructor({name:$=null,port:ht=null,verbosity:vt=getVerbosityLevel()}={}){var bt;if(this.name=$,this.destroyed=!1,this.verbosity=vt,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,ht){if((bt=St(So,yp))!=null&&bt.has(ht))throw new Error("Cannot use more than one PDFWorker per port.");(St(So,yp)||zt(So,yp,new WeakMap)).set(ht,this),this._initializeFromPort(ht);return}this._initialize()}get promise(){return isNodeJS?Promise.all([NodePackages.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort($){this._port=$,this._messageHandler=new MessageHandler("main","worker",$),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!St(So,Pm,y0)){let{workerSrc:$}=So;try{PDFWorkerUtil.isSameOrigin(window.location.href,$)||($=PDFWorkerUtil.createCDNWrapper(new URL($,window.location).href));const ht=new Worker($,{type:"module"}),vt=new MessageHandler("main","worker",ht),bt=()=>{ht.removeEventListener("error",Et),vt.destroy(),ht.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Et=()=>{this._webWorker||bt()};ht.addEventListener("error",Et),vt.on("test",_t=>{if(ht.removeEventListener("error",Et),this.destroyed){bt();return}_t?(this._messageHandler=vt,this._port=ht,this._webWorker=ht,this._readyCapability.resolve(),vt.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),vt.destroy(),ht.terminate())}),vt.on("ready",_t=>{if(ht.removeEventListener("error",Et),this.destroyed){bt();return}try{At()}catch{this._setupFakeWorker()}});const At=()=>{const _t=new Uint8Array;vt.send("test",_t,[_t.buffer])};At();return}catch{info("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||(warn("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),So._setupFakeWorkerGlobal.then($=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const ht=new LoopbackPort;this._port=ht;const vt=`fake${PDFWorkerUtil.fakeWorkerId++}`,bt=new MessageHandler(vt+"_worker",vt,ht);$.setup(bt,ht);const Et=new MessageHandler(vt,vt+"_worker",ht);this._messageHandler=Et,this._readyCapability.resolve(),Et.send("configure",{verbosity:this.verbosity})}).catch($=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${$.message}".`))})}destroy(){var $;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),($=St(So,yp))==null||$.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort($){var vt;if(!($!=null&&$.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const ht=(vt=St(this,yp))==null?void 0:vt.get($.port);if(ht){if(ht._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return ht}return new So($)}static get workerSrc(){if(GlobalWorkerOptions.workerSrc)return GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return shadow(this,"_setupFakeWorkerGlobal",(async()=>St(this,Pm,y0)?St(this,Pm,y0):(await import(this.workerSrc)).WorkerMessageHandler)())}};yp=new WeakMap,Pm=new WeakSet,y0=function(){var $;try{return(($=globalThis.pdfjsWorker)==null?void 0:$.WorkerMessageHandler)||null}catch{return null}},Kt(So,Pm),Kt(So,yp);let PDFWorker=So;var _c,wl,Rm,km,Sl,bp,av;class WorkerTransport{constructor($,ht,vt,bt,Et){Kt(this,bp);Kt(this,_c,new Map);Kt(this,wl,new Map);Kt(this,Rm,new Map);Kt(this,km,new Map);Kt(this,Sl,null);this.messageHandler=$,this.loadingTask=ht,this.commonObjs=new PDFObjects,this.fontLoader=new FontLoader({ownerDocument:bt.ownerDocument,styleElement:bt.styleElement}),this.loadingParams=bt.loadingParams,this._params=bt,this.canvasFactory=Et.canvasFactory,this.filterFactory=Et.filterFactory,this.cMapReaderFactory=Et.cMapReaderFactory,this.standardFontDataFactory=Et.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=vt,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return shadow(this,"annotationStorage",new AnnotationStorage)}getRenderingIntent($,ht=AnnotationMode.ENABLE,vt=null,bt=!1){let Et=RenderingIntentFlag.DISPLAY,At=SerializableEmpty;switch($){case"any":Et=RenderingIntentFlag.ANY;break;case"display":break;case"print":Et=RenderingIntentFlag.PRINT;break;default:warn(`getRenderingIntent - invalid intent: ${$}`)}switch(ht){case AnnotationMode.DISABLE:Et+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:Et+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:Et+=RenderingIntentFlag.ANNOTATIONS_STORAGE,At=(Et&RenderingIntentFlag.PRINT&&vt instanceof PrintAnnotationStorage?vt:this.annotationStorage).serializable;break;default:warn(`getRenderingIntent - invalid annotationMode: ${ht}`)}return bt&&(Et+=RenderingIntentFlag.OPLIST),{renderingIntent:Et,cacheKey:`${Et}_${At.hash}`,annotationStorageSerializable:At}}destroy(){var vt;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(vt=St(this,Sl))==null||vt.reject(new Error("Worker was destroyed during onPassword callback"));const $=[];for(const bt of St(this,wl).values())$.push(bt._destroy());St(this,wl).clear(),St(this,Rm).clear(),St(this,km).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const ht=this.messageHandler.sendWithPromise("Terminate",null);return $.push(ht),Promise.all($).then(()=>{var bt;this.commonObjs.clear(),this.fontLoader.clear(),St(this,_c).clear(),this.filterFactory.destroy(),TextLayer.cleanup(),(bt=this._networkStream)==null||bt.cancelAllRequests(new AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:$,loadingTask:ht}=this;$.on("GetReader",(vt,bt)=>{assert(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Et=>{this._lastProgress={loaded:Et.loaded,total:Et.total}},bt.onPull=()=>{this._fullReader.read().then(function({value:Et,done:At}){if(At){bt.close();return}assert(Et instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),bt.enqueue(new Uint8Array(Et),1,[Et])}).catch(Et=>{bt.error(Et)})},bt.onCancel=Et=>{this._fullReader.cancel(Et),bt.ready.catch(At=>{if(!this.destroyed)throw At})}}),$.on("ReaderHeadersReady",vt=>{const bt=Promise.withResolvers(),Et=this._fullReader;return Et.headersReady.then(()=>{var At;(!Et.isStreamingSupported||!Et.isRangeSupported)&&(this._lastProgress&&((At=ht.onProgress)==null||At.call(ht,this._lastProgress)),Et.onProgress=_t=>{var wt;(wt=ht.onProgress)==null||wt.call(ht,{loaded:_t.loaded,total:_t.total})}),bt.resolve({isStreamingSupported:Et.isStreamingSupported,isRangeSupported:Et.isRangeSupported,contentLength:Et.contentLength})},bt.reject),bt.promise}),$.on("GetRangeReader",(vt,bt)=>{assert(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Et=this._networkStream.getRangeReader(vt.begin,vt.end);if(!Et){bt.close();return}bt.onPull=()=>{Et.read().then(function({value:At,done:_t}){if(_t){bt.close();return}assert(At instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),bt.enqueue(new Uint8Array(At),1,[At])}).catch(At=>{bt.error(At)})},bt.onCancel=At=>{Et.cancel(At),bt.ready.catch(_t=>{if(!this.destroyed)throw _t})}}),$.on("GetDoc",({pdfInfo:vt})=>{this._numPages=vt.numPages,this._htmlForXfa=vt.htmlForXfa,delete vt.htmlForXfa,ht._capability.resolve(new PDFDocumentProxy(vt,this))}),$.on("DocException",function(vt){let bt;switch(vt.name){case"PasswordException":bt=new PasswordException(vt.message,vt.code);break;case"InvalidPDFException":bt=new InvalidPDFException(vt.message);break;case"MissingPDFException":bt=new MissingPDFException(vt.message);break;case"UnexpectedResponseException":bt=new UnexpectedResponseException(vt.message,vt.status);break;case"UnknownErrorException":bt=new UnknownErrorException(vt.message,vt.details);break;default:unreachable("DocException - expected a valid Error.")}ht._capability.reject(bt)}),$.on("PasswordRequest",vt=>{if(zt(this,Sl,Promise.withResolvers()),ht.onPassword){const bt=Et=>{Et instanceof Error?St(this,Sl).reject(Et):St(this,Sl).resolve({password:Et})};try{ht.onPassword(bt,vt.code)}catch(Et){St(this,Sl).reject(Et)}}else St(this,Sl).reject(new PasswordException(vt.message,vt.code));return St(this,Sl).promise}),$.on("DataLoaded",vt=>{var bt;(bt=ht.onProgress)==null||bt.call(ht,{loaded:vt.length,total:vt.length}),this.downloadInfoCapability.resolve(vt)}),$.on("StartRenderPage",vt=>{if(this.destroyed)return;St(this,wl).get(vt.pageIndex)._startRenderPage(vt.transparency,vt.cacheKey)}),$.on("commonobj",([vt,bt,Et])=>{var At;if(this.destroyed||this.commonObjs.has(vt))return null;switch(bt){case"Font":const{disableFontFace:_t,fontExtraProperties:wt,pdfBug:Ct}=this._params;if("error"in Et){const kt=Et.error;warn(`Error during font loading: ${kt}`),this.commonObjs.resolve(vt,kt);break}const xt=Ct&&((At=globalThis.FontInspector)!=null&&At.enabled)?(kt,Mt)=>globalThis.FontInspector.fontAdded(kt,Mt):null,Pt=new FontFaceObject(Et,{disableFontFace:_t,inspectFont:xt});this.fontLoader.bind(Pt).catch(()=>$.sendWithPromise("FontFallback",{id:vt})).finally(()=>{!wt&&Pt.data&&(Pt.data=null),this.commonObjs.resolve(vt,Pt)});break;case"CopyLocalImage":const{imageRef:Rt}=Et;assert(Rt,"The imageRef must be defined.");for(const kt of St(this,wl).values())for(const[,Mt]of kt.objs)if((Mt==null?void 0:Mt.ref)===Rt)return Mt.dataLen?(this.commonObjs.resolve(vt,structuredClone(Mt)),Mt.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(vt,Et);break;default:throw new Error(`Got unknown common object type ${bt}`)}return null}),$.on("obj",([vt,bt,Et,At])=>{var wt;if(this.destroyed)return;const _t=St(this,wl).get(bt);if(!_t.objs.has(vt)){if(_t._intentStates.size===0){(wt=At==null?void 0:At.bitmap)==null||wt.close();return}switch(Et){case"Image":_t.objs.resolve(vt,At),(At==null?void 0:At.dataLen)>MAX_IMAGE_SIZE_TO_CACHE&&(_t._maybeCleanupAfterRender=!0);break;case"Pattern":_t.objs.resolve(vt,At);break;default:throw new Error(`Got unknown object type ${Et}`)}}}),$.on("DocProgress",vt=>{var bt;this.destroyed||(bt=ht.onProgress)==null||bt.call(ht,{loaded:vt.loaded,total:vt.total})}),$.on("FetchBuiltInCMap",vt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(vt):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),$.on("FetchStandardFontData",vt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(vt):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var vt;this.annotationStorage.size<=0&&warn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:$,transfer:ht}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:$,filename:((vt=this._fullReader)==null?void 0:vt.filename)??null},ht).finally(()=>{this.annotationStorage.resetModified()})}getPage($){if(!Number.isInteger($)||$<=0||$>this._numPages)return Promise.reject(new Error("Invalid page request."));const ht=$-1,vt=St(this,Rm).get(ht);if(vt)return vt;const bt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:ht}).then(Et=>{if(this.destroyed)throw new Error("Transport destroyed");Et.refStr&&St(this,km).set(Et.refStr,$);const At=new PDFPageProxy(ht,Et,this,this._params.pdfBug);return St(this,wl).set(ht,At),At});return St(this,Rm).set(ht,bt),bt}getPageIndex($){return isRefProxy($)?this.messageHandler.sendWithPromise("GetPageIndex",{num:$.num,gen:$.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations($,ht){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:$,intent:ht})}getFieldObjects(){return Ut(this,bp,av).call(this,"GetFieldObjects")}hasJSActions(){return Ut(this,bp,av).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination($){return typeof $!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:$})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Ut(this,bp,av).call(this,"GetDocJSActions")}getPageJSActions($){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:$})}getStructTree($){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:$})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig($){return Ut(this,bp,av).call(this,"GetOptionalContentConfig").then(ht=>new OptionalContentConfig(ht,$))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const $="GetMetadata",ht=St(this,_c).get($);if(ht)return ht;const vt=this.messageHandler.sendWithPromise($,null).then(bt=>{var Et,At;return{info:bt[0],metadata:bt[1]?new Metadata(bt[1]):null,contentDispositionFilename:((Et=this._fullReader)==null?void 0:Et.filename)??null,contentLength:((At=this._fullReader)==null?void 0:At.contentLength)??null}});return St(this,_c).set($,vt),vt}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup($=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const ht of St(this,wl).values())if(!ht.cleanup())throw new Error(`startCleanup: Page ${ht.pageNumber} is currently rendering.`);this.commonObjs.clear(),$||this.fontLoader.clear(),St(this,_c).clear(),this.filterFactory.destroy(!0),TextLayer.cleanup()}}cachedPageNumber($){if(!isRefProxy($))return null;const ht=$.gen===0?`${$.num}R`:`${$.num}R${$.gen}`;return St(this,km).get(ht)??null}}_c=new WeakMap,wl=new WeakMap,Rm=new WeakMap,km=new WeakMap,Sl=new WeakMap,bp=new WeakSet,av=function($,ht=null){const vt=St(this,_c).get($);if(vt)return vt;const bt=this.messageHandler.sendWithPromise($,ht);return St(this,_c).set($,bt),bt};const INITIAL_DATA=Symbol("INITIAL_DATA");var Ko,fy,qE;class PDFObjects{constructor(){Kt(this,fy);Kt(this,Ko,Object.create(null))}get($,ht=null){if(ht){const bt=Ut(this,fy,qE).call(this,$);return bt.promise.then(()=>ht(bt.data)),null}const vt=St(this,Ko)[$];if(!vt||vt.data===INITIAL_DATA)throw new Error(`Requesting object that isn't resolved yet ${$}.`);return vt.data}has($){const ht=St(this,Ko)[$];return!!ht&&ht.data!==INITIAL_DATA}resolve($,ht=null){const vt=Ut(this,fy,qE).call(this,$);vt.data=ht,vt.resolve()}clear(){var $;for(const ht in St(this,Ko)){const{data:vt}=St(this,Ko)[ht];($=vt==null?void 0:vt.bitmap)==null||$.close()}zt(this,Ko,Object.create(null))}*[Symbol.iterator](){for(const $ in St(this,Ko)){const{data:ht}=St(this,Ko)[$];ht!==INITIAL_DATA&&(yield[$,ht])}}}Ko=new WeakMap,fy=new WeakSet,qE=function($){var ht;return(ht=St(this,Ko))[$]||(ht[$]={...Promise.withResolvers(),data:INITIAL_DATA})};var Mu;class RenderTask{constructor($){Kt(this,Mu,null);zt(this,Mu,$),this.onContinue=null}get promise(){return St(this,Mu).capability.promise}cancel($=0){St(this,Mu).cancel(null,$)}get separateAnnots(){const{separateAnnots:$}=St(this,Mu).operatorList;if(!$)return!1;const{annotationCanvasMap:ht}=St(this,Mu);return $.form||$.canvas&&(ht==null?void 0:ht.size)>0}}Mu=new WeakMap;var Ep;const Zu=class Zu{constructor({callback:$,params:ht,objs:vt,commonObjs:bt,annotationCanvasMap:Et,operatorList:At,pageIndex:_t,canvasFactory:wt,filterFactory:Ct,useRequestAnimationFrame:xt=!1,pdfBug:Pt=!1,pageColors:Rt=null}){this.callback=$,this.params=ht,this.objs=vt,this.commonObjs=bt,this.annotationCanvasMap=Et,this.operatorListIdx=null,this.operatorList=At,this._pageIndex=_t,this.canvasFactory=wt,this.filterFactory=Ct,this._pdfBug=Pt,this.pageColors=Rt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=xt===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=ht.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:$=!1,optionalContentConfig:ht}){var _t,wt;if(this.cancelled)return;if(this._canvas){if(St(Zu,Ep).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");St(Zu,Ep).add(this._canvas)}this._pdfBug&&((_t=globalThis.StepperManager)!=null&&_t.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:vt,viewport:bt,transform:Et,background:At}=this.params;this.gfx=new CanvasGraphics(vt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:ht},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Et,viewport:bt,transparency:$,background:At}),this.operatorListIdx=0,this.graphicsReady=!0,(wt=this.graphicsReadyCallback)==null||wt.call(this)}cancel($=null,ht=0){var vt;this.running=!1,this.cancelled=!0,(vt=this.gfx)==null||vt.endDrawing(),St(Zu,Ep).delete(this._canvas),this.callback($||new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,ht))}operatorListChanged(){var $;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}($=this.stepper)==null||$.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),St(Zu,Ep).delete(this._canvas),this.callback())))}};Ep=new WeakMap,Kt(Zu,Ep,new WeakSet);let InternalRenderTask=Zu;const version="4.3.136",build="0cec64437";function makeColorComp(_e){return Math.floor(Math.max(0,Math.min(1,_e))*255).toString(16).padStart(2,"0")}function scaleAndClamp(_e){return Math.max(0,Math.min(255,255*_e))}class ColorConverters{static CMYK_G([$,ht,vt,bt]){return["G",1-Math.min(1,.3*$+.59*vt+.11*ht+bt)]}static G_CMYK([$]){return["CMYK",0,0,0,1-$]}static G_RGB([$]){return["RGB",$,$,$]}static G_rgb([$]){return $=scaleAndClamp($),[$,$,$]}static G_HTML([$]){const ht=makeColorComp($);return`#${ht}${ht}${ht}`}static RGB_G([$,ht,vt]){return["G",.3*$+.59*ht+.11*vt]}static RGB_rgb($){return $.map(scaleAndClamp)}static RGB_HTML($){return`#${$.map(makeColorComp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([$,ht,vt,bt]){return["RGB",1-Math.min(1,$+bt),1-Math.min(1,vt+bt),1-Math.min(1,ht+bt)]}static CMYK_rgb([$,ht,vt,bt]){return[scaleAndClamp(1-Math.min(1,$+bt)),scaleAndClamp(1-Math.min(1,vt+bt)),scaleAndClamp(1-Math.min(1,ht+bt))]}static CMYK_HTML($){const ht=this.CMYK_RGB($).slice(1);return this.RGB_HTML(ht)}static RGB_CMYK([$,ht,vt]){const bt=1-$,Et=1-ht,At=1-vt,_t=Math.min(bt,Et,At);return["CMYK",bt,Et,At,_t]}}class XfaLayer{static setupStorage($,ht,vt,bt,Et){const At=bt.getValue(ht,{value:null});switch(vt.name){case"textarea":if(At.value!==null&&($.textContent=At.value),Et==="print")break;$.addEventListener("input",_t=>{bt.setValue(ht,{value:_t.target.value})});break;case"input":if(vt.attributes.type==="radio"||vt.attributes.type==="checkbox"){if(At.value===vt.attributes.xfaOn?$.setAttribute("checked",!0):At.value===vt.attributes.xfaOff&&$.removeAttribute("checked"),Et==="print")break;$.addEventListener("change",_t=>{bt.setValue(ht,{value:_t.target.checked?_t.target.getAttribute("xfaOn"):_t.target.getAttribute("xfaOff")})})}else{if(At.value!==null&&$.setAttribute("value",At.value),Et==="print")break;$.addEventListener("input",_t=>{bt.setValue(ht,{value:_t.target.value})})}break;case"select":if(At.value!==null){$.setAttribute("value",At.value);for(const _t of vt.children)_t.attributes.value===At.value?_t.attributes.selected=!0:_t.attributes.hasOwnProperty("selected")&&delete _t.attributes.selected}$.addEventListener("input",_t=>{const wt=_t.target.options,Ct=wt.selectedIndex===-1?"":wt[wt.selectedIndex].value;bt.setValue(ht,{value:Ct})});break}}static setAttributes({html:$,element:ht,storage:vt=null,intent:bt,linkService:Et}){const{attributes:At}=ht,_t=$ instanceof HTMLAnchorElement;At.type==="radio"&&(At.name=`${At.name}-${bt}`);for(const[wt,Ct]of Object.entries(At))if(Ct!=null)switch(wt){case"class":Ct.length&&$.setAttribute(wt,Ct.join(" "));break;case"dataId":break;case"id":$.setAttribute("data-element-id",Ct);break;case"style":Object.assign($.style,Ct);break;case"textContent":$.textContent=Ct;break;default:(!_t||wt!=="href"&&wt!=="newWindow")&&$.setAttribute(wt,Ct)}_t&&Et.addLinkAttributes($,At.href,At.newWindow),vt&&At.dataId&&this.setupStorage($,At.dataId,ht,vt)}static render($){var Pt,Rt;const ht=$.annotationStorage,vt=$.linkService,bt=$.xfaHtml,Et=$.intent||"display",At=document.createElement(bt.name);bt.attributes&&this.setAttributes({html:At,element:bt,intent:Et,linkService:vt});const _t=Et!=="richText",wt=$.div;if(wt.append(At),$.viewport){const kt=`matrix(${$.viewport.transform.join(",")})`;wt.style.transform=kt}_t&&wt.setAttribute("class","xfaLayer xfaFont");const Ct=[];if(bt.children.length===0){if(bt.value){const kt=document.createTextNode(bt.value);At.append(kt),_t&&XfaText.shouldBuildText(bt.name)&&Ct.push(kt)}return{textDivs:Ct}}const xt=[[bt,-1,At]];for(;xt.length>0;){const[kt,Mt,Lt]=xt.at(-1);if(Mt+1===kt.children.length){xt.pop();continue}const Ot=kt.children[++xt.at(-1)[1]];if(Ot===null)continue;const{name:Ft}=Ot;if(Ft==="#text"){const $t=document.createTextNode(Ot.value);Ct.push($t),Lt.append($t);continue}const Dt=(Pt=Ot==null?void 0:Ot.attributes)!=null&&Pt.xmlns?document.createElementNS(Ot.attributes.xmlns,Ft):document.createElement(Ft);if(Lt.append(Dt),Ot.attributes&&this.setAttributes({html:Dt,element:Ot,storage:ht,intent:Et,linkService:vt}),((Rt=Ot.children)==null?void 0:Rt.length)>0)xt.push([Ot,-1,Dt]);else if(Ot.value){const $t=document.createTextNode(Ot.value);_t&&XfaText.shouldBuildText(Ft)&&Ct.push($t),Dt.append($t)}}for(const kt of wt.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))kt.setAttribute("readOnly",!0);return{textDivs:Ct}}static update($){const ht=`matrix(${$.viewport.transform.join(",")})`;$.div.style.transform=ht,$.div.hidden=!1}}const DEFAULT_TAB_INDEX=1e3,annotation_layer_DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet;function getRectDims(_e){return{width:_e[2]-_e[0],height:_e[3]-_e[1]}}class AnnotationElementFactory{static create($){switch($.data.annotationType){case AnnotationType.LINK:return new LinkAnnotationElement($);case AnnotationType.TEXT:return new TextAnnotationElement($);case AnnotationType.WIDGET:switch($.data.fieldType){case"Tx":return new TextWidgetAnnotationElement($);case"Btn":return $.data.radioButton?new RadioButtonWidgetAnnotationElement($):$.data.checkBox?new CheckboxWidgetAnnotationElement($):new PushButtonWidgetAnnotationElement($);case"Ch":return new ChoiceWidgetAnnotationElement($);case"Sig":return new SignatureWidgetAnnotationElement($)}return new WidgetAnnotationElement($);case AnnotationType.POPUP:return new PopupAnnotationElement($);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement($);case AnnotationType.LINE:return new LineAnnotationElement($);case AnnotationType.SQUARE:return new SquareAnnotationElement($);case AnnotationType.CIRCLE:return new CircleAnnotationElement($);case AnnotationType.POLYLINE:return new PolylineAnnotationElement($);case AnnotationType.CARET:return new CaretAnnotationElement($);case AnnotationType.INK:return new InkAnnotationElement($);case AnnotationType.POLYGON:return new PolygonAnnotationElement($);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement($);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement($);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement($);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement($);case AnnotationType.STAMP:return new StampAnnotationElement($);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement($);default:return new AnnotationElement($)}}}var Ap,Mm,Fm,py,YE;const r_=class r_{constructor($,{isRenderable:ht=!1,ignoreBorder:vt=!1,createQuadrilaterals:bt=!1}={}){Kt(this,py);Kt(this,Ap,null);Kt(this,Mm,!1);Kt(this,Fm,null);this.isRenderable=ht,this.data=$.data,this.layer=$.layer,this.linkService=$.linkService,this.downloadManager=$.downloadManager,this.imageResourcesPath=$.imageResourcesPath,this.renderForms=$.renderForms,this.svgFactory=$.svgFactory,this.annotationStorage=$.annotationStorage,this.enableScripting=$.enableScripting,this.hasJSActions=$.hasJSActions,this._fieldObjects=$.fieldObjects,this.parent=$.parent,ht&&(this.container=this._createContainer(vt)),bt&&this._createQuadrilaterals()}static _hasPopupData({titleObj:$,contentsObj:ht,richText:vt}){return!!($!=null&&$.str||ht!=null&&ht.str||vt!=null&&vt.str)}get hasPopupData(){return r_._hasPopupData(this.data)}updateEdited($){var vt;if(!this.container)return;St(this,Ap)||zt(this,Ap,{rect:this.data.rect.slice(0)});const{rect:ht}=$;ht&&Ut(this,py,YE).call(this,ht),(vt=St(this,Fm))==null||vt.popup.updateEdited($)}resetEdited(){var $;St(this,Ap)&&(Ut(this,py,YE).call(this,St(this,Ap).rect),($=St(this,Fm))==null||$.popup.resetEdited(),zt(this,Ap,null))}_createContainer($){const{data:ht,parent:{page:vt,viewport:bt}}=this,Et=document.createElement("section");Et.setAttribute("data-annotation-id",ht.id),this instanceof WidgetAnnotationElement||(Et.tabIndex=DEFAULT_TAB_INDEX);const{style:At}=Et;if(At.zIndex=this.parent.zIndex++,ht.popupRef&&Et.setAttribute("aria-haspopup","dialog"),ht.alternativeText&&(Et.title=ht.alternativeText),ht.noRotate&&Et.classList.add("norotate"),!ht.rect||this instanceof PopupAnnotationElement){const{rotation:Lt}=ht;return!ht.hasOwnCanvas&&Lt!==0&&this.setRotation(Lt,Et),Et}const{width:_t,height:wt}=getRectDims(ht.rect);if(!$&&ht.borderStyle.width>0){At.borderWidth=`${ht.borderStyle.width}px`;const Lt=ht.borderStyle.horizontalCornerRadius,Ot=ht.borderStyle.verticalCornerRadius;if(Lt>0||Ot>0){const Dt=`calc(${Lt}px * var(--scale-factor)) / calc(${Ot}px * var(--scale-factor))`;At.borderRadius=Dt}else if(this instanceof RadioButtonWidgetAnnotationElement){const Dt=`calc(${_t}px * var(--scale-factor)) / calc(${wt}px * var(--scale-factor))`;At.borderRadius=Dt}switch(ht.borderStyle.style){case AnnotationBorderStyleType.SOLID:At.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:At.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:At.borderBottomStyle="solid";break}const Ft=ht.borderColor||null;Ft?(zt(this,Mm,!0),At.borderColor=Util.makeHexColor(Ft[0]|0,Ft[1]|0,Ft[2]|0)):At.borderWidth=0}const Ct=Util.normalizeRect([ht.rect[0],vt.view[3]-ht.rect[1]+vt.view[1],ht.rect[2],vt.view[3]-ht.rect[3]+vt.view[1]]),{pageWidth:xt,pageHeight:Pt,pageX:Rt,pageY:kt}=bt.rawDims;At.left=`${100*(Ct[0]-Rt)/xt}%`,At.top=`${100*(Ct[1]-kt)/Pt}%`;const{rotation:Mt}=ht;return ht.hasOwnCanvas||Mt===0?(At.width=`${100*_t/xt}%`,At.height=`${100*wt/Pt}%`):this.setRotation(Mt,Et),Et}setRotation($,ht=this.container){if(!this.data.rect)return;const{pageWidth:vt,pageHeight:bt}=this.parent.viewport.rawDims,{width:Et,height:At}=getRectDims(this.data.rect);let _t,wt;$%180===0?(_t=100*Et/vt,wt=100*At/bt):(_t=100*At/vt,wt=100*Et/bt),ht.style.width=`${_t}%`,ht.style.height=`${wt}%`,ht.setAttribute("data-main-rotation",(360-$)%360)}get _commonActions(){const $=(ht,vt,bt)=>{const Et=bt.detail[ht],At=Et[0],_t=Et.slice(1);bt.target.style[vt]=ColorConverters[`${At}_HTML`](_t),this.annotationStorage.setValue(this.data.id,{[vt]:ColorConverters[`${At}_rgb`](_t)})};return shadow(this,"_commonActions",{display:ht=>{const{display:vt}=ht.detail,bt=vt%2===1;this.container.style.visibility=bt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:bt,noPrint:vt===1||vt===2})},print:ht=>{this.annotationStorage.setValue(this.data.id,{noPrint:!ht.detail.print})},hidden:ht=>{const{hidden:vt}=ht.detail;this.container.style.visibility=vt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:vt,noView:vt})},focus:ht=>{setTimeout(()=>ht.target.focus({preventScroll:!1}),0)},userName:ht=>{ht.target.title=ht.detail.userName},readonly:ht=>{ht.target.disabled=ht.detail.readonly},required:ht=>{this._setRequired(ht.target,ht.detail.required)},bgColor:ht=>{$("bgColor","backgroundColor",ht)},fillColor:ht=>{$("fillColor","backgroundColor",ht)},fgColor:ht=>{$("fgColor","color",ht)},textColor:ht=>{$("textColor","color",ht)},borderColor:ht=>{$("borderColor","borderColor",ht)},strokeColor:ht=>{$("strokeColor","borderColor",ht)},rotation:ht=>{const vt=ht.detail.rotation;this.setRotation(vt),this.annotationStorage.setValue(this.data.id,{rotation:vt})}})}_dispatchEventFromSandbox($,ht){const vt=this._commonActions;for(const bt of Object.keys(ht.detail)){const Et=$[bt]||vt[bt];Et==null||Et(ht)}}_setDefaultPropertiesFromJS($){if(!this.enableScripting)return;const ht=this.annotationStorage.getRawValue(this.data.id);if(!ht)return;const vt=this._commonActions;for(const[bt,Et]of Object.entries(ht)){const At=vt[bt];if(At){const _t={detail:{[bt]:Et},target:$};At(_t),delete ht[bt]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:$}=this.data;if(!$)return;const[ht,vt,bt,Et]=this.data.rect;if($.length===1){const[,{x:Lt,y:Ot},{x:Ft,y:Dt}]=$[0];if(bt===Lt&&Et===Ot&&ht===Ft&&vt===Dt)return}const{style:At}=this.container;let _t;if(St(this,Mm)){const{borderColor:Lt,borderWidth:Ot}=At;At.borderWidth=0,_t=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Lt}" stroke-width="${Ot}">`],this.container.classList.add("hasBorder")}const wt=bt-ht,Ct=Et-vt,{svgFactory:xt}=this,Pt=xt.createElement("svg");Pt.classList.add("quadrilateralsContainer"),Pt.setAttribute("width",0),Pt.setAttribute("height",0);const Rt=xt.createElement("defs");Pt.append(Rt);const kt=xt.createElement("clipPath"),Mt=`clippath_${this.data.id}`;kt.setAttribute("id",Mt),kt.setAttribute("clipPathUnits","objectBoundingBox"),Rt.append(kt);for(const[,{x:Lt,y:Ot},{x:Ft,y:Dt}]of $){const $t=xt.createElement("rect"),Bt=(Ft-ht)/wt,Nt=(Et-Ot)/Ct,Ht=(Lt-Ft)/wt,Vt=(Ot-Dt)/Ct;$t.setAttribute("x",Bt),$t.setAttribute("y",Nt),$t.setAttribute("width",Ht),$t.setAttribute("height",Vt),kt.append($t),_t==null||_t.push(`<rect vector-effect="non-scaling-stroke" x="${Bt}" y="${Nt}" width="${Ht}" height="${Vt}"/>`)}St(this,Mm)&&(_t.push("</g></svg>')"),At.backgroundImage=_t.join("")),this.container.append(Pt),this.container.style.clipPath=`url(#${Mt})`}_createPopup(){const{container:$,data:ht}=this;$.setAttribute("aria-haspopup","dialog");const vt=zt(this,Fm,new PopupAnnotationElement({data:{color:ht.color,titleObj:ht.titleObj,modificationDate:ht.modificationDate,contentsObj:ht.contentsObj,richText:ht.richText,parentRect:ht.rect,borderStyle:0,id:`popup_${ht.id}`,rotation:ht.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(vt.render())}render(){unreachable("Abstract method `AnnotationElement.render` called")}_getElementsByName($,ht=null){const vt=[];if(this._fieldObjects){const bt=this._fieldObjects[$];if(bt)for(const{page:Et,id:At,exportValues:_t}of bt){if(Et===-1||At===ht)continue;const wt=typeof _t=="string"?_t:null,Ct=document.querySelector(`[data-element-id="${At}"]`);if(Ct&&!GetElementsByNameSet.has(Ct)){warn(`_getElementsByName - element not allowed: ${At}`);continue}vt.push({id:At,exportValue:wt,domElement:Ct})}return vt}for(const bt of document.getElementsByName($)){const{exportValue:Et}=bt,At=bt.getAttribute("data-element-id");At!==ht&&GetElementsByNameSet.has(bt)&&vt.push({id:At,exportValue:Et,domElement:bt})}return vt}show(){var $;this.container&&(this.container.hidden=!1),($=this.popup)==null||$.maybeShow()}hide(){var $;this.container&&(this.container.hidden=!0),($=this.popup)==null||$.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const $=this.getElementsToTriggerPopup();if(Array.isArray($))for(const ht of $)ht.classList.add("highlightArea");else $.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:$,data:{id:ht}}=this;this.container.addEventListener("dblclick",()=>{var vt;(vt=this.linkService.eventBus)==null||vt.dispatch("switchannotationeditormode",{source:this,mode:$,editId:ht})})}};Ap=new WeakMap,Mm=new WeakMap,Fm=new WeakMap,py=new WeakSet,YE=function($){const{container:{style:ht},data:{rect:vt,rotation:bt},parent:{viewport:{rawDims:{pageWidth:Et,pageHeight:At,pageX:_t,pageY:wt}}}}=this;vt==null||vt.splice(0,4,...$);const{width:Ct,height:xt}=getRectDims($);ht.left=`${100*($[0]-_t)/Et}%`,ht.top=`${100*(At-$[3]+wt)/At}%`,bt===0?(ht.width=`${100*Ct/Et}%`,ht.height=`${100*xt/At}%`):this.setRotation(bt)};let AnnotationElement=r_;var Mo,Ku,ew,tw;class LinkAnnotationElement extends AnnotationElement{constructor(ht,vt=null){super(ht,{isRenderable:!0,ignoreBorder:!!(vt!=null&&vt.ignoreBorder),createQuadrilaterals:!0});Kt(this,Mo);this.isTooltipOnly=ht.data.isTooltipOnly}render(){const{data:ht,linkService:vt}=this,bt=document.createElement("a");bt.setAttribute("data-element-id",ht.id);let Et=!1;return ht.url?(vt.addLinkAttributes(bt,ht.url,ht.newWindow),Et=!0):ht.action?(this._bindNamedAction(bt,ht.action),Et=!0):ht.attachment?(Ut(this,Mo,ew).call(this,bt,ht.attachment,ht.attachmentDest),Et=!0):ht.setOCGState?(Ut(this,Mo,tw).call(this,bt,ht.setOCGState),Et=!0):ht.dest?(this._bindLink(bt,ht.dest),Et=!0):(ht.actions&&(ht.actions.Action||ht.actions["Mouse Up"]||ht.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(bt,ht),Et=!0),ht.resetForm?(this._bindResetFormAction(bt,ht.resetForm),Et=!0):this.isTooltipOnly&&!Et&&(this._bindLink(bt,""),Et=!0)),this.container.classList.add("linkAnnotation"),Et&&this.container.append(bt),this.container}_bindLink(ht,vt){ht.href=this.linkService.getDestinationHash(vt),ht.onclick=()=>(vt&&this.linkService.goToDestination(vt),!1),(vt||vt==="")&&Ut(this,Mo,Ku).call(this)}_bindNamedAction(ht,vt){ht.href=this.linkService.getAnchorUrl(""),ht.onclick=()=>(this.linkService.executeNamedAction(vt),!1),Ut(this,Mo,Ku).call(this)}_bindJSAction(ht,vt){ht.href=this.linkService.getAnchorUrl("");const bt=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Et of Object.keys(vt.actions)){const At=bt.get(Et);At&&(ht[At]=()=>{var _t;return(_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:vt.id,name:Et}}),!1})}ht.onclick||(ht.onclick=()=>!1),Ut(this,Mo,Ku).call(this)}_bindResetFormAction(ht,vt){const bt=ht.onclick;if(bt||(ht.href=this.linkService.getAnchorUrl("")),Ut(this,Mo,Ku).call(this),!this._fieldObjects){warn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),bt||(ht.onclick=()=>!1);return}ht.onclick=()=>{var Pt;bt==null||bt();const{fields:Et,refs:At,include:_t}=vt,wt=[];if(Et.length!==0||At.length!==0){const Rt=new Set(At);for(const kt of Et){const Mt=this._fieldObjects[kt]||[];for(const{id:Lt}of Mt)Rt.add(Lt)}for(const kt of Object.values(this._fieldObjects))for(const Mt of kt)Rt.has(Mt.id)===_t&&wt.push(Mt)}else for(const Rt of Object.values(this._fieldObjects))wt.push(...Rt);const Ct=this.annotationStorage,xt=[];for(const Rt of wt){const{id:kt}=Rt;switch(xt.push(kt),Rt.type){case"text":{const Lt=Rt.defaultValue||"";Ct.setValue(kt,{value:Lt});break}case"checkbox":case"radiobutton":{const Lt=Rt.defaultValue===Rt.exportValues;Ct.setValue(kt,{value:Lt});break}case"combobox":case"listbox":{const Lt=Rt.defaultValue||"";Ct.setValue(kt,{value:Lt});break}default:continue}const Mt=document.querySelector(`[data-element-id="${kt}"]`);if(Mt){if(!GetElementsByNameSet.has(Mt)){warn(`_bindResetFormAction - element not allowed: ${kt}`);continue}}else continue;Mt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Pt=this.linkService.eventBus)==null||Pt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:xt,name:"ResetForm"}})),!1}}}Mo=new WeakSet,Ku=function(){this.container.setAttribute("data-internal-link","")},ew=function(ht,vt,bt=null){ht.href=this.linkService.getAnchorUrl(""),vt.description&&(ht.title=vt.description),ht.onclick=()=>{var Et;return(Et=this.downloadManager)==null||Et.openOrDownloadData(vt.content,vt.filename,bt),!1},Ut(this,Mo,Ku).call(this)},tw=function(ht,vt){ht.href=this.linkService.getAnchorUrl(""),ht.onclick=()=>(this.linkService.executeSetOCGState(vt),!1),Ut(this,Mo,Ku).call(this)};class TextAnnotationElement extends AnnotationElement{constructor($){super($,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const $=document.createElement("img");return $.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",$.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),$.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append($),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}showElementAndHideCanvas($){var ht;this.data.hasOwnCanvas&&(((ht=$.previousSibling)==null?void 0:ht.nodeName)==="CANVAS"&&($.previousSibling.hidden=!0),$.hidden=!1)}_getKeyModifier($){return util_FeatureTest.platform.isMac?$.metaKey:$.ctrlKey}_setEventListener($,ht,vt,bt,Et){vt.includes("mouse")?$.addEventListener(vt,At=>{var _t;(_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:bt,value:Et(At),shift:At.shiftKey,modifier:this._getKeyModifier(At)}})}):$.addEventListener(vt,At=>{var _t;if(vt==="blur"){if(!ht.focused||!At.relatedTarget)return;ht.focused=!1}else if(vt==="focus"){if(ht.focused)return;ht.focused=!0}Et&&((_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:bt,value:Et(At)}}))})}_setEventListeners($,ht,vt,bt){var Et,At,_t;for(const[wt,Ct]of vt)(Ct==="Action"||(Et=this.data.actions)!=null&&Et[Ct])&&((Ct==="Focus"||Ct==="Blur")&&(ht||(ht={focused:!1})),this._setEventListener($,ht,wt,Ct,bt),Ct==="Focus"&&!((At=this.data.actions)!=null&&At.Blur)?this._setEventListener($,ht,"blur","Blur",null):Ct==="Blur"&&!((_t=this.data.actions)!=null&&_t.Focus)&&this._setEventListener($,ht,"focus","Focus",null))}_setBackgroundColor($){const ht=this.data.backgroundColor||null;$.style.backgroundColor=ht===null?"transparent":Util.makeHexColor(ht[0],ht[1],ht[2])}_setTextStyle($){const ht=["left","center","right"],{fontColor:vt}=this.data.defaultAppearanceData,bt=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE,Et=$.style;let At;const _t=2,wt=Ct=>Math.round(10*Ct)/10;if(this.data.multiLine){const Ct=Math.abs(this.data.rect[3]-this.data.rect[1]-_t),xt=Math.round(Ct/(LINE_FACTOR*bt))||1,Pt=Ct/xt;At=Math.min(bt,wt(Pt/LINE_FACTOR))}else{const Ct=Math.abs(this.data.rect[3]-this.data.rect[1]-_t);At=Math.min(bt,wt(Ct/LINE_FACTOR))}Et.fontSize=`calc(${At}px * var(--scale-factor))`,Et.color=Util.makeHexColor(vt[0],vt[1],vt[2]),this.data.textAlignment!==null&&(Et.textAlign=ht[this.data.textAlignment])}_setRequired($,ht){ht?$.setAttribute("required",!0):$.removeAttribute("required"),$.setAttribute("aria-required",ht)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor($){const ht=$.renderForms||$.data.hasOwnCanvas||!$.data.hasAppearance&&!!$.data.fieldValue;super($,{isRenderable:ht})}setPropertyOnSiblings($,ht,vt,bt){const Et=this.annotationStorage;for(const At of this._getElementsByName($.name,$.id))At.domElement&&(At.domElement[ht]=vt),Et.setValue(At.id,{[bt]:vt})}render(){var bt,Et;const $=this.annotationStorage,ht=this.data.id;this.container.classList.add("textWidgetAnnotation");let vt=null;if(this.renderForms){const At=$.getValue(ht,{value:this.data.fieldValue});let _t=At.value||"";const wt=$.getValue(ht,{charLimit:this.data.maxLen}).charLimit;wt&&_t.length>wt&&(_t=_t.slice(0,wt));let Ct=At.formattedValue||((bt=this.data.textContent)==null?void 0:bt.join(`
`))||null;Ct&&this.data.comb&&(Ct=Ct.replaceAll(/\s+/g,""));const xt={userValue:_t,formattedValue:Ct,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(vt=document.createElement("textarea"),vt.textContent=Ct??_t,this.data.doNotScroll&&(vt.style.overflowY="hidden")):(vt=document.createElement("input"),vt.type="text",vt.setAttribute("value",Ct??_t),this.data.doNotScroll&&(vt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(vt.hidden=!0),GetElementsByNameSet.add(vt),vt.setAttribute("data-element-id",ht),vt.disabled=this.data.readOnly,vt.name=this.data.fieldName,vt.tabIndex=DEFAULT_TAB_INDEX,this._setRequired(vt,this.data.required),wt&&(vt.maxLength=wt),vt.addEventListener("input",Rt=>{$.setValue(ht,{value:Rt.target.value}),this.setPropertyOnSiblings(vt,"value",Rt.target.value,"value"),xt.formattedValue=null}),vt.addEventListener("resetform",Rt=>{const kt=this.data.defaultFieldValue??"";vt.value=xt.userValue=kt,xt.formattedValue=null});let Pt=Rt=>{const{formattedValue:kt}=xt;kt!=null&&(Rt.target.value=kt),Rt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){vt.addEventListener("focus",kt=>{var Lt;if(xt.focused)return;const{target:Mt}=kt;xt.userValue&&(Mt.value=xt.userValue),xt.lastCommittedValue=Mt.value,xt.commitKey=1,(Lt=this.data.actions)!=null&&Lt.Focus||(xt.focused=!0)}),vt.addEventListener("updatefromsandbox",kt=>{this.showElementAndHideCanvas(kt.target);const Mt={value(Lt){xt.userValue=Lt.detail.value??"",$.setValue(ht,{value:xt.userValue.toString()}),Lt.target.value=xt.userValue},formattedValue(Lt){const{formattedValue:Ot}=Lt.detail;xt.formattedValue=Ot,Ot!=null&&Lt.target!==document.activeElement&&(Lt.target.value=Ot),$.setValue(ht,{formattedValue:Ot})},selRange(Lt){Lt.target.setSelectionRange(...Lt.detail.selRange)},charLimit:Lt=>{var $t;const{charLimit:Ot}=Lt.detail,{target:Ft}=Lt;if(Ot===0){Ft.removeAttribute("maxLength");return}Ft.setAttribute("maxLength",Ot);let Dt=xt.userValue;!Dt||Dt.length<=Ot||(Dt=Dt.slice(0,Ot),Ft.value=xt.userValue=Dt,$.setValue(ht,{value:Dt}),($t=this.linkService.eventBus)==null||$t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ht,name:"Keystroke",value:Dt,willCommit:!0,commitKey:1,selStart:Ft.selectionStart,selEnd:Ft.selectionEnd}}))}};this._dispatchEventFromSandbox(Mt,kt)}),vt.addEventListener("keydown",kt=>{var Ot;xt.commitKey=1;let Mt=-1;if(kt.key==="Escape"?Mt=0:kt.key==="Enter"&&!this.data.multiLine?Mt=2:kt.key==="Tab"&&(xt.commitKey=3),Mt===-1)return;const{value:Lt}=kt.target;xt.lastCommittedValue!==Lt&&(xt.lastCommittedValue=Lt,xt.userValue=Lt,(Ot=this.linkService.eventBus)==null||Ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ht,name:"Keystroke",value:Lt,willCommit:!0,commitKey:Mt,selStart:kt.target.selectionStart,selEnd:kt.target.selectionEnd}}))});const Rt=Pt;Pt=null,vt.addEventListener("blur",kt=>{var Lt,Ot;if(!xt.focused||!kt.relatedTarget)return;(Lt=this.data.actions)!=null&&Lt.Blur||(xt.focused=!1);const{value:Mt}=kt.target;xt.userValue=Mt,xt.lastCommittedValue!==Mt&&((Ot=this.linkService.eventBus)==null||Ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ht,name:"Keystroke",value:Mt,willCommit:!0,commitKey:xt.commitKey,selStart:kt.target.selectionStart,selEnd:kt.target.selectionEnd}})),Rt(kt)}),(Et=this.data.actions)!=null&&Et.Keystroke&&vt.addEventListener("beforeinput",kt=>{var Nt;xt.lastCommittedValue=null;const{data:Mt,target:Lt}=kt,{value:Ot,selectionStart:Ft,selectionEnd:Dt}=Lt;let $t=Ft,Bt=Dt;switch(kt.inputType){case"deleteWordBackward":{const Ht=Ot.substring(0,Ft).match(/\w*[^\w]*$/);Ht&&($t-=Ht[0].length);break}case"deleteWordForward":{const Ht=Ot.substring(Ft).match(/^[^\w]*\w*/);Ht&&(Bt+=Ht[0].length);break}case"deleteContentBackward":Ft===Dt&&($t-=1);break;case"deleteContentForward":Ft===Dt&&(Bt+=1);break}kt.preventDefault(),(Nt=this.linkService.eventBus)==null||Nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ht,name:"Keystroke",value:Ot,change:Mt||"",willCommit:!1,selStart:$t,selEnd:Bt}})}),this._setEventListeners(vt,xt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],kt=>kt.target.value)}if(Pt&&vt.addEventListener("blur",Pt),this.data.comb){const kt=(this.data.rect[2]-this.data.rect[0])/wt;vt.classList.add("comb"),vt.style.letterSpacing=`calc(${kt}px * var(--scale-factor) - 1ch)`}}else vt=document.createElement("div"),vt.textContent=this.data.fieldValue,vt.style.verticalAlign="middle",vt.style.display="table-cell",this.data.hasOwnCanvas&&(vt.hidden=!0);return this._setTextStyle(vt),this._setBackgroundColor(vt),this._setDefaultPropertiesFromJS(vt),this.container.append(vt),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor($){super($,{isRenderable:!!$.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor($){super($,{isRenderable:$.renderForms})}render(){const $=this.annotationStorage,ht=this.data,vt=ht.id;let bt=$.getValue(vt,{value:ht.exportValue===ht.fieldValue}).value;typeof bt=="string"&&(bt=bt!=="Off",$.setValue(vt,{value:bt})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Et=document.createElement("input");return GetElementsByNameSet.add(Et),Et.setAttribute("data-element-id",vt),Et.disabled=ht.readOnly,this._setRequired(Et,this.data.required),Et.type="checkbox",Et.name=ht.fieldName,bt&&Et.setAttribute("checked",!0),Et.setAttribute("exportValue",ht.exportValue),Et.tabIndex=DEFAULT_TAB_INDEX,Et.addEventListener("change",At=>{const{name:_t,checked:wt}=At.target;for(const Ct of this._getElementsByName(_t,vt)){const xt=wt&&Ct.exportValue===ht.exportValue;Ct.domElement&&(Ct.domElement.checked=xt),$.setValue(Ct.id,{value:xt})}$.setValue(vt,{value:wt})}),Et.addEventListener("resetform",At=>{const _t=ht.defaultFieldValue||"Off";At.target.checked=_t===ht.exportValue}),this.enableScripting&&this.hasJSActions&&(Et.addEventListener("updatefromsandbox",At=>{const _t={value(wt){wt.target.checked=wt.detail.value!=="Off",$.setValue(vt,{value:wt.target.checked})}};this._dispatchEventFromSandbox(_t,At)}),this._setEventListeners(Et,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],At=>At.target.checked)),this._setBackgroundColor(Et),this._setDefaultPropertiesFromJS(Et),this.container.append(Et),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor($){super($,{isRenderable:$.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const $=this.annotationStorage,ht=this.data,vt=ht.id;let bt=$.getValue(vt,{value:ht.fieldValue===ht.buttonValue}).value;if(typeof bt=="string"&&(bt=bt!==ht.buttonValue,$.setValue(vt,{value:bt})),bt)for(const At of this._getElementsByName(ht.fieldName,vt))$.setValue(At.id,{value:!1});const Et=document.createElement("input");if(GetElementsByNameSet.add(Et),Et.setAttribute("data-element-id",vt),Et.disabled=ht.readOnly,this._setRequired(Et,this.data.required),Et.type="radio",Et.name=ht.fieldName,bt&&Et.setAttribute("checked",!0),Et.tabIndex=DEFAULT_TAB_INDEX,Et.addEventListener("change",At=>{const{name:_t,checked:wt}=At.target;for(const Ct of this._getElementsByName(_t,vt))$.setValue(Ct.id,{value:!1});$.setValue(vt,{value:wt})}),Et.addEventListener("resetform",At=>{const _t=ht.defaultFieldValue;At.target.checked=_t!=null&&_t===ht.buttonValue}),this.enableScripting&&this.hasJSActions){const At=ht.buttonValue;Et.addEventListener("updatefromsandbox",_t=>{const wt={value:Ct=>{const xt=At===Ct.detail.value;for(const Pt of this._getElementsByName(Ct.target.name)){const Rt=xt&&Pt.id===vt;Pt.domElement&&(Pt.domElement.checked=Rt),$.setValue(Pt.id,{value:Rt})}}};this._dispatchEventFromSandbox(wt,_t)}),this._setEventListeners(Et,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_t=>_t.target.checked)}return this._setBackgroundColor(Et),this._setDefaultPropertiesFromJS(Et),this.container.append(Et),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor($){super($,{ignoreBorder:$.data.hasAppearance})}render(){const $=super.render();$.classList.add("buttonWidgetAnnotation","pushButton");const ht=$.lastChild;return this.enableScripting&&this.hasJSActions&&ht&&(this._setDefaultPropertiesFromJS(ht),ht.addEventListener("updatefromsandbox",vt=>{this._dispatchEventFromSandbox({},vt)})),$}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor($){super($,{isRenderable:$.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const $=this.annotationStorage,ht=this.data.id,vt=$.getValue(ht,{value:this.data.fieldValue}),bt=document.createElement("select");GetElementsByNameSet.add(bt),bt.setAttribute("data-element-id",ht),bt.disabled=this.data.readOnly,this._setRequired(bt,this.data.required),bt.name=this.data.fieldName,bt.tabIndex=DEFAULT_TAB_INDEX;let Et=this.data.combo&&this.data.options.length>0;this.data.combo||(bt.size=this.data.options.length,this.data.multiSelect&&(bt.multiple=!0)),bt.addEventListener("resetform",xt=>{const Pt=this.data.defaultFieldValue;for(const Rt of bt.options)Rt.selected=Rt.value===Pt});for(const xt of this.data.options){const Pt=document.createElement("option");Pt.textContent=xt.displayValue,Pt.value=xt.exportValue,vt.value.includes(xt.exportValue)&&(Pt.setAttribute("selected",!0),Et=!1),bt.append(Pt)}let At=null;if(Et){const xt=document.createElement("option");xt.value=" ",xt.setAttribute("hidden",!0),xt.setAttribute("selected",!0),bt.prepend(xt),At=()=>{xt.remove(),bt.removeEventListener("input",At),At=null},bt.addEventListener("input",At)}const _t=xt=>{const Pt=xt?"value":"textContent",{options:Rt,multiple:kt}=bt;return kt?Array.prototype.filter.call(Rt,Mt=>Mt.selected).map(Mt=>Mt[Pt]):Rt.selectedIndex===-1?null:Rt[Rt.selectedIndex][Pt]};let wt=_t(!1);const Ct=xt=>{const Pt=xt.target.options;return Array.prototype.map.call(Pt,Rt=>({displayValue:Rt.textContent,exportValue:Rt.value}))};return this.enableScripting&&this.hasJSActions?(bt.addEventListener("updatefromsandbox",xt=>{const Pt={value(Rt){At==null||At();const kt=Rt.detail.value,Mt=new Set(Array.isArray(kt)?kt:[kt]);for(const Lt of bt.options)Lt.selected=Mt.has(Lt.value);$.setValue(ht,{value:_t(!0)}),wt=_t(!1)},multipleSelection(Rt){bt.multiple=!0},remove(Rt){const kt=bt.options,Mt=Rt.detail.remove;kt[Mt].selected=!1,bt.remove(Mt),kt.length>0&&Array.prototype.findIndex.call(kt,Ot=>Ot.selected)===-1&&(kt[0].selected=!0),$.setValue(ht,{value:_t(!0),items:Ct(Rt)}),wt=_t(!1)},clear(Rt){for(;bt.length!==0;)bt.remove(0);$.setValue(ht,{value:null,items:[]}),wt=_t(!1)},insert(Rt){const{index:kt,displayValue:Mt,exportValue:Lt}=Rt.detail.insert,Ot=bt.children[kt],Ft=document.createElement("option");Ft.textContent=Mt,Ft.value=Lt,Ot?Ot.before(Ft):bt.append(Ft),$.setValue(ht,{value:_t(!0),items:Ct(Rt)}),wt=_t(!1)},items(Rt){const{items:kt}=Rt.detail;for(;bt.length!==0;)bt.remove(0);for(const Mt of kt){const{displayValue:Lt,exportValue:Ot}=Mt,Ft=document.createElement("option");Ft.textContent=Lt,Ft.value=Ot,bt.append(Ft)}bt.options.length>0&&(bt.options[0].selected=!0),$.setValue(ht,{value:_t(!0),items:Ct(Rt)}),wt=_t(!1)},indices(Rt){const kt=new Set(Rt.detail.indices);for(const Mt of Rt.target.options)Mt.selected=kt.has(Mt.index);$.setValue(ht,{value:_t(!0)}),wt=_t(!1)},editable(Rt){Rt.target.disabled=!Rt.detail.editable}};this._dispatchEventFromSandbox(Pt,xt)}),bt.addEventListener("input",xt=>{var kt;const Pt=_t(!0),Rt=_t(!1);$.setValue(ht,{value:Pt}),xt.preventDefault(),(kt=this.linkService.eventBus)==null||kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ht,name:"Keystroke",value:wt,change:Rt,changeEx:Pt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(bt,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],xt=>xt.target.value)):bt.addEventListener("input",function(xt){$.setValue(ht,{value:_t(!0)})}),this.data.combo&&this._setTextStyle(bt),this._setBackgroundColor(bt),this._setDefaultPropertiesFromJS(bt),this.container.append(bt),this.container}}class PopupAnnotationElement extends AnnotationElement{constructor($){const{data:ht,elements:vt}=$;super($,{isRenderable:AnnotationElement._hasPopupData(ht)}),this.elements=vt,this.popup=null}render(){this.container.classList.add("popupAnnotation");const $=this.popup=new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),ht=[];for(const vt of this.elements)vt.popup=$,ht.push(vt.data.id),vt.addHighlightArea();return this.container.setAttribute("aria-controls",ht.map(vt=>`${AnnotationPrefix}${vt}`).join(",")),this.container}}var Lm,aE,lE,Dm,_p,$s,eu,wp,my,gy,Im,tu,Xo,nu,vy,iu,yy,Sp,xp,Ss,b0,QE,nw,iw,rw,sw,E0,A0,ZE;class PopupElement{constructor({container:$,color:ht,elements:vt,titleObj:bt,modificationDate:Et,contentsObj:At,richText:_t,parent:wt,rect:Ct,parentRect:xt,open:Pt}){Kt(this,Ss);Kt(this,Lm,Ut(this,Ss,rw).bind(this));Kt(this,aE,Ut(this,Ss,ZE).bind(this));Kt(this,lE,Ut(this,Ss,A0).bind(this));Kt(this,Dm,Ut(this,Ss,E0).bind(this));Kt(this,_p,null);Kt(this,$s,null);Kt(this,eu,null);Kt(this,wp,null);Kt(this,my,null);Kt(this,gy,null);Kt(this,Im,null);Kt(this,tu,!1);Kt(this,Xo,null);Kt(this,nu,null);Kt(this,vy,null);Kt(this,iu,null);Kt(this,yy,null);Kt(this,Sp,null);Kt(this,xp,!1);var Rt;zt(this,$s,$),zt(this,yy,bt),zt(this,eu,At),zt(this,iu,_t),zt(this,gy,wt),zt(this,_p,ht),zt(this,vy,Ct),zt(this,Im,xt),zt(this,my,vt),zt(this,wp,PDFDateString.toDateObject(Et)),this.trigger=vt.flatMap(kt=>kt.getElementsToTriggerPopup());for(const kt of this.trigger)kt.addEventListener("click",St(this,Dm)),kt.addEventListener("mouseenter",St(this,lE)),kt.addEventListener("mouseleave",St(this,aE)),kt.classList.add("popupTriggerArea");for(const kt of vt)(Rt=kt.container)==null||Rt.addEventListener("keydown",St(this,Lm));St(this,$s).hidden=!0,Pt&&Ut(this,Ss,E0).call(this)}render(){if(St(this,Xo))return;const $=zt(this,Xo,document.createElement("div"));if($.className="popup",St(this,_p)){const Et=$.style.outlineColor=Util.makeHexColor(...St(this,_p));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?$.style.backgroundColor=`color-mix(in srgb, ${Et} 30%, white)`:$.style.backgroundColor=Util.makeHexColor(...St(this,_p).map(_t=>Math.floor(.7*(255-_t)+_t)))}const ht=document.createElement("span");ht.className="header";const vt=document.createElement("h1");if(ht.append(vt),{dir:vt.dir,str:vt.textContent}=St(this,yy),$.append(ht),St(this,wp)){const Et=document.createElement("span");Et.classList.add("popupDate"),Et.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),Et.setAttribute("data-l10n-args",JSON.stringify({date:St(this,wp).toLocaleDateString(),time:St(this,wp).toLocaleTimeString()})),ht.append(Et)}const bt=St(this,Ss,b0);if(bt)XfaLayer.render({xfaHtml:bt,intent:"richText",div:$}),$.lastChild.classList.add("richText","popupContent");else{const Et=this._formatContents(St(this,eu));$.append(Et)}St(this,$s).append($)}_formatContents({str:$,dir:ht}){const vt=document.createElement("p");vt.classList.add("popupContent"),vt.dir=ht;const bt=$.split(/(?:\r\n?|\n)/);for(let Et=0,At=bt.length;Et<At;++Et){const _t=bt[Et];vt.append(document.createTextNode(_t)),Et<At-1&&vt.append(document.createElement("br"))}return vt}updateEdited({rect:$,popupContent:ht}){var vt;St(this,Sp)||zt(this,Sp,{contentsObj:St(this,eu),richText:St(this,iu)}),$&&zt(this,nu,null),ht&&(zt(this,iu,Ut(this,Ss,iw).call(this,ht)),zt(this,eu,null)),(vt=St(this,Xo))==null||vt.remove(),zt(this,Xo,null)}resetEdited(){var $;St(this,Sp)&&({contentsObj:eo(this,eu)._,richText:eo(this,iu)._}=St(this,Sp),zt(this,Sp,null),($=St(this,Xo))==null||$.remove(),zt(this,Xo,null),zt(this,nu,null))}forceHide(){zt(this,xp,this.isVisible),St(this,xp)&&(St(this,$s).hidden=!0)}maybeShow(){St(this,xp)&&(St(this,Xo)||Ut(this,Ss,A0).call(this),zt(this,xp,!1),St(this,$s).hidden=!1)}get isVisible(){return St(this,$s).hidden===!1}}Lm=new WeakMap,aE=new WeakMap,lE=new WeakMap,Dm=new WeakMap,_p=new WeakMap,$s=new WeakMap,eu=new WeakMap,wp=new WeakMap,my=new WeakMap,gy=new WeakMap,Im=new WeakMap,tu=new WeakMap,Xo=new WeakMap,nu=new WeakMap,vy=new WeakMap,iu=new WeakMap,yy=new WeakMap,Sp=new WeakMap,xp=new WeakMap,Ss=new WeakSet,b0=function(){const $=St(this,iu),ht=St(this,eu);return $!=null&&$.str&&(!(ht!=null&&ht.str)||ht.str===$.str)&&St(this,iu).html||null},QE=function(){var $,ht,vt;return((vt=(ht=($=St(this,Ss,b0))==null?void 0:$.attributes)==null?void 0:ht.style)==null?void 0:vt.fontSize)||0},nw=function(){var $,ht,vt;return((vt=(ht=($=St(this,Ss,b0))==null?void 0:$.attributes)==null?void 0:ht.style)==null?void 0:vt.color)||null},iw=function($){const ht=[],vt={str:$,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:ht}]}},bt={style:{color:St(this,Ss,nw),fontSize:St(this,Ss,QE)?`calc(${St(this,Ss,QE)}px * var(--scale-factor))`:""}};for(const Et of $.split(`
`))ht.push({name:"span",value:Et,attributes:bt});return vt},rw=function($){$.altKey||$.shiftKey||$.ctrlKey||$.metaKey||($.key==="Enter"||$.key==="Escape"&&St(this,tu))&&Ut(this,Ss,E0).call(this)},sw=function(){if(St(this,nu)!==null)return;const{page:{view:$},viewport:{rawDims:{pageWidth:ht,pageHeight:vt,pageX:bt,pageY:Et}}}=St(this,gy);let At=!!St(this,Im),_t=At?St(this,Im):St(this,vy);for(const Mt of St(this,my))if(!_t||Util.intersect(Mt.data.rect,_t)!==null){_t=Mt.data.rect,At=!0;break}const wt=Util.normalizeRect([_t[0],$[3]-_t[1]+$[1],_t[2],$[3]-_t[3]+$[1]]),xt=At?_t[2]-_t[0]+5:0,Pt=wt[0]+xt,Rt=wt[1];zt(this,nu,[100*(Pt-bt)/ht,100*(Rt-Et)/vt]);const{style:kt}=St(this,$s);kt.left=`${St(this,nu)[0]}%`,kt.top=`${St(this,nu)[1]}%`},E0=function(){zt(this,tu,!St(this,tu)),St(this,tu)?(Ut(this,Ss,A0).call(this),St(this,$s).addEventListener("click",St(this,Dm)),St(this,$s).addEventListener("keydown",St(this,Lm))):(Ut(this,Ss,ZE).call(this),St(this,$s).removeEventListener("click",St(this,Dm)),St(this,$s).removeEventListener("keydown",St(this,Lm)))},A0=function(){St(this,Xo)||this.render(),this.isVisible?St(this,tu)&&St(this,$s).classList.add("focused"):(Ut(this,Ss,sw).call(this),St(this,$s).hidden=!1,St(this,$s).style.zIndex=parseInt(St(this,$s).style.zIndex)+1e3)},ZE=function(){St(this,$s).classList.remove("focused"),!(St(this,tu)||!this.isVisible)&&(St(this,$s).hidden=!0,St(this,$s).style.zIndex=parseInt(St(this,$s).style.zIndex)-1e3)};class FreeTextAnnotationElement extends AnnotationElement{constructor($){super($,{isRenderable:!0,ignoreBorder:!0}),this.textContent=$.data.textContent,this.textPosition=$.data.textPosition,this.annotationEditorType=AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const $=document.createElement("div");$.classList.add("annotationTextContent"),$.setAttribute("role","comment");for(const ht of this.textContent){const vt=document.createElement("span");vt.textContent=ht,$.append(vt)}this.container.append($)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var by;class LineAnnotationElement extends AnnotationElement{constructor(ht){super(ht,{isRenderable:!0,ignoreBorder:!0});Kt(this,by,null)}render(){this.container.classList.add("lineAnnotation");const ht=this.data,{width:vt,height:bt}=getRectDims(ht.rect),Et=this.svgFactory.create(vt,bt,!0),At=zt(this,by,this.svgFactory.createElement("svg:line"));return At.setAttribute("x1",ht.rect[2]-ht.lineCoordinates[0]),At.setAttribute("y1",ht.rect[3]-ht.lineCoordinates[1]),At.setAttribute("x2",ht.rect[2]-ht.lineCoordinates[2]),At.setAttribute("y2",ht.rect[3]-ht.lineCoordinates[3]),At.setAttribute("stroke-width",ht.borderStyle.width||1),At.setAttribute("stroke","transparent"),At.setAttribute("fill","transparent"),Et.append(At),this.container.append(Et),!ht.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return St(this,by)}addHighlightArea(){this.container.classList.add("highlightArea")}}by=new WeakMap;var Ey;class SquareAnnotationElement extends AnnotationElement{constructor(ht){super(ht,{isRenderable:!0,ignoreBorder:!0});Kt(this,Ey,null)}render(){this.container.classList.add("squareAnnotation");const ht=this.data,{width:vt,height:bt}=getRectDims(ht.rect),Et=this.svgFactory.create(vt,bt,!0),At=ht.borderStyle.width,_t=zt(this,Ey,this.svgFactory.createElement("svg:rect"));return _t.setAttribute("x",At/2),_t.setAttribute("y",At/2),_t.setAttribute("width",vt-At),_t.setAttribute("height",bt-At),_t.setAttribute("stroke-width",At||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),Et.append(_t),this.container.append(Et),!ht.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return St(this,Ey)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ey=new WeakMap;var Ay;class CircleAnnotationElement extends AnnotationElement{constructor(ht){super(ht,{isRenderable:!0,ignoreBorder:!0});Kt(this,Ay,null)}render(){this.container.classList.add("circleAnnotation");const ht=this.data,{width:vt,height:bt}=getRectDims(ht.rect),Et=this.svgFactory.create(vt,bt,!0),At=ht.borderStyle.width,_t=zt(this,Ay,this.svgFactory.createElement("svg:ellipse"));return _t.setAttribute("cx",vt/2),_t.setAttribute("cy",bt/2),_t.setAttribute("rx",vt/2-At/2),_t.setAttribute("ry",bt/2-At/2),_t.setAttribute("stroke-width",At||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),Et.append(_t),this.container.append(Et),!ht.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return St(this,Ay)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ay=new WeakMap;var _y;class PolylineAnnotationElement extends AnnotationElement{constructor(ht){super(ht,{isRenderable:!0,ignoreBorder:!0});Kt(this,_y,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const ht=this.data,{width:vt,height:bt}=getRectDims(ht.rect),Et=this.svgFactory.create(vt,bt,!0);let At=[];for(const wt of ht.vertices){const Ct=wt.x-ht.rect[0],xt=ht.rect[3]-wt.y;At.push(Ct+","+xt)}At=At.join(" ");const _t=zt(this,_y,this.svgFactory.createElement(this.svgElementName));return _t.setAttribute("points",At),_t.setAttribute("stroke-width",ht.borderStyle.width||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),Et.append(_t),this.container.append(Et),!ht.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return St(this,_y)}addHighlightArea(){this.container.classList.add("highlightArea")}}_y=new WeakMap;class PolygonAnnotationElement extends PolylineAnnotationElement{constructor($){super($),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor($){super($,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var wy;class InkAnnotationElement extends AnnotationElement{constructor(ht){super(ht,{isRenderable:!0,ignoreBorder:!0});Kt(this,wy,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const ht=this.data,{width:vt,height:bt}=getRectDims(ht.rect),Et=this.svgFactory.create(vt,bt,!0);for(const At of ht.inkLists){let _t=[];for(const Ct of At){const xt=Ct.x-ht.rect[0],Pt=ht.rect[3]-Ct.y;_t.push(`${xt},${Pt}`)}_t=_t.join(" ");const wt=this.svgFactory.createElement(this.svgElementName);St(this,wy).push(wt),wt.setAttribute("points",_t),wt.setAttribute("stroke-width",ht.borderStyle.width||1),wt.setAttribute("stroke","transparent"),wt.setAttribute("fill","transparent"),!ht.popupRef&&this.hasPopupData&&this._createPopup(),Et.append(wt)}return this.container.append(Et),this.container}getElementsToTriggerPopup(){return St(this,wy)}addHighlightArea(){this.container.classList.add("highlightArea")}}wy=new WeakMap;class HighlightAnnotationElement extends AnnotationElement{constructor($){super($,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor($){super($,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor($){super($,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor($){super($,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class StampAnnotationElement extends AnnotationElement{constructor($){super($,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Sy,xy,JE;class FileAttachmentAnnotationElement extends AnnotationElement{constructor(ht){var bt;super(ht,{isRenderable:!0});Kt(this,xy);Kt(this,Sy,null);const{file:vt}=this.data;this.filename=vt.filename,this.content=vt.content,(bt=this.linkService.eventBus)==null||bt.dispatch("fileattachmentannotation",{source:this,...vt})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:ht,data:vt}=this;let bt;vt.hasAppearance||vt.fillAlpha===0?bt=document.createElement("div"):(bt=document.createElement("img"),bt.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(vt.name)?"paperclip":"pushpin"}.svg`,vt.fillAlpha&&vt.fillAlpha<1&&(bt.style=`filter: opacity(${Math.round(vt.fillAlpha*100)}%);`)),bt.addEventListener("dblclick",Ut(this,xy,JE).bind(this)),zt(this,Sy,bt);const{isMac:Et}=util_FeatureTest.platform;return ht.addEventListener("keydown",At=>{At.key==="Enter"&&(Et?At.metaKey:At.ctrlKey)&&Ut(this,xy,JE).call(this)}),!vt.popupRef&&this.hasPopupData?this._createPopup():bt.classList.add("popupTriggerArea"),ht.append(bt),ht}getElementsToTriggerPopup(){return St(this,Sy)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sy=new WeakMap,xy=new WeakSet,JE=function(){var ht;(ht=this.downloadManager)==null||ht.openOrDownloadData(this.content,this.filename)};var Cy,Cp,Om,Wp,ow,eA;class AnnotationLayer{constructor({div:$,accessibilityManager:ht,annotationCanvasMap:vt,annotationEditorUIManager:bt,page:Et,viewport:At}){Kt(this,Wp);Kt(this,Cy,null);Kt(this,Cp,null);Kt(this,Om,new Map);this.div=$,zt(this,Cy,ht),zt(this,Cp,vt),this.page=Et,this.viewport=At,this.zIndex=0,this._annotationEditorUIManager=bt}async render($){var At;const{annotations:ht}=$,vt=this.div;setLayerDimensions(vt,this.viewport);const bt=new Map,Et={data:null,layer:vt,linkService:$.linkService,downloadManager:$.downloadManager,imageResourcesPath:$.imageResourcesPath||"",renderForms:$.renderForms!==!1,svgFactory:new DOMSVGFactory,annotationStorage:$.annotationStorage||new AnnotationStorage,enableScripting:$.enableScripting===!0,hasJSActions:$.hasJSActions,fieldObjects:$.fieldObjects,parent:this,elements:null};for(const _t of ht){if(_t.noHTML)continue;const wt=_t.annotationType===AnnotationType.POPUP;if(wt){const Pt=bt.get(_t.id);if(!Pt)continue;Et.elements=Pt}else{const{width:Pt,height:Rt}=getRectDims(_t.rect);if(Pt<=0||Rt<=0)continue}Et.data=_t;const Ct=AnnotationElementFactory.create(Et);if(!Ct.isRenderable)continue;if(!wt&&_t.popupRef){const Pt=bt.get(_t.popupRef);Pt?Pt.push(Ct):bt.set(_t.popupRef,[Ct])}const xt=Ct.render();_t.hidden&&(xt.style.visibility="hidden"),Ut(this,Wp,ow).call(this,xt,_t.id),Ct.annotationEditorType>0&&(St(this,Om).set(Ct.data.id,Ct),(At=this._annotationEditorUIManager)==null||At.renderAnnotationElement(Ct))}Ut(this,Wp,eA).call(this)}update({viewport:$}){const ht=this.div;this.viewport=$,setLayerDimensions(ht,{rotation:$.rotation}),Ut(this,Wp,eA).call(this),ht.hidden=!1}getEditableAnnotations(){return Array.from(St(this,Om).values())}getEditableAnnotation($){return St(this,Om).get($)}}Cy=new WeakMap,Cp=new WeakMap,Om=new WeakMap,Wp=new WeakSet,ow=function($,ht){var bt;const vt=$.firstChild||$;vt.id=`${AnnotationPrefix}${ht}`,this.div.append($),(bt=St(this,Cy))==null||bt.moveElementInDOM(this.div,$,vt,!1)},eA=function(){if(!St(this,Cp))return;const $=this.div;for(const[ht,vt]of St(this,Cp)){const bt=$.querySelector(`[data-annotation-id="${ht}"]`);if(!bt)continue;vt.className="annotationContent";const{firstChild:Et}=bt;Et?Et.nodeName==="CANVAS"?Et.replaceWith(vt):Et.classList.contains("annotationContent")?Et.after(vt):Et.before(vt):bt.append(vt)}St(this,Cp).clear()};const EOL_PATTERN=/\r\n?|\n/g;var Ty,Py,Ry,ky,My,qo,Co,Fy,To,$m,Us,aw,lw,cw,_0,hu,w0,S0,uw,tA,dw;const Rs=class Rs extends AnnotationEditor{constructor(ht){super({...ht,name:"freeTextEditor"});Kt(this,Us);Kt(this,Ty,this.editorDivBlur.bind(this));Kt(this,Py,this.editorDivFocus.bind(this));Kt(this,Ry,this.editorDivInput.bind(this));Kt(this,ky,this.editorDivKeydown.bind(this));Kt(this,My,this.editorDivPaste.bind(this));Kt(this,qo);Kt(this,Co,"");Kt(this,Fy,`${this.id}-editor`);Kt(this,To);Kt(this,$m,null);zt(this,qo,ht.color||Rs._defaultColor||AnnotationEditor._defaultLineColor),zt(this,To,ht.fontSize||Rs._defaultFontSize)}static get _keyboardManager(){const ht=Rs.prototype,vt=At=>At.isEmpty(),bt=AnnotationEditorUIManager.TRANSLATE_SMALL,Et=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],ht.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],ht.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],ht._translateEmpty,{args:[-bt,0],checker:vt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],ht._translateEmpty,{args:[-Et,0],checker:vt}],[["ArrowRight","mac+ArrowRight"],ht._translateEmpty,{args:[bt,0],checker:vt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],ht._translateEmpty,{args:[Et,0],checker:vt}],[["ArrowUp","mac+ArrowUp"],ht._translateEmpty,{args:[0,-bt],checker:vt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],ht._translateEmpty,{args:[0,-Et],checker:vt}],[["ArrowDown","mac+ArrowDown"],ht._translateEmpty,{args:[0,bt],checker:vt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],ht._translateEmpty,{args:[0,Et],checker:vt}]]))}static initialize(ht,vt){AnnotationEditor.initialize(ht,vt,{strings:["pdfjs-free-text-default-content"]});const bt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(bt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(ht,vt){switch(ht){case AnnotationEditorParamsType.FREETEXT_SIZE:Rs._defaultFontSize=vt;break;case AnnotationEditorParamsType.FREETEXT_COLOR:Rs._defaultColor=vt;break}}updateParams(ht,vt){switch(ht){case AnnotationEditorParamsType.FREETEXT_SIZE:Ut(this,Us,aw).call(this,vt);break;case AnnotationEditorParamsType.FREETEXT_COLOR:Ut(this,Us,lw).call(this,vt);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,Rs._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,Rs._defaultColor||AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,St(this,To)],[AnnotationEditorParamsType.FREETEXT_COLOR,St(this,qo)]]}_translateEmpty(ht,vt){this._uiManager.translateSelectedEditors(ht,vt,!0)}getInitialTranslation(){const ht=this.parentScale;return[-Rs._internalPadding*ht,-(Rs._internalPadding+St(this,To))*ht]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",St(this,ky)),this.editorDiv.addEventListener("focus",St(this,Py)),this.editorDiv.addEventListener("blur",St(this,Ty)),this.editorDiv.addEventListener("input",St(this,Ry)),this.editorDiv.addEventListener("paste",St(this,My)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",St(this,Fy)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",St(this,ky)),this.editorDiv.removeEventListener("focus",St(this,Py)),this.editorDiv.removeEventListener("blur",St(this,Ty)),this.editorDiv.removeEventListener("input",St(this,Ry)),this.editorDiv.removeEventListener("paste",St(this,My)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(ht){this._focusEventsAllowed&&(super.focusin(ht),ht.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var ht;this.width||(this.enableEditMode(),this.editorDiv.focus(),(ht=this._initialOptions)!=null&&ht.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const ht=St(this,Co),vt=zt(this,Co,Ut(this,Us,cw).call(this).trimEnd());if(ht===vt)return;const bt=Et=>{if(zt(this,Co,Et),!Et){this.remove();return}Ut(this,Us,S0).call(this),this._uiManager.rebuild(this),Ut(this,Us,_0).call(this)};this.addCommands({cmd:()=>{bt(vt)},undo:()=>{bt(ht)},mustExec:!1}),Ut(this,Us,_0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(ht){this.enterInEditMode()}keydown(ht){ht.target===this.div&&ht.key==="Enter"&&(this.enterInEditMode(),ht.preventDefault())}editorDivKeydown(ht){Rs._keyboardManager.exec(this,ht)}editorDivFocus(ht){this.isEditing=!0}editorDivBlur(ht){this.isEditing=!1}editorDivInput(ht){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let ht,vt;this.width&&(ht=this.x,vt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",St(this,Fy)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),AnnotationEditor._l10nPromise.get("pdfjs-free-text-default-content").then(Et=>{var At;return(At=this.editorDiv)==null?void 0:At.setAttribute("default-content",Et)}),this.editorDiv.contentEditable=!0;const{style:bt}=this.editorDiv;if(bt.fontSize=`calc(${St(this,To)}px * var(--scale-factor))`,bt.color=St(this,qo),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),bindEvents(this,this.div,["dblclick","keydown"]),this.width){const[Et,At]=this.parentDimensions;if(this.annotationElementId){const{position:_t}=St(this,$m);let[wt,Ct]=this.getInitialTranslation();[wt,Ct]=this.pageTranslationToScreen(wt,Ct);const[xt,Pt]=this.pageDimensions,[Rt,kt]=this.pageTranslation;let Mt,Lt;switch(this.rotation){case 0:Mt=ht+(_t[0]-Rt)/xt,Lt=vt+this.height-(_t[1]-kt)/Pt;break;case 90:Mt=ht+(_t[0]-Rt)/xt,Lt=vt-(_t[1]-kt)/Pt,[wt,Ct]=[Ct,-wt];break;case 180:Mt=ht-this.width+(_t[0]-Rt)/xt,Lt=vt-(_t[1]-kt)/Pt,[wt,Ct]=[-wt,-Ct];break;case 270:Mt=ht+(_t[0]-Rt-this.height*Pt)/xt,Lt=vt+(_t[1]-kt-this.width*xt)/Pt,[wt,Ct]=[-Ct,wt];break}this.setAt(Mt*Et,Lt*At,wt,Ct)}else this.setAt(ht*Et,vt*At,this.width*Et,this.height*At);Ut(this,Us,S0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(ht){var Mt,Lt,Ot;const vt=ht.clipboardData||window.clipboardData,{types:bt}=vt;if(bt.length===1&&bt[0]==="text/plain")return;ht.preventDefault();const Et=Ut(Mt=Rs,hu,tA).call(Mt,vt.getData("text")||"").replaceAll(EOL_PATTERN,`
`);if(!Et)return;const At=window.getSelection();if(!At.rangeCount)return;this.editorDiv.normalize(),At.deleteFromDocument();const _t=At.getRangeAt(0);if(!Et.includes(`
`)){_t.insertNode(document.createTextNode(Et)),this.editorDiv.normalize(),At.collapseToStart();return}const{startContainer:wt,startOffset:Ct}=_t,xt=[],Pt=[];if(wt.nodeType===Node.TEXT_NODE){const Ft=wt.parentElement;if(Pt.push(wt.nodeValue.slice(Ct).replaceAll(EOL_PATTERN,"")),Ft!==this.editorDiv){let Dt=xt;for(const $t of this.editorDiv.childNodes){if($t===Ft){Dt=Pt;continue}Dt.push(Ut(Lt=Rs,hu,w0).call(Lt,$t))}}xt.push(wt.nodeValue.slice(0,Ct).replaceAll(EOL_PATTERN,""))}else if(wt===this.editorDiv){let Ft=xt,Dt=0;for(const $t of this.editorDiv.childNodes)Dt++===Ct&&(Ft=Pt),Ft.push(Ut(Ot=Rs,hu,w0).call(Ot,$t))}zt(this,Co,`${xt.join(`
`)}${Et}${Pt.join(`
`)}`),Ut(this,Us,S0).call(this);const Rt=new Range;let kt=xt.reduce((Ft,Dt)=>Ft+Dt.length,0);for(const{firstChild:Ft}of this.editorDiv.childNodes)if(Ft.nodeType===Node.TEXT_NODE){const Dt=Ft.nodeValue.length;if(kt<=Dt){Rt.setStart(Ft,kt),Rt.setEnd(Ft,kt);break}kt-=Dt}At.removeAllRanges(),At.addRange(Rt)}get contentDiv(){return this.editorDiv}static deserialize(ht,vt,bt){var _t;let Et=null;if(ht instanceof FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:wt,fontColor:Ct},rect:xt,rotation:Pt,id:Rt},textContent:kt,textPosition:Mt,parent:{page:{pageNumber:Lt}}}=ht;if(!kt||kt.length===0)return null;Et=ht={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(Ct),fontSize:wt,value:kt.join(`
`),position:Mt,pageIndex:Lt-1,rect:xt.slice(0),rotation:Pt,id:Rt,deleted:!1}}const At=super.deserialize(ht,vt,bt);return zt(At,To,ht.fontSize),zt(At,qo,Util.makeHexColor(...ht.color)),zt(At,Co,Ut(_t=Rs,hu,tA).call(_t,ht.value)),At.annotationElementId=ht.id||null,zt(At,$m,Et),At}serialize(ht=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const vt=Rs._internalPadding*this.parentScale,bt=this.getRect(vt,vt),Et=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:St(this,qo)),At={annotationType:AnnotationEditorType.FREETEXT,color:Et,fontSize:St(this,To),value:Ut(this,Us,uw).call(this),pageIndex:this.pageIndex,rect:bt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return ht?At:this.annotationElementId&&!Ut(this,Us,dw).call(this,At)?null:(At.id=this.annotationElementId,At)}renderAnnotationElement(ht){const vt=super.renderAnnotationElement(ht);if(this.deleted)return vt;const{style:bt}=vt;bt.fontSize=`calc(${St(this,To)}px * var(--scale-factor))`,bt.color=St(this,qo),vt.replaceChildren();for(const At of St(this,Co).split(`
`)){const _t=document.createElement("div");_t.append(At?document.createTextNode(At):document.createElement("br")),vt.append(_t)}const Et=Rs._internalPadding*this.parentScale;return ht.updateEdited({rect:this.getRect(Et,Et),popupContent:St(this,Co)}),vt}resetAnnotationElement(ht){super.resetAnnotationElement(ht),ht.resetEdited()}};Ty=new WeakMap,Py=new WeakMap,Ry=new WeakMap,ky=new WeakMap,My=new WeakMap,qo=new WeakMap,Co=new WeakMap,Fy=new WeakMap,To=new WeakMap,$m=new WeakMap,Us=new WeakSet,aw=function(ht){const vt=Et=>{this.editorDiv.style.fontSize=`calc(${Et}px * var(--scale-factor))`,this.translate(0,-(Et-St(this,To))*this.parentScale),zt(this,To,Et),Ut(this,Us,_0).call(this)},bt=St(this,To);this.addCommands({cmd:vt.bind(this,ht),undo:vt.bind(this,bt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},lw=function(ht){const vt=Et=>{zt(this,qo,this.editorDiv.style.color=Et)},bt=St(this,qo);this.addCommands({cmd:vt.bind(this,ht),undo:vt.bind(this,bt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},cw=function(){var vt;const ht=[];this.editorDiv.normalize();for(const bt of this.editorDiv.childNodes)ht.push(Ut(vt=Rs,hu,w0).call(vt,bt));return ht.join(`
`)},_0=function(){const[ht,vt]=this.parentDimensions;let bt;if(this.isAttachedToDOM)bt=this.div.getBoundingClientRect();else{const{currentLayer:Et,div:At}=this,_t=At.style.display,wt=At.classList.contains("hidden");At.classList.remove("hidden"),At.style.display="hidden",Et.div.append(this.div),bt=At.getBoundingClientRect(),At.remove(),At.style.display=_t,At.classList.toggle("hidden",wt)}this.rotation%180===this.parentRotation%180?(this.width=bt.width/ht,this.height=bt.height/vt):(this.width=bt.height/ht,this.height=bt.width/vt),this.fixAndSetPosition()},hu=new WeakSet,w0=function(ht){return(ht.nodeType===Node.TEXT_NODE?ht.nodeValue:ht.innerText).replaceAll(EOL_PATTERN,"")},S0=function(){if(this.editorDiv.replaceChildren(),!!St(this,Co))for(const ht of St(this,Co).split(`
`)){const vt=document.createElement("div");vt.append(ht?document.createTextNode(ht):document.createElement("br")),this.editorDiv.append(vt)}},uw=function(){return St(this,Co).replaceAll(" "," ")},tA=function(ht){return ht.replaceAll(" "," ")},dw=function(ht){const{value:vt,fontSize:bt,color:Et,pageIndex:At}=St(this,$m);return this._hasBeenMoved||ht.value!==vt||ht.fontSize!==bt||ht.color.some((_t,wt)=>_t!==Et[wt])||ht.pageIndex!==At},Kt(Rs,hu),Sr(Rs,"_freeTextDefaultContent",""),Sr(Rs,"_internalPadding",0),Sr(Rs,"_defaultColor",null),Sr(Rs,"_defaultFontSize",10),Sr(Rs,"_type","freetext"),Sr(Rs,"_editorType",AnnotationEditorType.FREETEXT);let FreeTextEditor=Rs;var Ly,Fu,Yo,vo,hw,x0,fw,pw,nA;class Outliner{constructor($,ht=0,vt=0,bt=!0){Kt(this,vo);Kt(this,Ly);Kt(this,Fu,[]);Kt(this,Yo,[]);let Et=1/0,At=-1/0,_t=1/0,wt=-1/0;const xt=10**-4;for(const{x:Ft,y:Dt,width:$t,height:Bt}of $){const Nt=Math.floor((Ft-ht)/xt)*xt,Ht=Math.ceil((Ft+$t+ht)/xt)*xt,Vt=Math.floor((Dt-ht)/xt)*xt,jt=Math.ceil((Dt+Bt+ht)/xt)*xt,Xt=[Nt,Vt,jt,!0],Jt=[Ht,Vt,jt,!1];St(this,Fu).push(Xt,Jt),Et=Math.min(Et,Nt),At=Math.max(At,Ht),_t=Math.min(_t,Vt),wt=Math.max(wt,jt)}const Pt=At-Et+2*vt,Rt=wt-_t+2*vt,kt=Et-vt,Mt=_t-vt,Lt=St(this,Fu).at(bt?-1:-2),Ot=[Lt[0],Lt[2]];for(const Ft of St(this,Fu)){const[Dt,$t,Bt]=Ft;Ft[0]=(Dt-kt)/Pt,Ft[1]=($t-Mt)/Rt,Ft[2]=(Bt-Mt)/Rt}zt(this,Ly,{x:kt,y:Mt,width:Pt,height:Rt,lastPoint:Ot})}getOutlines(){St(this,Fu).sort((ht,vt)=>ht[0]-vt[0]||ht[1]-vt[1]||ht[2]-vt[2]);const $=[];for(const ht of St(this,Fu))ht[3]?($.push(...Ut(this,vo,nA).call(this,ht)),Ut(this,vo,fw).call(this,ht)):(Ut(this,vo,pw).call(this,ht),$.push(...Ut(this,vo,nA).call(this,ht)));return Ut(this,vo,hw).call(this,$)}}Ly=new WeakMap,Fu=new WeakMap,Yo=new WeakMap,vo=new WeakSet,hw=function($){const ht=[],vt=new Set;for(const At of $){const[_t,wt,Ct]=At;ht.push([_t,wt,At],[_t,Ct,At])}ht.sort((At,_t)=>At[1]-_t[1]||At[0]-_t[0]);for(let At=0,_t=ht.length;At<_t;At+=2){const wt=ht[At][2],Ct=ht[At+1][2];wt.push(Ct),Ct.push(wt),vt.add(wt),vt.add(Ct)}const bt=[];let Et;for(;vt.size>0;){const At=vt.values().next().value;let[_t,wt,Ct,xt,Pt]=At;vt.delete(At);let Rt=_t,kt=wt;for(Et=[_t,Ct],bt.push(Et);;){let Mt;if(vt.has(xt))Mt=xt;else if(vt.has(Pt))Mt=Pt;else break;vt.delete(Mt),[_t,wt,Ct,xt,Pt]=Mt,Rt!==_t&&(Et.push(Rt,kt,_t,kt===wt?wt:Ct),Rt=_t),kt=kt===wt?Ct:wt}Et.push(Rt,kt)}return new HighlightOutline(bt,St(this,Ly))},x0=function($){const ht=St(this,Yo);let vt=0,bt=ht.length-1;for(;vt<=bt;){const Et=vt+bt>>1,At=ht[Et][0];if(At===$)return Et;At<$?vt=Et+1:bt=Et-1}return bt+1},fw=function([,$,ht]){const vt=Ut(this,vo,x0).call(this,$);St(this,Yo).splice(vt,0,[$,ht])},pw=function([,$,ht]){const vt=Ut(this,vo,x0).call(this,$);for(let bt=vt;bt<St(this,Yo).length;bt++){const[Et,At]=St(this,Yo)[bt];if(Et!==$)break;if(Et===$&&At===ht){St(this,Yo).splice(bt,1);return}}for(let bt=vt-1;bt>=0;bt--){const[Et,At]=St(this,Yo)[bt];if(Et!==$)break;if(Et===$&&At===ht){St(this,Yo).splice(bt,1);return}}},nA=function($){const[ht,vt,bt]=$,Et=[[ht,vt,bt]],At=Ut(this,vo,x0).call(this,bt);for(let _t=0;_t<At;_t++){const[wt,Ct]=St(this,Yo)[_t];for(let xt=0,Pt=Et.length;xt<Pt;xt++){const[,Rt,kt]=Et[xt];if(!(Ct<=Rt||kt<=wt)){if(Rt>=wt){if(kt>Ct)Et[xt][1]=Ct;else{if(Pt===1)return[];Et.splice(xt,1),xt--,Pt--}continue}Et[xt][2]=wt,kt>Ct&&Et.push([ht,Ct,kt])}}}return Et};class Outline{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize($,ht){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof FreeHighlightOutline}}var Dy,Nm;class HighlightOutline extends Outline{constructor(ht,vt){super();Kt(this,Dy);Kt(this,Nm);zt(this,Nm,ht),zt(this,Dy,vt)}toSVGPath(){const ht=[];for(const vt of St(this,Nm)){let[bt,Et]=vt;ht.push(`M${bt} ${Et}`);for(let At=2;At<vt.length;At+=2){const _t=vt[At],wt=vt[At+1];_t===bt?(ht.push(`V${wt}`),Et=wt):wt===Et&&(ht.push(`H${_t}`),bt=_t)}ht.push("Z")}return ht.join(" ")}serialize([ht,vt,bt,Et],At){const _t=[],wt=bt-ht,Ct=Et-vt;for(const xt of St(this,Nm)){const Pt=new Array(xt.length);for(let Rt=0;Rt<xt.length;Rt+=2)Pt[Rt]=ht+xt[Rt]*wt,Pt[Rt+1]=Et-xt[Rt+1]*Ct;_t.push(Pt)}return _t}get box(){return St(this,Dy)}}Dy=new WeakMap,Nm=new WeakMap;var xl,ru,Bm,Vm,Cl,cs,Tp,Pp,Iy,Oy,Hm,jm,Lu,$y,cE,uE,Ny,iA;const Nl=class Nl{constructor({x:$,y:ht},vt,bt,Et,At,_t=0){Kt(this,Ny);Kt(this,xl);Kt(this,ru,[]);Kt(this,Bm);Kt(this,Vm);Kt(this,Cl,[]);Kt(this,cs,new Float64Array(18));Kt(this,Tp);Kt(this,Pp);Kt(this,Iy);Kt(this,Oy);Kt(this,Hm);Kt(this,jm);Kt(this,Lu,[]);zt(this,xl,vt),zt(this,jm,Et*bt),zt(this,Vm,At),St(this,cs).set([NaN,NaN,NaN,NaN,$,ht],6),zt(this,Bm,_t),zt(this,Oy,St(Nl,$y)*bt),zt(this,Iy,St(Nl,uE)*bt),zt(this,Hm,bt),St(this,Lu).push($,ht)}get free(){return!0}isEmpty(){return isNaN(St(this,cs)[8])}add({x:$,y:ht}){var Xt;zt(this,Tp,$),zt(this,Pp,ht);const[vt,bt,Et,At]=St(this,xl);let[_t,wt,Ct,xt]=St(this,cs).subarray(8,12);const Pt=$-Ct,Rt=ht-xt,kt=Math.hypot(Pt,Rt);if(kt<St(this,Iy))return!1;const Mt=kt-St(this,Oy),Lt=Mt/kt,Ot=Lt*Pt,Ft=Lt*Rt;let Dt=_t,$t=wt;_t=Ct,wt=xt,Ct+=Ot,xt+=Ft,(Xt=St(this,Lu))==null||Xt.push($,ht);const Bt=-Ft/Mt,Nt=Ot/Mt,Ht=Bt*St(this,jm),Vt=Nt*St(this,jm);return St(this,cs).set(St(this,cs).subarray(2,8),0),St(this,cs).set([Ct+Ht,xt+Vt],4),St(this,cs).set(St(this,cs).subarray(14,18),12),St(this,cs).set([Ct-Ht,xt-Vt],16),isNaN(St(this,cs)[6])?(St(this,Cl).length===0&&(St(this,cs).set([_t+Ht,wt+Vt],2),St(this,Cl).push(NaN,NaN,NaN,NaN,(_t+Ht-vt)/Et,(wt+Vt-bt)/At),St(this,cs).set([_t-Ht,wt-Vt],14),St(this,ru).push(NaN,NaN,NaN,NaN,(_t-Ht-vt)/Et,(wt-Vt-bt)/At)),St(this,cs).set([Dt,$t,_t,wt,Ct,xt],6),!this.isEmpty()):(St(this,cs).set([Dt,$t,_t,wt,Ct,xt],6),Math.abs(Math.atan2($t-wt,Dt-_t)-Math.atan2(Ft,Ot))<Math.PI/2?([_t,wt,Ct,xt]=St(this,cs).subarray(2,6),St(this,Cl).push(NaN,NaN,NaN,NaN,((_t+Ct)/2-vt)/Et,((wt+xt)/2-bt)/At),[_t,wt,Dt,$t]=St(this,cs).subarray(14,18),St(this,ru).push(NaN,NaN,NaN,NaN,((Dt+_t)/2-vt)/Et,(($t+wt)/2-bt)/At),!0):([Dt,$t,_t,wt,Ct,xt]=St(this,cs).subarray(0,6),St(this,Cl).push(((Dt+5*_t)/6-vt)/Et,(($t+5*wt)/6-bt)/At,((5*_t+Ct)/6-vt)/Et,((5*wt+xt)/6-bt)/At,((_t+Ct)/2-vt)/Et,((wt+xt)/2-bt)/At),[Ct,xt,_t,wt,Dt,$t]=St(this,cs).subarray(12,18),St(this,ru).push(((Dt+5*_t)/6-vt)/Et,(($t+5*wt)/6-bt)/At,((5*_t+Ct)/6-vt)/Et,((5*wt+xt)/6-bt)/At,((_t+Ct)/2-vt)/Et,((wt+xt)/2-bt)/At),!0))}toSVGPath(){if(this.isEmpty())return"";const $=St(this,Cl),ht=St(this,ru),vt=St(this,cs).subarray(4,6),bt=St(this,cs).subarray(16,18),[Et,At,_t,wt]=St(this,xl),[Ct,xt,Pt,Rt]=Ut(this,Ny,iA).call(this);if(isNaN(St(this,cs)[6])&&!this.isEmpty())return`M${(St(this,cs)[2]-Et)/_t} ${(St(this,cs)[3]-At)/wt} L${(St(this,cs)[4]-Et)/_t} ${(St(this,cs)[5]-At)/wt} L${Ct} ${xt} L${Pt} ${Rt} L${(St(this,cs)[16]-Et)/_t} ${(St(this,cs)[17]-At)/wt} L${(St(this,cs)[14]-Et)/_t} ${(St(this,cs)[15]-At)/wt} Z`;const kt=[];kt.push(`M${$[4]} ${$[5]}`);for(let Mt=6;Mt<$.length;Mt+=6)isNaN($[Mt])?kt.push(`L${$[Mt+4]} ${$[Mt+5]}`):kt.push(`C${$[Mt]} ${$[Mt+1]} ${$[Mt+2]} ${$[Mt+3]} ${$[Mt+4]} ${$[Mt+5]}`);kt.push(`L${(vt[0]-Et)/_t} ${(vt[1]-At)/wt} L${Ct} ${xt} L${Pt} ${Rt} L${(bt[0]-Et)/_t} ${(bt[1]-At)/wt}`);for(let Mt=ht.length-6;Mt>=6;Mt-=6)isNaN(ht[Mt])?kt.push(`L${ht[Mt+4]} ${ht[Mt+5]}`):kt.push(`C${ht[Mt]} ${ht[Mt+1]} ${ht[Mt+2]} ${ht[Mt+3]} ${ht[Mt+4]} ${ht[Mt+5]}`);return kt.push(`L${ht[4]} ${ht[5]} Z`),kt.join(" ")}getOutlines(){var Ft;const $=St(this,Cl),ht=St(this,ru),vt=St(this,cs),bt=vt.subarray(4,6),Et=vt.subarray(16,18),[At,_t,wt,Ct]=St(this,xl),xt=new Float64Array((((Ft=St(this,Lu))==null?void 0:Ft.length)??0)+2);for(let Dt=0,$t=xt.length-2;Dt<$t;Dt+=2)xt[Dt]=(St(this,Lu)[Dt]-At)/wt,xt[Dt+1]=(St(this,Lu)[Dt+1]-_t)/Ct;xt[xt.length-2]=(St(this,Tp)-At)/wt,xt[xt.length-1]=(St(this,Pp)-_t)/Ct;const[Pt,Rt,kt,Mt]=Ut(this,Ny,iA).call(this);if(isNaN(vt[6])&&!this.isEmpty()){const Dt=new Float64Array(36);return Dt.set([NaN,NaN,NaN,NaN,(vt[2]-At)/wt,(vt[3]-_t)/Ct,NaN,NaN,NaN,NaN,(vt[4]-At)/wt,(vt[5]-_t)/Ct,NaN,NaN,NaN,NaN,Pt,Rt,NaN,NaN,NaN,NaN,kt,Mt,NaN,NaN,NaN,NaN,(vt[16]-At)/wt,(vt[17]-_t)/Ct,NaN,NaN,NaN,NaN,(vt[14]-At)/wt,(vt[15]-_t)/Ct],0),new FreeHighlightOutline(Dt,xt,St(this,xl),St(this,Hm),St(this,Bm),St(this,Vm))}const Lt=new Float64Array(St(this,Cl).length+24+St(this,ru).length);let Ot=$.length;for(let Dt=0;Dt<Ot;Dt+=2){if(isNaN($[Dt])){Lt[Dt]=Lt[Dt+1]=NaN;continue}Lt[Dt]=$[Dt],Lt[Dt+1]=$[Dt+1]}Lt.set([NaN,NaN,NaN,NaN,(bt[0]-At)/wt,(bt[1]-_t)/Ct,NaN,NaN,NaN,NaN,Pt,Rt,NaN,NaN,NaN,NaN,kt,Mt,NaN,NaN,NaN,NaN,(Et[0]-At)/wt,(Et[1]-_t)/Ct],Ot),Ot+=24;for(let Dt=ht.length-6;Dt>=6;Dt-=6)for(let $t=0;$t<6;$t+=2){if(isNaN(ht[Dt+$t])){Lt[Ot]=Lt[Ot+1]=NaN,Ot+=2;continue}Lt[Ot]=ht[Dt+$t],Lt[Ot+1]=ht[Dt+$t+1],Ot+=2}return Lt.set([NaN,NaN,NaN,NaN,ht[4],ht[5]],Ot),new FreeHighlightOutline(Lt,xt,St(this,xl),St(this,Hm),St(this,Bm),St(this,Vm))}};xl=new WeakMap,ru=new WeakMap,Bm=new WeakMap,Vm=new WeakMap,Cl=new WeakMap,cs=new WeakMap,Tp=new WeakMap,Pp=new WeakMap,Iy=new WeakMap,Oy=new WeakMap,Hm=new WeakMap,jm=new WeakMap,Lu=new WeakMap,$y=new WeakMap,cE=new WeakMap,uE=new WeakMap,Ny=new WeakSet,iA=function(){const $=St(this,cs).subarray(4,6),ht=St(this,cs).subarray(16,18),[vt,bt,Et,At]=St(this,xl);return[(St(this,Tp)+($[0]-ht[0])/2-vt)/Et,(St(this,Pp)+($[1]-ht[1])/2-bt)/At,(St(this,Tp)+(ht[0]-$[0])/2-vt)/Et,(St(this,Pp)+(ht[1]-$[1])/2-bt)/At]},Kt(Nl,$y,8),Kt(Nl,cE,2),Kt(Nl,uE,St(Nl,$y)+St(Nl,cE));let FreeOutliner=Nl;var Um,Rp,su,By,Po,Vy,Bs,Ao,lv,cv,mw;class FreeHighlightOutline extends Outline{constructor(ht,vt,bt,Et,At,_t){super();Kt(this,Ao);Kt(this,Um);Kt(this,Rp,null);Kt(this,su);Kt(this,By);Kt(this,Po);Kt(this,Vy);Kt(this,Bs);zt(this,Bs,ht),zt(this,Po,vt),zt(this,Um,bt),zt(this,Vy,Et),zt(this,su,At),zt(this,By,_t),Ut(this,Ao,mw).call(this,_t);const{x:wt,y:Ct,width:xt,height:Pt}=St(this,Rp);for(let Rt=0,kt=ht.length;Rt<kt;Rt+=2)ht[Rt]=(ht[Rt]-wt)/xt,ht[Rt+1]=(ht[Rt+1]-Ct)/Pt;for(let Rt=0,kt=vt.length;Rt<kt;Rt+=2)vt[Rt]=(vt[Rt]-wt)/xt,vt[Rt+1]=(vt[Rt+1]-Ct)/Pt}toSVGPath(){const ht=[`M${St(this,Bs)[4]} ${St(this,Bs)[5]}`];for(let vt=6,bt=St(this,Bs).length;vt<bt;vt+=6){if(isNaN(St(this,Bs)[vt])){ht.push(`L${St(this,Bs)[vt+4]} ${St(this,Bs)[vt+5]}`);continue}ht.push(`C${St(this,Bs)[vt]} ${St(this,Bs)[vt+1]} ${St(this,Bs)[vt+2]} ${St(this,Bs)[vt+3]} ${St(this,Bs)[vt+4]} ${St(this,Bs)[vt+5]}`)}return ht.push("Z"),ht.join(" ")}serialize([ht,vt,bt,Et],At){const _t=bt-ht,wt=Et-vt;let Ct,xt;switch(At){case 0:Ct=Ut(this,Ao,lv).call(this,St(this,Bs),ht,Et,_t,-wt),xt=Ut(this,Ao,lv).call(this,St(this,Po),ht,Et,_t,-wt);break;case 90:Ct=Ut(this,Ao,cv).call(this,St(this,Bs),ht,vt,_t,wt),xt=Ut(this,Ao,cv).call(this,St(this,Po),ht,vt,_t,wt);break;case 180:Ct=Ut(this,Ao,lv).call(this,St(this,Bs),bt,vt,-_t,wt),xt=Ut(this,Ao,lv).call(this,St(this,Po),bt,vt,-_t,wt);break;case 270:Ct=Ut(this,Ao,cv).call(this,St(this,Bs),bt,Et,-_t,-wt),xt=Ut(this,Ao,cv).call(this,St(this,Po),bt,Et,-_t,-wt);break}return{outline:Array.from(Ct),points:[Array.from(xt)]}}get box(){return St(this,Rp)}getNewOutline(ht,vt){const{x:bt,y:Et,width:At,height:_t}=St(this,Rp),[wt,Ct,xt,Pt]=St(this,Um),Rt=At*xt,kt=_t*Pt,Mt=bt*xt+wt,Lt=Et*Pt+Ct,Ot=new FreeOutliner({x:St(this,Po)[0]*Rt+Mt,y:St(this,Po)[1]*kt+Lt},St(this,Um),St(this,Vy),ht,St(this,By),vt??St(this,su));for(let Ft=2;Ft<St(this,Po).length;Ft+=2)Ot.add({x:St(this,Po)[Ft]*Rt+Mt,y:St(this,Po)[Ft+1]*kt+Lt});return Ot.getOutlines()}}Um=new WeakMap,Rp=new WeakMap,su=new WeakMap,By=new WeakMap,Po=new WeakMap,Vy=new WeakMap,Bs=new WeakMap,Ao=new WeakSet,lv=function(ht,vt,bt,Et,At){const _t=new Float64Array(ht.length);for(let wt=0,Ct=ht.length;wt<Ct;wt+=2)_t[wt]=vt+ht[wt]*Et,_t[wt+1]=bt+ht[wt+1]*At;return _t},cv=function(ht,vt,bt,Et,At){const _t=new Float64Array(ht.length);for(let wt=0,Ct=ht.length;wt<Ct;wt+=2)_t[wt]=vt+ht[wt+1]*Et,_t[wt+1]=bt+ht[wt]*At;return _t},mw=function(ht){const vt=St(this,Bs);let bt=vt[4],Et=vt[5],At=bt,_t=Et,wt=bt,Ct=Et,xt=bt,Pt=Et;const Rt=ht?Math.max:Math.min;for(let Ft=6,Dt=vt.length;Ft<Dt;Ft+=6){if(isNaN(vt[Ft]))At=Math.min(At,vt[Ft+4]),_t=Math.min(_t,vt[Ft+5]),wt=Math.max(wt,vt[Ft+4]),Ct=Math.max(Ct,vt[Ft+5]),Pt<vt[Ft+5]?(xt=vt[Ft+4],Pt=vt[Ft+5]):Pt===vt[Ft+5]&&(xt=Rt(xt,vt[Ft+4]));else{const $t=Util.bezierBoundingBox(bt,Et,...vt.slice(Ft,Ft+6));At=Math.min(At,$t[0]),_t=Math.min(_t,$t[1]),wt=Math.max(wt,$t[2]),Ct=Math.max(Ct,$t[3]),Pt<$t[3]?(xt=$t[2],Pt=$t[3]):Pt===$t[3]&&(xt=Rt(xt,$t[2]))}bt=vt[Ft+4],Et=vt[Ft+5]}const kt=At-St(this,su),Mt=_t-St(this,su),Lt=wt-At+2*St(this,su),Ot=Ct-_t+2*St(this,su);zt(this,Rp,{x:kt,y:Mt,width:Lt,height:Ot,lastPoint:[xt,Pt]})};var Hy,jy,Qo,kp,zm,Gs,Uy,Wm,zy,Wy,Du,Gm,Ps,rA,sA,gw,Xu,yw,Au;const Bl=class Bl{constructor({editor:$=null,uiManager:ht=null}){Kt(this,Ps);Kt(this,Hy,Ut(this,Ps,gw).bind(this));Kt(this,jy,Ut(this,Ps,yw).bind(this));Kt(this,Qo,null);Kt(this,kp,null);Kt(this,zm);Kt(this,Gs,null);Kt(this,Uy,!1);Kt(this,Wm,!1);Kt(this,zy,null);Kt(this,Wy);Kt(this,Du,null);Kt(this,Gm);var vt;$?(zt(this,Wm,!1),zt(this,Gm,AnnotationEditorParamsType.HIGHLIGHT_COLOR),zt(this,zy,$)):(zt(this,Wm,!0),zt(this,Gm,AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR)),zt(this,Du,($==null?void 0:$._uiManager)||ht),zt(this,Wy,St(this,Du)._eventBus),zt(this,zm,($==null?void 0:$.color)||((vt=St(this,Du))==null?void 0:vt.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],Bl.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Bl.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Bl.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Bl.prototype._moveToPrevious],[["Home","mac+Home"],Bl.prototype._moveToBeginning],[["End","mac+End"],Bl.prototype._moveToEnd]]))}renderButton(){const $=zt(this,Qo,document.createElement("button"));$.className="colorPicker",$.tabIndex="0",$.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),$.setAttribute("aria-haspopup",!0),$.addEventListener("click",Ut(this,Ps,Xu).bind(this)),$.addEventListener("keydown",St(this,Hy));const ht=zt(this,kp,document.createElement("span"));return ht.className="swatch",ht.setAttribute("aria-hidden",!0),ht.style.backgroundColor=St(this,zm),$.append(ht),$}renderMainDropdown(){const $=zt(this,Gs,Ut(this,Ps,rA).call(this));return $.setAttribute("aria-orientation","horizontal"),$.setAttribute("aria-labelledby","highlightColorPickerLabel"),$}_colorSelectFromKeyboard($){if($.target===St(this,Qo)){Ut(this,Ps,Xu).call(this,$);return}const ht=$.target.getAttribute("data-color");ht&&Ut(this,Ps,sA).call(this,ht,$)}_moveToNext($){var ht,vt;if(!St(this,Ps,Au)){Ut(this,Ps,Xu).call(this,$);return}if($.target===St(this,Qo)){(ht=St(this,Gs).firstChild)==null||ht.focus();return}(vt=$.target.nextSibling)==null||vt.focus()}_moveToPrevious($){var ht,vt;if($.target===((ht=St(this,Gs))==null?void 0:ht.firstChild)||$.target===St(this,Qo)){St(this,Ps,Au)&&this._hideDropdownFromKeyboard();return}St(this,Ps,Au)||Ut(this,Ps,Xu).call(this,$),(vt=$.target.previousSibling)==null||vt.focus()}_moveToBeginning($){var ht;if(!St(this,Ps,Au)){Ut(this,Ps,Xu).call(this,$);return}(ht=St(this,Gs).firstChild)==null||ht.focus()}_moveToEnd($){var ht;if(!St(this,Ps,Au)){Ut(this,Ps,Xu).call(this,$);return}(ht=St(this,Gs).lastChild)==null||ht.focus()}hideDropdown(){var $;($=St(this,Gs))==null||$.classList.add("hidden"),window.removeEventListener("pointerdown",St(this,jy))}_hideDropdownFromKeyboard(){var $;if(!St(this,Wm)){if(!St(this,Ps,Au)){($=St(this,zy))==null||$.unselect();return}this.hideDropdown(),St(this,Qo).focus({preventScroll:!0,focusVisible:St(this,Uy)})}}updateColor($){if(St(this,kp)&&(St(this,kp).style.backgroundColor=$),!St(this,Gs))return;const ht=St(this,Du).highlightColors.values();for(const vt of St(this,Gs).children)vt.setAttribute("aria-selected",ht.next().value===$)}destroy(){var $,ht;($=St(this,Qo))==null||$.remove(),zt(this,Qo,null),zt(this,kp,null),(ht=St(this,Gs))==null||ht.remove(),zt(this,Gs,null)}};Hy=new WeakMap,jy=new WeakMap,Qo=new WeakMap,kp=new WeakMap,zm=new WeakMap,Gs=new WeakMap,Uy=new WeakMap,Wm=new WeakMap,zy=new WeakMap,Wy=new WeakMap,Du=new WeakMap,Gm=new WeakMap,Ps=new WeakSet,rA=function(){const $=document.createElement("div");$.addEventListener("contextmenu",noContextMenu),$.className="dropdown",$.role="listbox",$.setAttribute("aria-multiselectable",!1),$.setAttribute("aria-orientation","vertical"),$.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[ht,vt]of St(this,Du).highlightColors){const bt=document.createElement("button");bt.tabIndex="0",bt.role="option",bt.setAttribute("data-color",vt),bt.title=ht,bt.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${ht}`);const Et=document.createElement("span");bt.append(Et),Et.className="swatch",Et.style.backgroundColor=vt,bt.setAttribute("aria-selected",vt===St(this,zm)),bt.addEventListener("click",Ut(this,Ps,sA).bind(this,vt)),$.append(bt)}return $.addEventListener("keydown",St(this,Hy)),$},sA=function($,ht){ht.stopPropagation(),St(this,Wy).dispatch("switchannotationeditorparams",{source:this,type:St(this,Gm),value:$})},gw=function($){Bl._keyboardManager.exec(this,$)},Xu=function($){if(St(this,Ps,Au)){this.hideDropdown();return}if(zt(this,Uy,$.detail===0),window.addEventListener("pointerdown",St(this,jy)),St(this,Gs)){St(this,Gs).classList.remove("hidden");return}const ht=zt(this,Gs,Ut(this,Ps,rA).call(this));St(this,Qo).append(ht)},yw=function($){var ht;(ht=St(this,Gs))!=null&&ht.contains($.target)||this.hideDropdown()},Au=function(){return St(this,Gs)&&!St(this,Gs).classList.contains("hidden")};let ColorPicker=Bl;var Km,Gy,Iu,Mp,Xm,Io,Ky,Xy,Fp,Zo,po,Ro,dE,qm,Lp,Ks,Ym,Tl,qy,os,oA,aA,bw,Ew,Aw,lA,uv,No,em,_w,C0,dv,ww,Sw,xw,Cw;const vs=class vs extends AnnotationEditor{constructor(ht){super({...ht,name:"highlightEditor"});Kt(this,os);Kt(this,Km,null);Kt(this,Gy,0);Kt(this,Iu);Kt(this,Mp,null);Kt(this,Xm,null);Kt(this,Io,null);Kt(this,Ky,null);Kt(this,Xy,0);Kt(this,Fp,null);Kt(this,Zo,null);Kt(this,po,null);Kt(this,Ro,!1);Kt(this,dE,Ut(this,os,_w).bind(this));Kt(this,qm,null);Kt(this,Lp);Kt(this,Ks,null);Kt(this,Ym,"");Kt(this,Tl);Kt(this,qy,"");this.color=ht.color||vs._defaultColor,zt(this,Tl,ht.thickness||vs._defaultThickness),zt(this,Lp,ht.opacity||vs._defaultOpacity),zt(this,Iu,ht.boxes||null),zt(this,qy,ht.methodOfCreation||""),zt(this,Ym,ht.text||""),this._isDraggable=!1,ht.highlightId>-1?(zt(this,Ro,!0),Ut(this,os,aA).call(this,ht),Ut(this,os,uv).call(this)):(zt(this,Km,ht.anchorNode),zt(this,Gy,ht.anchorOffset),zt(this,Ky,ht.focusNode),zt(this,Xy,ht.focusOffset),Ut(this,os,oA).call(this),Ut(this,os,uv).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const ht=vs.prototype;return shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],ht._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],ht._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],ht._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],ht._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:St(this,Ro)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:St(this,Tl),methodOfCreation:St(this,qy)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(ht){return{numberOfColors:ht.get("color").size}}static initialize(ht,vt){var bt;AnnotationEditor.initialize(ht,vt),vs._defaultColor||(vs._defaultColor=((bt=vt.highlightColors)==null?void 0:bt.values().next().value)||"#fff066")}static updateDefaultParams(ht,vt){switch(ht){case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:vs._defaultColor=vt;break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:vs._defaultThickness=vt;break}}translateInPage(ht,vt){}get toolbarPosition(){return St(this,qm)}updateParams(ht,vt){switch(ht){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:Ut(this,os,bw).call(this,vt);break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:Ut(this,os,Ew).call(this,vt);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,vs._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,vs._defaultThickness]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||vs._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,St(this,Tl)||vs._defaultThickness],[AnnotationEditorParamsType.HIGHLIGHT_FREE,St(this,Ro)]]}async addEditToolbar(){const ht=await super.addEditToolbar();return ht?(this._uiManager.highlightColors&&(zt(this,Xm,new ColorPicker({editor:this})),ht.addColorPicker(St(this,Xm))),ht):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(Ut(this,os,dv).call(this))}getBaseTranslation(){return[0,0]}getRect(ht,vt){return super.getRect(ht,vt,Ut(this,os,dv).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){Ut(this,os,lA).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(Ut(this,os,uv).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(ht){var bt;let vt=!1;this.parent&&!ht?Ut(this,os,lA).call(this):ht&&(Ut(this,os,uv).call(this,ht),vt=!this.parent&&((bt=this.div)==null?void 0:bt.classList.contains("selectedEditor"))),super.setParent(ht),this.show(this._isVisible),vt&&this.select()}rotate(ht){var Et,At,_t;const{drawLayer:vt}=this.parent;let bt;St(this,Ro)?(ht=(ht-this.rotation+360)%360,bt=Ut(Et=vs,No,em).call(Et,St(this,Zo).box,ht)):bt=Ut(At=vs,No,em).call(At,this,ht),vt.rotate(St(this,po),ht),vt.rotate(St(this,Ks),ht),vt.updateBox(St(this,po),bt),vt.updateBox(St(this,Ks),Ut(_t=vs,No,em).call(_t,St(this,Io).box,ht))}render(){if(this.div)return this.div;const ht=super.render();St(this,Ym)&&(ht.setAttribute("aria-label",St(this,Ym)),ht.setAttribute("role","mark")),St(this,Ro)?ht.classList.add("free"):this.div.addEventListener("keydown",St(this,dE));const vt=zt(this,Fp,document.createElement("div"));ht.append(vt),vt.setAttribute("aria-hidden","true"),vt.className="internal",vt.style.clipPath=St(this,Mp);const[bt,Et]=this.parentDimensions;return this.setDims(this.width*bt,this.height*Et),bindEvents(this,St(this,Fp),["pointerover","pointerleave"]),this.enableEditing(),ht}pointerover(){this.parent.drawLayer.addClass(St(this,Ks),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(St(this,Ks),"hovered")}_moveCaret(ht){switch(this.parent.unselect(this),ht){case 0:case 2:Ut(this,os,C0).call(this,!0);break;case 1:case 3:Ut(this,os,C0).call(this,!1);break}}select(){var ht,vt;super.select(),St(this,Ks)&&((ht=this.parent)==null||ht.drawLayer.removeClass(St(this,Ks),"hovered"),(vt=this.parent)==null||vt.drawLayer.addClass(St(this,Ks),"selected"))}unselect(){var ht;super.unselect(),St(this,Ks)&&((ht=this.parent)==null||ht.drawLayer.removeClass(St(this,Ks),"selected"),St(this,Ro)||Ut(this,os,C0).call(this,!1))}get _mustFixPosition(){return!St(this,Ro)}show(ht=this._isVisible){super.show(ht),this.parent&&(this.parent.drawLayer.show(St(this,po),ht),this.parent.drawLayer.show(St(this,Ks),ht))}static startHighlighting(ht,vt,{target:bt,x:Et,y:At}){const{x:_t,y:wt,width:Ct,height:xt}=bt.getBoundingClientRect(),Pt=Lt=>{Ut(this,No,xw).call(this,ht,Lt)},Rt={capture:!0,passive:!1},kt=Lt=>{Lt.preventDefault(),Lt.stopPropagation()},Mt=Lt=>{bt.removeEventListener("pointermove",Pt),window.removeEventListener("blur",Mt),window.removeEventListener("pointerup",Mt),window.removeEventListener("pointerdown",kt,Rt),window.removeEventListener("contextmenu",noContextMenu),Ut(this,No,Cw).call(this,ht,Lt)};window.addEventListener("blur",Mt),window.addEventListener("pointerup",Mt),window.addEventListener("pointerdown",kt,Rt),window.addEventListener("contextmenu",noContextMenu),bt.addEventListener("pointermove",Pt),this._freeHighlight=new FreeOutliner({x:Et,y:At},[_t,wt,Ct,xt],ht.scale,this._defaultThickness/2,vt,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=ht.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(ht,vt,bt){var Lt;const Et=super.deserialize(ht,vt,bt),{rect:[At,_t,wt,Ct],color:xt,quadPoints:Pt}=ht;Et.color=Util.makeHexColor(...xt),zt(Et,Lp,ht.opacity);const[Rt,kt]=Et.pageDimensions;Et.width=(wt-At)/Rt,Et.height=(Ct-_t)/kt;const Mt=zt(Et,Iu,[]);for(let Ot=0;Ot<Pt.length;Ot+=8)Mt.push({x:(Pt[4]-wt)/Rt,y:(Ct-(1-Pt[Ot+5]))/kt,width:(Pt[Ot+2]-Pt[Ot])/Rt,height:(Pt[Ot+5]-Pt[Ot+1])/kt});return Ut(Lt=Et,os,oA).call(Lt),Et}serialize(ht=!1){if(this.isEmpty()||ht)return null;const vt=this.getRect(0,0),bt=AnnotationEditor._colorManager.convert(this.color);return{annotationType:AnnotationEditorType.HIGHLIGHT,color:bt,opacity:St(this,Lp),thickness:St(this,Tl),quadPoints:Ut(this,os,ww).call(this),outlines:Ut(this,os,Sw).call(this,vt),pageIndex:this.pageIndex,rect:vt,rotation:Ut(this,os,dv).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};Km=new WeakMap,Gy=new WeakMap,Iu=new WeakMap,Mp=new WeakMap,Xm=new WeakMap,Io=new WeakMap,Ky=new WeakMap,Xy=new WeakMap,Fp=new WeakMap,Zo=new WeakMap,po=new WeakMap,Ro=new WeakMap,dE=new WeakMap,qm=new WeakMap,Lp=new WeakMap,Ks=new WeakMap,Ym=new WeakMap,Tl=new WeakMap,qy=new WeakMap,os=new WeakSet,oA=function(){const ht=new Outliner(St(this,Iu),.001);zt(this,Zo,ht.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=St(this,Zo).box;const vt=new Outliner(St(this,Iu),.0025,.001,this._uiManager.direction==="ltr");zt(this,Io,vt.getOutlines());const{lastPoint:bt}=St(this,Io).box;zt(this,qm,[(bt[0]-this.x)/this.width,(bt[1]-this.y)/this.height])},aA=function({highlightOutlines:ht,highlightId:vt,clipPathId:bt}){var Pt,Rt;if(zt(this,Zo,ht),zt(this,Io,ht.getNewOutline(St(this,Tl)/2+1.5,.0025)),vt>=0)zt(this,po,vt),zt(this,Mp,bt),this.parent.drawLayer.finalizeLine(vt,ht),zt(this,Ks,this.parent.drawLayer.highlightOutline(St(this,Io)));else if(this.parent){const kt=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(St(this,po),ht),this.parent.drawLayer.updateBox(St(this,po),Ut(Pt=vs,No,em).call(Pt,St(this,Zo).box,(kt-this.rotation+360)%360)),this.parent.drawLayer.updateLine(St(this,Ks),St(this,Io)),this.parent.drawLayer.updateBox(St(this,Ks),Ut(Rt=vs,No,em).call(Rt,St(this,Io).box,kt))}const{x:At,y:_t,width:wt,height:Ct}=ht.box;switch(this.rotation){case 0:this.x=At,this.y=_t,this.width=wt,this.height=Ct;break;case 90:{const[kt,Mt]=this.parentDimensions;this.x=_t,this.y=1-At,this.width=wt*Mt/kt,this.height=Ct*kt/Mt;break}case 180:this.x=1-At,this.y=1-_t,this.width=wt,this.height=Ct;break;case 270:{const[kt,Mt]=this.parentDimensions;this.x=1-_t,this.y=At,this.width=wt*Mt/kt,this.height=Ct*kt/Mt;break}}const{lastPoint:xt}=St(this,Io).box;zt(this,qm,[(xt[0]-At)/wt,(xt[1]-_t)/Ct])},bw=function(ht){const vt=Et=>{var At,_t;this.color=Et,(At=this.parent)==null||At.drawLayer.changeColor(St(this,po),Et),(_t=St(this,Xm))==null||_t.updateColor(Et)},bt=this.color;this.addCommands({cmd:vt.bind(this,ht),undo:vt.bind(this,bt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(ht)},!0)},Ew=function(ht){const vt=St(this,Tl),bt=Et=>{zt(this,Tl,Et),Ut(this,os,Aw).call(this,Et)};this.addCommands({cmd:bt.bind(this,ht),undo:bt.bind(this,vt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:ht},!0)},Aw=function(ht){if(!St(this,Ro))return;Ut(this,os,aA).call(this,{highlightOutlines:St(this,Zo).getNewOutline(ht/2)}),this.fixAndSetPosition();const[vt,bt]=this.parentDimensions;this.setDims(this.width*vt,this.height*bt)},lA=function(){St(this,po)===null||!this.parent||(this.parent.drawLayer.remove(St(this,po)),zt(this,po,null),this.parent.drawLayer.remove(St(this,Ks)),zt(this,Ks,null))},uv=function(ht=this.parent){St(this,po)===null&&({id:eo(this,po)._,clipPathId:eo(this,Mp)._}=ht.drawLayer.highlight(St(this,Zo),this.color,St(this,Lp)),zt(this,Ks,ht.drawLayer.highlightOutline(St(this,Io))),St(this,Fp)&&(St(this,Fp).style.clipPath=St(this,Mp)))},No=new WeakSet,em=function({x:ht,y:vt,width:bt,height:Et},At){switch(At){case 90:return{x:1-vt-Et,y:ht,width:Et,height:bt};case 180:return{x:1-ht-bt,y:1-vt-Et,width:bt,height:Et};case 270:return{x:vt,y:1-ht-bt,width:Et,height:bt}}return{x:ht,y:vt,width:bt,height:Et}},_w=function(ht){vs._keyboardManager.exec(this,ht)},C0=function(ht){if(!St(this,Km))return;const vt=window.getSelection();ht?vt.setPosition(St(this,Km),St(this,Gy)):vt.setPosition(St(this,Ky),St(this,Xy))},dv=function(){return St(this,Ro)?this.rotation:0},ww=function(){if(St(this,Ro))return null;const[ht,vt]=this.pageDimensions,bt=St(this,Iu),Et=new Array(bt.length*8);let At=0;for(const{x:_t,y:wt,width:Ct,height:xt}of bt){const Pt=_t*ht,Rt=(1-wt-xt)*vt;Et[At]=Et[At+4]=Pt,Et[At+1]=Et[At+3]=Rt,Et[At+2]=Et[At+6]=Pt+Ct*ht,Et[At+5]=Et[At+7]=Rt+xt*vt,At+=8}return Et},Sw=function(ht){return St(this,Zo).serialize(ht,Ut(this,os,dv).call(this))},xw=function(ht,vt){this._freeHighlight.add(vt)&&ht.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},Cw=function(ht,vt){this._freeHighlight.isEmpty()?ht.drawLayer.removeFreeHighlight(this._freeHighlightId):ht.createAndAddNewEditor(vt,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Kt(vs,No),Sr(vs,"_defaultColor",null),Sr(vs,"_defaultOpacity",1),Sr(vs,"_defaultThickness",12),Sr(vs,"_l10nPromise"),Sr(vs,"_type","highlight"),Sr(vs,"_editorType",AnnotationEditorType.HIGHLIGHT),Sr(vs,"_freeHighlightId",-1),Sr(vs,"_freeHighlight",null),Sr(vs,"_freeHighlightClipId","");let HighlightEditor=vs;var Dp,Ip,Yy,Qy,Zy,Op,Pl,ou,Oo,$p,Np,Bp,Vp,Hp,Ou,_r,Tw,Pw,Rw,kw,cA,Mw,uA,Fw,Lw,Dw,Iw,Ow,qu,dA,T0,P0,tm,hA,R0,pu,$w,fA,Nw,Bw,pA,k0,hv;const Is=class Is extends AnnotationEditor{constructor(ht){super({...ht,name:"inkEditor"});Kt(this,_r);Kt(this,Dp,0);Kt(this,Ip,0);Kt(this,Yy,this.canvasPointermove.bind(this));Kt(this,Qy,this.canvasPointerleave.bind(this));Kt(this,Zy,this.canvasPointerup.bind(this));Kt(this,Op,this.canvasPointerdown.bind(this));Kt(this,Pl,null);Kt(this,ou,new Path2D);Kt(this,Oo,!1);Kt(this,$p,!1);Kt(this,Np,!1);Kt(this,Bp,null);Kt(this,Vp,0);Kt(this,Hp,0);Kt(this,Ou,null);this.color=ht.color||null,this.thickness=ht.thickness||null,this.opacity=ht.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(ht,vt){AnnotationEditor.initialize(ht,vt)}static updateDefaultParams(ht,vt){switch(ht){case AnnotationEditorParamsType.INK_THICKNESS:Is._defaultThickness=vt;break;case AnnotationEditorParamsType.INK_COLOR:Is._defaultColor=vt;break;case AnnotationEditorParamsType.INK_OPACITY:Is._defaultOpacity=vt/100;break}}updateParams(ht,vt){switch(ht){case AnnotationEditorParamsType.INK_THICKNESS:Ut(this,_r,Tw).call(this,vt);break;case AnnotationEditorParamsType.INK_COLOR:Ut(this,_r,Pw).call(this,vt);break;case AnnotationEditorParamsType.INK_OPACITY:Ut(this,_r,Rw).call(this,vt);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.INK_THICKNESS,Is._defaultThickness],[AnnotationEditorParamsType.INK_COLOR,Is._defaultColor||AnnotationEditor._defaultLineColor],[AnnotationEditorParamsType.INK_OPACITY,Math.round(Is._defaultOpacity*100)]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Is._defaultThickness],[AnnotationEditorParamsType.INK_COLOR,this.color||Is._defaultColor||AnnotationEditor._defaultLineColor],[AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Is._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Ut(this,_r,T0).call(this),Ut(this,_r,P0).call(this)),this.isAttachedToDOM||(this.parent.add(this),Ut(this,_r,tm).call(this)),Ut(this,_r,hv).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,St(this,Pl)&&(clearTimeout(St(this,Pl)),zt(this,Pl,null)),St(this,Bp).disconnect(),zt(this,Bp,null),super.remove())}setParent(ht){!this.parent&&ht?this._uiManager.removeShouldRescale(this):this.parent&&ht===null&&this._uiManager.addShouldRescale(this),super.setParent(ht)}onScaleChanging(){const[ht,vt]=this.parentDimensions,bt=this.width*ht,Et=this.height*vt;this.setDimensions(bt,Et)}enableEditMode(){St(this,Oo)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",St(this,Op)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",St(this,Op)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){St(this,Oo)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),zt(this,Oo,!0),this.div.classList.add("disabled"),Ut(this,_r,hv).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(ht){this._focusEventsAllowed&&(super.focusin(ht),this.enableEditMode())}canvasPointerdown(ht){ht.button!==0||!this.isInEditMode()||St(this,Oo)||(this.setInForeground(),ht.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),Ut(this,_r,Mw).call(this,ht.offsetX,ht.offsetY))}canvasPointermove(ht){ht.preventDefault(),Ut(this,_r,uA).call(this,ht.offsetX,ht.offsetY)}canvasPointerup(ht){ht.preventDefault(),Ut(this,_r,dA).call(this,ht)}canvasPointerleave(ht){Ut(this,_r,dA).call(this,ht)}get isResizable(){return!this.isEmpty()&&St(this,Oo)}render(){if(this.div)return this.div;let ht,vt;this.width&&(ht=this.x,vt=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[bt,Et,At,_t]=Ut(this,_r,kw).call(this);if(this.setAt(bt,Et,0,0),this.setDims(At,_t),Ut(this,_r,T0).call(this),this.width){const[wt,Ct]=this.parentDimensions;this.setAspectRatio(this.width*wt,this.height*Ct),this.setAt(ht*wt,vt*Ct,this.width*wt,this.height*Ct),zt(this,Np,!0),Ut(this,_r,tm).call(this),this.setDims(this.width*wt,this.height*Ct),Ut(this,_r,qu).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Ut(this,_r,P0).call(this),this.div}setDimensions(ht,vt){const bt=Math.round(ht),Et=Math.round(vt);if(St(this,Vp)===bt&&St(this,Hp)===Et)return;zt(this,Vp,bt),zt(this,Hp,Et),this.canvas.style.visibility="hidden";const[At,_t]=this.parentDimensions;this.width=ht/At,this.height=vt/_t,this.fixAndSetPosition(),St(this,Oo)&&Ut(this,_r,hA).call(this,ht,vt),Ut(this,_r,tm).call(this),Ut(this,_r,qu).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(ht,vt,bt){var Ot,Ft,Dt;if(ht instanceof InkAnnotationElement)return null;const Et=super.deserialize(ht,vt,bt);Et.thickness=ht.thickness,Et.color=Util.makeHexColor(...ht.color),Et.opacity=ht.opacity;const[At,_t]=Et.pageDimensions,wt=Et.width*At,Ct=Et.height*_t,xt=Et.parentScale,Pt=ht.thickness/2;zt(Et,Oo,!0),zt(Et,Vp,Math.round(wt)),zt(Et,Hp,Math.round(Ct));const{paths:Rt,rect:kt,rotation:Mt}=ht;for(let{bezier:$t}of Rt){$t=Ut(Ot=Is,pu,Nw).call(Ot,$t,kt,Mt);const Bt=[];Et.paths.push(Bt);let Nt=xt*($t[0]-Pt),Ht=xt*($t[1]-Pt);for(let jt=2,Xt=$t.length;jt<Xt;jt+=6){const Jt=xt*($t[jt]-Pt),Gt=xt*($t[jt+1]-Pt),en=xt*($t[jt+2]-Pt),on=xt*($t[jt+3]-Pt),_n=xt*($t[jt+4]-Pt),ln=xt*($t[jt+5]-Pt);Bt.push([[Nt,Ht],[Jt,Gt],[en,on],[_n,ln]]),Nt=_n,Ht=ln}const Vt=Ut(this,pu,$w).call(this,Bt);Et.bezierPath2D.push(Vt)}const Lt=Ut(Ft=Et,_r,pA).call(Ft);return zt(Et,Ip,Math.max(AnnotationEditor.MIN_SIZE,Lt[2]-Lt[0])),zt(Et,Dp,Math.max(AnnotationEditor.MIN_SIZE,Lt[3]-Lt[1])),Ut(Dt=Et,_r,hA).call(Dt,wt,Ct),Et}serialize(){if(this.isEmpty())return null;const ht=this.getRect(0,0),vt=AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:AnnotationEditorType.INK,color:vt,thickness:this.thickness,opacity:this.opacity,paths:Ut(this,_r,Bw).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,ht),pageIndex:this.pageIndex,rect:ht,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Dp=new WeakMap,Ip=new WeakMap,Yy=new WeakMap,Qy=new WeakMap,Zy=new WeakMap,Op=new WeakMap,Pl=new WeakMap,ou=new WeakMap,Oo=new WeakMap,$p=new WeakMap,Np=new WeakMap,Bp=new WeakMap,Vp=new WeakMap,Hp=new WeakMap,Ou=new WeakMap,_r=new WeakSet,Tw=function(ht){const vt=Et=>{this.thickness=Et,Ut(this,_r,hv).call(this)},bt=this.thickness;this.addCommands({cmd:vt.bind(this,ht),undo:vt.bind(this,bt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Pw=function(ht){const vt=Et=>{this.color=Et,Ut(this,_r,qu).call(this)},bt=this.color;this.addCommands({cmd:vt.bind(this,ht),undo:vt.bind(this,bt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Rw=function(ht){const vt=Et=>{this.opacity=Et,Ut(this,_r,qu).call(this)};ht/=100;const bt=this.opacity;this.addCommands({cmd:vt.bind(this,ht),undo:vt.bind(this,bt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},kw=function(){const{parentRotation:ht,parentDimensions:[vt,bt]}=this;switch(ht){case 90:return[0,bt,bt,vt];case 180:return[vt,bt,vt,bt];case 270:return[vt,0,bt,vt];default:return[0,0,vt,bt]}},cA=function(){const{ctx:ht,color:vt,opacity:bt,thickness:Et,parentScale:At,scaleFactor:_t}=this;ht.lineWidth=Et*At/_t,ht.lineCap="round",ht.lineJoin="round",ht.miterLimit=10,ht.strokeStyle=`${vt}${opacityToHex(bt)}`},Mw=function(ht,vt){this.canvas.addEventListener("contextmenu",noContextMenu),this.canvas.addEventListener("pointerleave",St(this,Qy)),this.canvas.addEventListener("pointermove",St(this,Yy)),this.canvas.addEventListener("pointerup",St(this,Zy)),this.canvas.removeEventListener("pointerdown",St(this,Op)),this.isEditing=!0,St(this,Np)||(zt(this,Np,!0),Ut(this,_r,tm).call(this),this.thickness||(this.thickness=Is._defaultThickness),this.color||(this.color=Is._defaultColor||AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Is._defaultOpacity)),this.currentPath.push([ht,vt]),zt(this,$p,!1),Ut(this,_r,cA).call(this),zt(this,Ou,()=>{Ut(this,_r,Dw).call(this),St(this,Ou)&&window.requestAnimationFrame(St(this,Ou))}),window.requestAnimationFrame(St(this,Ou))},uA=function(ht,vt){const[bt,Et]=this.currentPath.at(-1);if(this.currentPath.length>1&&ht===bt&&vt===Et)return;const At=this.currentPath;let _t=St(this,ou);if(At.push([ht,vt]),zt(this,$p,!0),At.length<=2){_t.moveTo(...At[0]),_t.lineTo(ht,vt);return}At.length===3&&(zt(this,ou,_t=new Path2D),_t.moveTo(...At[0])),Ut(this,_r,Iw).call(this,_t,...At.at(-3),...At.at(-2),ht,vt)},Fw=function(){if(this.currentPath.length===0)return;const ht=this.currentPath.at(-1);St(this,ou).lineTo(...ht)},Lw=function(ht,vt){zt(this,Ou,null),ht=Math.min(Math.max(ht,0),this.canvas.width),vt=Math.min(Math.max(vt,0),this.canvas.height),Ut(this,_r,uA).call(this,ht,vt),Ut(this,_r,Fw).call(this);let bt;if(this.currentPath.length!==1)bt=Ut(this,_r,Ow).call(this);else{const Ct=[ht,vt];bt=[[Ct,Ct.slice(),Ct.slice(),Ct]]}const Et=St(this,ou),At=this.currentPath;this.currentPath=[],zt(this,ou,new Path2D);const _t=()=>{this.allRawPaths.push(At),this.paths.push(bt),this.bezierPath2D.push(Et),this._uiManager.rebuild(this)},wt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Ut(this,_r,T0).call(this),Ut(this,_r,P0).call(this)),Ut(this,_r,hv).call(this))};this.addCommands({cmd:_t,undo:wt,mustExec:!0})},Dw=function(){if(!St(this,$p))return;zt(this,$p,!1);const ht=Math.ceil(this.thickness*this.parentScale),vt=this.currentPath.slice(-3),bt=vt.map(_t=>_t[0]),Et=vt.map(_t=>_t[1]);Math.min(...bt)-ht,Math.max(...bt)+ht,Math.min(...Et)-ht,Math.max(...Et)+ht;const{ctx:At}=this;At.save(),At.clearRect(0,0,this.canvas.width,this.canvas.height);for(const _t of this.bezierPath2D)At.stroke(_t);At.stroke(St(this,ou)),At.restore()},Iw=function(ht,vt,bt,Et,At,_t,wt){const Ct=(vt+Et)/2,xt=(bt+At)/2,Pt=(Et+_t)/2,Rt=(At+wt)/2;ht.bezierCurveTo(Ct+2*(Et-Ct)/3,xt+2*(At-xt)/3,Pt+2*(Et-Pt)/3,Rt+2*(At-Rt)/3,Pt,Rt)},Ow=function(){const ht=this.currentPath;if(ht.length<=2)return[[ht[0],ht[0],ht.at(-1),ht.at(-1)]];const vt=[];let bt,[Et,At]=ht[0];for(bt=1;bt<ht.length-2;bt++){const[kt,Mt]=ht[bt],[Lt,Ot]=ht[bt+1],Ft=(kt+Lt)/2,Dt=(Mt+Ot)/2,$t=[Et+2*(kt-Et)/3,At+2*(Mt-At)/3],Bt=[Ft+2*(kt-Ft)/3,Dt+2*(Mt-Dt)/3];vt.push([[Et,At],$t,Bt,[Ft,Dt]]),[Et,At]=[Ft,Dt]}const[_t,wt]=ht[bt],[Ct,xt]=ht[bt+1],Pt=[Et+2*(_t-Et)/3,At+2*(wt-At)/3],Rt=[Ct+2*(_t-Ct)/3,xt+2*(wt-xt)/3];return vt.push([[Et,At],Pt,Rt,[Ct,xt]]),vt},qu=function(){if(this.isEmpty()){Ut(this,_r,R0).call(this);return}Ut(this,_r,cA).call(this);const{canvas:ht,ctx:vt}=this;vt.setTransform(1,0,0,1,0,0),vt.clearRect(0,0,ht.width,ht.height),Ut(this,_r,R0).call(this);for(const bt of this.bezierPath2D)vt.stroke(bt)},dA=function(ht){this.canvas.removeEventListener("pointerleave",St(this,Qy)),this.canvas.removeEventListener("pointermove",St(this,Yy)),this.canvas.removeEventListener("pointerup",St(this,Zy)),this.canvas.addEventListener("pointerdown",St(this,Op)),St(this,Pl)&&clearTimeout(St(this,Pl)),zt(this,Pl,setTimeout(()=>{zt(this,Pl,null),this.canvas.removeEventListener("contextmenu",noContextMenu)},10)),Ut(this,_r,Lw).call(this,ht.offsetX,ht.offsetY),this.addToAnnotationStorage(),this.setInBackground()},T0=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},P0=function(){zt(this,Bp,new ResizeObserver(ht=>{const vt=ht[0].contentRect;vt.width&&vt.height&&this.setDimensions(vt.width,vt.height)})),St(this,Bp).observe(this.div)},tm=function(){if(!St(this,Np))return;const[ht,vt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*ht),this.canvas.height=Math.ceil(this.height*vt),Ut(this,_r,R0).call(this)},hA=function(ht,vt){const bt=Ut(this,_r,k0).call(this),Et=(ht-bt)/St(this,Ip),At=(vt-bt)/St(this,Dp);this.scaleFactor=Math.min(Et,At)},R0=function(){const ht=Ut(this,_r,k0).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ht,this.translationY*this.scaleFactor+ht)},pu=new WeakSet,$w=function(ht){const vt=new Path2D;for(let bt=0,Et=ht.length;bt<Et;bt++){const[At,_t,wt,Ct]=ht[bt];bt===0&&vt.moveTo(...At),vt.bezierCurveTo(_t[0],_t[1],wt[0],wt[1],Ct[0],Ct[1])}return vt},fA=function(ht,vt,bt){const[Et,At,_t,wt]=vt;switch(bt){case 0:for(let Ct=0,xt=ht.length;Ct<xt;Ct+=2)ht[Ct]+=Et,ht[Ct+1]=wt-ht[Ct+1];break;case 90:for(let Ct=0,xt=ht.length;Ct<xt;Ct+=2){const Pt=ht[Ct];ht[Ct]=ht[Ct+1]+Et,ht[Ct+1]=Pt+At}break;case 180:for(let Ct=0,xt=ht.length;Ct<xt;Ct+=2)ht[Ct]=_t-ht[Ct],ht[Ct+1]+=At;break;case 270:for(let Ct=0,xt=ht.length;Ct<xt;Ct+=2){const Pt=ht[Ct];ht[Ct]=_t-ht[Ct+1],ht[Ct+1]=wt-Pt}break;default:throw new Error("Invalid rotation")}return ht},Nw=function(ht,vt,bt){const[Et,At,_t,wt]=vt;switch(bt){case 0:for(let Ct=0,xt=ht.length;Ct<xt;Ct+=2)ht[Ct]-=Et,ht[Ct+1]=wt-ht[Ct+1];break;case 90:for(let Ct=0,xt=ht.length;Ct<xt;Ct+=2){const Pt=ht[Ct];ht[Ct]=ht[Ct+1]-At,ht[Ct+1]=Pt-Et}break;case 180:for(let Ct=0,xt=ht.length;Ct<xt;Ct+=2)ht[Ct]=_t-ht[Ct],ht[Ct+1]-=At;break;case 270:for(let Ct=0,xt=ht.length;Ct<xt;Ct+=2){const Pt=ht[Ct];ht[Ct]=wt-ht[Ct+1],ht[Ct+1]=_t-Pt}break;default:throw new Error("Invalid rotation")}return ht},Bw=function(ht,vt,bt,Et){var xt,Pt;const At=[],_t=this.thickness/2,wt=ht*vt+_t,Ct=ht*bt+_t;for(const Rt of this.paths){const kt=[],Mt=[];for(let Lt=0,Ot=Rt.length;Lt<Ot;Lt++){const[Ft,Dt,$t,Bt]=Rt[Lt];if(Ft[0]===Bt[0]&&Ft[1]===Bt[1]&&Ot===1){const on=ht*Ft[0]+wt,_n=ht*Ft[1]+Ct;kt.push(on,_n),Mt.push(on,_n);break}const Nt=ht*Ft[0]+wt,Ht=ht*Ft[1]+Ct,Vt=ht*Dt[0]+wt,jt=ht*Dt[1]+Ct,Xt=ht*$t[0]+wt,Jt=ht*$t[1]+Ct,Gt=ht*Bt[0]+wt,en=ht*Bt[1]+Ct;Lt===0&&(kt.push(Nt,Ht),Mt.push(Nt,Ht)),kt.push(Vt,jt,Xt,Jt,Gt,en),Mt.push(Vt,jt),Lt===Ot-1&&Mt.push(Gt,en)}At.push({bezier:Ut(xt=Is,pu,fA).call(xt,kt,Et,this.rotation),points:Ut(Pt=Is,pu,fA).call(Pt,Mt,Et,this.rotation)})}return At},pA=function(){let ht=1/0,vt=-1/0,bt=1/0,Et=-1/0;for(const At of this.paths)for(const[_t,wt,Ct,xt]of At){const Pt=Util.bezierBoundingBox(..._t,...wt,...Ct,...xt);ht=Math.min(ht,Pt[0]),bt=Math.min(bt,Pt[1]),vt=Math.max(vt,Pt[2]),Et=Math.max(Et,Pt[3])}return[ht,bt,vt,Et]},k0=function(){return St(this,Oo)?Math.ceil(this.thickness*this.parentScale):0},hv=function(ht=!1){if(this.isEmpty())return;if(!St(this,Oo)){Ut(this,_r,qu).call(this);return}const vt=Ut(this,_r,pA).call(this),bt=Ut(this,_r,k0).call(this);zt(this,Ip,Math.max(AnnotationEditor.MIN_SIZE,vt[2]-vt[0])),zt(this,Dp,Math.max(AnnotationEditor.MIN_SIZE,vt[3]-vt[1]));const Et=Math.ceil(bt+St(this,Ip)*this.scaleFactor),At=Math.ceil(bt+St(this,Dp)*this.scaleFactor),[_t,wt]=this.parentDimensions;this.width=Et/_t,this.height=At/wt,this.setAspectRatio(Et,At);const Ct=this.translationX,xt=this.translationY;this.translationX=-vt[0],this.translationY=-vt[1],Ut(this,_r,tm).call(this),Ut(this,_r,qu).call(this),zt(this,Vp,Et),zt(this,Hp,At),this.setDims(Et,At);const Pt=ht?bt/this.scaleFactor/2:0;this.translate(Ct-this.translationX-Pt,xt-this.translationY-Pt)},Kt(Is,pu),Sr(Is,"_defaultColor",null),Sr(Is,"_defaultOpacity",1),Sr(Is,"_defaultThickness",1),Sr(Is,"_type","ink"),Sr(Is,"_editorType",AnnotationEditorType.INK);let InkEditor=Is;var oo,ao,$u,au,Nu,Qm,Rl,jp,Ml,Jo,Jy,ms,fv,pv,M0,mA,Vw,Hw,gA,F0,jw;const _v=class _v extends AnnotationEditor{constructor(ht){super({...ht,name:"stampEditor"});Kt(this,ms);Kt(this,oo,null);Kt(this,ao,null);Kt(this,$u,null);Kt(this,au,null);Kt(this,Nu,null);Kt(this,Qm,"");Kt(this,Rl,null);Kt(this,jp,null);Kt(this,Ml,null);Kt(this,Jo,!1);Kt(this,Jy,!1);zt(this,au,ht.bitmapUrl),zt(this,Nu,ht.bitmapFile)}static initialize(ht,vt){AnnotationEditor.initialize(ht,vt)}static get supportedTypes(){return shadow(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(vt=>`image/${vt}`))}static get supportedTypesStr(){return shadow(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(ht){return this.supportedTypes.includes(ht)}static paste(ht,vt){vt.pasteEditor(AnnotationEditorType.STAMP,{bitmapFile:ht.getAsFile()})}remove(){var ht,vt;St(this,ao)&&(zt(this,oo,null),this._uiManager.imageManager.deleteId(St(this,ao)),(ht=St(this,Rl))==null||ht.remove(),zt(this,Rl,null),(vt=St(this,jp))==null||vt.disconnect(),zt(this,jp,null),St(this,Ml)&&(clearTimeout(St(this,Ml)),zt(this,Ml,null))),super.remove()}rebuild(){if(!this.parent){St(this,ao)&&Ut(this,ms,M0).call(this);return}super.rebuild(),this.div!==null&&(St(this,ao)&&St(this,Rl)===null&&Ut(this,ms,M0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(St(this,$u)||St(this,oo)||St(this,au)||St(this,Nu)||St(this,ao))}get isResizable(){return!0}render(){if(this.div)return this.div;let ht,vt;if(this.width&&(ht=this.x,vt=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),St(this,oo)?Ut(this,ms,mA).call(this):Ut(this,ms,M0).call(this),this.width){const[bt,Et]=this.parentDimensions;this.setAt(ht*bt,vt*Et,this.width*bt,this.height*Et)}return this.div}getImageForAltText(){return St(this,Rl)}static deserialize(ht,vt,bt){if(ht instanceof StampAnnotationElement)return null;const Et=super.deserialize(ht,vt,bt),{rect:At,bitmapUrl:_t,bitmapId:wt,isSvg:Ct,accessibilityData:xt}=ht;wt&&bt.imageManager.isValidId(wt)?zt(Et,ao,wt):zt(Et,au,_t),zt(Et,Jo,Ct);const[Pt,Rt]=Et.pageDimensions;return Et.width=(At[2]-At[0])/Pt,Et.height=(At[3]-At[1])/Rt,xt&&(Et.altTextData=xt),Et}serialize(ht=!1,vt=null){if(this.isEmpty())return null;const bt={annotationType:AnnotationEditorType.STAMP,bitmapId:St(this,ao),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:St(this,Jo),structTreeParentId:this._structTreeParentId};if(ht)return bt.bitmapUrl=Ut(this,ms,F0).call(this,!0),bt.accessibilityData=this.altTextData,bt;const{decorative:Et,altText:At}=this.altTextData;if(!Et&&At&&(bt.accessibilityData={type:"Figure",alt:At}),vt===null)return bt;vt.stamps||(vt.stamps=new Map);const _t=St(this,Jo)?(bt.rect[2]-bt.rect[0])*(bt.rect[3]-bt.rect[1]):null;if(!vt.stamps.has(St(this,ao)))vt.stamps.set(St(this,ao),{area:_t,serialized:bt}),bt.bitmap=Ut(this,ms,F0).call(this,!1);else if(St(this,Jo)){const wt=vt.stamps.get(St(this,ao));_t>wt.area&&(wt.area=_t,wt.serialized.bitmap.close(),wt.serialized.bitmap=Ut(this,ms,F0).call(this,!1))}return bt}};oo=new WeakMap,ao=new WeakMap,$u=new WeakMap,au=new WeakMap,Nu=new WeakMap,Qm=new WeakMap,Rl=new WeakMap,jp=new WeakMap,Ml=new WeakMap,Jo=new WeakMap,Jy=new WeakMap,ms=new WeakSet,fv=function(ht,vt=!1){if(!ht){this.remove();return}zt(this,oo,ht.bitmap),vt||(zt(this,ao,ht.id),zt(this,Jo,ht.isSvg)),ht.file&&zt(this,Qm,ht.file.name),Ut(this,ms,mA).call(this)},pv=function(){zt(this,$u,null),this._uiManager.enableWaiting(!1),St(this,Rl)&&this.div.focus()},M0=function(){if(St(this,ao)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(St(this,ao)).then(vt=>Ut(this,ms,fv).call(this,vt,!0)).finally(()=>Ut(this,ms,pv).call(this));return}if(St(this,au)){const vt=St(this,au);zt(this,au,null),this._uiManager.enableWaiting(!0),zt(this,$u,this._uiManager.imageManager.getFromUrl(vt).then(bt=>Ut(this,ms,fv).call(this,bt)).finally(()=>Ut(this,ms,pv).call(this)));return}if(St(this,Nu)){const vt=St(this,Nu);zt(this,Nu,null),this._uiManager.enableWaiting(!0),zt(this,$u,this._uiManager.imageManager.getFromFile(vt).then(bt=>Ut(this,ms,fv).call(this,bt)).finally(()=>Ut(this,ms,pv).call(this)));return}const ht=document.createElement("input");ht.type="file",ht.accept=_v.supportedTypesStr,zt(this,$u,new Promise(vt=>{ht.addEventListener("change",async()=>{if(!ht.files||ht.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const bt=await this._uiManager.imageManager.getFromFile(ht.files[0]);Ut(this,ms,fv).call(this,bt)}vt()}),ht.addEventListener("cancel",()=>{this.remove(),vt()})}).finally(()=>Ut(this,ms,pv).call(this))),ht.click()},mA=function(){const{div:ht}=this;let{width:vt,height:bt}=St(this,oo);const[Et,At]=this.pageDimensions,_t=.75;if(this.width)vt=this.width*Et,bt=this.height*At;else if(vt>_t*Et||bt>_t*At){const Pt=Math.min(_t*Et/vt,_t*At/bt);vt*=Pt,bt*=Pt}const[wt,Ct]=this.parentDimensions;this.setDims(vt*wt/Et,bt*Ct/At),this._uiManager.enableWaiting(!1);const xt=zt(this,Rl,document.createElement("canvas"));ht.append(xt),ht.hidden=!1,Ut(this,ms,gA).call(this,vt,bt),Ut(this,ms,jw).call(this),St(this,Jy)||(this.parent.addUndoableEditor(this),zt(this,Jy,!0)),this._reportTelemetry({action:"inserted_image"}),St(this,Qm)&&xt.setAttribute("aria-label",St(this,Qm))},Vw=function(ht,vt){var _t;const[bt,Et]=this.parentDimensions;this.width=ht/bt,this.height=vt/Et,this.setDims(ht,vt),(_t=this._initialOptions)!=null&&_t.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,St(this,Ml)!==null&&clearTimeout(St(this,Ml)),zt(this,Ml,setTimeout(()=>{zt(this,Ml,null),Ut(this,ms,gA).call(this,ht,vt)},200))},Hw=function(ht,vt){const{width:bt,height:Et}=St(this,oo);let At=bt,_t=Et,wt=St(this,oo);for(;At>2*ht||_t>2*vt;){const Ct=At,xt=_t;At>2*ht&&(At=At>=16384?Math.floor(At/2)-1:Math.ceil(At/2)),_t>2*vt&&(_t=_t>=16384?Math.floor(_t/2)-1:Math.ceil(_t/2));const Pt=new OffscreenCanvas(At,_t);Pt.getContext("2d").drawImage(wt,0,0,Ct,xt,0,0,At,_t),wt=Pt.transferToImageBitmap()}return wt},gA=function(ht,vt){ht=Math.ceil(ht),vt=Math.ceil(vt);const bt=St(this,Rl);if(!bt||bt.width===ht&&bt.height===vt)return;bt.width=ht,bt.height=vt;const Et=St(this,Jo)?St(this,oo):Ut(this,ms,Hw).call(this,ht,vt);if(this._uiManager.hasMLManager&&!this.hasAltText()){const wt=new OffscreenCanvas(ht,vt).getContext("2d");wt.drawImage(Et,0,0,Et.width,Et.height,0,0,ht,vt),this._uiManager.mlGuess({service:"image-to-text",request:{data:wt.getImageData(0,0,ht,vt).data,width:ht,height:vt,channels:4}}).then(Ct=>{const xt=(Ct==null?void 0:Ct.output)||"";this.parent&&xt&&!this.hasAltText()&&(this.altTextData={altText:xt,decorative:!1})})}const At=bt.getContext("2d");At.filter=this._uiManager.hcmFilter,At.drawImage(Et,0,0,Et.width,Et.height,0,0,ht,vt)},F0=function(ht){if(ht){if(St(this,Jo)){const Et=this._uiManager.imageManager.getSvgUrl(St(this,ao));if(Et)return Et}const vt=document.createElement("canvas");return{width:vt.width,height:vt.height}=St(this,oo),vt.getContext("2d").drawImage(St(this,oo),0,0),vt.toDataURL()}if(St(this,Jo)){const[vt,bt]=this.pageDimensions,Et=Math.round(this.width*vt*PixelsPerInch.PDF_TO_CSS_UNITS),At=Math.round(this.height*bt*PixelsPerInch.PDF_TO_CSS_UNITS),_t=new OffscreenCanvas(Et,At);return _t.getContext("2d").drawImage(St(this,oo),0,0,St(this,oo).width,St(this,oo).height,0,0,Et,At),_t.transferToImageBitmap()}return structuredClone(St(this,oo))},jw=function(){zt(this,jp,new ResizeObserver(ht=>{const vt=ht[0].contentRect;vt.width&&vt.height&&Ut(this,ms,Vw).call(this,vt.width,vt.height)})),St(this,jp).observe(this.div)},Sr(_v,"_type","stamp"),Sr(_v,"_editorType",AnnotationEditorType.STAMP);let StampEditor=_v;var Up,Zm,Fl,zp,lu,cu,uu,ko,Bu,Jm,_g,mo,Kr,Vu,lo,Uw,vA,yA,bA,L0;const jo=class jo{constructor({uiManager:$,pageIndex:ht,div:vt,accessibilityManager:bt,annotationLayer:Et,drawLayer:At,textLayer:_t,viewport:wt,l10n:Ct}){Kt(this,lo);Kt(this,Up);Kt(this,Zm,!1);Kt(this,Fl,null);Kt(this,zp,null);Kt(this,lu,null);Kt(this,cu,null);Kt(this,uu,null);Kt(this,ko,new Map);Kt(this,Bu,!1);Kt(this,Jm,!1);Kt(this,_g,!1);Kt(this,mo,null);Kt(this,Kr);const xt=[...St(jo,Vu).values()];if(!jo._initialized){jo._initialized=!0;for(const Pt of xt)Pt.initialize(Ct,$)}$.registerEditorTypes(xt),zt(this,Kr,$),this.pageIndex=ht,this.div=vt,zt(this,Up,bt),zt(this,Fl,Et),this.viewport=wt,zt(this,mo,_t),this.drawLayer=At,St(this,Kr).addLayer(this)}get isEmpty(){return St(this,ko).size===0}get isInvisible(){return this.isEmpty&&St(this,Kr).getMode()===AnnotationEditorType.NONE}updateToolbar($){St(this,Kr).updateToolbar($)}updateMode($=St(this,Kr).getMode()){switch(Ut(this,lo,L0).call(this),$){case AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case AnnotationEditorType.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:ht}=this.div;for(const vt of St(jo,Vu).values())ht.toggle(`${vt._type}Editing`,$===vt._editorType);this.div.hidden=!1}hasTextLayer($){var ht;return $===((ht=St(this,mo))==null?void 0:ht.div)}addInkEditorIfNeeded($){if(St(this,Kr).getMode()!==AnnotationEditorType.INK)return;if(!$){for(const vt of St(this,ko).values())if(vt.isEmpty()){vt.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState($){St(this,Kr).setEditingState($)}addCommands($){St(this,Kr).addCommands($)}togglePointerEvents($=!1){this.div.classList.toggle("disabled",!$)}toggleAnnotationLayerPointerEvents($=!1){var ht;(ht=St(this,Fl))==null||ht.div.classList.toggle("disabled",!$)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const $=new Set;for(const vt of St(this,ko).values())vt.enableEditing(),vt.show(!0),vt.annotationElementId&&(St(this,Kr).removeChangedExistingAnnotation(vt),$.add(vt.annotationElementId));if(!St(this,Fl))return;const ht=St(this,Fl).getEditableAnnotations();for(const vt of ht){if(vt.hide(),St(this,Kr).isDeletedAnnotationElement(vt.data.id)||$.has(vt.data.id))continue;const bt=this.deserialize(vt);bt&&(this.addOrRebuild(bt),bt.enableEditing())}}disable(){var bt;zt(this,_g,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const $=new Map,ht=new Map;for(const Et of St(this,ko).values())if(Et.disableEditing(),!!Et.annotationElementId){if(Et.serialize()!==null){$.set(Et.annotationElementId,Et);continue}else ht.set(Et.annotationElementId,Et);(bt=this.getEditableAnnotation(Et.annotationElementId))==null||bt.show(),Et.remove()}if(St(this,Fl)){const Et=St(this,Fl).getEditableAnnotations();for(const At of Et){const{id:_t}=At.data;if(St(this,Kr).isDeletedAnnotationElement(_t))continue;let wt=ht.get(_t);if(wt){wt.resetAnnotationElement(At),wt.show(!1),At.show();continue}wt=$.get(_t),wt&&(St(this,Kr).addChangedExistingAnnotation(wt),wt.renderAnnotationElement(At),wt.show(!1)),At.show()}}Ut(this,lo,L0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:vt}=this.div;for(const Et of St(jo,Vu).values())vt.remove(`${Et._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),zt(this,_g,!1)}getEditableAnnotation($){var ht;return((ht=St(this,Fl))==null?void 0:ht.getEditableAnnotation($))||null}setActiveEditor($){St(this,Kr).getActive()!==$&&St(this,Kr).setActiveEditor($)}enableTextSelection(){var $;this.div.tabIndex=-1,($=St(this,mo))!=null&&$.div&&!St(this,cu)&&(zt(this,cu,Ut(this,lo,Uw).bind(this)),St(this,mo).div.addEventListener("pointerdown",St(this,cu)),St(this,mo).div.classList.add("highlighting"))}disableTextSelection(){var $;this.div.tabIndex=0,($=St(this,mo))!=null&&$.div&&St(this,cu)&&(St(this,mo).div.removeEventListener("pointerdown",St(this,cu)),zt(this,cu,null),St(this,mo).div.classList.remove("highlighting"))}enableClick(){St(this,lu)||(zt(this,lu,this.pointerdown.bind(this)),zt(this,zp,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",St(this,lu)),this.div.addEventListener("pointerup",St(this,zp)))}disableClick(){St(this,lu)&&(this.div.removeEventListener("pointerdown",St(this,lu)),this.div.removeEventListener("pointerup",St(this,zp)),zt(this,lu,null),zt(this,zp,null))}attach($){St(this,ko).set($.id,$);const{annotationElementId:ht}=$;ht&&St(this,Kr).isDeletedAnnotationElement(ht)&&St(this,Kr).removeDeletedAnnotationElement($)}detach($){var ht;St(this,ko).delete($.id),(ht=St(this,Up))==null||ht.removePointerInTextLayer($.contentDiv),!St(this,_g)&&$.annotationElementId&&St(this,Kr).addDeletedAnnotationElement($)}remove($){this.detach($),St(this,Kr).removeEditor($),$.div.remove(),$.isAttachedToDOM=!1,St(this,Jm)||this.addInkEditorIfNeeded(!1)}changeParent($){var ht;$.parent!==this&&($.parent&&$.annotationElementId&&(St(this,Kr).addDeletedAnnotationElement($.annotationElementId),AnnotationEditor.deleteAnnotationElement($),$.annotationElementId=null),this.attach($),(ht=$.parent)==null||ht.detach($),$.setParent(this),$.div&&$.isAttachedToDOM&&($.div.remove(),this.div.append($.div)))}add($){if(!($.parent===this&&$.isAttachedToDOM)){if(this.changeParent($),St(this,Kr).addEditor($),this.attach($),!$.isAttachedToDOM){const ht=$.render();this.div.append(ht),$.isAttachedToDOM=!0}$.fixAndSetPosition(),$.onceAdded(),St(this,Kr).addToAnnotationStorage($),$._reportTelemetry($.telemetryInitialData)}}moveEditorInDOM($){var vt;if(!$.isAttachedToDOM)return;const{activeElement:ht}=document;$.div.contains(ht)&&!St(this,uu)&&($._focusEventsAllowed=!1,zt(this,uu,setTimeout(()=>{zt(this,uu,null),$.div.contains(document.activeElement)?$._focusEventsAllowed=!0:($.div.addEventListener("focusin",()=>{$._focusEventsAllowed=!0},{once:!0}),ht.focus())},0))),$._structTreeParentId=(vt=St(this,Up))==null?void 0:vt.moveElementInDOM(this.div,$.div,$.contentDiv,!0)}addOrRebuild($){$.needsToBeRebuilt()?($.parent||($.parent=this),$.rebuild(),$.show()):this.add($)}addUndoableEditor($){const ht=()=>$._uiManager.rebuild($),vt=()=>{$.remove()};this.addCommands({cmd:ht,undo:vt,mustExec:!1})}getNextId(){return St(this,Kr).getId()}canCreateNewEmptyEditor(){var $;return($=St(this,lo,vA))==null?void 0:$.canCreateNewEmptyEditor()}pasteEditor($,ht){St(this,Kr).updateToolbar($),St(this,Kr).updateMode($);const{offsetX:vt,offsetY:bt}=Ut(this,lo,bA).call(this),Et=this.getNextId(),At=Ut(this,lo,yA).call(this,{parent:this,id:Et,x:vt,y:bt,uiManager:St(this,Kr),isCentered:!0,...ht});At&&this.add(At)}deserialize($){var ht;return((ht=St(jo,Vu).get($.annotationType??$.annotationEditorType))==null?void 0:ht.deserialize($,this,St(this,Kr)))||null}createAndAddNewEditor($,ht,vt={}){const bt=this.getNextId(),Et=Ut(this,lo,yA).call(this,{parent:this,id:bt,x:$.offsetX,y:$.offsetY,uiManager:St(this,Kr),isCentered:ht,...vt});return Et&&this.add(Et),Et}addNewEditor(){this.createAndAddNewEditor(Ut(this,lo,bA).call(this),!0)}setSelected($){St(this,Kr).setSelected($)}toggleSelected($){St(this,Kr).toggleSelected($)}isSelected($){return St(this,Kr).isSelected($)}unselect($){St(this,Kr).unselect($)}pointerup($){const{isMac:ht}=util_FeatureTest.platform;if(!($.button!==0||$.ctrlKey&&ht)&&$.target===this.div&&St(this,Bu)){if(zt(this,Bu,!1),!St(this,Zm)){zt(this,Zm,!0);return}if(St(this,Kr).getMode()===AnnotationEditorType.STAMP){St(this,Kr).unselectAll();return}this.createAndAddNewEditor($,!1)}}pointerdown($){if(St(this,Kr).getMode()===AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),St(this,Bu)){zt(this,Bu,!1);return}const{isMac:ht}=util_FeatureTest.platform;if($.button!==0||$.ctrlKey&&ht||$.target!==this.div)return;zt(this,Bu,!0);const vt=St(this,Kr).getActive();zt(this,Zm,!vt||vt.isEmpty())}findNewParent($,ht,vt){const bt=St(this,Kr).findParent(ht,vt);return bt===null||bt===this?!1:(bt.changeParent($),!0)}destroy(){var $,ht;(($=St(this,Kr).getActive())==null?void 0:$.parent)===this&&(St(this,Kr).commitOrRemove(),St(this,Kr).setActiveEditor(null)),St(this,uu)&&(clearTimeout(St(this,uu)),zt(this,uu,null));for(const vt of St(this,ko).values())(ht=St(this,Up))==null||ht.removePointerInTextLayer(vt.contentDiv),vt.setParent(null),vt.isAttachedToDOM=!1,vt.div.remove();this.div=null,St(this,ko).clear(),St(this,Kr).removeLayer(this)}render({viewport:$}){this.viewport=$,setLayerDimensions(this.div,$);for(const ht of St(this,Kr).getEditors(this.pageIndex))this.add(ht),ht.rebuild();this.updateMode()}update({viewport:$}){St(this,Kr).commitOrRemove(),Ut(this,lo,L0).call(this);const ht=this.viewport.rotation,vt=$.rotation;if(this.viewport=$,setLayerDimensions(this.div,{rotation:vt}),ht!==vt)for(const bt of St(this,ko).values())bt.rotate(vt);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:$,pageHeight:ht}=this.viewport.rawDims;return[$,ht]}get scale(){return St(this,Kr).viewParameters.realScale}};Up=new WeakMap,Zm=new WeakMap,Fl=new WeakMap,zp=new WeakMap,lu=new WeakMap,cu=new WeakMap,uu=new WeakMap,ko=new WeakMap,Bu=new WeakMap,Jm=new WeakMap,_g=new WeakMap,mo=new WeakMap,Kr=new WeakMap,Vu=new WeakMap,lo=new WeakSet,Uw=function($){if(St(this,Kr).unselectAll(),$.target===St(this,mo).div){const{isMac:ht}=util_FeatureTest.platform;if($.button!==0||$.ctrlKey&&ht)return;St(this,Kr).showAllEditors("highlight",!0,!0),St(this,mo).div.classList.add("free"),HighlightEditor.startHighlighting(this,St(this,Kr).direction==="ltr",$),St(this,mo).div.addEventListener("pointerup",()=>{St(this,mo).div.classList.remove("free")},{once:!0}),$.preventDefault()}},vA=function(){return St(jo,Vu).get(St(this,Kr).getMode())},yA=function($){const ht=St(this,lo,vA);return ht?new ht.prototype.constructor($):null},bA=function(){const{x:$,y:ht,width:vt,height:bt}=this.div.getBoundingClientRect(),Et=Math.max(0,$),At=Math.max(0,ht),_t=Math.min(window.innerWidth,$+vt),wt=Math.min(window.innerHeight,ht+bt),Ct=(Et+_t)/2-$,xt=(At+wt)/2-ht,[Pt,Rt]=this.viewport.rotation%180===0?[Ct,xt]:[xt,Ct];return{offsetX:Pt,offsetY:Rt}},L0=function(){zt(this,Jm,!0);for(const $ of St(this,ko).values())$.isEmpty()&&$.remove();zt(this,Jm,!1)},Sr(jo,"_initialized",!1),Kt(jo,Vu,new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor].map($=>[$._editorType,$])));let AnnotationEditorLayer=jo;var Ll,e0,Xs,Hu,t0,EA,Gp,AA,zw;const to=class to{constructor({pageIndex:$}){Kt(this,Gp);Kt(this,Ll,null);Kt(this,e0,0);Kt(this,Xs,new Map);Kt(this,Hu,new Map);this.pageIndex=$}setParent($){if(!St(this,Ll)){zt(this,Ll,$);return}if(St(this,Ll)!==$){if(St(this,Xs).size>0)for(const ht of St(this,Xs).values())ht.remove(),$.append(ht);zt(this,Ll,$)}}static get _svgFactory(){return shadow(this,"_svgFactory",new DOMSVGFactory)}highlight($,ht,vt,bt=!1){const Et=eo(this,e0)._++,At=Ut(this,Gp,AA).call(this,$.box);At.classList.add("highlight"),$.free&&At.classList.add("free");const _t=to._svgFactory.createElement("defs");At.append(_t);const wt=to._svgFactory.createElement("path");_t.append(wt);const Ct=`path_p${this.pageIndex}_${Et}`;wt.setAttribute("id",Ct),wt.setAttribute("d",$.toSVGPath()),bt&&St(this,Hu).set(Et,wt);const xt=Ut(this,Gp,zw).call(this,_t,Ct),Pt=to._svgFactory.createElement("use");return At.append(Pt),At.setAttribute("fill",ht),At.setAttribute("fill-opacity",vt),Pt.setAttribute("href",`#${Ct}`),St(this,Xs).set(Et,At),{id:Et,clipPathId:`url(#${xt})`}}highlightOutline($){const ht=eo(this,e0)._++,vt=Ut(this,Gp,AA).call(this,$.box);vt.classList.add("highlightOutline");const bt=to._svgFactory.createElement("defs");vt.append(bt);const Et=to._svgFactory.createElement("path");bt.append(Et);const At=`path_p${this.pageIndex}_${ht}`;Et.setAttribute("id",At),Et.setAttribute("d",$.toSVGPath()),Et.setAttribute("vector-effect","non-scaling-stroke");let _t;if($.free){vt.classList.add("free");const xt=to._svgFactory.createElement("mask");bt.append(xt),_t=`mask_p${this.pageIndex}_${ht}`,xt.setAttribute("id",_t),xt.setAttribute("maskUnits","objectBoundingBox");const Pt=to._svgFactory.createElement("rect");xt.append(Pt),Pt.setAttribute("width","1"),Pt.setAttribute("height","1"),Pt.setAttribute("fill","white");const Rt=to._svgFactory.createElement("use");xt.append(Rt),Rt.setAttribute("href",`#${At}`),Rt.setAttribute("stroke","none"),Rt.setAttribute("fill","black"),Rt.setAttribute("fill-rule","nonzero"),Rt.classList.add("mask")}const wt=to._svgFactory.createElement("use");vt.append(wt),wt.setAttribute("href",`#${At}`),_t&&wt.setAttribute("mask",`url(#${_t})`);const Ct=wt.cloneNode();return vt.append(Ct),wt.classList.add("mainOutline"),Ct.classList.add("secondaryOutline"),St(this,Xs).set(ht,vt),ht}finalizeLine($,ht){const vt=St(this,Hu).get($);St(this,Hu).delete($),this.updateBox($,ht.box),vt.setAttribute("d",ht.toSVGPath())}updateLine($,ht){St(this,Xs).get($).firstChild.firstChild.setAttribute("d",ht.toSVGPath())}removeFreeHighlight($){this.remove($),St(this,Hu).delete($)}updatePath($,ht){St(this,Hu).get($).setAttribute("d",ht.toSVGPath())}updateBox($,ht){var vt;Ut(vt=to,t0,EA).call(vt,St(this,Xs).get($),ht)}show($,ht){St(this,Xs).get($).classList.toggle("hidden",!ht)}rotate($,ht){St(this,Xs).get($).setAttribute("data-main-rotation",ht)}changeColor($,ht){St(this,Xs).get($).setAttribute("fill",ht)}changeOpacity($,ht){St(this,Xs).get($).setAttribute("fill-opacity",ht)}addClass($,ht){St(this,Xs).get($).classList.add(ht)}removeClass($,ht){St(this,Xs).get($).classList.remove(ht)}remove($){St(this,Ll)!==null&&(St(this,Xs).get($).remove(),St(this,Xs).delete($))}destroy(){zt(this,Ll,null);for(const $ of St(this,Xs).values())$.remove();St(this,Xs).clear()}};Ll=new WeakMap,e0=new WeakMap,Xs=new WeakMap,Hu=new WeakMap,t0=new WeakSet,EA=function($,{x:ht=0,y:vt=0,width:bt=1,height:Et=1}={}){const{style:At}=$;At.top=`${100*vt}%`,At.left=`${100*ht}%`,At.width=`${100*bt}%`,At.height=`${100*Et}%`},Gp=new WeakSet,AA=function($){var vt;const ht=to._svgFactory.create(1,1,!0);return St(this,Ll).append(ht),ht.setAttribute("aria-hidden",!0),Ut(vt=to,t0,EA).call(vt,ht,$),ht},zw=function($,ht){const vt=to._svgFactory.createElement("clipPath");$.append(vt);const bt=`clip_${ht}`;vt.setAttribute("id",bt),vt.setAttribute("clipPathUnits","objectBoundingBox");const Et=to._svgFactory.createElement("use");return vt.append(Et),Et.setAttribute("href",`#${ht}`),Et.classList.add("clip"),bt},Kt(to,t0);let DrawLayer=to;__webpack_exports__.AbortException;__webpack_exports__.AnnotationEditorLayer;__webpack_exports__.AnnotationEditorParamsType;__webpack_exports__.AnnotationEditorType;__webpack_exports__.AnnotationEditorUIManager;__webpack_exports__.AnnotationLayer;__webpack_exports__.AnnotationMode;__webpack_exports__.CMapCompressionType;__webpack_exports__.ColorPicker;__webpack_exports__.DOMSVGFactory;__webpack_exports__.DrawLayer;__webpack_exports__.FeatureTest;var __webpack_exports__GlobalWorkerOptions=__webpack_exports__.GlobalWorkerOptions;__webpack_exports__.ImageKind;__webpack_exports__.InvalidPDFException;__webpack_exports__.MissingPDFException;__webpack_exports__.OPS;__webpack_exports__.Outliner;__webpack_exports__.PDFDataRangeTransport;__webpack_exports__.PDFDateString;__webpack_exports__.PDFWorker;__webpack_exports__.PasswordResponses;__webpack_exports__.PermissionFlag;__webpack_exports__.PixelsPerInch;__webpack_exports__.RenderingCancelledException;__webpack_exports__.TextLayer;__webpack_exports__.UnexpectedResponseException;__webpack_exports__.Util;__webpack_exports__.VerbosityLevel;__webpack_exports__.XfaLayer;__webpack_exports__.build;__webpack_exports__.createValidAbsoluteUrl;__webpack_exports__.fetchData;__webpack_exports__.getDocument;__webpack_exports__.getFilenameFromUrl;__webpack_exports__.getPdfFilenameFromUrl;__webpack_exports__.getXfaPageViewport;__webpack_exports__.isDataScheme;__webpack_exports__.isPdfFile;__webpack_exports__.noContextMenu;__webpack_exports__.normalizeUnicode;__webpack_exports__.renderTextLayer;__webpack_exports__.setLayerDimensions;__webpack_exports__.shadow;__webpack_exports__.updateTextLayer;__webpack_exports__.version;function commonjsRequire(_e){throw new Error('Could not dynamically require "'+_e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function($,ht){module.exports=$.pdfjsLib=ht()})(globalThis,()=>(()=>{var __webpack_modules__=[,(_e,$)=>{var is;Object.defineProperty($,"__esModule",{value:!0}),$.VerbosityLevel=$.Util=$.UnknownErrorException=$.UnexpectedResponseException=$.TextRenderingMode=$.RenderingIntentFlag=$.PromiseCapability=$.PermissionFlag=$.PasswordResponses=$.PasswordException=$.PageActionEventType=$.OPS=$.MissingPDFException=$.MAX_IMAGE_SIZE_TO_CACHE=$.LINE_FACTOR=$.LINE_DESCENT_FACTOR=$.InvalidPDFException=$.ImageKind=$.IDENTITY_MATRIX=$.FormatError=$.FeatureTest=$.FONT_IDENTITY_MATRIX=$.DocumentActionEventType=$.CMapCompressionType=$.BaseException=$.BASELINE_FACTOR=$.AnnotationType=$.AnnotationReplyType=$.AnnotationPrefix=$.AnnotationMode=$.AnnotationFlag=$.AnnotationFieldFlag=$.AnnotationEditorType=$.AnnotationEditorPrefix=$.AnnotationEditorParamsType=$.AnnotationBorderStyleType=$.AnnotationActionEventType=$.AbortException=void 0,$.assert=nn,$.bytesToString=jn,$.createValidAbsoluteUrl=xn,$.getModificationDate=nr,$.getUuid=wr,$.getVerbosityLevel=ln,$.info=En,$.isArrayBuffer=Pn,$.isArrayEqual=or,$.isNodeJS=void 0,$.normalizeUnicode=hr,$.objectFromMap=Qn,$.objectSize=Yn,$.setVerbosityLevel=_n,$.shadow=rn,$.string32=Gn,$.stringToBytes=Un,$.stringToPDFString=zn,$.stringToUTF8String=Zn,$.unreachable=hn,$.utf8StringToString=Xn,$.warn=un;const ht=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");$.isNodeJS=ht;const vt=[1,0,0,1,0,0];$.IDENTITY_MATRIX=vt;const bt=[.001,0,0,.001,0,0];$.FONT_IDENTITY_MATRIX=bt;const Et=1e7;$.MAX_IMAGE_SIZE_TO_CACHE=Et;const At=1.35;$.LINE_FACTOR=At;const _t=.35;$.LINE_DESCENT_FACTOR=_t;const wt=_t/At;$.BASELINE_FACTOR=wt;const Ct={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};$.RenderingIntentFlag=Ct;const xt={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};$.AnnotationMode=xt;const Pt="pdfjs_internal_editor_";$.AnnotationEditorPrefix=Pt;const Rt={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};$.AnnotationEditorType=Rt;const kt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};$.AnnotationEditorParamsType=kt;const Mt={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};$.PermissionFlag=Mt;const Lt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};$.TextRenderingMode=Lt;const Ot={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};$.ImageKind=Ot;const Ft={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};$.AnnotationType=Ft;const Dt={GROUP:"Group",REPLY:"R"};$.AnnotationReplyType=Dt;const $t={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};$.AnnotationFlag=$t;const Bt={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};$.AnnotationFieldFlag=Bt;const Nt={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};$.AnnotationBorderStyleType=Nt;const Ht={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};$.AnnotationActionEventType=Ht;const Vt={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};$.DocumentActionEventType=Vt;const jt={O:"PageOpen",C:"PageClose"};$.PageActionEventType=jt;const Xt={ERRORS:0,WARNINGS:1,INFOS:5};$.VerbosityLevel=Xt;const Jt={NONE:0,BINARY:1};$.CMapCompressionType=Jt;const Gt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};$.OPS=Gt;const en={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};$.PasswordResponses=en;let on=Xt.WARNINGS;function _n(Kn){Number.isInteger(Kn)&&(on=Kn)}function ln(){return on}function En(Kn){on>=Xt.INFOS&&console.log(`Info: ${Kn}`)}function un(Kn){on>=Xt.WARNINGS&&console.log(`Warning: ${Kn}`)}function hn(Kn){throw new Error(Kn)}function nn(Kn,kn){Kn||hn(kn)}function mn(Kn){switch(Kn==null?void 0:Kn.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function xn(Kn,kn=null,Fn=null){if(!Kn)return null;try{if(Fn&&typeof Kn=="string"){if(Fn.addDefaultProtocol&&Kn.startsWith("www.")){const mr=Kn.match(/\./g);(mr==null?void 0:mr.length)>=2&&(Kn=`http://${Kn}`)}if(Fn.tryConvertEncoding)try{Kn=Zn(Kn)}catch{}}const dr=kn?new URL(Kn,kn):new URL(Kn);if(mn(dr))return dr}catch{}return null}function rn(Kn,kn,Fn,dr=!1){return Object.defineProperty(Kn,kn,{value:Fn,enumerable:!dr,configurable:!0,writable:!1}),Fn}const qt=function(){function kn(Fn,dr){this.constructor===kn&&hn("Cannot initialize BaseException."),this.message=Fn,this.name=dr}return kn.prototype=new Error,kn.constructor=kn,kn}();$.BaseException=qt;class Yt extends qt{constructor(kn,Fn){super(kn,"PasswordException"),this.code=Fn}}$.PasswordException=Yt;class tn extends qt{constructor(kn,Fn){super(kn,"UnknownErrorException"),this.details=Fn}}$.UnknownErrorException=tn;class dn extends qt{constructor(kn){super(kn,"InvalidPDFException")}}$.InvalidPDFException=dn;class cn extends qt{constructor(kn){super(kn,"MissingPDFException")}}$.MissingPDFException=cn;class fn extends qt{constructor(kn,Fn){super(kn,"UnexpectedResponseException"),this.status=Fn}}$.UnexpectedResponseException=fn;class Tn extends qt{constructor(kn){super(kn,"FormatError")}}$.FormatError=Tn;class Bn extends qt{constructor(kn){super(kn,"AbortException")}}$.AbortException=Bn;function jn(Kn){(typeof Kn!="object"||(Kn==null?void 0:Kn.length)===void 0)&&hn("Invalid argument for bytesToString");const kn=Kn.length,Fn=8192;if(kn<Fn)return String.fromCharCode.apply(null,Kn);const dr=[];for(let mr=0;mr<kn;mr+=Fn){const Pr=Math.min(mr+Fn,kn),vn=Kn.subarray(mr,Pr);dr.push(String.fromCharCode.apply(null,vn))}return dr.join("")}function Un(Kn){typeof Kn!="string"&&hn("Invalid argument for stringToBytes");const kn=Kn.length,Fn=new Uint8Array(kn);for(let dr=0;dr<kn;++dr)Fn[dr]=Kn.charCodeAt(dr)&255;return Fn}function Gn(Kn){return String.fromCharCode(Kn>>24&255,Kn>>16&255,Kn>>8&255,Kn&255)}function Yn(Kn){return Object.keys(Kn).length}function Qn(Kn){const kn=Object.create(null);for(const[Fn,dr]of Kn)kn[Fn]=dr;return kn}function Dn(){const Kn=new Uint8Array(4);return Kn[0]=1,new Uint32Array(Kn.buffer,0,1)[0]===1}function On(){try{return new Function(""),!0}catch{return!1}}class sn{static get isLittleEndian(){return rn(this,"isLittleEndian",Dn())}static get isEvalSupported(){return rn(this,"isEvalSupported",On())}static get isOffscreenCanvasSupported(){return rn(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?rn(this,"platform",{isWin:!1,isMac:!1}):rn(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var kn,Fn;return rn(this,"isCSSRoundSupported",(Fn=(kn=globalThis.CSS)==null?void 0:kn.supports)==null?void 0:Fn.call(kn,"width: round(1.5px, 1px)"))}}$.FeatureTest=sn;const gn=[...Array(256).keys()].map(Kn=>Kn.toString(16).padStart(2,"0"));class Rn{static makeHexColor(kn,Fn,dr){return`#${gn[kn]}${gn[Fn]}${gn[dr]}`}static scaleMinMax(kn,Fn){let dr;kn[0]?(kn[0]<0&&(dr=Fn[0],Fn[0]=Fn[1],Fn[1]=dr),Fn[0]*=kn[0],Fn[1]*=kn[0],kn[3]<0&&(dr=Fn[2],Fn[2]=Fn[3],Fn[3]=dr),Fn[2]*=kn[3],Fn[3]*=kn[3]):(dr=Fn[0],Fn[0]=Fn[2],Fn[2]=dr,dr=Fn[1],Fn[1]=Fn[3],Fn[3]=dr,kn[1]<0&&(dr=Fn[2],Fn[2]=Fn[3],Fn[3]=dr),Fn[2]*=kn[1],Fn[3]*=kn[1],kn[2]<0&&(dr=Fn[0],Fn[0]=Fn[1],Fn[1]=dr),Fn[0]*=kn[2],Fn[1]*=kn[2]),Fn[0]+=kn[4],Fn[1]+=kn[4],Fn[2]+=kn[5],Fn[3]+=kn[5]}static transform(kn,Fn){return[kn[0]*Fn[0]+kn[2]*Fn[1],kn[1]*Fn[0]+kn[3]*Fn[1],kn[0]*Fn[2]+kn[2]*Fn[3],kn[1]*Fn[2]+kn[3]*Fn[3],kn[0]*Fn[4]+kn[2]*Fn[5]+kn[4],kn[1]*Fn[4]+kn[3]*Fn[5]+kn[5]]}static applyTransform(kn,Fn){const dr=kn[0]*Fn[0]+kn[1]*Fn[2]+Fn[4],mr=kn[0]*Fn[1]+kn[1]*Fn[3]+Fn[5];return[dr,mr]}static applyInverseTransform(kn,Fn){const dr=Fn[0]*Fn[3]-Fn[1]*Fn[2],mr=(kn[0]*Fn[3]-kn[1]*Fn[2]+Fn[2]*Fn[5]-Fn[4]*Fn[3])/dr,Pr=(-kn[0]*Fn[1]+kn[1]*Fn[0]+Fn[4]*Fn[1]-Fn[5]*Fn[0])/dr;return[mr,Pr]}static getAxialAlignedBoundingBox(kn,Fn){const dr=this.applyTransform(kn,Fn),mr=this.applyTransform(kn.slice(2,4),Fn),Pr=this.applyTransform([kn[0],kn[3]],Fn),vn=this.applyTransform([kn[2],kn[1]],Fn);return[Math.min(dr[0],mr[0],Pr[0],vn[0]),Math.min(dr[1],mr[1],Pr[1],vn[1]),Math.max(dr[0],mr[0],Pr[0],vn[0]),Math.max(dr[1],mr[1],Pr[1],vn[1])]}static inverseTransform(kn){const Fn=kn[0]*kn[3]-kn[1]*kn[2];return[kn[3]/Fn,-kn[1]/Fn,-kn[2]/Fn,kn[0]/Fn,(kn[2]*kn[5]-kn[4]*kn[3])/Fn,(kn[4]*kn[1]-kn[5]*kn[0])/Fn]}static singularValueDecompose2dScale(kn){const Fn=[kn[0],kn[2],kn[1],kn[3]],dr=kn[0]*Fn[0]+kn[1]*Fn[2],mr=kn[0]*Fn[1]+kn[1]*Fn[3],Pr=kn[2]*Fn[0]+kn[3]*Fn[2],vn=kn[2]*Fn[1]+kn[3]*Fn[3],Wn=(dr+vn)/2,sr=Math.sqrt((dr+vn)**2-4*(dr*vn-Pr*mr))/2,gr=Wn+sr||1,br=Wn-sr||1;return[Math.sqrt(gr),Math.sqrt(br)]}static normalizeRect(kn){const Fn=kn.slice(0);return kn[0]>kn[2]&&(Fn[0]=kn[2],Fn[2]=kn[0]),kn[1]>kn[3]&&(Fn[1]=kn[3],Fn[3]=kn[1]),Fn}static intersect(kn,Fn){const dr=Math.max(Math.min(kn[0],kn[2]),Math.min(Fn[0],Fn[2])),mr=Math.min(Math.max(kn[0],kn[2]),Math.max(Fn[0],Fn[2]));if(dr>mr)return null;const Pr=Math.max(Math.min(kn[1],kn[3]),Math.min(Fn[1],Fn[3])),vn=Math.min(Math.max(kn[1],kn[3]),Math.max(Fn[1],Fn[3]));return Pr>vn?null:[dr,Pr,mr,vn]}static bezierBoundingBox(kn,Fn,dr,mr,Pr,vn,Wn,sr){const gr=[],br=[[],[]];let ur,pn,an,Sn,Vn,Hn,qn,tr;for(let Vr=0;Vr<2;++Vr){if(Vr===0?(pn=6*kn-12*dr+6*Pr,ur=-3*kn+9*dr-9*Pr+3*Wn,an=3*dr-3*kn):(pn=6*Fn-12*mr+6*vn,ur=-3*Fn+9*mr-9*vn+3*sr,an=3*mr-3*Fn),Math.abs(ur)<1e-12){if(Math.abs(pn)<1e-12)continue;Sn=-an/pn,0<Sn&&Sn<1&&gr.push(Sn);continue}qn=pn*pn-4*an*ur,tr=Math.sqrt(qn),!(qn<0)&&(Vn=(-pn+tr)/(2*ur),0<Vn&&Vn<1&&gr.push(Vn),Hn=(-pn-tr)/(2*ur),0<Hn&&Hn<1&&gr.push(Hn))}let vr=gr.length,fr;const lr=vr;for(;vr--;)Sn=gr[vr],fr=1-Sn,br[0][vr]=fr*fr*fr*kn+3*fr*fr*Sn*dr+3*fr*Sn*Sn*Pr+Sn*Sn*Sn*Wn,br[1][vr]=fr*fr*fr*Fn+3*fr*fr*Sn*mr+3*fr*Sn*Sn*vn+Sn*Sn*Sn*sr;return br[0][lr]=kn,br[1][lr]=Fn,br[0][lr+1]=Wn,br[1][lr+1]=sr,br[0].length=br[1].length=lr+2,[Math.min(...br[0]),Math.min(...br[1]),Math.max(...br[0]),Math.max(...br[1])]}}$.Util=Rn;const $n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function zn(Kn){if(Kn[0]>="ï"){let Fn;if(Kn[0]==="þ"&&Kn[1]==="ÿ"?Fn="utf-16be":Kn[0]==="ÿ"&&Kn[1]==="þ"?Fn="utf-16le":Kn[0]==="ï"&&Kn[1]==="»"&&Kn[2]==="¿"&&(Fn="utf-8"),Fn)try{const dr=new TextDecoder(Fn,{fatal:!0}),mr=Un(Kn);return dr.decode(mr)}catch(dr){un(`stringToPDFString: "${dr}".`)}}const kn=[];for(let Fn=0,dr=Kn.length;Fn<dr;Fn++){const mr=$n[Kn.charCodeAt(Fn)];kn.push(mr?String.fromCharCode(mr):Kn.charAt(Fn))}return kn.join("")}function Zn(Kn){return decodeURIComponent(escape(Kn))}function Xn(Kn){return unescape(encodeURIComponent(Kn))}function Pn(Kn){return typeof Kn=="object"&&(Kn==null?void 0:Kn.byteLength)!==void 0}function or(Kn,kn){if(Kn.length!==kn.length)return!1;for(let Fn=0,dr=Kn.length;Fn<dr;Fn++)if(Kn[Fn]!==kn[Fn])return!1;return!0}function nr(Kn=new Date){return[Kn.getUTCFullYear().toString(),(Kn.getUTCMonth()+1).toString().padStart(2,"0"),Kn.getUTCDate().toString().padStart(2,"0"),Kn.getUTCHours().toString().padStart(2,"0"),Kn.getUTCMinutes().toString().padStart(2,"0"),Kn.getUTCSeconds().toString().padStart(2,"0")].join("")}class $r{constructor(){Kt(this,is,!1);this.promise=new Promise((kn,Fn)=>{this.resolve=dr=>{zt(this,is,!0),kn(dr)},this.reject=dr=>{zt(this,is,!0),Fn(dr)}})}get settled(){return St(this,is)}}is=new WeakMap,$.PromiseCapability=$r;let Rr=null,qr=null;function hr(Kn){return Rr||(Rr=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,qr=new Map([["ﬅ","ſt"]])),Kn.replaceAll(Rr,(kn,Fn,dr)=>Fn?Fn.normalize("NFKC"):qr.get(dr))}function wr(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Kn=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Kn);else for(let kn=0;kn<32;kn++)Kn[kn]=Math.floor(Math.random()*255);return jn(Kn)}const jr="pdfjs_internal_id_";$.AnnotationPrefix=jr},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var _e,ht,vt,bt,nm,D0,_t,wt,Ct,xt,Pt,Rt,kt,Mt,Lt,I0,Ft,Dt,_A,Bt,Nt;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(Vt){if(typeof Vt=="string"||Vt instanceof URL?Vt={url:Vt}:(0,_util.isArrayBuffer)(Vt)&&(Vt={data:Vt}),typeof Vt!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!Vt.url&&!Vt.data&&!Vt.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const jt=new PDFDocumentLoadingTask,{docId:Xt}=jt,Jt=Vt.url?getUrlProp(Vt.url):null,Gt=Vt.data?getDataProp(Vt.data):null,en=Vt.httpHeaders||null,on=Vt.withCredentials===!0,_n=Vt.password??null,ln=Vt.range instanceof PDFDataRangeTransport?Vt.range:null,En=Number.isInteger(Vt.rangeChunkSize)&&Vt.rangeChunkSize>0?Vt.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let un=Vt.worker instanceof PDFWorker?Vt.worker:null;const hn=Vt.verbosity,nn=typeof Vt.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(Vt.docBaseUrl)?Vt.docBaseUrl:null,mn=typeof Vt.cMapUrl=="string"?Vt.cMapUrl:null,xn=Vt.cMapPacked!==!1,rn=Vt.CMapReaderFactory||DefaultCMapReaderFactory,qt=typeof Vt.standardFontDataUrl=="string"?Vt.standardFontDataUrl:null,Yt=Vt.StandardFontDataFactory||DefaultStandardFontDataFactory,tn=Vt.stopAtErrors!==!0,dn=Number.isInteger(Vt.maxImageSize)&&Vt.maxImageSize>-1?Vt.maxImageSize:-1,cn=Vt.isEvalSupported!==!1,fn=typeof Vt.isOffscreenCanvasSupported=="boolean"?Vt.isOffscreenCanvasSupported:!_util.isNodeJS,Tn=Number.isInteger(Vt.canvasMaxAreaInBytes)?Vt.canvasMaxAreaInBytes:-1,Bn=typeof Vt.disableFontFace=="boolean"?Vt.disableFontFace:_util.isNodeJS,jn=Vt.fontExtraProperties===!0,Un=Vt.enableXfa===!0,Gn=Vt.ownerDocument||globalThis.document,Yn=Vt.disableRange===!0,Qn=Vt.disableStream===!0,Dn=Vt.disableAutoFetch===!0,On=Vt.pdfBug===!0,sn=ln?ln.length:Vt.length??NaN,gn=typeof Vt.useSystemFonts=="boolean"?Vt.useSystemFonts:!_util.isNodeJS&&!Bn,Rn=typeof Vt.useWorkerFetch=="boolean"?Vt.useWorkerFetch:rn===_display_utils.DOMCMapReaderFactory&&Yt===_display_utils.DOMStandardFontDataFactory&&mn&&qt&&(0,_display_utils.isValidFetchUrl)(mn,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(qt,document.baseURI),$n=Vt.canvasFactory||new DefaultCanvasFactory({ownerDocument:Gn}),zn=Vt.filterFactory||new DefaultFilterFactory({docId:Xt,ownerDocument:Gn}),Zn=null;(0,_util.setVerbosityLevel)(hn);const Xn={canvasFactory:$n,filterFactory:zn};if(Rn||(Xn.cMapReaderFactory=new rn({baseUrl:mn,isCompressed:xn}),Xn.standardFontDataFactory=new Yt({baseUrl:qt})),!un){const nr={verbosity:hn,port:_worker_options.GlobalWorkerOptions.workerPort};un=nr.port?PDFWorker.fromPort(nr):new PDFWorker(nr),jt._worker=un}const Pn={docId:Xt,apiVersion:"3.11.174",data:Gt,password:_n,disableAutoFetch:Dn,rangeChunkSize:En,length:sn,docBaseUrl:nn,enableXfa:Un,evaluatorOptions:{maxImageSize:dn,disableFontFace:Bn,ignoreErrors:tn,isEvalSupported:cn,isOffscreenCanvasSupported:fn,canvasMaxAreaInBytes:Tn,fontExtraProperties:jn,useSystemFonts:gn,cMapUrl:Rn?mn:null,standardFontDataUrl:Rn?qt:null}},or={ignoreErrors:tn,isEvalSupported:cn,disableFontFace:Bn,fontExtraProperties:jn,enableXfa:Un,ownerDocument:Gn,disableAutoFetch:Dn,pdfBug:On,styleElement:Zn};return un.promise.then(function(){if(jt.destroyed)throw new Error("Loading aborted");const nr=_fetchDocument(un,Pn),$r=new Promise(function(Rr){let qr;ln?qr=new _transport_stream.PDFDataTransportStream({length:sn,initialData:ln.initialData,progressiveDone:ln.progressiveDone,contentDispositionFilename:ln.contentDispositionFilename,disableRange:Yn,disableStream:Qn},ln):Gt||(qr=(wr=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(wr):(0,_display_utils.isValidFetchUrl)(wr.url)?new _displayFetch_stream.PDFFetchStream(wr):new _displayNetwork.PDFNetworkStream(wr))({url:Jt,length:sn,httpHeaders:en,withCredentials:on,rangeChunkSize:En,disableRange:Yn,disableStream:Qn})),Rr(qr)});return Promise.all([nr,$r]).then(function([Rr,qr]){if(jt.destroyed)throw new Error("Loading aborted");const hr=new _message_handler.MessageHandler(Xt,Rr,un.port),wr=new WorkerTransport(hr,jt,qr,or,Xn);jt._transport=wr,hr.send("Ready",null)})}).catch(jt._capability.reject),jt}async function _fetchDocument(Vt,jt){if(Vt.destroyed)throw new Error("Worker was destroyed");const Xt=await Vt.messageHandler.sendWithPromise("GetDocRequest",jt,jt.data?[jt.data.buffer]:null);if(Vt.destroyed)throw new Error("Worker was destroyed");return Xt}function getUrlProp(Vt){if(Vt instanceof URL)return Vt.href;try{return new URL(Vt,window.location).href}catch{if(_util.isNodeJS&&typeof Vt=="string")return Vt}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(Vt){if(_util.isNodeJS&&typeof Buffer<"u"&&Vt instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(Vt instanceof Uint8Array&&Vt.byteLength===Vt.buffer.byteLength)return Vt;if(typeof Vt=="string")return(0,_util.stringToBytes)(Vt);if(typeof Vt=="object"&&!isNaN(Vt==null?void 0:Vt.length)||(0,_util.isArrayBuffer)(Vt))return new Uint8Array(Vt);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const $=class ${constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${eo($,_e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var jt,Xt,Jt;this.destroyed=!0;try{(jt=this._worker)!=null&&jt.port&&(this._worker._pendingDestroy=!0),await((Xt=this._transport)==null?void 0:Xt.destroy())}catch(Gt){throw(Jt=this._worker)!=null&&Jt.port&&delete this._worker._pendingDestroy,Gt}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};_e=new WeakMap,Kt($,_e,0);let PDFDocumentLoadingTask=$;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(jt,Xt,Jt=!1,Gt=null){this.length=jt,this.initialData=Xt,this.progressiveDone=Jt,this.contentDispositionFilename=Gt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(jt){this._rangeListeners.push(jt)}addProgressListener(jt){this._progressListeners.push(jt)}addProgressiveReadListener(jt){this._progressiveReadListeners.push(jt)}addProgressiveDoneListener(jt){this._progressiveDoneListeners.push(jt)}onDataRange(jt,Xt){for(const Jt of this._rangeListeners)Jt(jt,Xt)}onDataProgress(jt,Xt){this._readyCapability.promise.then(()=>{for(const Jt of this._progressListeners)Jt(jt,Xt)})}onDataProgressiveRead(jt){this._readyCapability.promise.then(()=>{for(const Xt of this._progressiveReadListeners)Xt(jt)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const jt of this._progressiveDoneListeners)jt()})}transportReady(){this._readyCapability.resolve()}requestDataRange(jt,Xt){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(jt,Xt){this._pdfInfo=jt,this._transport=Xt,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Jt=>{if(!Jt)return Jt;const Gt=[];for(const en in Jt)Gt.push(...Jt[en]);return Gt}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(jt){return this._transport.getPage(jt)}getPageIndex(jt){return this._transport.getPageIndex(jt)}getDestinations(){return this._transport.getDestinations()}getDestination(jt){return this._transport.getDestination(jt)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(jt=!1){return this._transport.startCleanup(jt||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(jt,Xt,Jt,Gt=!1){Kt(this,bt);Kt(this,ht,null);Kt(this,vt,!1);this._pageIndex=jt,this._pageInfo=Xt,this._transport=Jt,this._stats=Gt?new _display_utils.StatTimer:null,this._pdfBug=Gt,this.commonObjs=Jt.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:jt,rotation:Xt=this.rotate,offsetX:Jt=0,offsetY:Gt=0,dontFlip:en=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:jt,rotation:Xt,offsetX:Jt,offsetY:Gt,dontFlip:en})}getAnnotations({intent:jt="display"}={}){const Xt=this._transport.getRenderingIntent(jt);return this._transport.getAnnotations(this._pageIndex,Xt.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var jt;return((jt=this._transport._htmlForXfa)==null?void 0:jt.children[this._pageIndex])||null}render({canvasContext:jt,viewport:Xt,intent:Jt="display",annotationMode:Gt=_util.AnnotationMode.ENABLE,transform:en=null,background:on=null,optionalContentConfigPromise:_n=null,annotationCanvasMap:ln=null,pageColors:En=null,printAnnotationStorage:un=null}){var Yt,tn;(Yt=this._stats)==null||Yt.time("Overall");const hn=this._transport.getRenderingIntent(Jt,Gt,un);zt(this,vt,!1),Ut(this,bt,D0).call(this),_n||(_n=this._transport.getOptionalContentConfig());let nn=this._intentStates.get(hn.cacheKey);nn||(nn=Object.create(null),this._intentStates.set(hn.cacheKey,nn)),nn.streamReaderCancelTimeout&&(clearTimeout(nn.streamReaderCancelTimeout),nn.streamReaderCancelTimeout=null);const mn=!!(hn.renderingIntent&_util.RenderingIntentFlag.PRINT);nn.displayReadyCapability||(nn.displayReadyCapability=new _util.PromiseCapability,nn.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(tn=this._stats)==null||tn.time("Page Request"),this._pumpOperatorList(hn));const xn=dn=>{var cn,fn;nn.renderTasks.delete(rn),(this._maybeCleanupAfterRender||mn)&&zt(this,vt,!0),Ut(this,bt,nm).call(this,!mn),dn?(rn.capability.reject(dn),this._abortOperatorList({intentState:nn,reason:dn instanceof Error?dn:new Error(dn)})):rn.capability.resolve(),(cn=this._stats)==null||cn.timeEnd("Rendering"),(fn=this._stats)==null||fn.timeEnd("Overall")},rn=new InternalRenderTask({callback:xn,params:{canvasContext:jt,viewport:Xt,transform:en,background:on},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:ln,operatorList:nn.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!mn,pdfBug:this._pdfBug,pageColors:En});(nn.renderTasks||(nn.renderTasks=new Set)).add(rn);const qt=rn.task;return Promise.all([nn.displayReadyCapability.promise,_n]).then(([dn,cn])=>{var fn;if(this.destroyed){xn();return}(fn=this._stats)==null||fn.time("Rendering"),rn.initializeGraphics({transparency:dn,optionalContentConfig:cn}),rn.operatorListChanged()}).catch(xn),qt}getOperatorList({intent:jt="display",annotationMode:Xt=_util.AnnotationMode.ENABLE,printAnnotationStorage:Jt=null}={}){var ln;function Gt(){on.operatorList.lastChunk&&(on.opListReadCapability.resolve(on.operatorList),on.renderTasks.delete(_n))}const en=this._transport.getRenderingIntent(jt,Xt,Jt,!0);let on=this._intentStates.get(en.cacheKey);on||(on=Object.create(null),this._intentStates.set(en.cacheKey,on));let _n;return on.opListReadCapability||(_n=Object.create(null),_n.operatorListChanged=Gt,on.opListReadCapability=new _util.PromiseCapability,(on.renderTasks||(on.renderTasks=new Set)).add(_n),on.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(ln=this._stats)==null||ln.time("Page Request"),this._pumpOperatorList(en)),on.opListReadCapability.promise}streamTextContent({includeMarkedContent:jt=!1,disableNormalization:Xt=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:jt===!0,disableNormalization:Xt===!0},{highWaterMark:100,size(Gt){return Gt.items.length}})}getTextContent(jt={}){if(this._transport._htmlForXfa)return this.getXfa().then(Jt=>_xfa_text.XfaText.textContent(Jt));const Xt=this.streamTextContent(jt);return new Promise(function(Jt,Gt){function en(){on.read().then(function({value:ln,done:En}){if(En){Jt(_n);return}Object.assign(_n.styles,ln.styles),_n.items.push(...ln.items),en()},Gt)}const on=Xt.getReader(),_n={items:[],styles:Object.create(null)};en()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const jt=[];for(const Xt of this._intentStates.values())if(this._abortOperatorList({intentState:Xt,reason:new Error("Page was destroyed."),force:!0}),!Xt.opListReadCapability)for(const Jt of Xt.renderTasks)jt.push(Jt.completed),Jt.cancel();return this.objs.clear(),zt(this,vt,!1),Ut(this,bt,D0).call(this),Promise.all(jt)}cleanup(jt=!1){zt(this,vt,!0);const Xt=Ut(this,bt,nm).call(this,!1);return jt&&Xt&&this._stats&&(this._stats=new _display_utils.StatTimer),Xt}_startRenderPage(jt,Xt){var Gt,en;const Jt=this._intentStates.get(Xt);Jt&&((Gt=this._stats)==null||Gt.timeEnd("Page Request"),(en=Jt.displayReadyCapability)==null||en.resolve(jt))}_renderPageChunk(jt,Xt){for(let Jt=0,Gt=jt.length;Jt<Gt;Jt++)Xt.operatorList.fnArray.push(jt.fnArray[Jt]),Xt.operatorList.argsArray.push(jt.argsArray[Jt]);Xt.operatorList.lastChunk=jt.lastChunk,Xt.operatorList.separateAnnots=jt.separateAnnots;for(const Jt of Xt.renderTasks)Jt.operatorListChanged();jt.lastChunk&&Ut(this,bt,nm).call(this,!0)}_pumpOperatorList({renderingIntent:jt,cacheKey:Xt,annotationStorageSerializable:Jt}){const{map:Gt,transfers:en}=Jt,_n=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:jt,cacheKey:Xt,annotationStorage:Gt},en).getReader(),ln=this._intentStates.get(Xt);ln.streamReader=_n;const En=()=>{_n.read().then(({value:un,done:hn})=>{if(hn){ln.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(un,ln),En())},un=>{if(ln.streamReader=null,!this._transport.destroyed){if(ln.operatorList){ln.operatorList.lastChunk=!0;for(const hn of ln.renderTasks)hn.operatorListChanged();Ut(this,bt,nm).call(this,!0)}if(ln.displayReadyCapability)ln.displayReadyCapability.reject(un);else if(ln.opListReadCapability)ln.opListReadCapability.reject(un);else throw un}})};En()}_abortOperatorList({intentState:jt,reason:Xt,force:Jt=!1}){if(jt.streamReader){if(jt.streamReaderCancelTimeout&&(clearTimeout(jt.streamReaderCancelTimeout),jt.streamReaderCancelTimeout=null),!Jt){if(jt.renderTasks.size>0)return;if(Xt instanceof _display_utils.RenderingCancelledException){let Gt=RENDERING_CANCELLED_TIMEOUT;Xt.extraDelay>0&&Xt.extraDelay<1e3&&(Gt+=Xt.extraDelay),jt.streamReaderCancelTimeout=setTimeout(()=>{jt.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:jt,reason:Xt,force:!0})},Gt);return}}if(jt.streamReader.cancel(new _util.AbortException(Xt.message)).catch(()=>{}),jt.streamReader=null,!this._transport.destroyed){for(const[Gt,en]of this._intentStates)if(en===jt){this._intentStates.delete(Gt);break}this.cleanup()}}}get stats(){return this._stats}}ht=new WeakMap,vt=new WeakMap,bt=new WeakSet,nm=function(jt=!1){if(Ut(this,bt,D0).call(this),!St(this,vt)||this.destroyed)return!1;if(jt)return zt(this,ht,setTimeout(()=>{zt(this,ht,null),Ut(this,bt,nm).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:Xt,operatorList:Jt}of this._intentStates.values())if(Xt.size>0||!Jt.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),zt(this,vt,!1),!0},D0=function(){St(this,ht)&&(clearTimeout(St(this,ht)),zt(this,ht,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Kt(this,_t,new Set);Kt(this,wt,Promise.resolve())}postMessage(jt,Xt){const Jt={data:structuredClone(jt,Xt?{transfer:Xt}:null)};St(this,wt).then(()=>{for(const Gt of St(this,_t))Gt.call(this,Jt)})}addEventListener(jt,Xt){St(this,_t).add(Xt)}removeEventListener(jt,Xt){St(this,_t).delete(Xt)}terminate(){St(this,_t).clear()}}_t=new WeakMap,wt=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const Vt=(Ct=document==null?void 0:document.currentScript)==null?void 0:Ct.src;Vt&&(PDFWorkerUtil.fallbackWorkerSrc=Vt.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(Vt,jt){let Xt;try{if(Xt=new URL(Vt),!Xt.origin||Xt.origin==="null")return!1}catch{return!1}const Jt=new URL(jt,Xt);return Xt.origin===Jt.origin},PDFWorkerUtil.createCDNWrapper=function(Vt){const jt=`importScripts("${Vt}");`;return URL.createObjectURL(new Blob([jt]))}}const _PDFWorker=class _PDFWorker{constructor({name:Vt=null,port:jt=null,verbosity:Xt=(0,_util.getVerbosityLevel)()}={}){var Jt;if(this.name=Vt,this.destroyed=!1,this.verbosity=Xt,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,jt){if((Jt=St(_PDFWorker,xt))!=null&&Jt.has(jt))throw new Error("Cannot use more than one PDFWorker per port.");(St(_PDFWorker,xt)||zt(_PDFWorker,xt,new WeakMap)).set(jt,this),this._initializeFromPort(jt);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(Vt){this._port=Vt,this._messageHandler=new _message_handler.MessageHandler("main","worker",Vt),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:Vt}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,Vt)||(Vt=PDFWorkerUtil.createCDNWrapper(new URL(Vt,window.location).href));const jt=new Worker(Vt),Xt=new _message_handler.MessageHandler("main","worker",jt),Jt=()=>{jt.removeEventListener("error",Gt),Xt.destroy(),jt.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Gt=()=>{this._webWorker||Jt()};jt.addEventListener("error",Gt),Xt.on("test",on=>{if(jt.removeEventListener("error",Gt),this.destroyed){Jt();return}on?(this._messageHandler=Xt,this._port=jt,this._webWorker=jt,this._readyCapability.resolve(),Xt.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),Xt.destroy(),jt.terminate())}),Xt.on("ready",on=>{if(jt.removeEventListener("error",Gt),this.destroyed){Jt();return}try{en()}catch{this._setupFakeWorker()}});const en=()=>{const on=new Uint8Array;Xt.send("test",on,[on.buffer])};en();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(Vt=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const jt=new LoopbackPort;this._port=jt;const Xt=`fake${PDFWorkerUtil.fakeWorkerId++}`,Jt=new _message_handler.MessageHandler(Xt+"_worker",Xt,jt);Vt.setup(Jt,jt);const Gt=new _message_handler.MessageHandler(Xt,Xt+"_worker",jt);this._messageHandler=Gt,this._readyCapability.resolve(),Gt.send("configure",{verbosity:this.verbosity})}).catch(Vt=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${Vt.message}".`))})}destroy(){var Vt;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(Vt=St(_PDFWorker,xt))==null||Vt.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(Vt){var Xt;if(!(Vt!=null&&Vt.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const jt=(Xt=St(this,xt))==null?void 0:Xt.get(Vt.port);if(jt){if(jt._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return jt}return new _PDFWorker(Vt)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var Vt;try{return((Vt=globalThis.pdfjsWorker)==null?void 0:Vt.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};xt=new WeakMap,Kt(_PDFWorker,xt);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(jt,Xt,Jt,Gt,en){Kt(this,Lt);Kt(this,Pt,new Map);Kt(this,Rt,new Map);Kt(this,kt,new Map);Kt(this,Mt,null);this.messageHandler=jt,this.loadingTask=Xt,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Gt.ownerDocument,styleElement:Gt.styleElement}),this._params=Gt,this.canvasFactory=en.canvasFactory,this.filterFactory=en.filterFactory,this.cMapReaderFactory=en.cMapReaderFactory,this.standardFontDataFactory=en.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Jt,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(jt,Xt=_util.AnnotationMode.ENABLE,Jt=null,Gt=!1){let en=_util.RenderingIntentFlag.DISPLAY,on=_annotation_storage.SerializableEmpty;switch(jt){case"any":en=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":en=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${jt}`)}switch(Xt){case _util.AnnotationMode.DISABLE:en+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:en+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:en+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,on=(en&_util.RenderingIntentFlag.PRINT&&Jt instanceof _annotation_storage.PrintAnnotationStorage?Jt:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${Xt}`)}return Gt&&(en+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:en,cacheKey:`${en}_${on.hash}`,annotationStorageSerializable:on}}destroy(){var Jt;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Jt=St(this,Mt))==null||Jt.reject(new Error("Worker was destroyed during onPassword callback"));const jt=[];for(const Gt of St(this,Rt).values())jt.push(Gt._destroy());St(this,Rt).clear(),St(this,kt).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const Xt=this.messageHandler.sendWithPromise("Terminate",null);return jt.push(Xt),Promise.all(jt).then(()=>{var Gt;this.commonObjs.clear(),this.fontLoader.clear(),St(this,Pt).clear(),this.filterFactory.destroy(),(Gt=this._networkStream)==null||Gt.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:jt,loadingTask:Xt}=this;jt.on("GetReader",(Jt,Gt)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=en=>{this._lastProgress={loaded:en.loaded,total:en.total}},Gt.onPull=()=>{this._fullReader.read().then(function({value:en,done:on}){if(on){Gt.close();return}(0,_util.assert)(en instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Gt.enqueue(new Uint8Array(en),1,[en])}).catch(en=>{Gt.error(en)})},Gt.onCancel=en=>{this._fullReader.cancel(en),Gt.ready.catch(on=>{if(!this.destroyed)throw on})}}),jt.on("ReaderHeadersReady",Jt=>{const Gt=new _util.PromiseCapability,en=this._fullReader;return en.headersReady.then(()=>{var on;(!en.isStreamingSupported||!en.isRangeSupported)&&(this._lastProgress&&((on=Xt.onProgress)==null||on.call(Xt,this._lastProgress)),en.onProgress=_n=>{var ln;(ln=Xt.onProgress)==null||ln.call(Xt,{loaded:_n.loaded,total:_n.total})}),Gt.resolve({isStreamingSupported:en.isStreamingSupported,isRangeSupported:en.isRangeSupported,contentLength:en.contentLength})},Gt.reject),Gt.promise}),jt.on("GetRangeReader",(Jt,Gt)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const en=this._networkStream.getRangeReader(Jt.begin,Jt.end);if(!en){Gt.close();return}Gt.onPull=()=>{en.read().then(function({value:on,done:_n}){if(_n){Gt.close();return}(0,_util.assert)(on instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Gt.enqueue(new Uint8Array(on),1,[on])}).catch(on=>{Gt.error(on)})},Gt.onCancel=on=>{en.cancel(on),Gt.ready.catch(_n=>{if(!this.destroyed)throw _n})}}),jt.on("GetDoc",({pdfInfo:Jt})=>{this._numPages=Jt.numPages,this._htmlForXfa=Jt.htmlForXfa,delete Jt.htmlForXfa,Xt._capability.resolve(new PDFDocumentProxy(Jt,this))}),jt.on("DocException",function(Jt){let Gt;switch(Jt.name){case"PasswordException":Gt=new _util.PasswordException(Jt.message,Jt.code);break;case"InvalidPDFException":Gt=new _util.InvalidPDFException(Jt.message);break;case"MissingPDFException":Gt=new _util.MissingPDFException(Jt.message);break;case"UnexpectedResponseException":Gt=new _util.UnexpectedResponseException(Jt.message,Jt.status);break;case"UnknownErrorException":Gt=new _util.UnknownErrorException(Jt.message,Jt.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}Xt._capability.reject(Gt)}),jt.on("PasswordRequest",Jt=>{if(zt(this,Mt,new _util.PromiseCapability),Xt.onPassword){const Gt=en=>{en instanceof Error?St(this,Mt).reject(en):St(this,Mt).resolve({password:en})};try{Xt.onPassword(Gt,Jt.code)}catch(en){St(this,Mt).reject(en)}}else St(this,Mt).reject(new _util.PasswordException(Jt.message,Jt.code));return St(this,Mt).promise}),jt.on("DataLoaded",Jt=>{var Gt;(Gt=Xt.onProgress)==null||Gt.call(Xt,{loaded:Jt.length,total:Jt.length}),this.downloadInfoCapability.resolve(Jt)}),jt.on("StartRenderPage",Jt=>{if(this.destroyed)return;St(this,Rt).get(Jt.pageIndex)._startRenderPage(Jt.transparency,Jt.cacheKey)}),jt.on("commonobj",([Jt,Gt,en])=>{var on;if(!this.destroyed&&!this.commonObjs.has(Jt))switch(Gt){case"Font":const _n=this._params;if("error"in en){const un=en.error;(0,_util.warn)(`Error during font loading: ${un}`),this.commonObjs.resolve(Jt,un);break}const ln=_n.pdfBug&&((on=globalThis.FontInspector)!=null&&on.enabled)?(un,hn)=>globalThis.FontInspector.fontAdded(un,hn):null,En=new _font_loader.FontFaceObject(en,{isEvalSupported:_n.isEvalSupported,disableFontFace:_n.disableFontFace,ignoreErrors:_n.ignoreErrors,inspectFont:ln});this.fontLoader.bind(En).catch(un=>jt.sendWithPromise("FontFallback",{id:Jt})).finally(()=>{!_n.fontExtraProperties&&En.data&&(En.data=null),this.commonObjs.resolve(Jt,En)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Jt,en);break;default:throw new Error(`Got unknown common object type ${Gt}`)}}),jt.on("obj",([Jt,Gt,en,on])=>{var ln;if(this.destroyed)return;const _n=St(this,Rt).get(Gt);if(!_n.objs.has(Jt))switch(en){case"Image":if(_n.objs.resolve(Jt,on),on){let En;if(on.bitmap){const{width:un,height:hn}=on;En=un*hn*4}else En=((ln=on.data)==null?void 0:ln.length)||0;En>_util.MAX_IMAGE_SIZE_TO_CACHE&&(_n._maybeCleanupAfterRender=!0)}break;case"Pattern":_n.objs.resolve(Jt,on);break;default:throw new Error(`Got unknown object type ${en}`)}}),jt.on("DocProgress",Jt=>{var Gt;this.destroyed||(Gt=Xt.onProgress)==null||Gt.call(Xt,{loaded:Jt.loaded,total:Jt.total})}),jt.on("FetchBuiltInCMap",Jt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Jt):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),jt.on("FetchStandardFontData",Jt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Jt):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Jt;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:jt,transfers:Xt}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:jt,filename:((Jt=this._fullReader)==null?void 0:Jt.filename)??null},Xt).finally(()=>{this.annotationStorage.resetModified()})}getPage(jt){if(!Number.isInteger(jt)||jt<=0||jt>this._numPages)return Promise.reject(new Error("Invalid page request."));const Xt=jt-1,Jt=St(this,kt).get(Xt);if(Jt)return Jt;const Gt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:Xt}).then(en=>{if(this.destroyed)throw new Error("Transport destroyed");const on=new PDFPageProxy(Xt,en,this,this._params.pdfBug);return St(this,Rt).set(Xt,on),on});return St(this,kt).set(Xt,Gt),Gt}getPageIndex(jt){return typeof jt!="object"||jt===null||!Number.isInteger(jt.num)||jt.num<0||!Number.isInteger(jt.gen)||jt.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:jt.num,gen:jt.gen})}getAnnotations(jt,Xt){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:jt,intent:Xt})}getFieldObjects(){return Ut(this,Lt,I0).call(this,"GetFieldObjects")}hasJSActions(){return Ut(this,Lt,I0).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(jt){return typeof jt!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:jt})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Ut(this,Lt,I0).call(this,"GetDocJSActions")}getPageJSActions(jt){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:jt})}getStructTree(jt){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:jt})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(jt=>new _optional_content_config.OptionalContentConfig(jt))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const jt="GetMetadata",Xt=St(this,Pt).get(jt);if(Xt)return Xt;const Jt=this.messageHandler.sendWithPromise(jt,null).then(Gt=>{var en,on;return{info:Gt[0],metadata:Gt[1]?new _metadata.Metadata(Gt[1]):null,contentDispositionFilename:((en=this._fullReader)==null?void 0:en.filename)??null,contentLength:((on=this._fullReader)==null?void 0:on.contentLength)??null}});return St(this,Pt).set(jt,Jt),Jt}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(jt=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const Xt of St(this,Rt).values())if(!Xt.cleanup())throw new Error(`startCleanup: Page ${Xt.pageNumber} is currently rendering.`);this.commonObjs.clear(),jt||this.fontLoader.clear(),St(this,Pt).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:jt,enableXfa:Xt}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:jt,enableXfa:Xt})}}Pt=new WeakMap,Rt=new WeakMap,kt=new WeakMap,Mt=new WeakMap,Lt=new WeakSet,I0=function(jt,Xt=null){const Jt=St(this,Pt).get(jt);if(Jt)return Jt;const Gt=this.messageHandler.sendWithPromise(jt,Xt);return St(this,Pt).set(jt,Gt),Gt};class PDFObjects{constructor(){Kt(this,Dt);Kt(this,Ft,Object.create(null))}get(jt,Xt=null){if(Xt){const Gt=Ut(this,Dt,_A).call(this,jt);return Gt.capability.promise.then(()=>Xt(Gt.data)),null}const Jt=St(this,Ft)[jt];if(!(Jt!=null&&Jt.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${jt}.`);return Jt.data}has(jt){const Xt=St(this,Ft)[jt];return(Xt==null?void 0:Xt.capability.settled)||!1}resolve(jt,Xt=null){const Jt=Ut(this,Dt,_A).call(this,jt);Jt.data=Xt,Jt.capability.resolve()}clear(){var jt;for(const Xt in St(this,Ft)){const{data:Jt}=St(this,Ft)[Xt];(jt=Jt==null?void 0:Jt.bitmap)==null||jt.close()}zt(this,Ft,Object.create(null))}}Ft=new WeakMap,Dt=new WeakSet,_A=function(jt){var Xt;return(Xt=St(this,Ft))[jt]||(Xt[jt]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(jt){Kt(this,Bt,null);zt(this,Bt,jt),this.onContinue=null}get promise(){return St(this,Bt).capability.promise}cancel(jt=0){St(this,Bt).cancel(null,jt)}get separateAnnots(){const{separateAnnots:jt}=St(this,Bt).operatorList;if(!jt)return!1;const{annotationCanvasMap:Xt}=St(this,Bt);return jt.form||jt.canvas&&(Xt==null?void 0:Xt.size)>0}}Bt=new WeakMap,exports.RenderTask=RenderTask;const Ht=class Ht{constructor({callback:jt,params:Xt,objs:Jt,commonObjs:Gt,annotationCanvasMap:en,operatorList:on,pageIndex:_n,canvasFactory:ln,filterFactory:En,useRequestAnimationFrame:un=!1,pdfBug:hn=!1,pageColors:nn=null}){this.callback=jt,this.params=Xt,this.objs=Jt,this.commonObjs=Gt,this.annotationCanvasMap=en,this.operatorListIdx=null,this.operatorList=on,this._pageIndex=_n,this.canvasFactory=ln,this.filterFactory=En,this._pdfBug=hn,this.pageColors=nn,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=un===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=Xt.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:jt=!1,optionalContentConfig:Xt}){var _n,ln;if(this.cancelled)return;if(this._canvas){if(St(Ht,Nt).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");St(Ht,Nt).add(this._canvas)}this._pdfBug&&((_n=globalThis.StepperManager)!=null&&_n.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Jt,viewport:Gt,transform:en,background:on}=this.params;this.gfx=new _canvas.CanvasGraphics(Jt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:Xt},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:en,viewport:Gt,transparency:jt,background:on}),this.operatorListIdx=0,this.graphicsReady=!0,(ln=this.graphicsReadyCallback)==null||ln.call(this)}cancel(jt=null,Xt=0){var Jt;this.running=!1,this.cancelled=!0,(Jt=this.gfx)==null||Jt.endDrawing(),St(Ht,Nt).delete(this._canvas),this.callback(jt||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,Xt))}operatorListChanged(){var jt;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(jt=this.stepper)==null||jt.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),St(Ht,Nt).delete(this._canvas),this.callback())))}};Nt=new WeakMap,Kt(Ht,Nt,new WeakSet);let InternalRenderTask=Ht;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(_e,$,ht)=>{var Ct,xt,Pt,Ww,kt;Object.defineProperty($,"__esModule",{value:!0}),$.SerializableEmpty=$.PrintAnnotationStorage=$.AnnotationStorage=void 0;var vt=ht(1),bt=ht(4),Et=ht(8);const At=Object.freeze({map:null,hash:"",transfers:void 0});$.SerializableEmpty=At;class _t{constructor(){Kt(this,Pt);Kt(this,Ct,!1);Kt(this,xt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(Lt,Ot){const Ft=St(this,xt).get(Lt);return Ft===void 0?Ot:Object.assign(Ot,Ft)}getRawValue(Lt){return St(this,xt).get(Lt)}remove(Lt){if(St(this,xt).delete(Lt),St(this,xt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const Ot of St(this,xt).values())if(Ot instanceof bt.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(Lt,Ot){const Ft=St(this,xt).get(Lt);let Dt=!1;if(Ft!==void 0)for(const[$t,Bt]of Object.entries(Ot))Ft[$t]!==Bt&&(Dt=!0,Ft[$t]=Bt);else Dt=!0,St(this,xt).set(Lt,Ot);Dt&&Ut(this,Pt,Ww).call(this),Ot instanceof bt.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(Ot.constructor._type)}has(Lt){return St(this,xt).has(Lt)}getAll(){return St(this,xt).size>0?(0,vt.objectFromMap)(St(this,xt)):null}setAll(Lt){for(const[Ot,Ft]of Object.entries(Lt))this.setValue(Ot,Ft)}get size(){return St(this,xt).size}resetModified(){St(this,Ct)&&(zt(this,Ct,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new wt(this)}get serializable(){if(St(this,xt).size===0)return At;const Lt=new Map,Ot=new Et.MurmurHash3_64,Ft=[],Dt=Object.create(null);let $t=!1;for(const[Bt,Nt]of St(this,xt)){const Ht=Nt instanceof bt.AnnotationEditor?Nt.serialize(!1,Dt):Nt;Ht&&(Lt.set(Bt,Ht),Ot.update(`${Bt}:${JSON.stringify(Ht)}`),$t||($t=!!Ht.bitmap))}if($t)for(const Bt of Lt.values())Bt.bitmap&&Ft.push(Bt.bitmap);return Lt.size>0?{map:Lt,hash:Ot.hexdigest(),transfers:Ft}:At}}Ct=new WeakMap,xt=new WeakMap,Pt=new WeakSet,Ww=function(){St(this,Ct)||(zt(this,Ct,!0),typeof this.onSetModified=="function"&&this.onSetModified())},$.AnnotationStorage=_t;class wt extends _t{constructor(Ot){super();Kt(this,kt);const{map:Ft,hash:Dt,transfers:$t}=Ot.serializable,Bt=structuredClone(Ft,$t?{transfer:$t}:null);zt(this,kt,{map:Bt,hash:Dt,transfers:$t})}get print(){(0,vt.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return St(this,kt)}}kt=new WeakMap,$.PrintAnnotationStorage=wt},(_e,$,ht)=>{var wt,Ct,xt,Pt,Rt,kt,Mt,Lt,Ot,Ft,Dt,$t,Bt,Nt,Ht,wA,SA,Xt,xA,CA,Gw,Kw,Xw,TA,qw;Object.defineProperty($,"__esModule",{value:!0}),$.AnnotationEditor=void 0;var vt=ht(5),bt=ht(1),Et=ht(6);const un=class un{constructor(nn){Kt(this,Ht);Kt(this,wt,"");Kt(this,Ct,!1);Kt(this,xt,null);Kt(this,Pt,null);Kt(this,Rt,null);Kt(this,kt,!1);Kt(this,Mt,null);Kt(this,Lt,this.focusin.bind(this));Kt(this,Ot,this.focusout.bind(this));Kt(this,Ft,!1);Kt(this,Dt,!1);Kt(this,$t,!1);Sr(this,"_initialOptions",Object.create(null));Sr(this,"_uiManager",null);Sr(this,"_focusEventsAllowed",!0);Sr(this,"_l10nPromise",null);Kt(this,Bt,!1);Kt(this,Nt,un._zIndex++);this.constructor===un&&(0,bt.unreachable)("Cannot initialize AnnotationEditor."),this.parent=nn.parent,this.id=nn.id,this.width=this.height=null,this.pageIndex=nn.parent.pageIndex,this.name=nn.name,this.div=null,this._uiManager=nn.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=nn.isCentered,this._structTreeParentId=null;const{rotation:mn,rawDims:{pageWidth:xn,pageHeight:rn,pageX:qt,pageY:Yt}}=this.parent.viewport;this.rotation=mn,this.pageRotation=(360+mn-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[xn,rn],this.pageTranslation=[qt,Yt];const[tn,dn]=this.parentDimensions;this.x=nn.x/tn,this.y=nn.y/dn,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,bt.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(nn){const mn=new _t({id:nn.parent.getNextId(),parent:nn.parent,uiManager:nn._uiManager});mn.annotationElementId=nn.annotationElementId,mn.deleted=!0,mn._uiManager.addToAnnotationStorage(mn)}static initialize(nn,mn=null){if(un._l10nPromise||(un._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(rn=>[rn,nn.get(rn)]))),mn!=null&&mn.strings)for(const rn of mn.strings)un._l10nPromise.set(rn,nn.get(rn));if(un._borderLineWidth!==-1)return;const xn=getComputedStyle(document.documentElement);un._borderLineWidth=parseFloat(xn.getPropertyValue("--outline-width"))||0}static updateDefaultParams(nn,mn){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(nn){return!1}static paste(nn,mn){(0,bt.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return St(this,Bt)}set _isDraggable(nn){var mn;zt(this,Bt,nn),(mn=this.div)==null||mn.classList.toggle("draggable",nn)}center(){const[nn,mn]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*mn/(nn*2),this.y+=this.width*nn/(mn*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*mn/(nn*2),this.y-=this.width*nn/(mn*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(nn){this._uiManager.addCommands(nn)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=St(this,Nt)}setParent(nn){nn!==null&&(this.pageIndex=nn.pageIndex,this.pageDimensions=nn.pageDimensions),this.parent=nn}focusin(nn){this._focusEventsAllowed&&(St(this,Ft)?zt(this,Ft,!1):this.parent.setSelected(this))}focusout(nn){var xn;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const mn=nn.relatedTarget;mn!=null&&mn.closest(`#${this.id}`)||(nn.preventDefault(),(xn=this.parent)!=null&&xn.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(nn,mn,xn,rn){const[qt,Yt]=this.parentDimensions;[xn,rn]=this.screenToPageTranslation(xn,rn),this.x=(nn+xn)/qt,this.y=(mn+rn)/Yt,this.fixAndSetPosition()}translate(nn,mn){Ut(this,Ht,wA).call(this,this.parentDimensions,nn,mn)}translateInPage(nn,mn){Ut(this,Ht,wA).call(this,this.pageDimensions,nn,mn),this.div.scrollIntoView({block:"nearest"})}drag(nn,mn){const[xn,rn]=this.parentDimensions;if(this.x+=nn/xn,this.y+=mn/rn,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:cn,y:fn}=this.div.getBoundingClientRect();this.parent.findNewParent(this,cn,fn)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:qt,y:Yt}=this;const[tn,dn]=Ut(this,Ht,SA).call(this);qt+=tn,Yt+=dn,this.div.style.left=`${(100*qt).toFixed(2)}%`,this.div.style.top=`${(100*Yt).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[nn,mn]=this.pageDimensions;let{x:xn,y:rn,width:qt,height:Yt}=this;switch(qt*=nn,Yt*=mn,xn*=nn,rn*=mn,this.rotation){case 0:xn=Math.max(0,Math.min(nn-qt,xn)),rn=Math.max(0,Math.min(mn-Yt,rn));break;case 90:xn=Math.max(0,Math.min(nn-Yt,xn)),rn=Math.min(mn,Math.max(qt,rn));break;case 180:xn=Math.min(nn,Math.max(qt,xn)),rn=Math.min(mn,Math.max(Yt,rn));break;case 270:xn=Math.min(nn,Math.max(Yt,xn)),rn=Math.max(0,Math.min(mn-qt,rn));break}this.x=xn/=nn,this.y=rn/=mn;const[tn,dn]=Ut(this,Ht,SA).call(this);xn+=tn,rn+=dn;const{style:cn}=this.div;cn.left=`${(100*xn).toFixed(2)}%`,cn.top=`${(100*rn).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(nn,mn){var xn;return Ut(xn=un,Xt,xA).call(xn,nn,mn,this.parentRotation)}pageTranslationToScreen(nn,mn){var xn;return Ut(xn=un,Xt,xA).call(xn,nn,mn,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:nn,pageDimensions:[mn,xn]}=this,rn=mn*nn,qt=xn*nn;return bt.FeatureTest.isCSSRoundSupported?[Math.round(rn),Math.round(qt)]:[rn,qt]}setDims(nn,mn){var qt;const[xn,rn]=this.parentDimensions;this.div.style.width=`${(100*nn/xn).toFixed(2)}%`,St(this,kt)||(this.div.style.height=`${(100*mn/rn).toFixed(2)}%`),(qt=St(this,xt))==null||qt.classList.toggle("small",nn<un.SMALL_EDITOR_SIZE||mn<un.SMALL_EDITOR_SIZE)}fixDims(){const{style:nn}=this.div,{height:mn,width:xn}=nn,rn=xn.endsWith("%"),qt=!St(this,kt)&&mn.endsWith("%");if(rn&&qt)return;const[Yt,tn]=this.parentDimensions;rn||(nn.width=`${(100*parseFloat(xn)/Yt).toFixed(2)}%`),!St(this,kt)&&!qt&&(nn.height=`${(100*parseFloat(mn)/tn).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(St(this,xt))return;const nn=zt(this,xt,document.createElement("button"));nn.className="altText";const mn=await un._l10nPromise.get("editor_alt_text_button_label");nn.textContent=mn,nn.setAttribute("aria-label",mn),nn.tabIndex="0",nn.addEventListener("contextmenu",Et.noContextMenu),nn.addEventListener("pointerdown",xn=>xn.stopPropagation()),nn.addEventListener("click",xn=>{xn.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),nn.addEventListener("keydown",xn=>{xn.target===nn&&xn.key==="Enter"&&(xn.preventDefault(),this._uiManager.editAltText(this))}),Ut(this,Ht,TA).call(this),this.div.append(nn),un.SMALL_EDITOR_SIZE||(un.SMALL_EDITOR_SIZE=Math.min(128,Math.round(nn.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:St(this,wt),decorative:St(this,Ct)}}set altTextData({altText:nn,decorative:mn}){St(this,wt)===nn&&St(this,Ct)===mn||(zt(this,wt,nn),zt(this,Ct,mn),Ut(this,Ht,TA).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",St(this,Lt)),this.div.addEventListener("focusout",St(this,Ot));const[nn,mn]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*mn/nn).toFixed(2)}%`,this.div.style.maxHeight=`${(100*nn/mn).toFixed(2)}%`);const[xn,rn]=this.getInitialTranslation();return this.translate(xn,rn),(0,vt.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(nn){const{isMac:mn}=bt.FeatureTest.platform;if(nn.button!==0||nn.ctrlKey&&mn){nn.preventDefault();return}zt(this,Ft,!0),Ut(this,Ht,qw).call(this,nn)}moveInDOM(){var nn;(nn=this.parent)==null||nn.moveEditorInDOM(this)}_setParentAndPosition(nn,mn,xn){nn.changeParent(this),this.x=mn,this.y=xn,this.fixAndSetPosition()}getRect(nn,mn){const xn=this.parentScale,[rn,qt]=this.pageDimensions,[Yt,tn]=this.pageTranslation,dn=nn/xn,cn=mn/xn,fn=this.x*rn,Tn=this.y*qt,Bn=this.width*rn,jn=this.height*qt;switch(this.rotation){case 0:return[fn+dn+Yt,qt-Tn-cn-jn+tn,fn+dn+Bn+Yt,qt-Tn-cn+tn];case 90:return[fn+cn+Yt,qt-Tn+dn+tn,fn+cn+jn+Yt,qt-Tn+dn+Bn+tn];case 180:return[fn-dn-Bn+Yt,qt-Tn+cn+tn,fn-dn+Yt,qt-Tn+cn+jn+tn];case 270:return[fn-cn-jn+Yt,qt-Tn-dn-Bn+tn,fn-cn+Yt,qt-Tn-dn+tn];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(nn,mn){const[xn,rn,qt,Yt]=nn,tn=qt-xn,dn=Yt-rn;switch(this.rotation){case 0:return[xn,mn-Yt,tn,dn];case 90:return[xn,mn-rn,dn,tn];case 180:return[qt,mn-rn,tn,dn];case 270:return[qt,mn-Yt,dn,tn];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){zt(this,$t,!0)}disableEditMode(){zt(this,$t,!1)}isInEditMode(){return St(this,$t)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var nn,mn;(nn=this.div)==null||nn.addEventListener("focusin",St(this,Lt)),(mn=this.div)==null||mn.addEventListener("focusout",St(this,Ot))}serialize(nn=!1,mn=null){(0,bt.unreachable)("An editor must be serializable")}static deserialize(nn,mn,xn){const rn=new this.prototype.constructor({parent:mn,id:mn.getNextId(),uiManager:xn});rn.rotation=nn.rotation;const[qt,Yt]=rn.pageDimensions,[tn,dn,cn,fn]=rn.getRectInCurrentCoords(nn.rect,Yt);return rn.x=tn/qt,rn.y=dn/Yt,rn.width=cn/qt,rn.height=fn/Yt,rn}remove(){var nn;this.div.removeEventListener("focusin",St(this,Lt)),this.div.removeEventListener("focusout",St(this,Ot)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(nn=St(this,xt))==null||nn.remove(),zt(this,xt,null),zt(this,Pt,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Ut(this,Ht,Gw).call(this),St(this,Mt).classList.remove("hidden"))}select(){var nn;this.makeResizable(),(nn=this.div)==null||nn.classList.add("selectedEditor")}unselect(){var nn,mn,xn;(nn=St(this,Mt))==null||nn.classList.add("hidden"),(mn=this.div)==null||mn.classList.remove("selectedEditor"),(xn=this.div)!=null&&xn.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(nn,mn){}disableEditing(){St(this,xt)&&(St(this,xt).hidden=!0)}enableEditing(){St(this,xt)&&(St(this,xt).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return St(this,Dt)}set isEditing(nn){zt(this,Dt,nn),this.parent&&(nn?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(nn,mn){zt(this,kt,!0);const xn=nn/mn,{style:rn}=this.div;rn.aspectRatio=xn,rn.height="auto"}static get MIN_SIZE(){return 16}};wt=new WeakMap,Ct=new WeakMap,xt=new WeakMap,Pt=new WeakMap,Rt=new WeakMap,kt=new WeakMap,Mt=new WeakMap,Lt=new WeakMap,Ot=new WeakMap,Ft=new WeakMap,Dt=new WeakMap,$t=new WeakMap,Bt=new WeakMap,Nt=new WeakMap,Ht=new WeakSet,wA=function([nn,mn],xn,rn){[xn,rn]=this.screenToPageTranslation(xn,rn),this.x+=xn/nn,this.y+=rn/mn,this.fixAndSetPosition()},SA=function(){const[nn,mn]=this.parentDimensions,{_borderLineWidth:xn}=un,rn=xn/nn,qt=xn/mn;switch(this.rotation){case 90:return[-rn,qt];case 180:return[rn,qt];case 270:return[rn,-qt];default:return[-rn,-qt]}},Xt=new WeakSet,xA=function(nn,mn,xn){switch(xn){case 90:return[mn,-nn];case 180:return[-nn,-mn];case 270:return[-mn,nn];default:return[nn,mn]}},CA=function(nn){switch(nn){case 90:{const[mn,xn]=this.pageDimensions;return[0,-mn/xn,xn/mn,0]}case 180:return[-1,0,0,-1];case 270:{const[mn,xn]=this.pageDimensions;return[0,mn/xn,-xn/mn,0]}default:return[1,0,0,1]}},Gw=function(){if(St(this,Mt))return;zt(this,Mt,document.createElement("div")),St(this,Mt).classList.add("resizers");const nn=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||nn.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const mn of nn){const xn=document.createElement("div");St(this,Mt).append(xn),xn.classList.add("resizer",mn),xn.addEventListener("pointerdown",Ut(this,Ht,Kw).bind(this,mn)),xn.addEventListener("contextmenu",Et.noContextMenu)}this.div.prepend(St(this,Mt))},Kw=function(nn,mn){mn.preventDefault();const{isMac:xn}=bt.FeatureTest.platform;if(mn.button!==0||mn.ctrlKey&&xn)return;const rn=Ut(this,Ht,Xw).bind(this,nn),qt=this._isDraggable;this._isDraggable=!1;const Yt={passive:!0,capture:!0};window.addEventListener("pointermove",rn,Yt);const tn=this.x,dn=this.y,cn=this.width,fn=this.height,Tn=this.parent.div.style.cursor,Bn=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(mn.target).cursor;const jn=()=>{this._isDraggable=qt,window.removeEventListener("pointerup",jn),window.removeEventListener("blur",jn),window.removeEventListener("pointermove",rn,Yt),this.parent.div.style.cursor=Tn,this.div.style.cursor=Bn;const Un=this.x,Gn=this.y,Yn=this.width,Qn=this.height;Un===tn&&Gn===dn&&Yn===cn&&Qn===fn||this.addCommands({cmd:()=>{this.width=Yn,this.height=Qn,this.x=Un,this.y=Gn;const[Dn,On]=this.parentDimensions;this.setDims(Dn*Yn,On*Qn),this.fixAndSetPosition()},undo:()=>{this.width=cn,this.height=fn,this.x=tn,this.y=dn;const[Dn,On]=this.parentDimensions;this.setDims(Dn*cn,On*fn),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",jn),window.addEventListener("blur",jn)},Xw=function(nn,mn){const[xn,rn]=this.parentDimensions,qt=this.x,Yt=this.y,tn=this.width,dn=this.height,cn=un.MIN_SIZE/xn,fn=un.MIN_SIZE/rn,Tn=hr=>Math.round(hr*1e4)/1e4,Bn=Ut(this,Ht,CA).call(this,this.rotation),jn=(hr,wr)=>[Bn[0]*hr+Bn[2]*wr,Bn[1]*hr+Bn[3]*wr],Un=Ut(this,Ht,CA).call(this,360-this.rotation),Gn=(hr,wr)=>[Un[0]*hr+Un[2]*wr,Un[1]*hr+Un[3]*wr];let Yn,Qn,Dn=!1,On=!1;switch(nn){case"topLeft":Dn=!0,Yn=(hr,wr)=>[0,0],Qn=(hr,wr)=>[hr,wr];break;case"topMiddle":Yn=(hr,wr)=>[hr/2,0],Qn=(hr,wr)=>[hr/2,wr];break;case"topRight":Dn=!0,Yn=(hr,wr)=>[hr,0],Qn=(hr,wr)=>[0,wr];break;case"middleRight":On=!0,Yn=(hr,wr)=>[hr,wr/2],Qn=(hr,wr)=>[0,wr/2];break;case"bottomRight":Dn=!0,Yn=(hr,wr)=>[hr,wr],Qn=(hr,wr)=>[0,0];break;case"bottomMiddle":Yn=(hr,wr)=>[hr/2,wr],Qn=(hr,wr)=>[hr/2,0];break;case"bottomLeft":Dn=!0,Yn=(hr,wr)=>[0,wr],Qn=(hr,wr)=>[hr,0];break;case"middleLeft":On=!0,Yn=(hr,wr)=>[0,wr/2],Qn=(hr,wr)=>[hr,wr/2];break}const sn=Yn(tn,dn),gn=Qn(tn,dn);let Rn=jn(...gn);const $n=Tn(qt+Rn[0]),zn=Tn(Yt+Rn[1]);let Zn=1,Xn=1,[Pn,or]=this.screenToPageTranslation(mn.movementX,mn.movementY);if([Pn,or]=Gn(Pn/xn,or/rn),Dn){const hr=Math.hypot(tn,dn);Zn=Xn=Math.max(Math.min(Math.hypot(gn[0]-sn[0]-Pn,gn[1]-sn[1]-or)/hr,1/tn,1/dn),cn/tn,fn/dn)}else On?Zn=Math.max(cn,Math.min(1,Math.abs(gn[0]-sn[0]-Pn)))/tn:Xn=Math.max(fn,Math.min(1,Math.abs(gn[1]-sn[1]-or)))/dn;const nr=Tn(tn*Zn),$r=Tn(dn*Xn);Rn=jn(...Qn(nr,$r));const Rr=$n-Rn[0],qr=zn-Rn[1];this.width=nr,this.height=$r,this.x=Rr,this.y=qr,this.setDims(xn*nr,rn*$r),this.fixAndSetPosition()},TA=async function(){var xn;const nn=St(this,xt);if(!nn)return;if(!St(this,wt)&&!St(this,Ct)){nn.classList.remove("done"),(xn=St(this,Pt))==null||xn.remove();return}un._l10nPromise.get("editor_alt_text_edit_button_label").then(rn=>{nn.setAttribute("aria-label",rn)});let mn=St(this,Pt);if(!mn){zt(this,Pt,mn=document.createElement("span")),mn.className="tooltip",mn.setAttribute("role","tooltip");const rn=mn.id=`alt-text-tooltip-${this.id}`;nn.setAttribute("aria-describedby",rn);const qt=100;nn.addEventListener("mouseenter",()=>{zt(this,Rt,setTimeout(()=>{zt(this,Rt,null),St(this,Pt).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},qt))}),nn.addEventListener("mouseleave",()=>{var Yt;clearTimeout(St(this,Rt)),zt(this,Rt,null),(Yt=St(this,Pt))==null||Yt.classList.remove("show")})}nn.classList.add("done"),mn.innerText=St(this,Ct)?await un._l10nPromise.get("editor_alt_text_decorative_tooltip"):St(this,wt),mn.parentNode||nn.append(mn)},qw=function(nn){if(!this._isDraggable)return;const mn=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let xn,rn;mn&&(xn={passive:!0,capture:!0},rn=Yt=>{const[tn,dn]=this.screenToPageTranslation(Yt.movementX,Yt.movementY);this._uiManager.dragSelectedEditors(tn,dn)},window.addEventListener("pointermove",rn,xn));const qt=()=>{if(window.removeEventListener("pointerup",qt),window.removeEventListener("blur",qt),mn&&window.removeEventListener("pointermove",rn,xn),zt(this,Ft,!1),!this._uiManager.endDragSession()){const{isMac:Yt}=bt.FeatureTest.platform;nn.ctrlKey&&!Yt||nn.shiftKey||nn.metaKey&&Yt?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",qt),window.addEventListener("blur",qt)},Kt(un,Xt),Sr(un,"_borderLineWidth",-1),Sr(un,"_colorManager",new vt.ColorManager),Sr(un,"_zIndex",1),Sr(un,"SMALL_EDITOR_SIZE",0);let At=un;$.AnnotationEditor=At;class _t extends At{constructor(nn){super(nn),this.annotationElementId=nn.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(_e,$,ht)=>{var kt,Mt,Lt,Ot,Ft,PA,Bt,Nt,Ht,Vt,jt,Yw,Gt,en,on,_n,ln,En,un,hn,nn,mn,xn,rn,qt,Yt,tn,dn,cn,fn,Tn,Bn,jn,Un,Gn,Yn,Qn,Dn,On,sn,gn,Rn,$n,zn,Zn,Xn,Pn,Qw,RA,kA,O0,MA,FA,Fo,mv,Zw,Jw,LA,gv,DA;Object.defineProperty($,"__esModule",{value:!0}),$.KeyboardManager=$.CommandManager=$.ColorManager=$.AnnotationEditorUIManager=void 0,$.bindEvents=Et,$.opacityToHex=At;var vt=ht(1),bt=ht(6);function Et(Pr,vn,Wn){for(const sr of Wn)vn.addEventListener(sr,Pr[sr].bind(Pr))}function At(Pr){return Math.round(Math.min(255,Math.max(1,255*Pr))).toString(16).padStart(2,"0")}class _t{constructor(){Kt(this,kt,0)}getId(){return`${vt.AnnotationEditorPrefix}${eo(this,kt)._++}`}}kt=new WeakMap;const $t=class $t{constructor(){Kt(this,Ft);Kt(this,Mt,(0,vt.getUuid)());Kt(this,Lt,0);Kt(this,Ot,null)}static get _isSVGFittingCanvas(){const vn='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',sr=new OffscreenCanvas(1,3).getContext("2d"),gr=new Image;gr.src=vn;const br=gr.decode().then(()=>(sr.drawImage(gr,0,0,1,1,0,0,1,3),new Uint32Array(sr.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,vt.shadow)(this,"_isSVGFittingCanvas",br)}async getFromFile(vn){const{lastModified:Wn,name:sr,size:gr,type:br}=vn;return Ut(this,Ft,PA).call(this,`${Wn}_${sr}_${gr}_${br}`,vn)}async getFromUrl(vn){return Ut(this,Ft,PA).call(this,vn,vn)}async getFromId(vn){St(this,Ot)||zt(this,Ot,new Map);const Wn=St(this,Ot).get(vn);return Wn?Wn.bitmap?(Wn.refCounter+=1,Wn):Wn.file?this.getFromFile(Wn.file):this.getFromUrl(Wn.url):null}getSvgUrl(vn){const Wn=St(this,Ot).get(vn);return Wn!=null&&Wn.isSvg?Wn.svgUrl:null}deleteId(vn){St(this,Ot)||zt(this,Ot,new Map);const Wn=St(this,Ot).get(vn);Wn&&(Wn.refCounter-=1,Wn.refCounter===0&&(Wn.bitmap=null))}isValidId(vn){return vn.startsWith(`image_${St(this,Mt)}_`)}};Mt=new WeakMap,Lt=new WeakMap,Ot=new WeakMap,Ft=new WeakSet,PA=async function(vn,Wn){St(this,Ot)||zt(this,Ot,new Map);let sr=St(this,Ot).get(vn);if(sr===null)return null;if(sr!=null&&sr.bitmap)return sr.refCounter+=1,sr;try{sr||(sr={bitmap:null,id:`image_${St(this,Mt)}_${eo(this,Lt)._++}`,refCounter:0,isSvg:!1});let gr;if(typeof Wn=="string"){sr.url=Wn;const br=await fetch(Wn);if(!br.ok)throw new Error(br.statusText);gr=await br.blob()}else gr=sr.file=Wn;if(gr.type==="image/svg+xml"){const br=$t._isSVGFittingCanvas,ur=new FileReader,pn=new Image,an=new Promise((Sn,Vn)=>{pn.onload=()=>{sr.bitmap=pn,sr.isSvg=!0,Sn()},ur.onload=async()=>{const Hn=sr.svgUrl=ur.result;pn.src=await br?`${Hn}#svgView(preserveAspectRatio(none))`:Hn},pn.onerror=ur.onerror=Vn});ur.readAsDataURL(gr),await an}else sr.bitmap=await createImageBitmap(gr);sr.refCounter=1}catch(gr){console.error(gr),sr=null}return St(this,Ot).set(vn,sr),sr&&St(this,Ot).set(sr.id,sr),sr};let wt=$t;class Ct{constructor(vn=128){Kt(this,Bt,[]);Kt(this,Nt,!1);Kt(this,Ht);Kt(this,Vt,-1);zt(this,Ht,vn)}add({cmd:vn,undo:Wn,mustExec:sr,type:gr=NaN,overwriteIfSameType:br=!1,keepUndo:ur=!1}){if(sr&&vn(),St(this,Nt))return;const pn={cmd:vn,undo:Wn,type:gr};if(St(this,Vt)===-1){St(this,Bt).length>0&&(St(this,Bt).length=0),zt(this,Vt,0),St(this,Bt).push(pn);return}if(br&&St(this,Bt)[St(this,Vt)].type===gr){ur&&(pn.undo=St(this,Bt)[St(this,Vt)].undo),St(this,Bt)[St(this,Vt)]=pn;return}const an=St(this,Vt)+1;an===St(this,Ht)?St(this,Bt).splice(0,1):(zt(this,Vt,an),an<St(this,Bt).length&&St(this,Bt).splice(an)),St(this,Bt).push(pn)}undo(){St(this,Vt)!==-1&&(zt(this,Nt,!0),St(this,Bt)[St(this,Vt)].undo(),zt(this,Nt,!1),zt(this,Vt,St(this,Vt)-1))}redo(){St(this,Vt)<St(this,Bt).length-1&&(zt(this,Vt,St(this,Vt)+1),zt(this,Nt,!0),St(this,Bt)[St(this,Vt)].cmd(),zt(this,Nt,!1))}hasSomethingToUndo(){return St(this,Vt)!==-1}hasSomethingToRedo(){return St(this,Vt)<St(this,Bt).length-1}destroy(){zt(this,Bt,null)}}Bt=new WeakMap,Nt=new WeakMap,Ht=new WeakMap,Vt=new WeakMap,$.CommandManager=Ct;class xt{constructor(vn){Kt(this,jt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Wn}=vt.FeatureTest.platform;for(const[sr,gr,br={}]of vn)for(const ur of sr){const pn=ur.startsWith("mac+");Wn&&pn?(this.callbacks.set(ur.slice(4),{callback:gr,options:br}),this.allKeys.add(ur.split("+").at(-1))):!Wn&&!pn&&(this.callbacks.set(ur,{callback:gr,options:br}),this.allKeys.add(ur.split("+").at(-1)))}}exec(vn,Wn){if(!this.allKeys.has(Wn.key))return;const sr=this.callbacks.get(Ut(this,jt,Yw).call(this,Wn));if(!sr)return;const{callback:gr,options:{bubbles:br=!1,args:ur=[],checker:pn=null}}=sr;pn&&!pn(vn,Wn)||(gr.bind(vn,...ur)(),br||(Wn.stopPropagation(),Wn.preventDefault()))}}jt=new WeakSet,Yw=function(vn){vn.altKey&&this.buffer.push("alt"),vn.ctrlKey&&this.buffer.push("ctrl"),vn.metaKey&&this.buffer.push("meta"),vn.shiftKey&&this.buffer.push("shift"),this.buffer.push(vn.key);const Wn=this.buffer.join("+");return this.buffer.length=0,Wn},$.KeyboardManager=xt;const Jt=class Jt{get _colors(){const vn=new Map([["CanvasText",null],["Canvas",null]]);return(0,bt.getColorValues)(vn),(0,vt.shadow)(this,"_colors",vn)}convert(vn){const Wn=(0,bt.getRGB)(vn);if(!window.matchMedia("(forced-colors: active)").matches)return Wn;for(const[sr,gr]of this._colors)if(gr.every((br,ur)=>br===Wn[ur]))return Jt._colorsMapping.get(sr);return Wn}getHexCode(vn){const Wn=this._colors.get(vn);return Wn?vt.Util.makeHexColor(...Wn):vn}};Sr(Jt,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Pt=Jt;$.ColorManager=Pt;const mr=class mr{constructor(vn,Wn,sr,gr,br,ur){Kt(this,Pn);Kt(this,Gt,null);Kt(this,en,new Map);Kt(this,on,new Map);Kt(this,_n,null);Kt(this,ln,null);Kt(this,En,new Ct);Kt(this,un,0);Kt(this,hn,new Set);Kt(this,nn,null);Kt(this,mn,null);Kt(this,xn,new Set);Kt(this,rn,null);Kt(this,qt,new _t);Kt(this,Yt,!1);Kt(this,tn,!1);Kt(this,dn,null);Kt(this,cn,vt.AnnotationEditorType.NONE);Kt(this,fn,new Set);Kt(this,Tn,null);Kt(this,Bn,this.blur.bind(this));Kt(this,jn,this.focus.bind(this));Kt(this,Un,this.copy.bind(this));Kt(this,Gn,this.cut.bind(this));Kt(this,Yn,this.paste.bind(this));Kt(this,Qn,this.keydown.bind(this));Kt(this,Dn,this.onEditingAction.bind(this));Kt(this,On,this.onPageChanging.bind(this));Kt(this,sn,this.onScaleChanging.bind(this));Kt(this,gn,this.onRotationChanging.bind(this));Kt(this,Rn,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Kt(this,$n,[0,0]);Kt(this,zn,null);Kt(this,Zn,null);Kt(this,Xn,null);zt(this,Zn,vn),zt(this,Xn,Wn),zt(this,_n,sr),this._eventBus=gr,this._eventBus._on("editingaction",St(this,Dn)),this._eventBus._on("pagechanging",St(this,On)),this._eventBus._on("scalechanging",St(this,sn)),this._eventBus._on("rotationchanging",St(this,gn)),zt(this,ln,br.annotationStorage),zt(this,rn,br.filterFactory),zt(this,Tn,ur),this.viewParameters={realScale:bt.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const vn=mr.prototype,Wn=br=>{const{activeElement:ur}=document;return ur&&St(br,Zn).contains(ur)&&br.hasSomethingToControl()},sr=this.TRANSLATE_SMALL,gr=this.TRANSLATE_BIG;return(0,vt.shadow)(this,"_keyboardManager",new xt([[["ctrl+a","mac+meta+a"],vn.selectAll],[["ctrl+z","mac+meta+z"],vn.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],vn.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],vn.delete],[["Escape","mac+Escape"],vn.unselectAll],[["ArrowLeft","mac+ArrowLeft"],vn.translateSelectedEditors,{args:[-sr,0],checker:Wn}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],vn.translateSelectedEditors,{args:[-gr,0],checker:Wn}],[["ArrowRight","mac+ArrowRight"],vn.translateSelectedEditors,{args:[sr,0],checker:Wn}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],vn.translateSelectedEditors,{args:[gr,0],checker:Wn}],[["ArrowUp","mac+ArrowUp"],vn.translateSelectedEditors,{args:[0,-sr],checker:Wn}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],vn.translateSelectedEditors,{args:[0,-gr],checker:Wn}],[["ArrowDown","mac+ArrowDown"],vn.translateSelectedEditors,{args:[0,sr],checker:Wn}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],vn.translateSelectedEditors,{args:[0,gr],checker:Wn}]]))}destroy(){Ut(this,Pn,O0).call(this),Ut(this,Pn,RA).call(this),this._eventBus._off("editingaction",St(this,Dn)),this._eventBus._off("pagechanging",St(this,On)),this._eventBus._off("scalechanging",St(this,sn)),this._eventBus._off("rotationchanging",St(this,gn));for(const vn of St(this,on).values())vn.destroy();St(this,on).clear(),St(this,en).clear(),St(this,xn).clear(),zt(this,Gt,null),St(this,fn).clear(),St(this,En).destroy(),St(this,_n).destroy()}get hcmFilter(){return(0,vt.shadow)(this,"hcmFilter",St(this,Tn)?St(this,rn).addHCMFilter(St(this,Tn).foreground,St(this,Tn).background):"none")}get direction(){return(0,vt.shadow)(this,"direction",getComputedStyle(St(this,Zn)).direction)}editAltText(vn){var Wn;(Wn=St(this,_n))==null||Wn.editAltText(this,vn)}onPageChanging({pageNumber:vn}){zt(this,un,vn-1)}focusMainContainer(){St(this,Zn).focus()}findParent(vn,Wn){for(const sr of St(this,on).values()){const{x:gr,y:br,width:ur,height:pn}=sr.div.getBoundingClientRect();if(vn>=gr&&vn<=gr+ur&&Wn>=br&&Wn<=br+pn)return sr}return null}disableUserSelect(vn=!1){St(this,Xn).classList.toggle("noUserSelect",vn)}addShouldRescale(vn){St(this,xn).add(vn)}removeShouldRescale(vn){St(this,xn).delete(vn)}onScaleChanging({scale:vn}){this.commitOrRemove(),this.viewParameters.realScale=vn*bt.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Wn of St(this,xn))Wn.onScaleChanging()}onRotationChanging({pagesRotation:vn}){this.commitOrRemove(),this.viewParameters.rotation=vn}addToAnnotationStorage(vn){!vn.isEmpty()&&St(this,ln)&&!St(this,ln).has(vn.id)&&St(this,ln).setValue(vn.id,vn)}blur(){if(!this.hasSelection)return;const{activeElement:vn}=document;for(const Wn of St(this,fn))if(Wn.div.contains(vn)){zt(this,dn,[Wn,vn]),Wn._focusEventsAllowed=!1;break}}focus(){if(!St(this,dn))return;const[vn,Wn]=St(this,dn);zt(this,dn,null),Wn.addEventListener("focusin",()=>{vn._focusEventsAllowed=!0},{once:!0}),Wn.focus()}addEditListeners(){Ut(this,Pn,kA).call(this),Ut(this,Pn,MA).call(this)}removeEditListeners(){Ut(this,Pn,O0).call(this),Ut(this,Pn,FA).call(this)}copy(vn){var sr;if(vn.preventDefault(),(sr=St(this,Gt))==null||sr.commitOrRemove(),!this.hasSelection)return;const Wn=[];for(const gr of St(this,fn)){const br=gr.serialize(!0);br&&Wn.push(br)}Wn.length!==0&&vn.clipboardData.setData("application/pdfjs",JSON.stringify(Wn))}cut(vn){this.copy(vn),this.delete()}paste(vn){vn.preventDefault();const{clipboardData:Wn}=vn;for(const br of Wn.items)for(const ur of St(this,mn))if(ur.isHandlingMimeForPasting(br.type)){ur.paste(br,this.currentLayer);return}let sr=Wn.getData("application/pdfjs");if(!sr)return;try{sr=JSON.parse(sr)}catch(br){(0,vt.warn)(`paste: "${br.message}".`);return}if(!Array.isArray(sr))return;this.unselectAll();const gr=this.currentLayer;try{const br=[];for(const an of sr){const Sn=gr.deserialize(an);if(!Sn)return;br.push(Sn)}const ur=()=>{for(const an of br)Ut(this,Pn,LA).call(this,an);Ut(this,Pn,DA).call(this,br)},pn=()=>{for(const an of br)an.remove()};this.addCommands({cmd:ur,undo:pn,mustExec:!0})}catch(br){(0,vt.warn)(`paste: "${br.message}".`)}}keydown(vn){var Wn;(Wn=this.getActive())!=null&&Wn.shouldGetKeyboardEvents()||mr._keyboardManager.exec(this,vn)}onEditingAction(vn){["undo","redo","delete","selectAll"].includes(vn.name)&&this[vn.name]()}setEditingState(vn){vn?(Ut(this,Pn,Qw).call(this),Ut(this,Pn,kA).call(this),Ut(this,Pn,MA).call(this),Ut(this,Pn,Fo).call(this,{isEditing:St(this,cn)!==vt.AnnotationEditorType.NONE,isEmpty:Ut(this,Pn,gv).call(this),hasSomethingToUndo:St(this,En).hasSomethingToUndo(),hasSomethingToRedo:St(this,En).hasSomethingToRedo(),hasSelectedEditor:!1})):(Ut(this,Pn,RA).call(this),Ut(this,Pn,O0).call(this),Ut(this,Pn,FA).call(this),Ut(this,Pn,Fo).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(vn){if(!St(this,mn)){zt(this,mn,vn);for(const Wn of St(this,mn))Ut(this,Pn,mv).call(this,Wn.defaultPropertiesToUpdate)}}getId(){return St(this,qt).getId()}get currentLayer(){return St(this,on).get(St(this,un))}getLayer(vn){return St(this,on).get(vn)}get currentPageIndex(){return St(this,un)}addLayer(vn){St(this,on).set(vn.pageIndex,vn),St(this,Yt)?vn.enable():vn.disable()}removeLayer(vn){St(this,on).delete(vn.pageIndex)}updateMode(vn,Wn=null){if(St(this,cn)!==vn){if(zt(this,cn,vn),vn===vt.AnnotationEditorType.NONE){this.setEditingState(!1),Ut(this,Pn,Jw).call(this);return}this.setEditingState(!0),Ut(this,Pn,Zw).call(this),this.unselectAll();for(const sr of St(this,on).values())sr.updateMode(vn);if(Wn){for(const sr of St(this,en).values())if(sr.annotationElementId===Wn){this.setSelected(sr),sr.enterInEditMode();break}}}}updateToolbar(vn){vn!==St(this,cn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:vn})}updateParams(vn,Wn){if(St(this,mn)){if(vn===vt.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(vn);return}for(const sr of St(this,fn))sr.updateParams(vn,Wn);for(const sr of St(this,mn))sr.updateDefaultParams(vn,Wn)}}enableWaiting(vn=!1){if(St(this,tn)!==vn){zt(this,tn,vn);for(const Wn of St(this,on).values())vn?Wn.disableClick():Wn.enableClick(),Wn.div.classList.toggle("waiting",vn)}}getEditors(vn){const Wn=[];for(const sr of St(this,en).values())sr.pageIndex===vn&&Wn.push(sr);return Wn}getEditor(vn){return St(this,en).get(vn)}addEditor(vn){St(this,en).set(vn.id,vn)}removeEditor(vn){var Wn;St(this,en).delete(vn.id),this.unselect(vn),(!vn.annotationElementId||!St(this,hn).has(vn.annotationElementId))&&((Wn=St(this,ln))==null||Wn.remove(vn.id))}addDeletedAnnotationElement(vn){St(this,hn).add(vn.annotationElementId),vn.deleted=!0}isDeletedAnnotationElement(vn){return St(this,hn).has(vn)}removeDeletedAnnotationElement(vn){St(this,hn).delete(vn.annotationElementId),vn.deleted=!1}setActiveEditor(vn){St(this,Gt)!==vn&&(zt(this,Gt,vn),vn&&Ut(this,Pn,mv).call(this,vn.propertiesToUpdate))}toggleSelected(vn){if(St(this,fn).has(vn)){St(this,fn).delete(vn),vn.unselect(),Ut(this,Pn,Fo).call(this,{hasSelectedEditor:this.hasSelection});return}St(this,fn).add(vn),vn.select(),Ut(this,Pn,mv).call(this,vn.propertiesToUpdate),Ut(this,Pn,Fo).call(this,{hasSelectedEditor:!0})}setSelected(vn){for(const Wn of St(this,fn))Wn!==vn&&Wn.unselect();St(this,fn).clear(),St(this,fn).add(vn),vn.select(),Ut(this,Pn,mv).call(this,vn.propertiesToUpdate),Ut(this,Pn,Fo).call(this,{hasSelectedEditor:!0})}isSelected(vn){return St(this,fn).has(vn)}unselect(vn){vn.unselect(),St(this,fn).delete(vn),Ut(this,Pn,Fo).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return St(this,fn).size!==0}undo(){St(this,En).undo(),Ut(this,Pn,Fo).call(this,{hasSomethingToUndo:St(this,En).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Ut(this,Pn,gv).call(this)})}redo(){St(this,En).redo(),Ut(this,Pn,Fo).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:St(this,En).hasSomethingToRedo(),isEmpty:Ut(this,Pn,gv).call(this)})}addCommands(vn){St(this,En).add(vn),Ut(this,Pn,Fo).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Ut(this,Pn,gv).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const vn=[...St(this,fn)],Wn=()=>{for(const gr of vn)gr.remove()},sr=()=>{for(const gr of vn)Ut(this,Pn,LA).call(this,gr)};this.addCommands({cmd:Wn,undo:sr,mustExec:!0})}commitOrRemove(){var vn;(vn=St(this,Gt))==null||vn.commitOrRemove()}hasSomethingToControl(){return St(this,Gt)||this.hasSelection}selectAll(){for(const vn of St(this,fn))vn.commit();Ut(this,Pn,DA).call(this,St(this,en).values())}unselectAll(){if(St(this,Gt)){St(this,Gt).commitOrRemove();return}if(this.hasSelection){for(const vn of St(this,fn))vn.unselect();St(this,fn).clear(),Ut(this,Pn,Fo).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(vn,Wn,sr=!1){if(sr||this.commitOrRemove(),!this.hasSelection)return;St(this,$n)[0]+=vn,St(this,$n)[1]+=Wn;const[gr,br]=St(this,$n),ur=[...St(this,fn)],pn=1e3;St(this,zn)&&clearTimeout(St(this,zn)),zt(this,zn,setTimeout(()=>{zt(this,zn,null),St(this,$n)[0]=St(this,$n)[1]=0,this.addCommands({cmd:()=>{for(const an of ur)St(this,en).has(an.id)&&an.translateInPage(gr,br)},undo:()=>{for(const an of ur)St(this,en).has(an.id)&&an.translateInPage(-gr,-br)},mustExec:!1})},pn));for(const an of ur)an.translateInPage(vn,Wn)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),zt(this,nn,new Map);for(const vn of St(this,fn))St(this,nn).set(vn,{savedX:vn.x,savedY:vn.y,savedPageIndex:vn.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!St(this,nn))return!1;this.disableUserSelect(!1);const vn=St(this,nn);zt(this,nn,null);let Wn=!1;for(const[{x:gr,y:br,pageIndex:ur},pn]of vn)pn.newX=gr,pn.newY=br,pn.newPageIndex=ur,Wn||(Wn=gr!==pn.savedX||br!==pn.savedY||ur!==pn.savedPageIndex);if(!Wn)return!1;const sr=(gr,br,ur,pn)=>{if(St(this,en).has(gr.id)){const an=St(this,on).get(pn);an?gr._setParentAndPosition(an,br,ur):(gr.pageIndex=pn,gr.x=br,gr.y=ur)}};return this.addCommands({cmd:()=>{for(const[gr,{newX:br,newY:ur,newPageIndex:pn}]of vn)sr(gr,br,ur,pn)},undo:()=>{for(const[gr,{savedX:br,savedY:ur,savedPageIndex:pn}]of vn)sr(gr,br,ur,pn)},mustExec:!0}),!0}dragSelectedEditors(vn,Wn){if(St(this,nn))for(const sr of St(this,nn).keys())sr.drag(vn,Wn)}rebuild(vn){if(vn.parent===null){const Wn=this.getLayer(vn.pageIndex);Wn?(Wn.changeParent(vn),Wn.addOrRebuild(vn)):(this.addEditor(vn),this.addToAnnotationStorage(vn),vn.rebuild())}else vn.parent.addOrRebuild(vn)}isActive(vn){return St(this,Gt)===vn}getActive(){return St(this,Gt)}getMode(){return St(this,cn)}get imageManager(){return(0,vt.shadow)(this,"imageManager",new wt)}};Gt=new WeakMap,en=new WeakMap,on=new WeakMap,_n=new WeakMap,ln=new WeakMap,En=new WeakMap,un=new WeakMap,hn=new WeakMap,nn=new WeakMap,mn=new WeakMap,xn=new WeakMap,rn=new WeakMap,qt=new WeakMap,Yt=new WeakMap,tn=new WeakMap,dn=new WeakMap,cn=new WeakMap,fn=new WeakMap,Tn=new WeakMap,Bn=new WeakMap,jn=new WeakMap,Un=new WeakMap,Gn=new WeakMap,Yn=new WeakMap,Qn=new WeakMap,Dn=new WeakMap,On=new WeakMap,sn=new WeakMap,gn=new WeakMap,Rn=new WeakMap,$n=new WeakMap,zn=new WeakMap,Zn=new WeakMap,Xn=new WeakMap,Pn=new WeakSet,Qw=function(){window.addEventListener("focus",St(this,jn)),window.addEventListener("blur",St(this,Bn))},RA=function(){window.removeEventListener("focus",St(this,jn)),window.removeEventListener("blur",St(this,Bn))},kA=function(){window.addEventListener("keydown",St(this,Qn),{capture:!0})},O0=function(){window.removeEventListener("keydown",St(this,Qn),{capture:!0})},MA=function(){document.addEventListener("copy",St(this,Un)),document.addEventListener("cut",St(this,Gn)),document.addEventListener("paste",St(this,Yn))},FA=function(){document.removeEventListener("copy",St(this,Un)),document.removeEventListener("cut",St(this,Gn)),document.removeEventListener("paste",St(this,Yn))},Fo=function(vn){Object.entries(vn).some(([sr,gr])=>St(this,Rn)[sr]!==gr)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(St(this,Rn),vn)})},mv=function(vn){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:vn})},Zw=function(){if(!St(this,Yt)){zt(this,Yt,!0);for(const vn of St(this,on).values())vn.enable()}},Jw=function(){if(this.unselectAll(),St(this,Yt)){zt(this,Yt,!1);for(const vn of St(this,on).values())vn.disable()}},LA=function(vn){const Wn=St(this,on).get(vn.pageIndex);Wn?Wn.addOrRebuild(vn):this.addEditor(vn)},gv=function(){if(St(this,en).size===0)return!0;if(St(this,en).size===1)for(const vn of St(this,en).values())return vn.isEmpty();return!1},DA=function(vn){St(this,fn).clear();for(const Wn of vn)Wn.isEmpty()||(St(this,fn).add(Wn),Wn.select());Ut(this,Pn,Fo).call(this,{hasSelectedEditor:!0})},Sr(mr,"TRANSLATE_SMALL",1),Sr(mr,"TRANSLATE_BIG",10);let Rt=mr;$.AnnotationEditorUIManager=Rt},(_e,$,ht)=>{var un,hn,nn,mn,xn,rn,qt,Yt,tn,dn,cn,fn,im,rm,IA,$0,N0,vv,yv;Object.defineProperty($,"__esModule",{value:!0}),$.StatTimer=$.RenderingCancelledException=$.PixelsPerInch=$.PageViewport=$.PDFDateString=$.DOMStandardFontDataFactory=$.DOMSVGFactory=$.DOMFilterFactory=$.DOMCanvasFactory=$.DOMCMapReaderFactory=void 0,$.deprecated=Vt,$.getColorValues=en,$.getCurrentTransform=on,$.getCurrentTransformInverse=_n,$.getFilenameFromUrl=Ft,$.getPdfFilenameFromUrl=Dt,$.getRGB=Gt,$.getXfaPageViewport=Jt,$.isDataScheme=Lt,$.isPdfFile=Ot,$.isValidFetchUrl=Bt,$.loadScript=Ht,$.noContextMenu=Nt,$.setLayerDimensions=ln;var vt=ht(7),bt=ht(1);const Et="http://www.w3.org/2000/svg",En=class En{};Sr(En,"CSS",96),Sr(En,"PDF",72),Sr(En,"PDF_TO_CSS_UNITS",En.CSS/En.PDF);let At=En;$.PixelsPerInch=At;class _t extends vt.BaseFilterFactory{constructor({docId:sn,ownerDocument:gn=globalThis.document}={}){super();Kt(this,fn);Kt(this,un);Kt(this,hn);Kt(this,nn);Kt(this,mn);Kt(this,xn);Kt(this,rn);Kt(this,qt);Kt(this,Yt);Kt(this,tn);Kt(this,dn);Kt(this,cn,0);zt(this,nn,sn),zt(this,mn,gn)}addFilter(sn){if(!sn)return"none";let gn=St(this,fn,im).get(sn);if(gn)return gn;let Rn,$n,zn,Zn;if(sn.length===1){const nr=sn[0],$r=new Array(256);for(let Rr=0;Rr<256;Rr++)$r[Rr]=nr[Rr]/255;Zn=Rn=$n=zn=$r.join(",")}else{const[nr,$r,Rr]=sn,qr=new Array(256),hr=new Array(256),wr=new Array(256);for(let jr=0;jr<256;jr++)qr[jr]=nr[jr]/255,hr[jr]=$r[jr]/255,wr[jr]=Rr[jr]/255;Rn=qr.join(","),$n=hr.join(","),zn=wr.join(","),Zn=`${Rn}${$n}${zn}`}if(gn=St(this,fn,im).get(Zn),gn)return St(this,fn,im).set(sn,gn),gn;const Xn=`g_${St(this,nn)}_transfer_map_${eo(this,cn)._++}`,Pn=`url(#${Xn})`;St(this,fn,im).set(sn,Pn),St(this,fn,im).set(Zn,Pn);const or=Ut(this,fn,$0).call(this,Xn);return Ut(this,fn,vv).call(this,Rn,$n,zn,or),Pn}addHCMFilter(sn,gn){var $r;const Rn=`${sn}-${gn}`;if(St(this,rn)===Rn)return St(this,qt);if(zt(this,rn,Rn),zt(this,qt,"none"),($r=St(this,xn))==null||$r.remove(),!sn||!gn)return St(this,qt);const $n=Ut(this,fn,yv).call(this,sn);sn=bt.Util.makeHexColor(...$n);const zn=Ut(this,fn,yv).call(this,gn);if(gn=bt.Util.makeHexColor(...zn),St(this,fn,rm).style.color="",sn==="#000000"&&gn==="#ffffff"||sn===gn)return St(this,qt);const Zn=new Array(256);for(let Rr=0;Rr<=255;Rr++){const qr=Rr/255;Zn[Rr]=qr<=.03928?qr/12.92:((qr+.055)/1.055)**2.4}const Xn=Zn.join(","),Pn=`g_${St(this,nn)}_hcm_filter`,or=zt(this,Yt,Ut(this,fn,$0).call(this,Pn));Ut(this,fn,vv).call(this,Xn,Xn,Xn,or),Ut(this,fn,IA).call(this,or);const nr=(Rr,qr)=>{const hr=$n[Rr]/255,wr=zn[Rr]/255,jr=new Array(qr+1);for(let is=0;is<=qr;is++)jr[is]=hr+is/qr*(wr-hr);return jr.join(",")};return Ut(this,fn,vv).call(this,nr(0,5),nr(1,5),nr(2,5),or),zt(this,qt,`url(#${Pn})`),St(this,qt)}addHighlightHCMFilter(sn,gn,Rn,$n){var wr;const zn=`${sn}-${gn}-${Rn}-${$n}`;if(St(this,tn)===zn)return St(this,dn);if(zt(this,tn,zn),zt(this,dn,"none"),(wr=St(this,Yt))==null||wr.remove(),!sn||!gn)return St(this,dn);const[Zn,Xn]=[sn,gn].map(Ut(this,fn,yv).bind(this));let Pn=Math.round(.2126*Zn[0]+.7152*Zn[1]+.0722*Zn[2]),or=Math.round(.2126*Xn[0]+.7152*Xn[1]+.0722*Xn[2]),[nr,$r]=[Rn,$n].map(Ut(this,fn,yv).bind(this));or<Pn&&([Pn,or,nr,$r]=[or,Pn,$r,nr]),St(this,fn,rm).style.color="";const Rr=(jr,is,Kn)=>{const kn=new Array(256),Fn=(or-Pn)/Kn,dr=jr/255,mr=(is-jr)/(255*Kn);let Pr=0;for(let vn=0;vn<=Kn;vn++){const Wn=Math.round(Pn+vn*Fn),sr=dr+vn*mr;for(let gr=Pr;gr<=Wn;gr++)kn[gr]=sr;Pr=Wn+1}for(let vn=Pr;vn<256;vn++)kn[vn]=kn[Pr-1];return kn.join(",")},qr=`g_${St(this,nn)}_hcm_highlight_filter`,hr=zt(this,Yt,Ut(this,fn,$0).call(this,qr));return Ut(this,fn,IA).call(this,hr),Ut(this,fn,vv).call(this,Rr(nr[0],$r[0],5),Rr(nr[1],$r[1],5),Rr(nr[2],$r[2],5),hr),zt(this,dn,`url(#${qr})`),St(this,dn)}destroy(sn=!1){sn&&(St(this,qt)||St(this,dn))||(St(this,hn)&&(St(this,hn).parentNode.parentNode.remove(),zt(this,hn,null)),St(this,un)&&(St(this,un).clear(),zt(this,un,null)),zt(this,cn,0))}}un=new WeakMap,hn=new WeakMap,nn=new WeakMap,mn=new WeakMap,xn=new WeakMap,rn=new WeakMap,qt=new WeakMap,Yt=new WeakMap,tn=new WeakMap,dn=new WeakMap,cn=new WeakMap,fn=new WeakSet,im=function(){return St(this,un)||zt(this,un,new Map)},rm=function(){if(!St(this,hn)){const sn=St(this,mn).createElement("div"),{style:gn}=sn;gn.visibility="hidden",gn.contain="strict",gn.width=gn.height=0,gn.position="absolute",gn.top=gn.left=0,gn.zIndex=-1;const Rn=St(this,mn).createElementNS(Et,"svg");Rn.setAttribute("width",0),Rn.setAttribute("height",0),zt(this,hn,St(this,mn).createElementNS(Et,"defs")),sn.append(Rn),Rn.append(St(this,hn)),St(this,mn).body.append(sn)}return St(this,hn)},IA=function(sn){const gn=St(this,mn).createElementNS(Et,"feColorMatrix");gn.setAttribute("type","matrix"),gn.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),sn.append(gn)},$0=function(sn){const gn=St(this,mn).createElementNS(Et,"filter");return gn.setAttribute("color-interpolation-filters","sRGB"),gn.setAttribute("id",sn),St(this,fn,rm).append(gn),gn},N0=function(sn,gn,Rn){const $n=St(this,mn).createElementNS(Et,gn);$n.setAttribute("type","discrete"),$n.setAttribute("tableValues",Rn),sn.append($n)},vv=function(sn,gn,Rn,$n){const zn=St(this,mn).createElementNS(Et,"feComponentTransfer");$n.append(zn),Ut(this,fn,N0).call(this,zn,"feFuncR",sn),Ut(this,fn,N0).call(this,zn,"feFuncG",gn),Ut(this,fn,N0).call(this,zn,"feFuncB",Rn)},yv=function(sn){return St(this,fn,rm).style.color=sn,Gt(getComputedStyle(St(this,fn,rm)).getPropertyValue("color"))},$.DOMFilterFactory=_t;class wt extends vt.BaseCanvasFactory{constructor({ownerDocument:On=globalThis.document}={}){super(),this._document=On}_createCanvas(On,sn){const gn=this._document.createElement("canvas");return gn.width=On,gn.height=sn,gn}}$.DOMCanvasFactory=wt;async function Ct(Dn,On=!1){if(Bt(Dn,document.baseURI)){const sn=await fetch(Dn);if(!sn.ok)throw new Error(sn.statusText);return On?new Uint8Array(await sn.arrayBuffer()):(0,bt.stringToBytes)(await sn.text())}return new Promise((sn,gn)=>{const Rn=new XMLHttpRequest;Rn.open("GET",Dn,!0),On&&(Rn.responseType="arraybuffer"),Rn.onreadystatechange=()=>{if(Rn.readyState===XMLHttpRequest.DONE){if(Rn.status===200||Rn.status===0){let $n;if(On&&Rn.response?$n=new Uint8Array(Rn.response):!On&&Rn.responseText&&($n=(0,bt.stringToBytes)(Rn.responseText)),$n){sn($n);return}}gn(new Error(Rn.statusText))}},Rn.send(null)})}class xt extends vt.BaseCMapReaderFactory{_fetchData(On,sn){return Ct(On,this.isCompressed).then(gn=>({cMapData:gn,compressionType:sn}))}}$.DOMCMapReaderFactory=xt;class Pt extends vt.BaseStandardFontDataFactory{_fetchData(On){return Ct(On,!0)}}$.DOMStandardFontDataFactory=Pt;class Rt extends vt.BaseSVGFactory{_createSVG(On){return document.createElementNS(Et,On)}}$.DOMSVGFactory=Rt;class kt{constructor({viewBox:On,scale:sn,rotation:gn,offsetX:Rn=0,offsetY:$n=0,dontFlip:zn=!1}){this.viewBox=On,this.scale=sn,this.rotation=gn,this.offsetX=Rn,this.offsetY=$n;const Zn=(On[2]+On[0])/2,Xn=(On[3]+On[1])/2;let Pn,or,nr,$r;switch(gn%=360,gn<0&&(gn+=360),gn){case 180:Pn=-1,or=0,nr=0,$r=1;break;case 90:Pn=0,or=1,nr=1,$r=0;break;case 270:Pn=0,or=-1,nr=-1,$r=0;break;case 0:Pn=1,or=0,nr=0,$r=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}zn&&(nr=-nr,$r=-$r);let Rr,qr,hr,wr;Pn===0?(Rr=Math.abs(Xn-On[1])*sn+Rn,qr=Math.abs(Zn-On[0])*sn+$n,hr=(On[3]-On[1])*sn,wr=(On[2]-On[0])*sn):(Rr=Math.abs(Zn-On[0])*sn+Rn,qr=Math.abs(Xn-On[1])*sn+$n,hr=(On[2]-On[0])*sn,wr=(On[3]-On[1])*sn),this.transform=[Pn*sn,or*sn,nr*sn,$r*sn,Rr-Pn*sn*Zn-nr*sn*Xn,qr-or*sn*Zn-$r*sn*Xn],this.width=hr,this.height=wr}get rawDims(){const{viewBox:On}=this;return(0,bt.shadow)(this,"rawDims",{pageWidth:On[2]-On[0],pageHeight:On[3]-On[1],pageX:On[0],pageY:On[1]})}clone({scale:On=this.scale,rotation:sn=this.rotation,offsetX:gn=this.offsetX,offsetY:Rn=this.offsetY,dontFlip:$n=!1}={}){return new kt({viewBox:this.viewBox.slice(),scale:On,rotation:sn,offsetX:gn,offsetY:Rn,dontFlip:$n})}convertToViewportPoint(On,sn){return bt.Util.applyTransform([On,sn],this.transform)}convertToViewportRectangle(On){const sn=bt.Util.applyTransform([On[0],On[1]],this.transform),gn=bt.Util.applyTransform([On[2],On[3]],this.transform);return[sn[0],sn[1],gn[0],gn[1]]}convertToPdfPoint(On,sn){return bt.Util.applyInverseTransform([On,sn],this.transform)}}$.PageViewport=kt;class Mt extends bt.BaseException{constructor(On,sn=0){super(On,"RenderingCancelledException"),this.extraDelay=sn}}$.RenderingCancelledException=Mt;function Lt(Dn){const On=Dn.length;let sn=0;for(;sn<On&&Dn[sn].trim()==="";)sn++;return Dn.substring(sn,sn+5).toLowerCase()==="data:"}function Ot(Dn){return typeof Dn=="string"&&/\.pdf$/i.test(Dn)}function Ft(Dn,On=!1){return On||([Dn]=Dn.split(/[#?]/,1)),Dn.substring(Dn.lastIndexOf("/")+1)}function Dt(Dn,On="document.pdf"){if(typeof Dn!="string")return On;if(Lt(Dn))return(0,bt.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),On;const sn=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,gn=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Rn=sn.exec(Dn);let $n=gn.exec(Rn[1])||gn.exec(Rn[2])||gn.exec(Rn[3]);if($n&&($n=$n[0],$n.includes("%")))try{$n=gn.exec(decodeURIComponent($n))[0]}catch{}return $n||On}class $t{constructor(){Sr(this,"started",Object.create(null));Sr(this,"times",[])}time(On){On in this.started&&(0,bt.warn)(`Timer is already running for ${On}`),this.started[On]=Date.now()}timeEnd(On){On in this.started||(0,bt.warn)(`Timer has not been started for ${On}`),this.times.push({name:On,start:this.started[On],end:Date.now()}),delete this.started[On]}toString(){const On=[];let sn=0;for(const{name:gn}of this.times)sn=Math.max(gn.length,sn);for(const{name:gn,start:Rn,end:$n}of this.times)On.push(`${gn.padEnd(sn)} ${$n-Rn}ms
`);return On.join("")}}$.StatTimer=$t;function Bt(Dn,On){try{const{protocol:sn}=On?new URL(Dn,On):new URL(Dn);return sn==="http:"||sn==="https:"}catch{return!1}}function Nt(Dn){Dn.preventDefault()}function Ht(Dn,On=!1){return new Promise((sn,gn)=>{const Rn=document.createElement("script");Rn.src=Dn,Rn.onload=function($n){On&&Rn.remove(),sn($n)},Rn.onerror=function(){gn(new Error(`Cannot load script at: ${Rn.src}`))},(document.head||document.documentElement).append(Rn)})}function Vt(Dn){console.log("Deprecated API usage: "+Dn)}let jt;class Xt{static toDateObject(On){if(!On||typeof On!="string")return null;jt||(jt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const sn=jt.exec(On);if(!sn)return null;const gn=parseInt(sn[1],10);let Rn=parseInt(sn[2],10);Rn=Rn>=1&&Rn<=12?Rn-1:0;let $n=parseInt(sn[3],10);$n=$n>=1&&$n<=31?$n:1;let zn=parseInt(sn[4],10);zn=zn>=0&&zn<=23?zn:0;let Zn=parseInt(sn[5],10);Zn=Zn>=0&&Zn<=59?Zn:0;let Xn=parseInt(sn[6],10);Xn=Xn>=0&&Xn<=59?Xn:0;const Pn=sn[7]||"Z";let or=parseInt(sn[8],10);or=or>=0&&or<=23?or:0;let nr=parseInt(sn[9],10)||0;return nr=nr>=0&&nr<=59?nr:0,Pn==="-"?(zn+=or,Zn+=nr):Pn==="+"&&(zn-=or,Zn-=nr),new Date(Date.UTC(gn,Rn,$n,zn,Zn,Xn))}}$.PDFDateString=Xt;function Jt(Dn,{scale:On=1,rotation:sn=0}){const{width:gn,height:Rn}=Dn.attributes.style,$n=[0,0,parseInt(gn),parseInt(Rn)];return new kt({viewBox:$n,scale:On,rotation:sn})}function Gt(Dn){if(Dn.startsWith("#")){const On=parseInt(Dn.slice(1),16);return[(On&16711680)>>16,(On&65280)>>8,On&255]}return Dn.startsWith("rgb(")?Dn.slice(4,-1).split(",").map(On=>parseInt(On)):Dn.startsWith("rgba(")?Dn.slice(5,-1).split(",").map(On=>parseInt(On)).slice(0,3):((0,bt.warn)(`Not a valid color format: "${Dn}"`),[0,0,0])}function en(Dn){const On=document.createElement("span");On.style.visibility="hidden",document.body.append(On);for(const sn of Dn.keys()){On.style.color=sn;const gn=window.getComputedStyle(On).color;Dn.set(sn,Gt(gn))}On.remove()}function on(Dn){const{a:On,b:sn,c:gn,d:Rn,e:$n,f:zn}=Dn.getTransform();return[On,sn,gn,Rn,$n,zn]}function _n(Dn){const{a:On,b:sn,c:gn,d:Rn,e:$n,f:zn}=Dn.getTransform().invertSelf();return[On,sn,gn,Rn,$n,zn]}function ln(Dn,On,sn=!1,gn=!0){if(On instanceof kt){const{pageWidth:Rn,pageHeight:$n}=On.rawDims,{style:zn}=Dn,Zn=bt.FeatureTest.isCSSRoundSupported,Xn=`var(--scale-factor) * ${Rn}px`,Pn=`var(--scale-factor) * ${$n}px`,or=Zn?`round(${Xn}, 1px)`:`calc(${Xn})`,nr=Zn?`round(${Pn}, 1px)`:`calc(${Pn})`;!sn||On.rotation%180===0?(zn.width=or,zn.height=nr):(zn.width=nr,zn.height=or)}gn&&Dn.setAttribute("data-main-rotation",On.rotation)}},(_e,$,ht)=>{Object.defineProperty($,"__esModule",{value:!0}),$.BaseStandardFontDataFactory=$.BaseSVGFactory=$.BaseFilterFactory=$.BaseCanvasFactory=$.BaseCMapReaderFactory=void 0;var vt=ht(1);class bt{constructor(){this.constructor===bt&&(0,vt.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(xt){return"none"}addHCMFilter(xt,Pt){return"none"}addHighlightHCMFilter(xt,Pt,Rt,kt){return"none"}destroy(xt=!1){}}$.BaseFilterFactory=bt;class Et{constructor(){this.constructor===Et&&(0,vt.unreachable)("Cannot initialize BaseCanvasFactory.")}create(xt,Pt){if(xt<=0||Pt<=0)throw new Error("Invalid canvas size");const Rt=this._createCanvas(xt,Pt);return{canvas:Rt,context:Rt.getContext("2d")}}reset(xt,Pt,Rt){if(!xt.canvas)throw new Error("Canvas is not specified");if(Pt<=0||Rt<=0)throw new Error("Invalid canvas size");xt.canvas.width=Pt,xt.canvas.height=Rt}destroy(xt){if(!xt.canvas)throw new Error("Canvas is not specified");xt.canvas.width=0,xt.canvas.height=0,xt.canvas=null,xt.context=null}_createCanvas(xt,Pt){(0,vt.unreachable)("Abstract method `_createCanvas` called.")}}$.BaseCanvasFactory=Et;class At{constructor({baseUrl:xt=null,isCompressed:Pt=!0}){this.constructor===At&&(0,vt.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=xt,this.isCompressed=Pt}async fetch({name:xt}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!xt)throw new Error("CMap name must be specified.");const Pt=this.baseUrl+xt+(this.isCompressed?".bcmap":""),Rt=this.isCompressed?vt.CMapCompressionType.BINARY:vt.CMapCompressionType.NONE;return this._fetchData(Pt,Rt).catch(kt=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${Pt}`)})}_fetchData(xt,Pt){(0,vt.unreachable)("Abstract method `_fetchData` called.")}}$.BaseCMapReaderFactory=At;class _t{constructor({baseUrl:xt=null}){this.constructor===_t&&(0,vt.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=xt}async fetch({filename:xt}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!xt)throw new Error("Font filename must be specified.");const Pt=`${this.baseUrl}${xt}`;return this._fetchData(Pt).catch(Rt=>{throw new Error(`Unable to load font data at: ${Pt}`)})}_fetchData(xt){(0,vt.unreachable)("Abstract method `_fetchData` called.")}}$.BaseStandardFontDataFactory=_t;class wt{constructor(){this.constructor===wt&&(0,vt.unreachable)("Cannot initialize BaseSVGFactory.")}create(xt,Pt,Rt=!1){if(xt<=0||Pt<=0)throw new Error("Invalid SVG dimensions");const kt=this._createSVG("svg:svg");return kt.setAttribute("version","1.1"),Rt||(kt.setAttribute("width",`${xt}px`),kt.setAttribute("height",`${Pt}px`)),kt.setAttribute("preserveAspectRatio","none"),kt.setAttribute("viewBox",`0 0 ${xt} ${Pt}`),kt}createElement(xt){if(typeof xt!="string")throw new Error("Invalid SVG element type");return this._createSVG(xt)}_createSVG(xt){(0,vt.unreachable)("Abstract method `_createSVG` called.")}}$.BaseSVGFactory=wt},(_e,$,ht)=>{Object.defineProperty($,"__esModule",{value:!0}),$.MurmurHash3_64=void 0;var vt=ht(1);const bt=3285377520,Et=4294901760,At=65535;class _t{constructor(Ct){this.h1=Ct?Ct&4294967295:bt,this.h2=Ct?Ct&4294967295:bt}update(Ct){let xt,Pt;if(typeof Ct=="string"){xt=new Uint8Array(Ct.length*2),Pt=0;for(let Vt=0,jt=Ct.length;Vt<jt;Vt++){const Xt=Ct.charCodeAt(Vt);Xt<=255?xt[Pt++]=Xt:(xt[Pt++]=Xt>>>8,xt[Pt++]=Xt&255)}}else if((0,vt.isArrayBuffer)(Ct))xt=Ct.slice(),Pt=xt.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const Rt=Pt>>2,kt=Pt-Rt*4,Mt=new Uint32Array(xt.buffer,0,Rt);let Lt=0,Ot=0,Ft=this.h1,Dt=this.h2;const $t=3432918353,Bt=461845907,Nt=$t&At,Ht=Bt&At;for(let Vt=0;Vt<Rt;Vt++)Vt&1?(Lt=Mt[Vt],Lt=Lt*$t&Et|Lt*Nt&At,Lt=Lt<<15|Lt>>>17,Lt=Lt*Bt&Et|Lt*Ht&At,Ft^=Lt,Ft=Ft<<13|Ft>>>19,Ft=Ft*5+3864292196):(Ot=Mt[Vt],Ot=Ot*$t&Et|Ot*Nt&At,Ot=Ot<<15|Ot>>>17,Ot=Ot*Bt&Et|Ot*Ht&At,Dt^=Ot,Dt=Dt<<13|Dt>>>19,Dt=Dt*5+3864292196);switch(Lt=0,kt){case 3:Lt^=xt[Rt*4+2]<<16;case 2:Lt^=xt[Rt*4+1]<<8;case 1:Lt^=xt[Rt*4],Lt=Lt*$t&Et|Lt*Nt&At,Lt=Lt<<15|Lt>>>17,Lt=Lt*Bt&Et|Lt*Ht&At,Rt&1?Ft^=Lt:Dt^=Lt}this.h1=Ft,this.h2=Dt}hexdigest(){let Ct=this.h1,xt=this.h2;return Ct^=xt>>>1,Ct=Ct*3981806797&Et|Ct*36045&At,xt=xt*4283543511&Et|((xt<<16|Ct>>>16)*2950163797&Et)>>>16,Ct^=xt>>>1,Ct=Ct*444984403&Et|Ct*60499&At,xt=xt*3301882366&Et|((xt<<16|Ct>>>16)*3120437893&Et)>>>16,Ct^=xt>>>1,(Ct>>>0).toString(16).padStart(8,"0")+(xt>>>0).toString(16).padStart(8,"0")}}$.MurmurHash3_64=_t},(_e,$,ht)=>{var At;Object.defineProperty($,"__esModule",{value:!0}),$.FontLoader=$.FontFaceObject=void 0;var vt=ht(1);class bt{constructor({ownerDocument:wt=globalThis.document,styleElement:Ct=null}){Kt(this,At,new Set);this._document=wt,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(wt){this.nativeFontFaces.add(wt),this._document.fonts.add(wt)}removeNativeFontFace(wt){this.nativeFontFaces.delete(wt),this._document.fonts.delete(wt)}insertRule(wt){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const Ct=this.styleElement.sheet;Ct.insertRule(wt,Ct.cssRules.length)}clear(){for(const wt of this.nativeFontFaces)this._document.fonts.delete(wt);this.nativeFontFaces.clear(),St(this,At).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(wt){if(!(!wt||St(this,At).has(wt.loadedName))){if((0,vt.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:Ct,src:xt,style:Pt}=wt,Rt=new FontFace(Ct,xt,Pt);this.addNativeFontFace(Rt);try{await Rt.load(),St(this,At).add(Ct)}catch{(0,vt.warn)(`Cannot load system font: ${wt.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(Rt)}return}(0,vt.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(wt){if(wt.attached||wt.missingFile&&!wt.systemFontInfo)return;if(wt.attached=!0,wt.systemFontInfo){await this.loadSystemFont(wt.systemFontInfo);return}if(this.isFontLoadingAPISupported){const xt=wt.createNativeFontFace();if(xt){this.addNativeFontFace(xt);try{await xt.loaded}catch(Pt){throw(0,vt.warn)(`Failed to load font '${xt.family}': '${Pt}'.`),wt.disableFontFace=!0,Pt}}return}const Ct=wt.createFontFaceRule();if(Ct){if(this.insertRule(Ct),this.isSyncFontLoadingSupported)return;await new Promise(xt=>{const Pt=this._queueLoadingCallback(xt);this._prepareFontLoadEvent(wt,Pt)})}}get isFontLoadingAPISupported(){var Ct;const wt=!!((Ct=this._document)!=null&&Ct.fonts);return(0,vt.shadow)(this,"isFontLoadingAPISupported",wt)}get isSyncFontLoadingSupported(){let wt=!1;return(vt.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(wt=!0),(0,vt.shadow)(this,"isSyncFontLoadingSupported",wt)}_queueLoadingCallback(wt){function Ct(){for((0,vt.assert)(!Pt.done,"completeRequest() cannot be called twice."),Pt.done=!0;xt.length>0&&xt[0].done;){const Rt=xt.shift();setTimeout(Rt.callback,0)}}const{loadingRequests:xt}=this,Pt={done:!1,complete:Ct,callback:wt};return xt.push(Pt),Pt}get _loadTestFont(){const wt=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,vt.shadow)(this,"_loadTestFont",wt)}_prepareFontLoadEvent(wt,Ct){function xt(Gt,en){return Gt.charCodeAt(en)<<24|Gt.charCodeAt(en+1)<<16|Gt.charCodeAt(en+2)<<8|Gt.charCodeAt(en+3)&255}function Pt(Gt,en,on,_n){const ln=Gt.substring(0,en),En=Gt.substring(en+on);return ln+_n+En}let Rt,kt;const Mt=this._document.createElement("canvas");Mt.width=1,Mt.height=1;const Lt=Mt.getContext("2d");let Ot=0;function Ft(Gt,en){if(++Ot>30){(0,vt.warn)("Load test font never loaded."),en();return}if(Lt.font="30px "+Gt,Lt.fillText(".",0,20),Lt.getImageData(0,0,1,1).data[3]>0){en();return}setTimeout(Ft.bind(null,Gt,en))}const Dt=`lt${Date.now()}${this.loadTestFontId++}`;let $t=this._loadTestFont;$t=Pt($t,976,Dt.length,Dt);const Nt=16,Ht=1482184792;let Vt=xt($t,Nt);for(Rt=0,kt=Dt.length-3;Rt<kt;Rt+=4)Vt=Vt-Ht+xt(Dt,Rt)|0;Rt<Dt.length&&(Vt=Vt-Ht+xt(Dt+"XXX",Rt)|0),$t=Pt($t,Nt,4,(0,vt.string32)(Vt));const jt=`url(data:font/opentype;base64,${btoa($t)});`,Xt=`@font-face {font-family:"${Dt}";src:${jt}}`;this.insertRule(Xt);const Jt=this._document.createElement("div");Jt.style.visibility="hidden",Jt.style.width=Jt.style.height="10px",Jt.style.position="absolute",Jt.style.top=Jt.style.left="0px";for(const Gt of[wt.loadedName,Dt]){const en=this._document.createElement("span");en.textContent="Hi",en.style.fontFamily=Gt,Jt.append(en)}this._document.body.append(Jt),Ft(Dt,()=>{Jt.remove(),Ct.complete()})}}At=new WeakMap,$.FontLoader=bt;class Et{constructor(wt,{isEvalSupported:Ct=!0,disableFontFace:xt=!1,ignoreErrors:Pt=!1,inspectFont:Rt=null}){this.compiledGlyphs=Object.create(null);for(const kt in wt)this[kt]=wt[kt];this.isEvalSupported=Ct!==!1,this.disableFontFace=xt===!0,this.ignoreErrors=Pt===!0,this._inspectFont=Rt}createNativeFontFace(){var Ct;if(!this.data||this.disableFontFace)return null;let wt;if(!this.cssFontInfo)wt=new FontFace(this.loadedName,this.data,{});else{const xt={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(xt.style=`oblique ${this.cssFontInfo.italicAngle}deg`),wt=new FontFace(this.cssFontInfo.fontFamily,this.data,xt)}return(Ct=this._inspectFont)==null||Ct.call(this,this),wt}createFontFaceRule(){var Pt;if(!this.data||this.disableFontFace)return null;const wt=(0,vt.bytesToString)(this.data),Ct=`url(data:${this.mimetype};base64,${btoa(wt)});`;let xt;if(!this.cssFontInfo)xt=`@font-face {font-family:"${this.loadedName}";src:${Ct}}`;else{let Rt=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(Rt+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),xt=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${Rt}src:${Ct}}`}return(Pt=this._inspectFont)==null||Pt.call(this,this,Ct),xt}getPathGenerator(wt,Ct){if(this.compiledGlyphs[Ct]!==void 0)return this.compiledGlyphs[Ct];let xt;try{xt=wt.get(this.loadedName+"_path_"+Ct)}catch(Pt){if(!this.ignoreErrors)throw Pt;return(0,vt.warn)(`getPathGenerator - ignoring character: "${Pt}".`),this.compiledGlyphs[Ct]=function(Rt,kt){}}if(this.isEvalSupported&&vt.FeatureTest.isEvalSupported){const Pt=[];for(const Rt of xt){const kt=Rt.args!==void 0?Rt.args.join(","):"";Pt.push("c.",Rt.cmd,"(",kt,`);
`)}return this.compiledGlyphs[Ct]=new Function("c","size",Pt.join(""))}return this.compiledGlyphs[Ct]=function(Pt,Rt){for(const kt of xt)kt.cmd==="scale"&&(kt.args=[Rt,-Rt]),Pt[kt.cmd].apply(Pt,kt.args)}}}$.FontFaceObject=Et},(_e,$,ht)=>{Object.defineProperty($,"__esModule",{value:!0}),$.NodeStandardFontDataFactory=$.NodeFilterFactory=$.NodeCanvasFactory=$.NodeCMapReaderFactory=void 0;var vt=ht(7);ht(1);const bt=function(Ct){return new Promise((xt,Pt)=>{require$$5.readFile(Ct,(kt,Mt)=>{if(kt||!Mt){Pt(new Error(kt));return}xt(new Uint8Array(Mt))})})};class Et extends vt.BaseFilterFactory{}$.NodeFilterFactory=Et;class At extends vt.BaseCanvasFactory{_createCanvas(xt,Pt){return require$$5.createCanvas(xt,Pt)}}$.NodeCanvasFactory=At;class _t extends vt.BaseCMapReaderFactory{_fetchData(xt,Pt){return bt(xt).then(Rt=>({cMapData:Rt,compressionType:Pt}))}}$.NodeCMapReaderFactory=_t;class wt extends vt.BaseStandardFontDataFactory{_fetchData(xt){return bt(xt)}}$.NodeStandardFontDataFactory=wt},(_e,$,ht)=>{var hn,OA,$A;Object.defineProperty($,"__esModule",{value:!0}),$.CanvasGraphics=void 0;var vt=ht(1),bt=ht(6),Et=ht(12),At=ht(13);const _t=16,wt=100,Ct=4096,xt=15,Pt=10,Rt=1e3,kt=16;function Mt(rn,qt){if(rn._removeMirroring)throw new Error("Context is already forwarding operations.");rn.__originalSave=rn.save,rn.__originalRestore=rn.restore,rn.__originalRotate=rn.rotate,rn.__originalScale=rn.scale,rn.__originalTranslate=rn.translate,rn.__originalTransform=rn.transform,rn.__originalSetTransform=rn.setTransform,rn.__originalResetTransform=rn.resetTransform,rn.__originalClip=rn.clip,rn.__originalMoveTo=rn.moveTo,rn.__originalLineTo=rn.lineTo,rn.__originalBezierCurveTo=rn.bezierCurveTo,rn.__originalRect=rn.rect,rn.__originalClosePath=rn.closePath,rn.__originalBeginPath=rn.beginPath,rn._removeMirroring=()=>{rn.save=rn.__originalSave,rn.restore=rn.__originalRestore,rn.rotate=rn.__originalRotate,rn.scale=rn.__originalScale,rn.translate=rn.__originalTranslate,rn.transform=rn.__originalTransform,rn.setTransform=rn.__originalSetTransform,rn.resetTransform=rn.__originalResetTransform,rn.clip=rn.__originalClip,rn.moveTo=rn.__originalMoveTo,rn.lineTo=rn.__originalLineTo,rn.bezierCurveTo=rn.__originalBezierCurveTo,rn.rect=rn.__originalRect,rn.closePath=rn.__originalClosePath,rn.beginPath=rn.__originalBeginPath,delete rn._removeMirroring},rn.save=function(){qt.save(),this.__originalSave()},rn.restore=function(){qt.restore(),this.__originalRestore()},rn.translate=function(tn,dn){qt.translate(tn,dn),this.__originalTranslate(tn,dn)},rn.scale=function(tn,dn){qt.scale(tn,dn),this.__originalScale(tn,dn)},rn.transform=function(tn,dn,cn,fn,Tn,Bn){qt.transform(tn,dn,cn,fn,Tn,Bn),this.__originalTransform(tn,dn,cn,fn,Tn,Bn)},rn.setTransform=function(tn,dn,cn,fn,Tn,Bn){qt.setTransform(tn,dn,cn,fn,Tn,Bn),this.__originalSetTransform(tn,dn,cn,fn,Tn,Bn)},rn.resetTransform=function(){qt.resetTransform(),this.__originalResetTransform()},rn.rotate=function(tn){qt.rotate(tn),this.__originalRotate(tn)},rn.clip=function(tn){qt.clip(tn),this.__originalClip(tn)},rn.moveTo=function(Yt,tn){qt.moveTo(Yt,tn),this.__originalMoveTo(Yt,tn)},rn.lineTo=function(Yt,tn){qt.lineTo(Yt,tn),this.__originalLineTo(Yt,tn)},rn.bezierCurveTo=function(Yt,tn,dn,cn,fn,Tn){qt.bezierCurveTo(Yt,tn,dn,cn,fn,Tn),this.__originalBezierCurveTo(Yt,tn,dn,cn,fn,Tn)},rn.rect=function(Yt,tn,dn,cn){qt.rect(Yt,tn,dn,cn),this.__originalRect(Yt,tn,dn,cn)},rn.closePath=function(){qt.closePath(),this.__originalClosePath()},rn.beginPath=function(){qt.beginPath(),this.__originalBeginPath()}}class Lt{constructor(qt){this.canvasFactory=qt,this.cache=Object.create(null)}getCanvas(qt,Yt,tn){let dn;return this.cache[qt]!==void 0?(dn=this.cache[qt],this.canvasFactory.reset(dn,Yt,tn)):(dn=this.canvasFactory.create(Yt,tn),this.cache[qt]=dn),dn}delete(qt){delete this.cache[qt]}clear(){for(const qt in this.cache){const Yt=this.cache[qt];this.canvasFactory.destroy(Yt),delete this.cache[qt]}}}function Ot(rn,qt,Yt,tn,dn,cn,fn,Tn,Bn,jn){const[Un,Gn,Yn,Qn,Dn,On]=(0,bt.getCurrentTransform)(rn);if(Gn===0&&Yn===0){const Rn=fn*Un+Dn,$n=Math.round(Rn),zn=Tn*Qn+On,Zn=Math.round(zn),Xn=(fn+Bn)*Un+Dn,Pn=Math.abs(Math.round(Xn)-$n)||1,or=(Tn+jn)*Qn+On,nr=Math.abs(Math.round(or)-Zn)||1;return rn.setTransform(Math.sign(Un),0,0,Math.sign(Qn),$n,Zn),rn.drawImage(qt,Yt,tn,dn,cn,0,0,Pn,nr),rn.setTransform(Un,Gn,Yn,Qn,Dn,On),[Pn,nr]}if(Un===0&&Qn===0){const Rn=Tn*Yn+Dn,$n=Math.round(Rn),zn=fn*Gn+On,Zn=Math.round(zn),Xn=(Tn+jn)*Yn+Dn,Pn=Math.abs(Math.round(Xn)-$n)||1,or=(fn+Bn)*Gn+On,nr=Math.abs(Math.round(or)-Zn)||1;return rn.setTransform(0,Math.sign(Gn),Math.sign(Yn),0,$n,Zn),rn.drawImage(qt,Yt,tn,dn,cn,0,0,nr,Pn),rn.setTransform(Un,Gn,Yn,Qn,Dn,On),[nr,Pn]}rn.drawImage(qt,Yt,tn,dn,cn,fn,Tn,Bn,jn);const sn=Math.hypot(Un,Gn),gn=Math.hypot(Yn,Qn);return[sn*Bn,gn*jn]}function Ft(rn){const{width:qt,height:Yt}=rn;if(qt>Rt||Yt>Rt)return null;const tn=1e3,dn=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),cn=qt+1;let fn=new Uint8Array(cn*(Yt+1)),Tn,Bn,jn;const Un=qt+7&-8;let Gn=new Uint8Array(Un*Yt),Yn=0;for(const gn of rn.data){let Rn=128;for(;Rn>0;)Gn[Yn++]=gn&Rn?0:255,Rn>>=1}let Qn=0;for(Yn=0,Gn[Yn]!==0&&(fn[0]=1,++Qn),Bn=1;Bn<qt;Bn++)Gn[Yn]!==Gn[Yn+1]&&(fn[Bn]=Gn[Yn]?2:1,++Qn),Yn++;for(Gn[Yn]!==0&&(fn[Bn]=2,++Qn),Tn=1;Tn<Yt;Tn++){Yn=Tn*Un,jn=Tn*cn,Gn[Yn-Un]!==Gn[Yn]&&(fn[jn]=Gn[Yn]?1:8,++Qn);let gn=(Gn[Yn]?4:0)+(Gn[Yn-Un]?8:0);for(Bn=1;Bn<qt;Bn++)gn=(gn>>2)+(Gn[Yn+1]?4:0)+(Gn[Yn-Un+1]?8:0),dn[gn]&&(fn[jn+Bn]=dn[gn],++Qn),Yn++;if(Gn[Yn-Un]!==Gn[Yn]&&(fn[jn+Bn]=Gn[Yn]?2:4,++Qn),Qn>tn)return null}for(Yn=Un*(Yt-1),jn=Tn*cn,Gn[Yn]!==0&&(fn[jn]=8,++Qn),Bn=1;Bn<qt;Bn++)Gn[Yn]!==Gn[Yn+1]&&(fn[jn+Bn]=Gn[Yn]?4:8,++Qn),Yn++;if(Gn[Yn]!==0&&(fn[jn+Bn]=4,++Qn),Qn>tn)return null;const Dn=new Int32Array([0,cn,-1,0,-cn,0,0,0,1]),On=new Path2D;for(Tn=0;Qn&&Tn<=Yt;Tn++){let gn=Tn*cn;const Rn=gn+qt;for(;gn<Rn&&!fn[gn];)gn++;if(gn===Rn)continue;On.moveTo(gn%cn,Tn);const $n=gn;let zn=fn[gn];do{const Zn=Dn[zn];do gn+=Zn;while(!fn[gn]);const Xn=fn[gn];Xn!==5&&Xn!==10?(zn=Xn,fn[gn]=0):(zn=Xn&51*zn>>4,fn[gn]&=zn>>2|zn<<2),On.lineTo(gn%cn,gn/cn|0),fn[gn]||--Qn}while($n!==gn);--Tn}return Gn=null,fn=null,function(gn){gn.save(),gn.scale(1/qt,-1/Yt),gn.translate(0,-Yt),gn.fill(On),gn.beginPath(),gn.restore()}}class Dt{constructor(qt,Yt){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=vt.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=vt.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=vt.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,qt,Yt])}clone(){const qt=Object.create(this);return qt.clipBox=this.clipBox.slice(),qt}setCurrentPoint(qt,Yt){this.x=qt,this.y=Yt}updatePathMinMax(qt,Yt,tn){[Yt,tn]=vt.Util.applyTransform([Yt,tn],qt),this.minX=Math.min(this.minX,Yt),this.minY=Math.min(this.minY,tn),this.maxX=Math.max(this.maxX,Yt),this.maxY=Math.max(this.maxY,tn)}updateRectMinMax(qt,Yt){const tn=vt.Util.applyTransform(Yt,qt),dn=vt.Util.applyTransform(Yt.slice(2),qt);this.minX=Math.min(this.minX,tn[0],dn[0]),this.minY=Math.min(this.minY,tn[1],dn[1]),this.maxX=Math.max(this.maxX,tn[0],dn[0]),this.maxY=Math.max(this.maxY,tn[1],dn[1])}updateScalingPathMinMax(qt,Yt){vt.Util.scaleMinMax(qt,Yt),this.minX=Math.min(this.minX,Yt[0]),this.maxX=Math.max(this.maxX,Yt[1]),this.minY=Math.min(this.minY,Yt[2]),this.maxY=Math.max(this.maxY,Yt[3])}updateCurvePathMinMax(qt,Yt,tn,dn,cn,fn,Tn,Bn,jn,Un){const Gn=vt.Util.bezierBoundingBox(Yt,tn,dn,cn,fn,Tn,Bn,jn);if(Un){Un[0]=Math.min(Un[0],Gn[0],Gn[2]),Un[1]=Math.max(Un[1],Gn[0],Gn[2]),Un[2]=Math.min(Un[2],Gn[1],Gn[3]),Un[3]=Math.max(Un[3],Gn[1],Gn[3]);return}this.updateRectMinMax(qt,Gn)}getPathBoundingBox(qt=Et.PathType.FILL,Yt=null){const tn=[this.minX,this.minY,this.maxX,this.maxY];if(qt===Et.PathType.STROKE){Yt||(0,vt.unreachable)("Stroke bounding box must include transform.");const dn=vt.Util.singularValueDecompose2dScale(Yt),cn=dn[0]*this.lineWidth/2,fn=dn[1]*this.lineWidth/2;tn[0]-=cn,tn[1]-=fn,tn[2]+=cn,tn[3]+=fn}return tn}updateClipFromPath(){const qt=vt.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(qt||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(qt){this.clipBox=qt,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(qt=Et.PathType.FILL,Yt=null){return vt.Util.intersect(this.clipBox,this.getPathBoundingBox(qt,Yt))}}function $t(rn,qt){if(typeof ImageData<"u"&&qt instanceof ImageData){rn.putImageData(qt,0,0);return}const Yt=qt.height,tn=qt.width,dn=Yt%kt,cn=(Yt-dn)/kt,fn=dn===0?cn:cn+1,Tn=rn.createImageData(tn,kt);let Bn=0,jn;const Un=qt.data,Gn=Tn.data;let Yn,Qn,Dn,On;if(qt.kind===vt.ImageKind.GRAYSCALE_1BPP){const sn=Un.byteLength,gn=new Uint32Array(Gn.buffer,0,Gn.byteLength>>2),Rn=gn.length,$n=tn+7>>3,zn=4294967295,Zn=vt.FeatureTest.isLittleEndian?4278190080:255;for(Yn=0;Yn<fn;Yn++){for(Dn=Yn<cn?kt:dn,jn=0,Qn=0;Qn<Dn;Qn++){const Xn=sn-Bn;let Pn=0;const or=Xn>$n?tn:Xn*8-7,nr=or&-8;let $r=0,Rr=0;for(;Pn<nr;Pn+=8)Rr=Un[Bn++],gn[jn++]=Rr&128?zn:Zn,gn[jn++]=Rr&64?zn:Zn,gn[jn++]=Rr&32?zn:Zn,gn[jn++]=Rr&16?zn:Zn,gn[jn++]=Rr&8?zn:Zn,gn[jn++]=Rr&4?zn:Zn,gn[jn++]=Rr&2?zn:Zn,gn[jn++]=Rr&1?zn:Zn;for(;Pn<or;Pn++)$r===0&&(Rr=Un[Bn++],$r=128),gn[jn++]=Rr&$r?zn:Zn,$r>>=1}for(;jn<Rn;)gn[jn++]=0;rn.putImageData(Tn,0,Yn*kt)}}else if(qt.kind===vt.ImageKind.RGBA_32BPP){for(Qn=0,On=tn*kt*4,Yn=0;Yn<cn;Yn++)Gn.set(Un.subarray(Bn,Bn+On)),Bn+=On,rn.putImageData(Tn,0,Qn),Qn+=kt;Yn<fn&&(On=tn*dn*4,Gn.set(Un.subarray(Bn,Bn+On)),rn.putImageData(Tn,0,Qn))}else if(qt.kind===vt.ImageKind.RGB_24BPP)for(Dn=kt,On=tn*Dn,Yn=0;Yn<fn;Yn++){for(Yn>=cn&&(Dn=dn,On=tn*Dn),jn=0,Qn=On;Qn--;)Gn[jn++]=Un[Bn++],Gn[jn++]=Un[Bn++],Gn[jn++]=Un[Bn++],Gn[jn++]=255;rn.putImageData(Tn,0,Yn*kt)}else throw new Error(`bad image kind: ${qt.kind}`)}function Bt(rn,qt){if(qt.bitmap){rn.drawImage(qt.bitmap,0,0);return}const Yt=qt.height,tn=qt.width,dn=Yt%kt,cn=(Yt-dn)/kt,fn=dn===0?cn:cn+1,Tn=rn.createImageData(tn,kt);let Bn=0;const jn=qt.data,Un=Tn.data;for(let Gn=0;Gn<fn;Gn++){const Yn=Gn<cn?kt:dn;({srcPos:Bn}=(0,At.convertBlackAndWhiteToRGBA)({src:jn,srcPos:Bn,dest:Un,width:tn,height:Yn,nonBlackColor:0})),rn.putImageData(Tn,0,Gn*kt)}}function Nt(rn,qt){const Yt=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const tn of Yt)rn[tn]!==void 0&&(qt[tn]=rn[tn]);rn.setLineDash!==void 0&&(qt.setLineDash(rn.getLineDash()),qt.lineDashOffset=rn.lineDashOffset)}function Ht(rn){if(rn.strokeStyle=rn.fillStyle="#000000",rn.fillRule="nonzero",rn.globalAlpha=1,rn.lineWidth=1,rn.lineCap="butt",rn.lineJoin="miter",rn.miterLimit=10,rn.globalCompositeOperation="source-over",rn.font="10px sans-serif",rn.setLineDash!==void 0&&(rn.setLineDash([]),rn.lineDashOffset=0),!vt.isNodeJS){const{filter:qt}=rn;qt!=="none"&&qt!==""&&(rn.filter="none")}}function Vt(rn,qt,Yt,tn){const dn=rn.length;for(let cn=3;cn<dn;cn+=4){const fn=rn[cn];if(fn===0)rn[cn-3]=qt,rn[cn-2]=Yt,rn[cn-1]=tn;else if(fn<255){const Tn=255-fn;rn[cn-3]=rn[cn-3]*fn+qt*Tn>>8,rn[cn-2]=rn[cn-2]*fn+Yt*Tn>>8,rn[cn-1]=rn[cn-1]*fn+tn*Tn>>8}}}function jt(rn,qt,Yt){const tn=rn.length,dn=1/255;for(let cn=3;cn<tn;cn+=4){const fn=Yt?Yt[rn[cn]]:rn[cn];qt[cn]=qt[cn]*fn*dn|0}}function Xt(rn,qt,Yt){const tn=rn.length;for(let dn=3;dn<tn;dn+=4){const cn=rn[dn-3]*77+rn[dn-2]*152+rn[dn-1]*28;qt[dn]=Yt?qt[dn]*Yt[cn>>8]>>8:qt[dn]*cn>>16}}function Jt(rn,qt,Yt,tn,dn,cn,fn,Tn,Bn,jn,Un){const Gn=!!cn,Yn=Gn?cn[0]:0,Qn=Gn?cn[1]:0,Dn=Gn?cn[2]:0,On=dn==="Luminosity"?Xt:jt,gn=Math.min(tn,Math.ceil(1048576/Yt));for(let Rn=0;Rn<tn;Rn+=gn){const $n=Math.min(gn,tn-Rn),zn=rn.getImageData(Tn-jn,Rn+(Bn-Un),Yt,$n),Zn=qt.getImageData(Tn,Rn+Bn,Yt,$n);Gn&&Vt(zn.data,Yn,Qn,Dn),On(zn.data,Zn.data,fn),qt.putImageData(Zn,Tn,Rn+Bn)}}function Gt(rn,qt,Yt,tn){const dn=tn[0],cn=tn[1],fn=tn[2]-dn,Tn=tn[3]-cn;fn===0||Tn===0||(Jt(qt.context,Yt,fn,Tn,qt.subtype,qt.backdrop,qt.transferMap,dn,cn,qt.offsetX,qt.offsetY),rn.save(),rn.globalAlpha=1,rn.globalCompositeOperation="source-over",rn.setTransform(1,0,0,1,0,0),rn.drawImage(Yt.canvas,0,0),rn.restore())}function en(rn,qt){const Yt=vt.Util.singularValueDecompose2dScale(rn);Yt[0]=Math.fround(Yt[0]),Yt[1]=Math.fround(Yt[1]);const tn=Math.fround((globalThis.devicePixelRatio||1)*bt.PixelsPerInch.PDF_TO_CSS_UNITS);return qt!==void 0?qt:Yt[0]<=tn||Yt[1]<=tn}const on=["butt","round","square"],_n=["miter","round","bevel"],ln={},En={},xn=class xn{constructor(qt,Yt,tn,dn,cn,{optionalContentConfig:fn,markedContentStack:Tn=null},Bn,jn){Kt(this,hn);this.ctx=qt,this.current=new Dt(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=Yt,this.objs=tn,this.canvasFactory=dn,this.filterFactory=cn,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Tn||[],this.optionalContentConfig=fn,this.cachedCanvases=new Lt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Bn,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=jn,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(qt,Yt=null){return typeof qt=="string"?qt.startsWith("g_")?this.commonObjs.get(qt):this.objs.get(qt):Yt}beginDrawing({transform:qt,viewport:Yt,transparency:tn=!1,background:dn=null}){const cn=this.ctx.canvas.width,fn=this.ctx.canvas.height,Tn=this.ctx.fillStyle;if(this.ctx.fillStyle=dn||"#ffffff",this.ctx.fillRect(0,0,cn,fn),this.ctx.fillStyle=Tn,tn){const Bn=this.cachedCanvases.getCanvas("transparent",cn,fn);this.compositeCtx=this.ctx,this.transparentCanvas=Bn.canvas,this.ctx=Bn.context,this.ctx.save(),this.ctx.transform(...(0,bt.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),Ht(this.ctx),qt&&(this.ctx.transform(...qt),this.outputScaleX=qt[0],this.outputScaleY=qt[0]),this.ctx.transform(...Yt.transform),this.viewportScale=Yt.scale,this.baseTransform=(0,bt.getCurrentTransform)(this.ctx)}executeOperatorList(qt,Yt,tn,dn){const cn=qt.argsArray,fn=qt.fnArray;let Tn=Yt||0;const Bn=cn.length;if(Bn===Tn)return Tn;const jn=Bn-Tn>Pt&&typeof tn=="function",Un=jn?Date.now()+xt:0;let Gn=0;const Yn=this.commonObjs,Qn=this.objs;let Dn;for(;;){if(dn!==void 0&&Tn===dn.nextBreakPoint)return dn.breakIt(Tn,tn),Tn;if(Dn=fn[Tn],Dn!==vt.OPS.dependency)this[Dn].apply(this,cn[Tn]);else for(const On of cn[Tn]){const sn=On.startsWith("g_")?Yn:Qn;if(!sn.has(On))return sn.get(On,tn),Tn}if(Tn++,Tn===Bn)return Tn;if(jn&&++Gn>Pt){if(Date.now()>Un)return tn(),Tn;Gn=0}}}endDrawing(){Ut(this,hn,OA).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const qt of this._cachedBitmapsMap.values()){for(const Yt of qt.values())typeof HTMLCanvasElement<"u"&&Yt instanceof HTMLCanvasElement&&(Yt.width=Yt.height=0);qt.clear()}this._cachedBitmapsMap.clear(),Ut(this,hn,$A).call(this)}_scaleImage(qt,Yt){const tn=qt.width,dn=qt.height;let cn=Math.max(Math.hypot(Yt[0],Yt[1]),1),fn=Math.max(Math.hypot(Yt[2],Yt[3]),1),Tn=tn,Bn=dn,jn="prescale1",Un,Gn;for(;cn>2&&Tn>1||fn>2&&Bn>1;){let Yn=Tn,Qn=Bn;cn>2&&Tn>1&&(Yn=Tn>=16384?Math.floor(Tn/2)-1||1:Math.ceil(Tn/2),cn/=Tn/Yn),fn>2&&Bn>1&&(Qn=Bn>=16384?Math.floor(Bn/2)-1||1:Math.ceil(Bn)/2,fn/=Bn/Qn),Un=this.cachedCanvases.getCanvas(jn,Yn,Qn),Gn=Un.context,Gn.clearRect(0,0,Yn,Qn),Gn.drawImage(qt,0,0,Tn,Bn,0,0,Yn,Qn),qt=Un.canvas,Tn=Yn,Bn=Qn,jn=jn==="prescale1"?"prescale2":"prescale1"}return{img:qt,paintWidth:Tn,paintHeight:Bn}}_createMaskCanvas(qt){const Yt=this.ctx,{width:tn,height:dn}=qt,cn=this.current.fillColor,fn=this.current.patternFill,Tn=(0,bt.getCurrentTransform)(Yt);let Bn,jn,Un,Gn;if((qt.bitmap||qt.data)&&qt.count>1){const Pn=qt.bitmap||qt.data.buffer;jn=JSON.stringify(fn?Tn:[Tn.slice(0,4),cn]),Bn=this._cachedBitmapsMap.get(Pn),Bn||(Bn=new Map,this._cachedBitmapsMap.set(Pn,Bn));const or=Bn.get(jn);if(or&&!fn){const nr=Math.round(Math.min(Tn[0],Tn[2])+Tn[4]),$r=Math.round(Math.min(Tn[1],Tn[3])+Tn[5]);return{canvas:or,offsetX:nr,offsetY:$r}}Un=or}Un||(Gn=this.cachedCanvases.getCanvas("maskCanvas",tn,dn),Bt(Gn.context,qt));let Yn=vt.Util.transform(Tn,[1/tn,0,0,-1/dn,0,0]);Yn=vt.Util.transform(Yn,[1,0,0,1,0,-dn]);const Qn=vt.Util.applyTransform([0,0],Yn),Dn=vt.Util.applyTransform([tn,dn],Yn),On=vt.Util.normalizeRect([Qn[0],Qn[1],Dn[0],Dn[1]]),sn=Math.round(On[2]-On[0])||1,gn=Math.round(On[3]-On[1])||1,Rn=this.cachedCanvases.getCanvas("fillCanvas",sn,gn),$n=Rn.context,zn=Math.min(Qn[0],Dn[0]),Zn=Math.min(Qn[1],Dn[1]);$n.translate(-zn,-Zn),$n.transform(...Yn),Un||(Un=this._scaleImage(Gn.canvas,(0,bt.getCurrentTransformInverse)($n)),Un=Un.img,Bn&&fn&&Bn.set(jn,Un)),$n.imageSmoothingEnabled=en((0,bt.getCurrentTransform)($n),qt.interpolate),Ot($n,Un,0,0,Un.width,Un.height,0,0,tn,dn),$n.globalCompositeOperation="source-in";const Xn=vt.Util.transform((0,bt.getCurrentTransformInverse)($n),[1,0,0,1,-zn,-Zn]);return $n.fillStyle=fn?cn.getPattern(Yt,this,Xn,Et.PathType.FILL):cn,$n.fillRect(0,0,tn,dn),Bn&&!fn&&(this.cachedCanvases.delete("fillCanvas"),Bn.set(jn,Rn.canvas)),{canvas:Rn.canvas,offsetX:Math.round(zn),offsetY:Math.round(Zn)}}setLineWidth(qt){qt!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=qt,this.ctx.lineWidth=qt}setLineCap(qt){this.ctx.lineCap=on[qt]}setLineJoin(qt){this.ctx.lineJoin=_n[qt]}setMiterLimit(qt){this.ctx.miterLimit=qt}setDash(qt,Yt){const tn=this.ctx;tn.setLineDash!==void 0&&(tn.setLineDash(qt),tn.lineDashOffset=Yt)}setRenderingIntent(qt){}setFlatness(qt){}setGState(qt){for(const[Yt,tn]of qt)switch(Yt){case"LW":this.setLineWidth(tn);break;case"LC":this.setLineCap(tn);break;case"LJ":this.setLineJoin(tn);break;case"ML":this.setMiterLimit(tn);break;case"D":this.setDash(tn[0],tn[1]);break;case"RI":this.setRenderingIntent(tn);break;case"FL":this.setFlatness(tn);break;case"Font":this.setFont(tn[0],tn[1]);break;case"CA":this.current.strokeAlpha=tn;break;case"ca":this.current.fillAlpha=tn,this.ctx.globalAlpha=tn;break;case"BM":this.ctx.globalCompositeOperation=tn;break;case"SMask":this.current.activeSMask=tn?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(tn);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const qt=this.inSMaskMode;this.current.activeSMask&&!qt?this.beginSMaskMode():!this.current.activeSMask&&qt&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const qt=this.ctx.canvas.width,Yt=this.ctx.canvas.height,tn="smaskGroupAt"+this.groupLevel,dn=this.cachedCanvases.getCanvas(tn,qt,Yt);this.suspendedCtx=this.ctx,this.ctx=dn.context;const cn=this.ctx;cn.setTransform(...(0,bt.getCurrentTransform)(this.suspendedCtx)),Nt(this.suspendedCtx,cn),Mt(cn,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Nt(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(qt){if(!this.current.activeSMask)return;qt?(qt[0]=Math.floor(qt[0]),qt[1]=Math.floor(qt[1]),qt[2]=Math.ceil(qt[2]),qt[3]=Math.ceil(qt[3])):qt=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const Yt=this.current.activeSMask,tn=this.suspendedCtx;Gt(tn,Yt,this.ctx,qt),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(Nt(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const qt=this.current;this.stateStack.push(qt),this.current=qt.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Nt(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(qt,Yt,tn,dn,cn,fn){this.ctx.transform(qt,Yt,tn,dn,cn,fn),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(qt,Yt,tn){const dn=this.ctx,cn=this.current;let fn=cn.x,Tn=cn.y,Bn,jn;const Un=(0,bt.getCurrentTransform)(dn),Gn=Un[0]===0&&Un[3]===0||Un[1]===0&&Un[2]===0,Yn=Gn?tn.slice(0):null;for(let Qn=0,Dn=0,On=qt.length;Qn<On;Qn++)switch(qt[Qn]|0){case vt.OPS.rectangle:fn=Yt[Dn++],Tn=Yt[Dn++];const sn=Yt[Dn++],gn=Yt[Dn++],Rn=fn+sn,$n=Tn+gn;dn.moveTo(fn,Tn),sn===0||gn===0?dn.lineTo(Rn,$n):(dn.lineTo(Rn,Tn),dn.lineTo(Rn,$n),dn.lineTo(fn,$n)),Gn||cn.updateRectMinMax(Un,[fn,Tn,Rn,$n]),dn.closePath();break;case vt.OPS.moveTo:fn=Yt[Dn++],Tn=Yt[Dn++],dn.moveTo(fn,Tn),Gn||cn.updatePathMinMax(Un,fn,Tn);break;case vt.OPS.lineTo:fn=Yt[Dn++],Tn=Yt[Dn++],dn.lineTo(fn,Tn),Gn||cn.updatePathMinMax(Un,fn,Tn);break;case vt.OPS.curveTo:Bn=fn,jn=Tn,fn=Yt[Dn+4],Tn=Yt[Dn+5],dn.bezierCurveTo(Yt[Dn],Yt[Dn+1],Yt[Dn+2],Yt[Dn+3],fn,Tn),cn.updateCurvePathMinMax(Un,Bn,jn,Yt[Dn],Yt[Dn+1],Yt[Dn+2],Yt[Dn+3],fn,Tn,Yn),Dn+=6;break;case vt.OPS.curveTo2:Bn=fn,jn=Tn,dn.bezierCurveTo(fn,Tn,Yt[Dn],Yt[Dn+1],Yt[Dn+2],Yt[Dn+3]),cn.updateCurvePathMinMax(Un,Bn,jn,fn,Tn,Yt[Dn],Yt[Dn+1],Yt[Dn+2],Yt[Dn+3],Yn),fn=Yt[Dn+2],Tn=Yt[Dn+3],Dn+=4;break;case vt.OPS.curveTo3:Bn=fn,jn=Tn,fn=Yt[Dn+2],Tn=Yt[Dn+3],dn.bezierCurveTo(Yt[Dn],Yt[Dn+1],fn,Tn,fn,Tn),cn.updateCurvePathMinMax(Un,Bn,jn,Yt[Dn],Yt[Dn+1],fn,Tn,fn,Tn,Yn),Dn+=4;break;case vt.OPS.closePath:dn.closePath();break}Gn&&cn.updateScalingPathMinMax(Un,Yn),cn.setCurrentPoint(fn,Tn)}closePath(){this.ctx.closePath()}stroke(qt=!0){const Yt=this.ctx,tn=this.current.strokeColor;Yt.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof tn=="object"&&(tn!=null&&tn.getPattern)?(Yt.save(),Yt.strokeStyle=tn.getPattern(Yt,this,(0,bt.getCurrentTransformInverse)(Yt),Et.PathType.STROKE),this.rescaleAndStroke(!1),Yt.restore()):this.rescaleAndStroke(!0)),qt&&this.consumePath(this.current.getClippedPathBoundingBox()),Yt.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(qt=!0){const Yt=this.ctx,tn=this.current.fillColor,dn=this.current.patternFill;let cn=!1;dn&&(Yt.save(),Yt.fillStyle=tn.getPattern(Yt,this,(0,bt.getCurrentTransformInverse)(Yt),Et.PathType.FILL),cn=!0);const fn=this.current.getClippedPathBoundingBox();this.contentVisible&&fn!==null&&(this.pendingEOFill?(Yt.fill("evenodd"),this.pendingEOFill=!1):Yt.fill()),cn&&Yt.restore(),qt&&this.consumePath(fn)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ln}eoClip(){this.pendingClip=En}beginText(){this.current.textMatrix=vt.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const qt=this.pendingTextPaths,Yt=this.ctx;if(qt===void 0){Yt.beginPath();return}Yt.save(),Yt.beginPath();for(const tn of qt)Yt.setTransform(...tn.transform),Yt.translate(tn.x,tn.y),tn.addToPath(Yt,tn.fontSize);Yt.restore(),Yt.clip(),Yt.beginPath(),delete this.pendingTextPaths}setCharSpacing(qt){this.current.charSpacing=qt}setWordSpacing(qt){this.current.wordSpacing=qt}setHScale(qt){this.current.textHScale=qt/100}setLeading(qt){this.current.leading=-qt}setFont(qt,Yt){var Un;const tn=this.commonObjs.get(qt),dn=this.current;if(!tn)throw new Error(`Can't find font for ${qt}`);if(dn.fontMatrix=tn.fontMatrix||vt.FONT_IDENTITY_MATRIX,(dn.fontMatrix[0]===0||dn.fontMatrix[3]===0)&&(0,vt.warn)("Invalid font matrix for font "+qt),Yt<0?(Yt=-Yt,dn.fontDirection=-1):dn.fontDirection=1,this.current.font=tn,this.current.fontSize=Yt,tn.isType3Font)return;const cn=tn.loadedName||"sans-serif",fn=((Un=tn.systemFontInfo)==null?void 0:Un.css)||`"${cn}", ${tn.fallbackName}`;let Tn="normal";tn.black?Tn="900":tn.bold&&(Tn="bold");const Bn=tn.italic?"italic":"normal";let jn=Yt;Yt<_t?jn=_t:Yt>wt&&(jn=wt),this.current.fontSizeScale=Yt/jn,this.ctx.font=`${Bn} ${Tn} ${jn}px ${fn}`}setTextRenderingMode(qt){this.current.textRenderingMode=qt}setTextRise(qt){this.current.textRise=qt}moveText(qt,Yt){this.current.x=this.current.lineX+=qt,this.current.y=this.current.lineY+=Yt}setLeadingMoveText(qt,Yt){this.setLeading(-Yt),this.moveText(qt,Yt)}setTextMatrix(qt,Yt,tn,dn,cn,fn){this.current.textMatrix=[qt,Yt,tn,dn,cn,fn],this.current.textMatrixScale=Math.hypot(qt,Yt),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(qt,Yt,tn,dn){const cn=this.ctx,fn=this.current,Tn=fn.font,Bn=fn.textRenderingMode,jn=fn.fontSize/fn.fontSizeScale,Un=Bn&vt.TextRenderingMode.FILL_STROKE_MASK,Gn=!!(Bn&vt.TextRenderingMode.ADD_TO_PATH_FLAG),Yn=fn.patternFill&&!Tn.missingFile;let Qn;(Tn.disableFontFace||Gn||Yn)&&(Qn=Tn.getPathGenerator(this.commonObjs,qt)),Tn.disableFontFace||Yn?(cn.save(),cn.translate(Yt,tn),cn.beginPath(),Qn(cn,jn),dn&&cn.setTransform(...dn),(Un===vt.TextRenderingMode.FILL||Un===vt.TextRenderingMode.FILL_STROKE)&&cn.fill(),(Un===vt.TextRenderingMode.STROKE||Un===vt.TextRenderingMode.FILL_STROKE)&&cn.stroke(),cn.restore()):((Un===vt.TextRenderingMode.FILL||Un===vt.TextRenderingMode.FILL_STROKE)&&cn.fillText(qt,Yt,tn),(Un===vt.TextRenderingMode.STROKE||Un===vt.TextRenderingMode.FILL_STROKE)&&cn.strokeText(qt,Yt,tn)),Gn&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,bt.getCurrentTransform)(cn),x:Yt,y:tn,fontSize:jn,addToPath:Qn})}get isFontSubpixelAAEnabled(){const{context:qt}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);qt.scale(1.5,1),qt.fillText("I",0,10);const Yt=qt.getImageData(0,0,10,10).data;let tn=!1;for(let dn=3;dn<Yt.length;dn+=4)if(Yt[dn]>0&&Yt[dn]<255){tn=!0;break}return(0,vt.shadow)(this,"isFontSubpixelAAEnabled",tn)}showText(qt){const Yt=this.current,tn=Yt.font;if(tn.isType3Font)return this.showType3Text(qt);const dn=Yt.fontSize;if(dn===0)return;const cn=this.ctx,fn=Yt.fontSizeScale,Tn=Yt.charSpacing,Bn=Yt.wordSpacing,jn=Yt.fontDirection,Un=Yt.textHScale*jn,Gn=qt.length,Yn=tn.vertical,Qn=Yn?1:-1,Dn=tn.defaultVMetrics,On=dn*Yt.fontMatrix[0],sn=Yt.textRenderingMode===vt.TextRenderingMode.FILL&&!tn.disableFontFace&&!Yt.patternFill;cn.save(),cn.transform(...Yt.textMatrix),cn.translate(Yt.x,Yt.y+Yt.textRise),jn>0?cn.scale(Un,-1):cn.scale(Un,1);let gn;if(Yt.patternFill){cn.save();const Xn=Yt.fillColor.getPattern(cn,this,(0,bt.getCurrentTransformInverse)(cn),Et.PathType.FILL);gn=(0,bt.getCurrentTransform)(cn),cn.restore(),cn.fillStyle=Xn}let Rn=Yt.lineWidth;const $n=Yt.textMatrixScale;if($n===0||Rn===0){const Xn=Yt.textRenderingMode&vt.TextRenderingMode.FILL_STROKE_MASK;(Xn===vt.TextRenderingMode.STROKE||Xn===vt.TextRenderingMode.FILL_STROKE)&&(Rn=this.getSinglePixelWidth())}else Rn/=$n;if(fn!==1&&(cn.scale(fn,fn),Rn/=fn),cn.lineWidth=Rn,tn.isInvalidPDFjsFont){const Xn=[];let Pn=0;for(const or of qt)Xn.push(or.unicode),Pn+=or.width;cn.fillText(Xn.join(""),0,0),Yt.x+=Pn*On*Un,cn.restore(),this.compose();return}let zn=0,Zn;for(Zn=0;Zn<Gn;++Zn){const Xn=qt[Zn];if(typeof Xn=="number"){zn+=Qn*Xn*dn/1e3;continue}let Pn=!1;const or=(Xn.isSpace?Bn:0)+Tn,nr=Xn.fontChar,$r=Xn.accent;let Rr,qr,hr=Xn.width;if(Yn){const jr=Xn.vmetric||Dn,is=-(Xn.vmetric?jr[1]:hr*.5)*On,Kn=jr[2]*On;hr=jr?-jr[0]:hr,Rr=is/fn,qr=(zn+Kn)/fn}else Rr=zn/fn,qr=0;if(tn.remeasure&&hr>0){const jr=cn.measureText(nr).width*1e3/dn*fn;if(hr<jr&&this.isFontSubpixelAAEnabled){const is=hr/jr;Pn=!0,cn.save(),cn.scale(is,1),Rr/=is}else hr!==jr&&(Rr+=(hr-jr)/2e3*dn/fn)}if(this.contentVisible&&(Xn.isInFont||tn.missingFile)){if(sn&&!$r)cn.fillText(nr,Rr,qr);else if(this.paintChar(nr,Rr,qr,gn),$r){const jr=Rr+dn*$r.offset.x/fn,is=qr-dn*$r.offset.y/fn;this.paintChar($r.fontChar,jr,is,gn)}}const wr=Yn?hr*On-or*jn:hr*On+or*jn;zn+=wr,Pn&&cn.restore()}Yn?Yt.y-=zn:Yt.x+=zn*Un,cn.restore(),this.compose()}showType3Text(qt){const Yt=this.ctx,tn=this.current,dn=tn.font,cn=tn.fontSize,fn=tn.fontDirection,Tn=dn.vertical?1:-1,Bn=tn.charSpacing,jn=tn.wordSpacing,Un=tn.textHScale*fn,Gn=tn.fontMatrix||vt.FONT_IDENTITY_MATRIX,Yn=qt.length,Qn=tn.textRenderingMode===vt.TextRenderingMode.INVISIBLE;let Dn,On,sn,gn;if(!(Qn||cn===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,Yt.save(),Yt.transform(...tn.textMatrix),Yt.translate(tn.x,tn.y),Yt.scale(Un,fn),Dn=0;Dn<Yn;++Dn){if(On=qt[Dn],typeof On=="number"){gn=Tn*On*cn/1e3,this.ctx.translate(gn,0),tn.x+=gn*Un;continue}const Rn=(On.isSpace?jn:0)+Bn,$n=dn.charProcOperatorList[On.operatorListId];if(!$n){(0,vt.warn)(`Type3 character "${On.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=On,this.save(),Yt.scale(cn,cn),Yt.transform(...Gn),this.executeOperatorList($n),this.restore()),sn=vt.Util.applyTransform([On.width,0],Gn)[0]*cn+Rn,Yt.translate(sn,0),tn.x+=sn*Un}Yt.restore(),this.processingType3=null}}setCharWidth(qt,Yt){}setCharWidthAndBounds(qt,Yt,tn,dn,cn,fn){this.ctx.rect(tn,dn,cn-tn,fn-dn),this.ctx.clip(),this.endPath()}getColorN_Pattern(qt){let Yt;if(qt[0]==="TilingPattern"){const tn=qt[1],dn=this.baseTransform||(0,bt.getCurrentTransform)(this.ctx),cn={createCanvasGraphics:fn=>new xn(fn,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};Yt=new Et.TilingPattern(qt,tn,this.ctx,cn,dn)}else Yt=this._getPattern(qt[1],qt[2]);return Yt}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(qt,Yt,tn){const dn=vt.Util.makeHexColor(qt,Yt,tn);this.ctx.strokeStyle=dn,this.current.strokeColor=dn}setFillRGBColor(qt,Yt,tn){const dn=vt.Util.makeHexColor(qt,Yt,tn);this.ctx.fillStyle=dn,this.current.fillColor=dn,this.current.patternFill=!1}_getPattern(qt,Yt=null){let tn;return this.cachedPatterns.has(qt)?tn=this.cachedPatterns.get(qt):(tn=(0,Et.getShadingPattern)(this.getObject(qt)),this.cachedPatterns.set(qt,tn)),Yt&&(tn.matrix=Yt),tn}shadingFill(qt){if(!this.contentVisible)return;const Yt=this.ctx;this.save();const tn=this._getPattern(qt);Yt.fillStyle=tn.getPattern(Yt,this,(0,bt.getCurrentTransformInverse)(Yt),Et.PathType.SHADING);const dn=(0,bt.getCurrentTransformInverse)(Yt);if(dn){const{width:cn,height:fn}=Yt.canvas,[Tn,Bn,jn,Un]=vt.Util.getAxialAlignedBoundingBox([0,0,cn,fn],dn);this.ctx.fillRect(Tn,Bn,jn-Tn,Un-Bn)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,vt.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,vt.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(qt,Yt){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(qt)&&qt.length===6&&this.transform(...qt),this.baseTransform=(0,bt.getCurrentTransform)(this.ctx),Yt)){const tn=Yt[2]-Yt[0],dn=Yt[3]-Yt[1];this.ctx.rect(Yt[0],Yt[1],tn,dn),this.current.updateRectMinMax((0,bt.getCurrentTransform)(this.ctx),Yt),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(qt){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const Yt=this.ctx;qt.isolated||(0,vt.info)("TODO: Support non-isolated groups."),qt.knockout&&(0,vt.warn)("Knockout groups not supported.");const tn=(0,bt.getCurrentTransform)(Yt);if(qt.matrix&&Yt.transform(...qt.matrix),!qt.bbox)throw new Error("Bounding box is required.");let dn=vt.Util.getAxialAlignedBoundingBox(qt.bbox,(0,bt.getCurrentTransform)(Yt));const cn=[0,0,Yt.canvas.width,Yt.canvas.height];dn=vt.Util.intersect(dn,cn)||[0,0,0,0];const fn=Math.floor(dn[0]),Tn=Math.floor(dn[1]);let Bn=Math.max(Math.ceil(dn[2])-fn,1),jn=Math.max(Math.ceil(dn[3])-Tn,1),Un=1,Gn=1;Bn>Ct&&(Un=Bn/Ct,Bn=Ct),jn>Ct&&(Gn=jn/Ct,jn=Ct),this.current.startNewPathAndClipBox([0,0,Bn,jn]);let Yn="groupAt"+this.groupLevel;qt.smask&&(Yn+="_smask_"+this.smaskCounter++%2);const Qn=this.cachedCanvases.getCanvas(Yn,Bn,jn),Dn=Qn.context;Dn.scale(1/Un,1/Gn),Dn.translate(-fn,-Tn),Dn.transform(...tn),qt.smask?this.smaskStack.push({canvas:Qn.canvas,context:Dn,offsetX:fn,offsetY:Tn,scaleX:Un,scaleY:Gn,subtype:qt.smask.subtype,backdrop:qt.smask.backdrop,transferMap:qt.smask.transferMap||null,startTransformInverse:null}):(Yt.setTransform(1,0,0,1,0,0),Yt.translate(fn,Tn),Yt.scale(Un,Gn),Yt.save()),Nt(Yt,Dn),this.ctx=Dn,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(Yt),this.groupLevel++}endGroup(qt){if(!this.contentVisible)return;this.groupLevel--;const Yt=this.ctx,tn=this.groupStack.pop();if(this.ctx=tn,this.ctx.imageSmoothingEnabled=!1,qt.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const dn=(0,bt.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...dn);const cn=vt.Util.getAxialAlignedBoundingBox([0,0,Yt.canvas.width,Yt.canvas.height],dn);this.ctx.drawImage(Yt.canvas,0,0),this.ctx.restore(),this.compose(cn)}}beginAnnotation(qt,Yt,tn,dn,cn){if(Ut(this,hn,OA).call(this),Ht(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(Yt)&&Yt.length===4){const fn=Yt[2]-Yt[0],Tn=Yt[3]-Yt[1];if(cn&&this.annotationCanvasMap){tn=tn.slice(),tn[4]-=Yt[0],tn[5]-=Yt[1],Yt=Yt.slice(),Yt[0]=Yt[1]=0,Yt[2]=fn,Yt[3]=Tn;const[Bn,jn]=vt.Util.singularValueDecompose2dScale((0,bt.getCurrentTransform)(this.ctx)),{viewportScale:Un}=this,Gn=Math.ceil(fn*this.outputScaleX*Un),Yn=Math.ceil(Tn*this.outputScaleY*Un);this.annotationCanvas=this.canvasFactory.create(Gn,Yn);const{canvas:Qn,context:Dn}=this.annotationCanvas;this.annotationCanvasMap.set(qt,Qn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Dn,this.ctx.save(),this.ctx.setTransform(Bn,0,0,-jn,0,Tn*jn),Ht(this.ctx)}else Ht(this.ctx),this.ctx.rect(Yt[0],Yt[1],fn,Tn),this.ctx.clip(),this.endPath()}this.current=new Dt(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...tn),this.transform(...dn)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Ut(this,hn,$A).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(qt){if(!this.contentVisible)return;const Yt=qt.count;qt=this.getObject(qt.data,qt),qt.count=Yt;const tn=this.ctx,dn=this.processingType3;if(dn&&(dn.compiled===void 0&&(dn.compiled=Ft(qt)),dn.compiled)){dn.compiled(tn);return}const cn=this._createMaskCanvas(qt),fn=cn.canvas;tn.save(),tn.setTransform(1,0,0,1,0,0),tn.drawImage(fn,cn.offsetX,cn.offsetY),tn.restore(),this.compose()}paintImageMaskXObjectRepeat(qt,Yt,tn=0,dn=0,cn,fn){if(!this.contentVisible)return;qt=this.getObject(qt.data,qt);const Tn=this.ctx;Tn.save();const Bn=(0,bt.getCurrentTransform)(Tn);Tn.transform(Yt,tn,dn,cn,0,0);const jn=this._createMaskCanvas(qt);Tn.setTransform(1,0,0,1,jn.offsetX-Bn[4],jn.offsetY-Bn[5]);for(let Un=0,Gn=fn.length;Un<Gn;Un+=2){const Yn=vt.Util.transform(Bn,[Yt,tn,dn,cn,fn[Un],fn[Un+1]]),[Qn,Dn]=vt.Util.applyTransform([0,0],Yn);Tn.drawImage(jn.canvas,Qn,Dn)}Tn.restore(),this.compose()}paintImageMaskXObjectGroup(qt){if(!this.contentVisible)return;const Yt=this.ctx,tn=this.current.fillColor,dn=this.current.patternFill;for(const cn of qt){const{data:fn,width:Tn,height:Bn,transform:jn}=cn,Un=this.cachedCanvases.getCanvas("maskCanvas",Tn,Bn),Gn=Un.context;Gn.save();const Yn=this.getObject(fn,cn);Bt(Gn,Yn),Gn.globalCompositeOperation="source-in",Gn.fillStyle=dn?tn.getPattern(Gn,this,(0,bt.getCurrentTransformInverse)(Yt),Et.PathType.FILL):tn,Gn.fillRect(0,0,Tn,Bn),Gn.restore(),Yt.save(),Yt.transform(...jn),Yt.scale(1,-1),Ot(Yt,Un.canvas,0,0,Tn,Bn,0,-1,1,1),Yt.restore()}this.compose()}paintImageXObject(qt){if(!this.contentVisible)return;const Yt=this.getObject(qt);if(!Yt){(0,vt.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(Yt)}paintImageXObjectRepeat(qt,Yt,tn,dn){if(!this.contentVisible)return;const cn=this.getObject(qt);if(!cn){(0,vt.warn)("Dependent image isn't ready yet");return}const fn=cn.width,Tn=cn.height,Bn=[];for(let jn=0,Un=dn.length;jn<Un;jn+=2)Bn.push({transform:[Yt,0,0,tn,dn[jn],dn[jn+1]],x:0,y:0,w:fn,h:Tn});this.paintInlineImageXObjectGroup(cn,Bn)}applyTransferMapsToCanvas(qt){return this.current.transferMaps!=="none"&&(qt.filter=this.current.transferMaps,qt.drawImage(qt.canvas,0,0),qt.filter="none"),qt.canvas}applyTransferMapsToBitmap(qt){if(this.current.transferMaps==="none")return qt.bitmap;const{bitmap:Yt,width:tn,height:dn}=qt,cn=this.cachedCanvases.getCanvas("inlineImage",tn,dn),fn=cn.context;return fn.filter=this.current.transferMaps,fn.drawImage(Yt,0,0),fn.filter="none",cn.canvas}paintInlineImageXObject(qt){if(!this.contentVisible)return;const Yt=qt.width,tn=qt.height,dn=this.ctx;if(this.save(),!vt.isNodeJS){const{filter:Tn}=dn;Tn!=="none"&&Tn!==""&&(dn.filter="none")}dn.scale(1/Yt,-1/tn);let cn;if(qt.bitmap)cn=this.applyTransferMapsToBitmap(qt);else if(typeof HTMLElement=="function"&&qt instanceof HTMLElement||!qt.data)cn=qt;else{const Bn=this.cachedCanvases.getCanvas("inlineImage",Yt,tn).context;$t(Bn,qt),cn=this.applyTransferMapsToCanvas(Bn)}const fn=this._scaleImage(cn,(0,bt.getCurrentTransformInverse)(dn));dn.imageSmoothingEnabled=en((0,bt.getCurrentTransform)(dn),qt.interpolate),Ot(dn,fn.img,0,0,fn.paintWidth,fn.paintHeight,0,-tn,Yt,tn),this.compose(),this.restore()}paintInlineImageXObjectGroup(qt,Yt){if(!this.contentVisible)return;const tn=this.ctx;let dn;if(qt.bitmap)dn=qt.bitmap;else{const cn=qt.width,fn=qt.height,Bn=this.cachedCanvases.getCanvas("inlineImage",cn,fn).context;$t(Bn,qt),dn=this.applyTransferMapsToCanvas(Bn)}for(const cn of Yt)tn.save(),tn.transform(...cn.transform),tn.scale(1,-1),Ot(tn,dn,cn.x,cn.y,cn.w,cn.h,0,-1,1,1),tn.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(qt){}markPointProps(qt,Yt){}beginMarkedContent(qt){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(qt,Yt){qt==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(Yt)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(qt){const Yt=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(qt);const tn=this.ctx;this.pendingClip&&(Yt||(this.pendingClip===En?tn.clip("evenodd"):tn.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),tn.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const qt=(0,bt.getCurrentTransform)(this.ctx);if(qt[1]===0&&qt[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(qt[0]),Math.abs(qt[3]));else{const Yt=Math.abs(qt[0]*qt[3]-qt[2]*qt[1]),tn=Math.hypot(qt[0],qt[2]),dn=Math.hypot(qt[1],qt[3]);this._cachedGetSinglePixelWidth=Math.max(tn,dn)/Yt}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:qt}=this.current,{a:Yt,b:tn,c:dn,d:cn}=this.ctx.getTransform();let fn,Tn;if(tn===0&&dn===0){const Bn=Math.abs(Yt),jn=Math.abs(cn);if(Bn===jn)if(qt===0)fn=Tn=1/Bn;else{const Un=Bn*qt;fn=Tn=Un<1?1/Un:1}else if(qt===0)fn=1/Bn,Tn=1/jn;else{const Un=Bn*qt,Gn=jn*qt;fn=Un<1?1/Un:1,Tn=Gn<1?1/Gn:1}}else{const Bn=Math.abs(Yt*cn-tn*dn),jn=Math.hypot(Yt,tn),Un=Math.hypot(dn,cn);if(qt===0)fn=Un/Bn,Tn=jn/Bn;else{const Gn=qt*Bn;fn=Un>Gn?Un/Gn:1,Tn=jn>Gn?jn/Gn:1}}this._cachedScaleForStroking[0]=fn,this._cachedScaleForStroking[1]=Tn}return this._cachedScaleForStroking}rescaleAndStroke(qt){const{ctx:Yt}=this,{lineWidth:tn}=this.current,[dn,cn]=this.getScaleForStroking();if(Yt.lineWidth=tn||1,dn===1&&cn===1){Yt.stroke();return}const fn=Yt.getLineDash();if(qt&&Yt.save(),Yt.scale(dn,cn),fn.length>0){const Tn=Math.max(dn,cn);Yt.setLineDash(fn.map(Bn=>Bn/Tn)),Yt.lineDashOffset/=Tn}Yt.stroke(),qt&&Yt.restore()}isContentVisible(){for(let qt=this.markedContentStack.length-1;qt>=0;qt--)if(!this.markedContentStack[qt].visible)return!1;return!0}};hn=new WeakSet,OA=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},$A=function(){if(this.pageColors){const qt=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(qt!=="none"){const Yt=this.ctx.filter;this.ctx.filter=qt,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=Yt}}};let un=xn;$.CanvasGraphics=un;for(const rn in vt.OPS)un.prototype[rn]!==void 0&&(un.prototype[vt.OPS[rn]]=un.prototype[rn])},(_e,$,ht)=>{Object.defineProperty($,"__esModule",{value:!0}),$.TilingPattern=$.PathType=void 0,$.getShadingPattern=kt;var vt=ht(1),bt=ht(6);const Et={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};$.PathType=Et;function At(Ft,Dt){if(!Dt)return;const $t=Dt[2]-Dt[0],Bt=Dt[3]-Dt[1],Nt=new Path2D;Nt.rect(Dt[0],Dt[1],$t,Bt),Ft.clip(Nt)}class _t{constructor(){this.constructor===_t&&(0,vt.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,vt.unreachable)("Abstract method `getPattern` called.")}}class wt extends _t{constructor(Dt){super(),this._type=Dt[1],this._bbox=Dt[2],this._colorStops=Dt[3],this._p0=Dt[4],this._p1=Dt[5],this._r0=Dt[6],this._r1=Dt[7],this.matrix=null}_createGradient(Dt){let $t;this._type==="axial"?$t=Dt.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&($t=Dt.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const Bt of this._colorStops)$t.addColorStop(Bt[0],Bt[1]);return $t}getPattern(Dt,$t,Bt,Nt){let Ht;if(Nt===Et.STROKE||Nt===Et.FILL){const Vt=$t.current.getClippedPathBoundingBox(Nt,(0,bt.getCurrentTransform)(Dt))||[0,0,0,0],jt=Math.ceil(Vt[2]-Vt[0])||1,Xt=Math.ceil(Vt[3]-Vt[1])||1,Jt=$t.cachedCanvases.getCanvas("pattern",jt,Xt,!0),Gt=Jt.context;Gt.clearRect(0,0,Gt.canvas.width,Gt.canvas.height),Gt.beginPath(),Gt.rect(0,0,Gt.canvas.width,Gt.canvas.height),Gt.translate(-Vt[0],-Vt[1]),Bt=vt.Util.transform(Bt,[1,0,0,1,Vt[0],Vt[1]]),Gt.transform(...$t.baseTransform),this.matrix&&Gt.transform(...this.matrix),At(Gt,this._bbox),Gt.fillStyle=this._createGradient(Gt),Gt.fill(),Ht=Dt.createPattern(Jt.canvas,"no-repeat");const en=new DOMMatrix(Bt);Ht.setTransform(en)}else At(Dt,this._bbox),Ht=this._createGradient(Dt);return Ht}}function Ct(Ft,Dt,$t,Bt,Nt,Ht,Vt,jt){const Xt=Dt.coords,Jt=Dt.colors,Gt=Ft.data,en=Ft.width*4;let on;Xt[$t+1]>Xt[Bt+1]&&(on=$t,$t=Bt,Bt=on,on=Ht,Ht=Vt,Vt=on),Xt[Bt+1]>Xt[Nt+1]&&(on=Bt,Bt=Nt,Nt=on,on=Vt,Vt=jt,jt=on),Xt[$t+1]>Xt[Bt+1]&&(on=$t,$t=Bt,Bt=on,on=Ht,Ht=Vt,Vt=on);const _n=(Xt[$t]+Dt.offsetX)*Dt.scaleX,ln=(Xt[$t+1]+Dt.offsetY)*Dt.scaleY,En=(Xt[Bt]+Dt.offsetX)*Dt.scaleX,un=(Xt[Bt+1]+Dt.offsetY)*Dt.scaleY,hn=(Xt[Nt]+Dt.offsetX)*Dt.scaleX,nn=(Xt[Nt+1]+Dt.offsetY)*Dt.scaleY;if(ln>=nn)return;const mn=Jt[Ht],xn=Jt[Ht+1],rn=Jt[Ht+2],qt=Jt[Vt],Yt=Jt[Vt+1],tn=Jt[Vt+2],dn=Jt[jt],cn=Jt[jt+1],fn=Jt[jt+2],Tn=Math.round(ln),Bn=Math.round(nn);let jn,Un,Gn,Yn,Qn,Dn,On,sn;for(let gn=Tn;gn<=Bn;gn++){if(gn<un){const Xn=gn<ln?0:(ln-gn)/(ln-un);jn=_n-(_n-En)*Xn,Un=mn-(mn-qt)*Xn,Gn=xn-(xn-Yt)*Xn,Yn=rn-(rn-tn)*Xn}else{let Xn;gn>nn?Xn=1:un===nn?Xn=0:Xn=(un-gn)/(un-nn),jn=En-(En-hn)*Xn,Un=qt-(qt-dn)*Xn,Gn=Yt-(Yt-cn)*Xn,Yn=tn-(tn-fn)*Xn}let Rn;gn<ln?Rn=0:gn>nn?Rn=1:Rn=(ln-gn)/(ln-nn),Qn=_n-(_n-hn)*Rn,Dn=mn-(mn-dn)*Rn,On=xn-(xn-cn)*Rn,sn=rn-(rn-fn)*Rn;const $n=Math.round(Math.min(jn,Qn)),zn=Math.round(Math.max(jn,Qn));let Zn=en*gn+$n*4;for(let Xn=$n;Xn<=zn;Xn++)Rn=(jn-Xn)/(jn-Qn),Rn<0?Rn=0:Rn>1&&(Rn=1),Gt[Zn++]=Un-(Un-Dn)*Rn|0,Gt[Zn++]=Gn-(Gn-On)*Rn|0,Gt[Zn++]=Yn-(Yn-sn)*Rn|0,Gt[Zn++]=255}}function xt(Ft,Dt,$t){const Bt=Dt.coords,Nt=Dt.colors;let Ht,Vt;switch(Dt.type){case"lattice":const jt=Dt.verticesPerRow,Xt=Math.floor(Bt.length/jt)-1,Jt=jt-1;for(Ht=0;Ht<Xt;Ht++){let Gt=Ht*jt;for(let en=0;en<Jt;en++,Gt++)Ct(Ft,$t,Bt[Gt],Bt[Gt+1],Bt[Gt+jt],Nt[Gt],Nt[Gt+1],Nt[Gt+jt]),Ct(Ft,$t,Bt[Gt+jt+1],Bt[Gt+1],Bt[Gt+jt],Nt[Gt+jt+1],Nt[Gt+1],Nt[Gt+jt])}break;case"triangles":for(Ht=0,Vt=Bt.length;Ht<Vt;Ht+=3)Ct(Ft,$t,Bt[Ht],Bt[Ht+1],Bt[Ht+2],Nt[Ht],Nt[Ht+1],Nt[Ht+2]);break;default:throw new Error("illegal figure")}}class Pt extends _t{constructor(Dt){super(),this._coords=Dt[2],this._colors=Dt[3],this._figures=Dt[4],this._bounds=Dt[5],this._bbox=Dt[7],this._background=Dt[8],this.matrix=null}_createMeshCanvas(Dt,$t,Bt){const jt=Math.floor(this._bounds[0]),Xt=Math.floor(this._bounds[1]),Jt=Math.ceil(this._bounds[2])-jt,Gt=Math.ceil(this._bounds[3])-Xt,en=Math.min(Math.ceil(Math.abs(Jt*Dt[0]*1.1)),3e3),on=Math.min(Math.ceil(Math.abs(Gt*Dt[1]*1.1)),3e3),_n=Jt/en,ln=Gt/on,En={coords:this._coords,colors:this._colors,offsetX:-jt,offsetY:-Xt,scaleX:1/_n,scaleY:1/ln},un=en+2*2,hn=on+2*2,nn=Bt.getCanvas("mesh",un,hn,!1),mn=nn.context,xn=mn.createImageData(en,on);if($t){const qt=xn.data;for(let Yt=0,tn=qt.length;Yt<tn;Yt+=4)qt[Yt]=$t[0],qt[Yt+1]=$t[1],qt[Yt+2]=$t[2],qt[Yt+3]=255}for(const qt of this._figures)xt(xn,qt,En);return mn.putImageData(xn,2,2),{canvas:nn.canvas,offsetX:jt-2*_n,offsetY:Xt-2*ln,scaleX:_n,scaleY:ln}}getPattern(Dt,$t,Bt,Nt){At(Dt,this._bbox);let Ht;if(Nt===Et.SHADING)Ht=vt.Util.singularValueDecompose2dScale((0,bt.getCurrentTransform)(Dt));else if(Ht=vt.Util.singularValueDecompose2dScale($t.baseTransform),this.matrix){const jt=vt.Util.singularValueDecompose2dScale(this.matrix);Ht=[Ht[0]*jt[0],Ht[1]*jt[1]]}const Vt=this._createMeshCanvas(Ht,Nt===Et.SHADING?null:this._background,$t.cachedCanvases);return Nt!==Et.SHADING&&(Dt.setTransform(...$t.baseTransform),this.matrix&&Dt.transform(...this.matrix)),Dt.translate(Vt.offsetX,Vt.offsetY),Dt.scale(Vt.scaleX,Vt.scaleY),Dt.createPattern(Vt.canvas,"no-repeat")}}class Rt extends _t{getPattern(){return"hotpink"}}function kt(Ft){switch(Ft[0]){case"RadialAxial":return new wt(Ft);case"Mesh":return new Pt(Ft);case"Dummy":return new Rt}throw new Error(`Unknown IR type: ${Ft[0]}`)}const Mt={COLORED:1,UNCOLORED:2},Ot=class Ot{constructor(Dt,$t,Bt,Nt,Ht){this.operatorList=Dt[2],this.matrix=Dt[3]||[1,0,0,1,0,0],this.bbox=Dt[4],this.xstep=Dt[5],this.ystep=Dt[6],this.paintType=Dt[7],this.tilingType=Dt[8],this.color=$t,this.ctx=Bt,this.canvasGraphicsFactory=Nt,this.baseTransform=Ht}createPatternCanvas(Dt){const $t=this.operatorList,Bt=this.bbox,Nt=this.xstep,Ht=this.ystep,Vt=this.paintType,jt=this.tilingType,Xt=this.color,Jt=this.canvasGraphicsFactory;(0,vt.info)("TilingType: "+jt);const Gt=Bt[0],en=Bt[1],on=Bt[2],_n=Bt[3],ln=vt.Util.singularValueDecompose2dScale(this.matrix),En=vt.Util.singularValueDecompose2dScale(this.baseTransform),un=[ln[0]*En[0],ln[1]*En[1]],hn=this.getSizeAndScale(Nt,this.ctx.canvas.width,un[0]),nn=this.getSizeAndScale(Ht,this.ctx.canvas.height,un[1]),mn=Dt.cachedCanvases.getCanvas("pattern",hn.size,nn.size,!0),xn=mn.context,rn=Jt.createCanvasGraphics(xn);rn.groupLevel=Dt.groupLevel,this.setFillAndStrokeStyleToContext(rn,Vt,Xt);let qt=Gt,Yt=en,tn=on,dn=_n;return Gt<0&&(qt=0,tn+=Math.abs(Gt)),en<0&&(Yt=0,dn+=Math.abs(en)),xn.translate(-(hn.scale*qt),-(nn.scale*Yt)),rn.transform(hn.scale,0,0,nn.scale,0,0),xn.save(),this.clipBbox(rn,qt,Yt,tn,dn),rn.baseTransform=(0,bt.getCurrentTransform)(rn.ctx),rn.executeOperatorList($t),rn.endDrawing(),{canvas:mn.canvas,scaleX:hn.scale,scaleY:nn.scale,offsetX:qt,offsetY:Yt}}getSizeAndScale(Dt,$t,Bt){Dt=Math.abs(Dt);const Nt=Math.max(Ot.MAX_PATTERN_SIZE,$t);let Ht=Math.ceil(Dt*Bt);return Ht>=Nt?Ht=Nt:Bt=Ht/Dt,{scale:Bt,size:Ht}}clipBbox(Dt,$t,Bt,Nt,Ht){const Vt=Nt-$t,jt=Ht-Bt;Dt.ctx.rect($t,Bt,Vt,jt),Dt.current.updateRectMinMax((0,bt.getCurrentTransform)(Dt.ctx),[$t,Bt,Nt,Ht]),Dt.clip(),Dt.endPath()}setFillAndStrokeStyleToContext(Dt,$t,Bt){const Nt=Dt.ctx,Ht=Dt.current;switch($t){case Mt.COLORED:const Vt=this.ctx;Nt.fillStyle=Vt.fillStyle,Nt.strokeStyle=Vt.strokeStyle,Ht.fillColor=Vt.fillStyle,Ht.strokeColor=Vt.strokeStyle;break;case Mt.UNCOLORED:const jt=vt.Util.makeHexColor(Bt[0],Bt[1],Bt[2]);Nt.fillStyle=jt,Nt.strokeStyle=jt,Ht.fillColor=jt,Ht.strokeColor=jt;break;default:throw new vt.FormatError(`Unsupported paint type: ${$t}`)}}getPattern(Dt,$t,Bt,Nt){let Ht=Bt;Nt!==Et.SHADING&&(Ht=vt.Util.transform(Ht,$t.baseTransform),this.matrix&&(Ht=vt.Util.transform(Ht,this.matrix)));const Vt=this.createPatternCanvas($t);let jt=new DOMMatrix(Ht);jt=jt.translate(Vt.offsetX,Vt.offsetY),jt=jt.scale(1/Vt.scaleX,1/Vt.scaleY);const Xt=Dt.createPattern(Vt.canvas,"repeat");return Xt.setTransform(jt),Xt}};Sr(Ot,"MAX_PATTERN_SIZE",3e3);let Lt=Ot;$.TilingPattern=Lt},(_e,$,ht)=>{Object.defineProperty($,"__esModule",{value:!0}),$.convertBlackAndWhiteToRGBA=Et,$.convertToRGBA=bt,$.grayToRGBA=_t;var vt=ht(1);function bt(wt){switch(wt.kind){case vt.ImageKind.GRAYSCALE_1BPP:return Et(wt);case vt.ImageKind.RGB_24BPP:return At(wt)}return null}function Et({src:wt,srcPos:Ct=0,dest:xt,width:Pt,height:Rt,nonBlackColor:kt=4294967295,inverseDecode:Mt=!1}){const Lt=vt.FeatureTest.isLittleEndian?4278190080:255,[Ot,Ft]=Mt?[kt,Lt]:[Lt,kt],Dt=Pt>>3,$t=Pt&7,Bt=wt.length;xt=new Uint32Array(xt.buffer);let Nt=0;for(let Ht=0;Ht<Rt;Ht++){for(const jt=Ct+Dt;Ct<jt;Ct++){const Xt=Ct<Bt?wt[Ct]:255;xt[Nt++]=Xt&128?Ft:Ot,xt[Nt++]=Xt&64?Ft:Ot,xt[Nt++]=Xt&32?Ft:Ot,xt[Nt++]=Xt&16?Ft:Ot,xt[Nt++]=Xt&8?Ft:Ot,xt[Nt++]=Xt&4?Ft:Ot,xt[Nt++]=Xt&2?Ft:Ot,xt[Nt++]=Xt&1?Ft:Ot}if($t===0)continue;const Vt=Ct<Bt?wt[Ct++]:255;for(let jt=0;jt<$t;jt++)xt[Nt++]=Vt&1<<7-jt?Ft:Ot}return{srcPos:Ct,destPos:Nt}}function At({src:wt,srcPos:Ct=0,dest:xt,destPos:Pt=0,width:Rt,height:kt}){let Mt=0;const Lt=wt.length>>2,Ot=new Uint32Array(wt.buffer,Ct,Lt);if(vt.FeatureTest.isLittleEndian){for(;Mt<Lt-2;Mt+=3,Pt+=4){const Ft=Ot[Mt],Dt=Ot[Mt+1],$t=Ot[Mt+2];xt[Pt]=Ft|4278190080,xt[Pt+1]=Ft>>>24|Dt<<8|4278190080,xt[Pt+2]=Dt>>>16|$t<<16|4278190080,xt[Pt+3]=$t>>>8|4278190080}for(let Ft=Mt*4,Dt=wt.length;Ft<Dt;Ft+=3)xt[Pt++]=wt[Ft]|wt[Ft+1]<<8|wt[Ft+2]<<16|4278190080}else{for(;Mt<Lt-2;Mt+=3,Pt+=4){const Ft=Ot[Mt],Dt=Ot[Mt+1],$t=Ot[Mt+2];xt[Pt]=Ft|255,xt[Pt+1]=Ft<<24|Dt>>>8|255,xt[Pt+2]=Dt<<16|$t>>>16|255,xt[Pt+3]=$t<<8|255}for(let Ft=Mt*4,Dt=wt.length;Ft<Dt;Ft+=3)xt[Pt++]=wt[Ft]<<24|wt[Ft+1]<<16|wt[Ft+2]<<8|255}return{srcPos:Ct,destPos:Pt}}function _t(wt,Ct){if(vt.FeatureTest.isLittleEndian)for(let xt=0,Pt=wt.length;xt<Pt;xt++)Ct[xt]=wt[xt]*65793|4278190080;else for(let xt=0,Pt=wt.length;xt<Pt;xt++)Ct[xt]=wt[xt]*16843008|255}},(_e,$)=>{Object.defineProperty($,"__esModule",{value:!0}),$.GlobalWorkerOptions=void 0;const ht=Object.create(null);$.GlobalWorkerOptions=ht,ht.workerPort=null,ht.workerSrc=""},(_e,$,ht)=>{var wt,eS,tS,B0;Object.defineProperty($,"__esModule",{value:!0}),$.MessageHandler=void 0;var vt=ht(1);const bt={UNKNOWN:0,DATA:1,ERROR:2},Et={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function At(Rt){switch(Rt instanceof Error||typeof Rt=="object"&&Rt!==null||(0,vt.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),Rt.name){case"AbortException":return new vt.AbortException(Rt.message);case"MissingPDFException":return new vt.MissingPDFException(Rt.message);case"PasswordException":return new vt.PasswordException(Rt.message,Rt.code);case"UnexpectedResponseException":return new vt.UnexpectedResponseException(Rt.message,Rt.status);case"UnknownErrorException":return new vt.UnknownErrorException(Rt.message,Rt.details);default:return new vt.UnknownErrorException(Rt.message,Rt.toString())}}class _t{constructor(kt,Mt,Lt){Kt(this,wt);this.sourceName=kt,this.targetName=Mt,this.comObj=Lt,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=Ot=>{const Ft=Ot.data;if(Ft.targetName!==this.sourceName)return;if(Ft.stream){Ut(this,wt,tS).call(this,Ft);return}if(Ft.callback){const $t=Ft.callbackId,Bt=this.callbackCapabilities[$t];if(!Bt)throw new Error(`Cannot resolve callback ${$t}`);if(delete this.callbackCapabilities[$t],Ft.callback===bt.DATA)Bt.resolve(Ft.data);else if(Ft.callback===bt.ERROR)Bt.reject(At(Ft.reason));else throw new Error("Unexpected callback case");return}const Dt=this.actionHandler[Ft.action];if(!Dt)throw new Error(`Unknown action from worker: ${Ft.action}`);if(Ft.callbackId){const $t=this.sourceName,Bt=Ft.sourceName;new Promise(function(Nt){Nt(Dt(Ft.data))}).then(function(Nt){Lt.postMessage({sourceName:$t,targetName:Bt,callback:bt.DATA,callbackId:Ft.callbackId,data:Nt})},function(Nt){Lt.postMessage({sourceName:$t,targetName:Bt,callback:bt.ERROR,callbackId:Ft.callbackId,reason:At(Nt)})});return}if(Ft.streamId){Ut(this,wt,eS).call(this,Ft);return}Dt(Ft.data)},Lt.addEventListener("message",this._onComObjOnMessage)}on(kt,Mt){const Lt=this.actionHandler;if(Lt[kt])throw new Error(`There is already an actionName called "${kt}"`);Lt[kt]=Mt}send(kt,Mt,Lt){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:kt,data:Mt},Lt)}sendWithPromise(kt,Mt,Lt){const Ot=this.callbackId++,Ft=new vt.PromiseCapability;this.callbackCapabilities[Ot]=Ft;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:kt,callbackId:Ot,data:Mt},Lt)}catch(Dt){Ft.reject(Dt)}return Ft.promise}sendWithStream(kt,Mt,Lt,Ot){const Ft=this.streamId++,Dt=this.sourceName,$t=this.targetName,Bt=this.comObj;return new ReadableStream({start:Nt=>{const Ht=new vt.PromiseCapability;return this.streamControllers[Ft]={controller:Nt,startCall:Ht,pullCall:null,cancelCall:null,isClosed:!1},Bt.postMessage({sourceName:Dt,targetName:$t,action:kt,streamId:Ft,data:Mt,desiredSize:Nt.desiredSize},Ot),Ht.promise},pull:Nt=>{const Ht=new vt.PromiseCapability;return this.streamControllers[Ft].pullCall=Ht,Bt.postMessage({sourceName:Dt,targetName:$t,stream:Et.PULL,streamId:Ft,desiredSize:Nt.desiredSize}),Ht.promise},cancel:Nt=>{(0,vt.assert)(Nt instanceof Error,"cancel must have a valid reason");const Ht=new vt.PromiseCapability;return this.streamControllers[Ft].cancelCall=Ht,this.streamControllers[Ft].isClosed=!0,Bt.postMessage({sourceName:Dt,targetName:$t,stream:Et.CANCEL,streamId:Ft,reason:At(Nt)}),Ht.promise}},Lt)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}wt=new WeakSet,eS=function(kt){const Mt=kt.streamId,Lt=this.sourceName,Ot=kt.sourceName,Ft=this.comObj,Dt=this,$t=this.actionHandler[kt.action],Bt={enqueue(Nt,Ht=1,Vt){if(this.isCancelled)return;const jt=this.desiredSize;this.desiredSize-=Ht,jt>0&&this.desiredSize<=0&&(this.sinkCapability=new vt.PromiseCapability,this.ready=this.sinkCapability.promise),Ft.postMessage({sourceName:Lt,targetName:Ot,stream:Et.ENQUEUE,streamId:Mt,chunk:Nt},Vt)},close(){this.isCancelled||(this.isCancelled=!0,Ft.postMessage({sourceName:Lt,targetName:Ot,stream:Et.CLOSE,streamId:Mt}),delete Dt.streamSinks[Mt])},error(Nt){(0,vt.assert)(Nt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,Ft.postMessage({sourceName:Lt,targetName:Ot,stream:Et.ERROR,streamId:Mt,reason:At(Nt)}))},sinkCapability:new vt.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:kt.desiredSize,ready:null};Bt.sinkCapability.resolve(),Bt.ready=Bt.sinkCapability.promise,this.streamSinks[Mt]=Bt,new Promise(function(Nt){Nt($t(kt.data,Bt))}).then(function(){Ft.postMessage({sourceName:Lt,targetName:Ot,stream:Et.START_COMPLETE,streamId:Mt,success:!0})},function(Nt){Ft.postMessage({sourceName:Lt,targetName:Ot,stream:Et.START_COMPLETE,streamId:Mt,reason:At(Nt)})})},tS=function(kt){const Mt=kt.streamId,Lt=this.sourceName,Ot=kt.sourceName,Ft=this.comObj,Dt=this.streamControllers[Mt],$t=this.streamSinks[Mt];switch(kt.stream){case Et.START_COMPLETE:kt.success?Dt.startCall.resolve():Dt.startCall.reject(At(kt.reason));break;case Et.PULL_COMPLETE:kt.success?Dt.pullCall.resolve():Dt.pullCall.reject(At(kt.reason));break;case Et.PULL:if(!$t){Ft.postMessage({sourceName:Lt,targetName:Ot,stream:Et.PULL_COMPLETE,streamId:Mt,success:!0});break}$t.desiredSize<=0&&kt.desiredSize>0&&$t.sinkCapability.resolve(),$t.desiredSize=kt.desiredSize,new Promise(function(Bt){var Nt;Bt((Nt=$t.onPull)==null?void 0:Nt.call($t))}).then(function(){Ft.postMessage({sourceName:Lt,targetName:Ot,stream:Et.PULL_COMPLETE,streamId:Mt,success:!0})},function(Bt){Ft.postMessage({sourceName:Lt,targetName:Ot,stream:Et.PULL_COMPLETE,streamId:Mt,reason:At(Bt)})});break;case Et.ENQUEUE:if((0,vt.assert)(Dt,"enqueue should have stream controller"),Dt.isClosed)break;Dt.controller.enqueue(kt.chunk);break;case Et.CLOSE:if((0,vt.assert)(Dt,"close should have stream controller"),Dt.isClosed)break;Dt.isClosed=!0,Dt.controller.close(),Ut(this,wt,B0).call(this,Dt,Mt);break;case Et.ERROR:(0,vt.assert)(Dt,"error should have stream controller"),Dt.controller.error(At(kt.reason)),Ut(this,wt,B0).call(this,Dt,Mt);break;case Et.CANCEL_COMPLETE:kt.success?Dt.cancelCall.resolve():Dt.cancelCall.reject(At(kt.reason)),Ut(this,wt,B0).call(this,Dt,Mt);break;case Et.CANCEL:if(!$t)break;new Promise(function(Bt){var Nt;Bt((Nt=$t.onCancel)==null?void 0:Nt.call($t,At(kt.reason)))}).then(function(){Ft.postMessage({sourceName:Lt,targetName:Ot,stream:Et.CANCEL_COMPLETE,streamId:Mt,success:!0})},function(Bt){Ft.postMessage({sourceName:Lt,targetName:Ot,stream:Et.CANCEL_COMPLETE,streamId:Mt,reason:At(Bt)})}),$t.sinkCapability.reject(At(kt.reason)),$t.isCancelled=!0,delete this.streamSinks[Mt];break;default:throw new Error("Unexpected stream case")}},B0=async function(kt,Mt){var Lt,Ot,Ft;await Promise.allSettled([(Lt=kt.startCall)==null?void 0:Lt.promise,(Ot=kt.pullCall)==null?void 0:Ot.promise,(Ft=kt.cancelCall)==null?void 0:Ft.promise]),delete this.streamControllers[Mt]},$.MessageHandler=_t},(_e,$,ht)=>{var Et,At;Object.defineProperty($,"__esModule",{value:!0}),$.Metadata=void 0;var vt=ht(1);class bt{constructor({parsedData:wt,rawData:Ct}){Kt(this,Et);Kt(this,At);zt(this,Et,wt),zt(this,At,Ct)}getRaw(){return St(this,At)}get(wt){return St(this,Et).get(wt)??null}getAll(){return(0,vt.objectFromMap)(St(this,Et))}has(wt){return St(this,Et).has(wt)}}Et=new WeakMap,At=new WeakMap,$.Metadata=bt},(_e,$,ht)=>{var wt,Ct,xt,Pt,Rt,kt,NA;Object.defineProperty($,"__esModule",{value:!0}),$.OptionalContentConfig=void 0;var vt=ht(1),bt=ht(8);const Et=Symbol("INTERNAL");class At{constructor(Ot,Ft){Kt(this,wt,!0);this.name=Ot,this.intent=Ft}get visible(){return St(this,wt)}_setVisible(Ot,Ft){Ot!==Et&&(0,vt.unreachable)("Internal method `_setVisible` called."),zt(this,wt,Ft)}}wt=new WeakMap;class _t{constructor(Ot){Kt(this,kt);Kt(this,Ct,null);Kt(this,xt,new Map);Kt(this,Pt,null);Kt(this,Rt,null);if(this.name=null,this.creator=null,Ot!==null){this.name=Ot.name,this.creator=Ot.creator,zt(this,Rt,Ot.order);for(const Ft of Ot.groups)St(this,xt).set(Ft.id,new At(Ft.name,Ft.intent));if(Ot.baseState==="OFF")for(const Ft of St(this,xt).values())Ft._setVisible(Et,!1);for(const Ft of Ot.on)St(this,xt).get(Ft)._setVisible(Et,!0);for(const Ft of Ot.off)St(this,xt).get(Ft)._setVisible(Et,!1);zt(this,Pt,this.getHash())}}isVisible(Ot){if(St(this,xt).size===0)return!0;if(!Ot)return(0,vt.warn)("Optional content group not defined."),!0;if(Ot.type==="OCG")return St(this,xt).has(Ot.id)?St(this,xt).get(Ot.id).visible:((0,vt.warn)(`Optional content group not found: ${Ot.id}`),!0);if(Ot.type==="OCMD"){if(Ot.expression)return Ut(this,kt,NA).call(this,Ot.expression);if(!Ot.policy||Ot.policy==="AnyOn"){for(const Ft of Ot.ids){if(!St(this,xt).has(Ft))return(0,vt.warn)(`Optional content group not found: ${Ft}`),!0;if(St(this,xt).get(Ft).visible)return!0}return!1}else if(Ot.policy==="AllOn"){for(const Ft of Ot.ids){if(!St(this,xt).has(Ft))return(0,vt.warn)(`Optional content group not found: ${Ft}`),!0;if(!St(this,xt).get(Ft).visible)return!1}return!0}else if(Ot.policy==="AnyOff"){for(const Ft of Ot.ids){if(!St(this,xt).has(Ft))return(0,vt.warn)(`Optional content group not found: ${Ft}`),!0;if(!St(this,xt).get(Ft).visible)return!0}return!1}else if(Ot.policy==="AllOff"){for(const Ft of Ot.ids){if(!St(this,xt).has(Ft))return(0,vt.warn)(`Optional content group not found: ${Ft}`),!0;if(St(this,xt).get(Ft).visible)return!1}return!0}return(0,vt.warn)(`Unknown optional content policy ${Ot.policy}.`),!0}return(0,vt.warn)(`Unknown group type ${Ot.type}.`),!0}setVisibility(Ot,Ft=!0){if(!St(this,xt).has(Ot)){(0,vt.warn)(`Optional content group not found: ${Ot}`);return}St(this,xt).get(Ot)._setVisible(Et,!!Ft),zt(this,Ct,null)}get hasInitialVisibility(){return St(this,Pt)===null||this.getHash()===St(this,Pt)}getOrder(){return St(this,xt).size?St(this,Rt)?St(this,Rt).slice():[...St(this,xt).keys()]:null}getGroups(){return St(this,xt).size>0?(0,vt.objectFromMap)(St(this,xt)):null}getGroup(Ot){return St(this,xt).get(Ot)||null}getHash(){if(St(this,Ct)!==null)return St(this,Ct);const Ot=new bt.MurmurHash3_64;for(const[Ft,Dt]of St(this,xt))Ot.update(`${Ft}:${Dt.visible}`);return zt(this,Ct,Ot.hexdigest())}}Ct=new WeakMap,xt=new WeakMap,Pt=new WeakMap,Rt=new WeakMap,kt=new WeakSet,NA=function(Ot){const Ft=Ot.length;if(Ft<2)return!0;const Dt=Ot[0];for(let $t=1;$t<Ft;$t++){const Bt=Ot[$t];let Nt;if(Array.isArray(Bt))Nt=Ut(this,kt,NA).call(this,Bt);else if(St(this,xt).has(Bt))Nt=St(this,xt).get(Bt).visible;else return(0,vt.warn)(`Optional content group not found: ${Bt}`),!0;switch(Dt){case"And":if(!Nt)return!1;break;case"Or":if(Nt)return!0;break;case"Not":return!Nt;default:return!0}}return Dt==="And"},$.OptionalContentConfig=_t},(_e,$,ht)=>{Object.defineProperty($,"__esModule",{value:!0}),$.PDFDataTransportStream=void 0;var vt=ht(1),bt=ht(6);class Et{constructor({length:Ct,initialData:xt,progressiveDone:Pt=!1,contentDispositionFilename:Rt=null,disableRange:kt=!1,disableStream:Mt=!1},Lt){if((0,vt.assert)(Lt,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=Pt,this._contentDispositionFilename=Rt,(xt==null?void 0:xt.length)>0){const Ot=xt instanceof Uint8Array&&xt.byteLength===xt.buffer.byteLength?xt.buffer:new Uint8Array(xt).buffer;this._queuedChunks.push(Ot)}this._pdfDataRangeTransport=Lt,this._isStreamingSupported=!Mt,this._isRangeSupported=!kt,this._contentLength=Ct,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((Ot,Ft)=>{this._onReceiveData({begin:Ot,chunk:Ft})}),this._pdfDataRangeTransport.addProgressListener((Ot,Ft)=>{this._onProgress({loaded:Ot,total:Ft})}),this._pdfDataRangeTransport.addProgressiveReadListener(Ot=>{this._onReceiveData({chunk:Ot})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:Ct,chunk:xt}){const Pt=xt instanceof Uint8Array&&xt.byteLength===xt.buffer.byteLength?xt.buffer:new Uint8Array(xt).buffer;if(Ct===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(Pt):this._queuedChunks.push(Pt);else{const Rt=this._rangeReaders.some(function(kt){return kt._begin!==Ct?!1:(kt._enqueue(Pt),!0)});(0,vt.assert)(Rt,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var Ct;return((Ct=this._fullRequestReader)==null?void 0:Ct._loaded)??0}_onProgress(Ct){var xt,Pt,Rt,kt;Ct.total===void 0?(Pt=(xt=this._rangeReaders[0])==null?void 0:xt.onProgress)==null||Pt.call(xt,{loaded:Ct.loaded}):(kt=(Rt=this._fullRequestReader)==null?void 0:Rt.onProgress)==null||kt.call(Rt,{loaded:Ct.loaded,total:Ct.total})}_onProgressiveDone(){var Ct;(Ct=this._fullRequestReader)==null||Ct.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(Ct){const xt=this._rangeReaders.indexOf(Ct);xt>=0&&this._rangeReaders.splice(xt,1)}getFullReader(){(0,vt.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const Ct=this._queuedChunks;return this._queuedChunks=null,new At(this,Ct,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(Ct,xt){if(xt<=this._progressiveDataLength)return null;const Pt=new _t(this,Ct,xt);return this._pdfDataRangeTransport.requestDataRange(Ct,xt),this._rangeReaders.push(Pt),Pt}cancelAllRequests(Ct){var xt;(xt=this._fullRequestReader)==null||xt.cancel(Ct);for(const Pt of this._rangeReaders.slice(0))Pt.cancel(Ct);this._pdfDataRangeTransport.abort()}}$.PDFDataTransportStream=Et;class At{constructor(Ct,xt,Pt=!1,Rt=null){this._stream=Ct,this._done=Pt||!1,this._filename=(0,bt.isPdfFile)(Rt)?Rt:null,this._queuedChunks=xt||[],this._loaded=0;for(const kt of this._queuedChunks)this._loaded+=kt.byteLength;this._requests=[],this._headersReady=Promise.resolve(),Ct._fullRequestReader=this,this.onProgress=null}_enqueue(Ct){this._done||(this._requests.length>0?this._requests.shift().resolve({value:Ct,done:!1}):this._queuedChunks.push(Ct),this._loaded+=Ct.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const Ct=new vt.PromiseCapability;return this._requests.push(Ct),Ct.promise}cancel(Ct){this._done=!0;for(const xt of this._requests)xt.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class _t{constructor(Ct,xt,Pt){this._stream=Ct,this._begin=xt,this._end=Pt,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(Ct){if(!this._done){if(this._requests.length===0)this._queuedChunk=Ct;else{this._requests.shift().resolve({value:Ct,done:!1});for(const Pt of this._requests)Pt.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const xt=this._queuedChunk;return this._queuedChunk=null,{value:xt,done:!1}}if(this._done)return{value:void 0,done:!0};const Ct=new vt.PromiseCapability;return this._requests.push(Ct),Ct.promise}cancel(Ct){this._done=!0;for(const xt of this._requests)xt.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(_e,$,ht)=>{Object.defineProperty($,"__esModule",{value:!0}),$.PDFFetchStream=void 0;var vt=ht(1),bt=ht(20);function Et(Pt,Rt,kt){return{method:"GET",headers:Pt,signal:kt.signal,mode:"cors",credentials:Rt?"include":"same-origin",redirect:"follow"}}function At(Pt){const Rt=new Headers;for(const kt in Pt){const Mt=Pt[kt];Mt!==void 0&&Rt.append(kt,Mt)}return Rt}function _t(Pt){return Pt instanceof Uint8Array?Pt.buffer:Pt instanceof ArrayBuffer?Pt:((0,vt.warn)(`getArrayBuffer - unexpected data format: ${Pt}`),new Uint8Array(Pt).buffer)}class wt{constructor(Rt){this.source=Rt,this.isHttp=/^https?:/i.test(Rt.url),this.httpHeaders=this.isHttp&&Rt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var Rt;return((Rt=this._fullRequestReader)==null?void 0:Rt._loaded)??0}getFullReader(){return(0,vt.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Ct(this),this._fullRequestReader}getRangeReader(Rt,kt){if(kt<=this._progressiveDataLength)return null;const Mt=new xt(this,Rt,kt);return this._rangeRequestReaders.push(Mt),Mt}cancelAllRequests(Rt){var kt;(kt=this._fullRequestReader)==null||kt.cancel(Rt);for(const Mt of this._rangeRequestReaders.slice(0))Mt.cancel(Rt)}}$.PDFFetchStream=wt;class Ct{constructor(Rt){this._stream=Rt,this._reader=null,this._loaded=0,this._filename=null;const kt=Rt.source;this._withCredentials=kt.withCredentials||!1,this._contentLength=kt.length,this._headersCapability=new vt.PromiseCapability,this._disableRange=kt.disableRange||!1,this._rangeChunkSize=kt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!kt.disableStream,this._isRangeSupported=!kt.disableRange,this._headers=At(this._stream.httpHeaders);const Mt=kt.url;fetch(Mt,Et(this._headers,this._withCredentials,this._abortController)).then(Lt=>{if(!(0,bt.validateResponseStatus)(Lt.status))throw(0,bt.createResponseStatusError)(Lt.status,Mt);this._reader=Lt.body.getReader(),this._headersCapability.resolve();const Ot=$t=>Lt.headers.get($t),{allowRangeRequests:Ft,suggestedLength:Dt}=(0,bt.validateRangeRequestCapabilities)({getResponseHeader:Ot,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Ft,this._contentLength=Dt||this._contentLength,this._filename=(0,bt.extractFilenameFromHeader)(Ot),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new vt.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Mt;await this._headersCapability.promise;const{value:Rt,done:kt}=await this._reader.read();return kt?{value:Rt,done:kt}:(this._loaded+=Rt.byteLength,(Mt=this.onProgress)==null||Mt.call(this,{loaded:this._loaded,total:this._contentLength}),{value:_t(Rt),done:!1})}cancel(Rt){var kt;(kt=this._reader)==null||kt.cancel(Rt),this._abortController.abort()}}class xt{constructor(Rt,kt,Mt){this._stream=Rt,this._reader=null,this._loaded=0;const Lt=Rt.source;this._withCredentials=Lt.withCredentials||!1,this._readCapability=new vt.PromiseCapability,this._isStreamingSupported=!Lt.disableStream,this._abortController=new AbortController,this._headers=At(this._stream.httpHeaders),this._headers.append("Range",`bytes=${kt}-${Mt-1}`);const Ot=Lt.url;fetch(Ot,Et(this._headers,this._withCredentials,this._abortController)).then(Ft=>{if(!(0,bt.validateResponseStatus)(Ft.status))throw(0,bt.createResponseStatusError)(Ft.status,Ot);this._readCapability.resolve(),this._reader=Ft.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Mt;await this._readCapability.promise;const{value:Rt,done:kt}=await this._reader.read();return kt?{value:Rt,done:kt}:(this._loaded+=Rt.byteLength,(Mt=this.onProgress)==null||Mt.call(this,{loaded:this._loaded}),{value:_t(Rt),done:!1})}cancel(Rt){var kt;(kt=this._reader)==null||kt.cancel(Rt),this._abortController.abort()}}},(_e,$,ht)=>{Object.defineProperty($,"__esModule",{value:!0}),$.createResponseStatusError=wt,$.extractFilenameFromHeader=_t,$.validateRangeRequestCapabilities=At,$.validateResponseStatus=Ct;var vt=ht(1),bt=ht(21),Et=ht(6);function At({getResponseHeader:xt,isHttp:Pt,rangeChunkSize:Rt,disableRange:kt}){const Mt={allowRangeRequests:!1,suggestedLength:void 0},Lt=parseInt(xt("Content-Length"),10);return!Number.isInteger(Lt)||(Mt.suggestedLength=Lt,Lt<=2*Rt)||kt||!Pt||xt("Accept-Ranges")!=="bytes"||(xt("Content-Encoding")||"identity")!=="identity"||(Mt.allowRangeRequests=!0),Mt}function _t(xt){const Pt=xt("Content-Disposition");if(Pt){let Rt=(0,bt.getFilenameFromContentDispositionHeader)(Pt);if(Rt.includes("%"))try{Rt=decodeURIComponent(Rt)}catch{}if((0,Et.isPdfFile)(Rt))return Rt}return null}function wt(xt,Pt){return xt===404||xt===0&&Pt.startsWith("file:")?new vt.MissingPDFException('Missing PDF "'+Pt+'".'):new vt.UnexpectedResponseException(`Unexpected server response (${xt}) while retrieving PDF "${Pt}".`,xt)}function Ct(xt){return xt===200||xt===206}},(_e,$,ht)=>{Object.defineProperty($,"__esModule",{value:!0}),$.getFilenameFromContentDispositionHeader=bt;var vt=ht(1);function bt(Et){let At=!0,_t=wt("filename\\*","i").exec(Et);if(_t){_t=_t[1];let Lt=Rt(_t);return Lt=unescape(Lt),Lt=kt(Lt),Lt=Mt(Lt),xt(Lt)}if(_t=Pt(Et),_t){const Lt=Mt(_t);return xt(Lt)}if(_t=wt("filename","i").exec(Et),_t){_t=_t[1];let Lt=Rt(_t);return Lt=Mt(Lt),xt(Lt)}function wt(Lt,Ot){return new RegExp("(?:^|;)\\s*"+Lt+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Ot)}function Ct(Lt,Ot){if(Lt){if(!/^[\x00-\xFF]+$/.test(Ot))return Ot;try{const Ft=new TextDecoder(Lt,{fatal:!0}),Dt=(0,vt.stringToBytes)(Ot);Ot=Ft.decode(Dt),At=!1}catch{}}return Ot}function xt(Lt){return At&&/[\x80-\xff]/.test(Lt)&&(Lt=Ct("utf-8",Lt),At&&(Lt=Ct("iso-8859-1",Lt))),Lt}function Pt(Lt){const Ot=[];let Ft;const Dt=wt("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(Ft=Dt.exec(Lt))!==null;){let[,Bt,Nt,Ht]=Ft;if(Bt=parseInt(Bt,10),Bt in Ot){if(Bt===0)break;continue}Ot[Bt]=[Nt,Ht]}const $t=[];for(let Bt=0;Bt<Ot.length&&Bt in Ot;++Bt){let[Nt,Ht]=Ot[Bt];Ht=Rt(Ht),Nt&&(Ht=unescape(Ht),Bt===0&&(Ht=kt(Ht))),$t.push(Ht)}return $t.join("")}function Rt(Lt){if(Lt.startsWith('"')){const Ot=Lt.slice(1).split('\\"');for(let Ft=0;Ft<Ot.length;++Ft){const Dt=Ot[Ft].indexOf('"');Dt!==-1&&(Ot[Ft]=Ot[Ft].slice(0,Dt),Ot.length=Ft+1),Ot[Ft]=Ot[Ft].replaceAll(/\\(.)/g,"$1")}Lt=Ot.join('"')}return Lt}function kt(Lt){const Ot=Lt.indexOf("'");if(Ot===-1)return Lt;const Ft=Lt.slice(0,Ot),$t=Lt.slice(Ot+1).replace(/^[^']*'/,"");return Ct(Ft,$t)}function Mt(Lt){return!Lt.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(Lt)?Lt:Lt.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Ot,Ft,Dt,$t){if(Dt==="q"||Dt==="Q")return $t=$t.replaceAll("_"," "),$t=$t.replaceAll(/=([0-9a-fA-F]{2})/g,function(Bt,Nt){return String.fromCharCode(parseInt(Nt,16))}),Ct(Ft,$t);try{$t=atob($t)}catch{}return Ct(Ft,$t)})}return""}},(_e,$,ht)=>{Object.defineProperty($,"__esModule",{value:!0}),$.PDFNetworkStream=void 0;var vt=ht(1),bt=ht(20);const Et=200,At=206;function _t(Rt){const kt=Rt.response;return typeof kt!="string"?kt:(0,vt.stringToBytes)(kt).buffer}class wt{constructor(kt,Mt={}){this.url=kt,this.isHttp=/^https?:/i.test(kt),this.httpHeaders=this.isHttp&&Mt.httpHeaders||Object.create(null),this.withCredentials=Mt.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(kt,Mt,Lt){const Ot={begin:kt,end:Mt};for(const Ft in Lt)Ot[Ft]=Lt[Ft];return this.request(Ot)}requestFull(kt){return this.request(kt)}request(kt){const Mt=new XMLHttpRequest,Lt=this.currXhrId++,Ot=this.pendingRequests[Lt]={xhr:Mt};Mt.open("GET",this.url),Mt.withCredentials=this.withCredentials;for(const Ft in this.httpHeaders){const Dt=this.httpHeaders[Ft];Dt!==void 0&&Mt.setRequestHeader(Ft,Dt)}return this.isHttp&&"begin"in kt&&"end"in kt?(Mt.setRequestHeader("Range",`bytes=${kt.begin}-${kt.end-1}`),Ot.expectedStatus=At):Ot.expectedStatus=Et,Mt.responseType="arraybuffer",kt.onError&&(Mt.onerror=function(Ft){kt.onError(Mt.status)}),Mt.onreadystatechange=this.onStateChange.bind(this,Lt),Mt.onprogress=this.onProgress.bind(this,Lt),Ot.onHeadersReceived=kt.onHeadersReceived,Ot.onDone=kt.onDone,Ot.onError=kt.onError,Ot.onProgress=kt.onProgress,Mt.send(null),Lt}onProgress(kt,Mt){var Ot;const Lt=this.pendingRequests[kt];Lt&&((Ot=Lt.onProgress)==null||Ot.call(Lt,Mt))}onStateChange(kt,Mt){var Bt,Nt,Ht;const Lt=this.pendingRequests[kt];if(!Lt)return;const Ot=Lt.xhr;if(Ot.readyState>=2&&Lt.onHeadersReceived&&(Lt.onHeadersReceived(),delete Lt.onHeadersReceived),Ot.readyState!==4||!(kt in this.pendingRequests))return;if(delete this.pendingRequests[kt],Ot.status===0&&this.isHttp){(Bt=Lt.onError)==null||Bt.call(Lt,Ot.status);return}const Ft=Ot.status||Et;if(!(Ft===Et&&Lt.expectedStatus===At)&&Ft!==Lt.expectedStatus){(Nt=Lt.onError)==null||Nt.call(Lt,Ot.status);return}const $t=_t(Ot);if(Ft===At){const Vt=Ot.getResponseHeader("Content-Range"),jt=/bytes (\d+)-(\d+)\/(\d+)/.exec(Vt);Lt.onDone({begin:parseInt(jt[1],10),chunk:$t})}else $t?Lt.onDone({begin:0,chunk:$t}):(Ht=Lt.onError)==null||Ht.call(Lt,Ot.status)}getRequestXhr(kt){return this.pendingRequests[kt].xhr}isPendingRequest(kt){return kt in this.pendingRequests}abortRequest(kt){const Mt=this.pendingRequests[kt].xhr;delete this.pendingRequests[kt],Mt.abort()}}class Ct{constructor(kt){this._source=kt,this._manager=new wt(kt.url,{httpHeaders:kt.httpHeaders,withCredentials:kt.withCredentials}),this._rangeChunkSize=kt.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(kt){const Mt=this._rangeRequestReaders.indexOf(kt);Mt>=0&&this._rangeRequestReaders.splice(Mt,1)}getFullReader(){return(0,vt.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new xt(this._manager,this._source),this._fullRequestReader}getRangeReader(kt,Mt){const Lt=new Pt(this._manager,kt,Mt);return Lt.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(Lt),Lt}cancelAllRequests(kt){var Mt;(Mt=this._fullRequestReader)==null||Mt.cancel(kt);for(const Lt of this._rangeRequestReaders.slice(0))Lt.cancel(kt)}}$.PDFNetworkStream=Ct;class xt{constructor(kt,Mt){this._manager=kt;const Lt={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=Mt.url,this._fullRequestId=kt.requestFull(Lt),this._headersReceivedCapability=new vt.PromiseCapability,this._disableRange=Mt.disableRange||!1,this._contentLength=Mt.length,this._rangeChunkSize=Mt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const kt=this._fullRequestId,Mt=this._manager.getRequestXhr(kt),Lt=Dt=>Mt.getResponseHeader(Dt),{allowRangeRequests:Ot,suggestedLength:Ft}=(0,bt.validateRangeRequestCapabilities)({getResponseHeader:Lt,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});Ot&&(this._isRangeSupported=!0),this._contentLength=Ft||this._contentLength,this._filename=(0,bt.extractFilenameFromHeader)(Lt),this._isRangeSupported&&this._manager.abortRequest(kt),this._headersReceivedCapability.resolve()}_onDone(kt){if(kt&&(this._requests.length>0?this._requests.shift().resolve({value:kt.chunk,done:!1}):this._cachedChunks.push(kt.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const Mt of this._requests)Mt.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(kt){this._storedError=(0,bt.createResponseStatusError)(kt,this._url),this._headersReceivedCapability.reject(this._storedError);for(const Mt of this._requests)Mt.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(kt){var Mt;(Mt=this.onProgress)==null||Mt.call(this,{loaded:kt.loaded,total:kt.lengthComputable?kt.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const kt=new vt.PromiseCapability;return this._requests.push(kt),kt.promise}cancel(kt){this._done=!0,this._headersReceivedCapability.reject(kt);for(const Mt of this._requests)Mt.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Pt{constructor(kt,Mt,Lt){this._manager=kt;const Ot={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=kt.url,this._requestId=kt.requestRange(Mt,Lt,Ot),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var kt;(kt=this.onClosed)==null||kt.call(this,this)}_onDone(kt){const Mt=kt.chunk;this._requests.length>0?this._requests.shift().resolve({value:Mt,done:!1}):this._queuedChunk=Mt,this._done=!0;for(const Lt of this._requests)Lt.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(kt){this._storedError=(0,bt.createResponseStatusError)(kt,this._url);for(const Mt of this._requests)Mt.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(kt){var Mt;this.isStreamingSupported||(Mt=this.onProgress)==null||Mt.call(this,{loaded:kt.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const Mt=this._queuedChunk;return this._queuedChunk=null,{value:Mt,done:!1}}if(this._done)return{value:void 0,done:!0};const kt=new vt.PromiseCapability;return this._requests.push(kt),kt.promise}cancel(kt){this._done=!0;for(const Mt of this._requests)Mt.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(_e,$,ht)=>{Object.defineProperty($,"__esModule",{value:!0}),$.PDFNodeStream=void 0;var vt=ht(1),bt=ht(20);const Et=/^file:\/\/\/[a-zA-Z]:\//;function At(Lt){const Ot=require$$5,Ft=Ot.parse(Lt);return Ft.protocol==="file:"||Ft.host?Ft:/^[a-z]:[/\\]/i.test(Lt)?Ot.parse(`file:///${Lt}`):(Ft.host||(Ft.protocol="file:"),Ft)}class _t{constructor(Ot){this.source=Ot,this.url=At(Ot.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&Ot.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var Ot;return((Ot=this._fullRequestReader)==null?void 0:Ot._loaded)??0}getFullReader(){return(0,vt.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new kt(this):new Pt(this),this._fullRequestReader}getRangeReader(Ot,Ft){if(Ft<=this._progressiveDataLength)return null;const Dt=this.isFsUrl?new Mt(this,Ot,Ft):new Rt(this,Ot,Ft);return this._rangeRequestReaders.push(Dt),Dt}cancelAllRequests(Ot){var Ft;(Ft=this._fullRequestReader)==null||Ft.cancel(Ot);for(const Dt of this._rangeRequestReaders.slice(0))Dt.cancel(Ot)}}$.PDFNodeStream=_t;class wt{constructor(Ot){this._url=Ot.url,this._done=!1,this._storedError=null,this.onProgress=null;const Ft=Ot.source;this._contentLength=Ft.length,this._loaded=0,this._filename=null,this._disableRange=Ft.disableRange||!1,this._rangeChunkSize=Ft.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!Ft.disableStream,this._isRangeSupported=!Ft.disableRange,this._readableStream=null,this._readCapability=new vt.PromiseCapability,this._headersCapability=new vt.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Dt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Ot=this._readableStream.read();return Ot===null?(this._readCapability=new vt.PromiseCapability,this.read()):(this._loaded+=Ot.length,(Dt=this.onProgress)==null||Dt.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(Ot).buffer,done:!1})}cancel(Ot){if(!this._readableStream){this._error(Ot);return}this._readableStream.destroy(Ot)}_error(Ot){this._storedError=Ot,this._readCapability.resolve()}_setReadableStream(Ot){this._readableStream=Ot,Ot.on("readable",()=>{this._readCapability.resolve()}),Ot.on("end",()=>{Ot.destroy(),this._done=!0,this._readCapability.resolve()}),Ot.on("error",Ft=>{this._error(Ft)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new vt.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Ct{constructor(Ot){this._url=Ot.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new vt.PromiseCapability;const Ft=Ot.source;this._isStreamingSupported=!Ft.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Dt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Ot=this._readableStream.read();return Ot===null?(this._readCapability=new vt.PromiseCapability,this.read()):(this._loaded+=Ot.length,(Dt=this.onProgress)==null||Dt.call(this,{loaded:this._loaded}),{value:new Uint8Array(Ot).buffer,done:!1})}cancel(Ot){if(!this._readableStream){this._error(Ot);return}this._readableStream.destroy(Ot)}_error(Ot){this._storedError=Ot,this._readCapability.resolve()}_setReadableStream(Ot){this._readableStream=Ot,Ot.on("readable",()=>{this._readCapability.resolve()}),Ot.on("end",()=>{Ot.destroy(),this._done=!0,this._readCapability.resolve()}),Ot.on("error",Ft=>{this._error(Ft)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function xt(Lt,Ot){return{protocol:Lt.protocol,auth:Lt.auth,host:Lt.hostname,port:Lt.port,path:Lt.path,method:"GET",headers:Ot}}class Pt extends wt{constructor(Ot){super(Ot);const Ft=Dt=>{if(Dt.statusCode===404){const Ht=new vt.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Ht,this._headersCapability.reject(Ht);return}this._headersCapability.resolve(),this._setReadableStream(Dt);const $t=Ht=>this._readableStream.headers[Ht.toLowerCase()],{allowRangeRequests:Bt,suggestedLength:Nt}=(0,bt.validateRangeRequestCapabilities)({getResponseHeader:$t,isHttp:Ot.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Bt,this._contentLength=Nt||this._contentLength,this._filename=(0,bt.extractFilenameFromHeader)($t)};if(this._request=null,this._url.protocol==="http:"){const Dt=require$$5;this._request=Dt.request(xt(this._url,Ot.httpHeaders),Ft)}else{const Dt=require$$5;this._request=Dt.request(xt(this._url,Ot.httpHeaders),Ft)}this._request.on("error",Dt=>{this._storedError=Dt,this._headersCapability.reject(Dt)}),this._request.end()}}class Rt extends Ct{constructor(Ot,Ft,Dt){super(Ot),this._httpHeaders={};for(const Bt in Ot.httpHeaders){const Nt=Ot.httpHeaders[Bt];Nt!==void 0&&(this._httpHeaders[Bt]=Nt)}this._httpHeaders.Range=`bytes=${Ft}-${Dt-1}`;const $t=Bt=>{if(Bt.statusCode===404){const Nt=new vt.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Nt;return}this._setReadableStream(Bt)};if(this._request=null,this._url.protocol==="http:"){const Bt=require$$5;this._request=Bt.request(xt(this._url,this._httpHeaders),$t)}else{const Bt=require$$5;this._request=Bt.request(xt(this._url,this._httpHeaders),$t)}this._request.on("error",Bt=>{this._storedError=Bt}),this._request.end()}}class kt extends wt{constructor(Ot){super(Ot);let Ft=decodeURIComponent(this._url.path);Et.test(this._url.href)&&(Ft=Ft.replace(/^\//,""));const Dt=require$$5;Dt.lstat(Ft,($t,Bt)=>{if($t){$t.code==="ENOENT"&&($t=new vt.MissingPDFException(`Missing PDF "${Ft}".`)),this._storedError=$t,this._headersCapability.reject($t);return}this._contentLength=Bt.size,this._setReadableStream(Dt.createReadStream(Ft)),this._headersCapability.resolve()})}}class Mt extends Ct{constructor(Ot,Ft,Dt){super(Ot);let $t=decodeURIComponent(this._url.path);Et.test(this._url.href)&&($t=$t.replace(/^\//,""));const Bt=require$$5;this._setReadableStream(Bt.createReadStream($t,{start:Ft,end:Dt-1}))}}},(_e,$,ht)=>{Object.defineProperty($,"__esModule",{value:!0}),$.SVGGraphics=void 0;var vt=ht(6),bt=ht(1);const Et={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},At="http://www.w3.org/XML/1998/namespace",_t="http://www.w3.org/1999/xlink",wt=["butt","round","square"],Ct=["miter","round","bevel"],xt=function(Bt,Nt="",Ht=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!Ht)return URL.createObjectURL(new Blob([Bt],{type:Nt}));const Vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let jt=`data:${Nt};base64,`;for(let Xt=0,Jt=Bt.length;Xt<Jt;Xt+=3){const Gt=Bt[Xt]&255,en=Bt[Xt+1]&255,on=Bt[Xt+2]&255,_n=Gt>>2,ln=(Gt&3)<<4|en>>4,En=Xt+1<Jt?(en&15)<<2|on>>6:64,un=Xt+2<Jt?on&63:64;jt+=Vt[_n]+Vt[ln]+Vt[En]+Vt[un]}return jt},Pt=function(){const Bt=new Uint8Array([137,80,78,71,13,10,26,10]),Nt=12,Ht=new Int32Array(256);for(let on=0;on<256;on++){let _n=on;for(let ln=0;ln<8;ln++)_n=_n&1?3988292384^_n>>1&2147483647:_n>>1&2147483647;Ht[on]=_n}function Vt(on,_n,ln){let En=-1;for(let un=_n;un<ln;un++){const hn=(En^on[un])&255,nn=Ht[hn];En=En>>>8^nn}return En^-1}function jt(on,_n,ln,En){let un=En;const hn=_n.length;ln[un]=hn>>24&255,ln[un+1]=hn>>16&255,ln[un+2]=hn>>8&255,ln[un+3]=hn&255,un+=4,ln[un]=on.charCodeAt(0)&255,ln[un+1]=on.charCodeAt(1)&255,ln[un+2]=on.charCodeAt(2)&255,ln[un+3]=on.charCodeAt(3)&255,un+=4,ln.set(_n,un),un+=_n.length;const nn=Vt(ln,En+4,un);ln[un]=nn>>24&255,ln[un+1]=nn>>16&255,ln[un+2]=nn>>8&255,ln[un+3]=nn&255}function Xt(on,_n,ln){let En=1,un=0;for(let hn=_n;hn<ln;++hn)En=(En+(on[hn]&255))%65521,un=(un+En)%65521;return un<<16|En}function Jt(on){if(!bt.isNodeJS)return Gt(on);try{const _n=parseInt(process.versions.node)>=8?on:Buffer.from(on),ln=require$$5.deflateSync(_n,{level:9});return ln instanceof Uint8Array?ln:new Uint8Array(ln)}catch(_n){(0,bt.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+_n)}return Gt(on)}function Gt(on){let _n=on.length;const ln=65535,En=Math.ceil(_n/ln),un=new Uint8Array(2+_n+En*5+4);let hn=0;un[hn++]=120,un[hn++]=156;let nn=0;for(;_n>ln;)un[hn++]=0,un[hn++]=255,un[hn++]=255,un[hn++]=0,un[hn++]=0,un.set(on.subarray(nn,nn+ln),hn),hn+=ln,nn+=ln,_n-=ln;un[hn++]=1,un[hn++]=_n&255,un[hn++]=_n>>8&255,un[hn++]=~_n&65535&255,un[hn++]=(~_n&65535)>>8&255,un.set(on.subarray(nn),hn),hn+=on.length-nn;const mn=Xt(on,0,on.length);return un[hn++]=mn>>24&255,un[hn++]=mn>>16&255,un[hn++]=mn>>8&255,un[hn++]=mn&255,un}function en(on,_n,ln,En){const un=on.width,hn=on.height;let nn,mn,xn;const rn=on.data;switch(_n){case bt.ImageKind.GRAYSCALE_1BPP:mn=0,nn=1,xn=un+7>>3;break;case bt.ImageKind.RGB_24BPP:mn=2,nn=8,xn=un*3;break;case bt.ImageKind.RGBA_32BPP:mn=6,nn=8,xn=un*4;break;default:throw new Error("invalid format")}const qt=new Uint8Array((1+xn)*hn);let Yt=0,tn=0;for(let jn=0;jn<hn;++jn)qt[Yt++]=0,qt.set(rn.subarray(tn,tn+xn),Yt),tn+=xn,Yt+=xn;if(_n===bt.ImageKind.GRAYSCALE_1BPP&&En){Yt=0;for(let jn=0;jn<hn;jn++){Yt++;for(let Un=0;Un<xn;Un++)qt[Yt++]^=255}}const dn=new Uint8Array([un>>24&255,un>>16&255,un>>8&255,un&255,hn>>24&255,hn>>16&255,hn>>8&255,hn&255,nn,mn,0,0,0]),cn=Jt(qt),fn=Bt.length+Nt*3+dn.length+cn.length,Tn=new Uint8Array(fn);let Bn=0;return Tn.set(Bt,Bn),Bn+=Bt.length,jt("IHDR",dn,Tn,Bn),Bn+=Nt+dn.length,jt("IDATA",cn,Tn,Bn),Bn+=Nt+cn.length,jt("IEND",new Uint8Array(0),Tn,Bn),xt(Tn,"image/png",ln)}return function(_n,ln,En){const un=_n.kind===void 0?bt.ImageKind.GRAYSCALE_1BPP:_n.kind;return en(_n,un,ln,En)}}();class Rt{constructor(){this.fontSizeScale=1,this.fontWeight=Et.fontWeight,this.fontSize=0,this.textMatrix=bt.IDENTITY_MATRIX,this.fontMatrix=bt.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=bt.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Et.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(Nt,Ht){this.x=Nt,this.y=Ht}}function kt(Bt){let Nt=[];const Ht=[];for(const Vt of Bt){if(Vt.fn==="save"){Nt.push({fnId:92,fn:"group",items:[]}),Ht.push(Nt),Nt=Nt.at(-1).items;continue}Vt.fn==="restore"?Nt=Ht.pop():Nt.push(Vt)}return Nt}function Mt(Bt){if(Number.isInteger(Bt))return Bt.toString();const Nt=Bt.toFixed(10);let Ht=Nt.length-1;if(Nt[Ht]!=="0")return Nt;do Ht--;while(Nt[Ht]==="0");return Nt.substring(0,Nt[Ht]==="."?Ht:Ht+1)}function Lt(Bt){if(Bt[4]===0&&Bt[5]===0){if(Bt[1]===0&&Bt[2]===0)return Bt[0]===1&&Bt[3]===1?"":`scale(${Mt(Bt[0])} ${Mt(Bt[3])})`;if(Bt[0]===Bt[3]&&Bt[1]===-Bt[2]){const Nt=Math.acos(Bt[0])*180/Math.PI;return`rotate(${Mt(Nt)})`}}else if(Bt[0]===1&&Bt[1]===0&&Bt[2]===0&&Bt[3]===1)return`translate(${Mt(Bt[4])} ${Mt(Bt[5])})`;return`matrix(${Mt(Bt[0])} ${Mt(Bt[1])} ${Mt(Bt[2])} ${Mt(Bt[3])} ${Mt(Bt[4])} ${Mt(Bt[5])})`}let Ot=0,Ft=0,Dt=0;class $t{constructor(Nt,Ht,Vt=!1){(0,vt.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new vt.DOMSVGFactory,this.current=new Rt,this.transformMatrix=bt.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=Nt,this.objs=Ht,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!Vt,this._operatorIdMapping=[];for(const jt in bt.OPS)this._operatorIdMapping[bt.OPS[jt]]=jt}getObject(Nt,Ht=null){return typeof Nt=="string"?Nt.startsWith("g_")?this.commonObjs.get(Nt):this.objs.get(Nt):Ht}save(){this.transformStack.push(this.transformMatrix);const Nt=this.current;this.extraStack.push(Nt),this.current=Nt.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(Nt){this.save(),this.executeOpTree(Nt),this.restore()}loadDependencies(Nt){const Ht=Nt.fnArray,Vt=Nt.argsArray;for(let jt=0,Xt=Ht.length;jt<Xt;jt++)if(Ht[jt]===bt.OPS.dependency)for(const Jt of Vt[jt]){const Gt=Jt.startsWith("g_")?this.commonObjs:this.objs,en=new Promise(on=>{Gt.get(Jt,on)});this.current.dependencies.push(en)}return Promise.all(this.current.dependencies)}transform(Nt,Ht,Vt,jt,Xt,Jt){const Gt=[Nt,Ht,Vt,jt,Xt,Jt];this.transformMatrix=bt.Util.transform(this.transformMatrix,Gt),this.tgrp=null}getSVG(Nt,Ht){this.viewport=Ht;const Vt=this._initialize(Ht);return this.loadDependencies(Nt).then(()=>(this.transformMatrix=bt.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(Nt)),Vt))}convertOpList(Nt){const Ht=this._operatorIdMapping,Vt=Nt.argsArray,jt=Nt.fnArray,Xt=[];for(let Jt=0,Gt=jt.length;Jt<Gt;Jt++){const en=jt[Jt];Xt.push({fnId:en,fn:Ht[en],args:Vt[Jt]})}return kt(Xt)}executeOpTree(Nt){for(const Ht of Nt){const Vt=Ht.fn,jt=Ht.fnId,Xt=Ht.args;switch(jt|0){case bt.OPS.beginText:this.beginText();break;case bt.OPS.dependency:break;case bt.OPS.setLeading:this.setLeading(Xt);break;case bt.OPS.setLeadingMoveText:this.setLeadingMoveText(Xt[0],Xt[1]);break;case bt.OPS.setFont:this.setFont(Xt);break;case bt.OPS.showText:this.showText(Xt[0]);break;case bt.OPS.showSpacedText:this.showText(Xt[0]);break;case bt.OPS.endText:this.endText();break;case bt.OPS.moveText:this.moveText(Xt[0],Xt[1]);break;case bt.OPS.setCharSpacing:this.setCharSpacing(Xt[0]);break;case bt.OPS.setWordSpacing:this.setWordSpacing(Xt[0]);break;case bt.OPS.setHScale:this.setHScale(Xt[0]);break;case bt.OPS.setTextMatrix:this.setTextMatrix(Xt[0],Xt[1],Xt[2],Xt[3],Xt[4],Xt[5]);break;case bt.OPS.setTextRise:this.setTextRise(Xt[0]);break;case bt.OPS.setTextRenderingMode:this.setTextRenderingMode(Xt[0]);break;case bt.OPS.setLineWidth:this.setLineWidth(Xt[0]);break;case bt.OPS.setLineJoin:this.setLineJoin(Xt[0]);break;case bt.OPS.setLineCap:this.setLineCap(Xt[0]);break;case bt.OPS.setMiterLimit:this.setMiterLimit(Xt[0]);break;case bt.OPS.setFillRGBColor:this.setFillRGBColor(Xt[0],Xt[1],Xt[2]);break;case bt.OPS.setStrokeRGBColor:this.setStrokeRGBColor(Xt[0],Xt[1],Xt[2]);break;case bt.OPS.setStrokeColorN:this.setStrokeColorN(Xt);break;case bt.OPS.setFillColorN:this.setFillColorN(Xt);break;case bt.OPS.shadingFill:this.shadingFill(Xt[0]);break;case bt.OPS.setDash:this.setDash(Xt[0],Xt[1]);break;case bt.OPS.setRenderingIntent:this.setRenderingIntent(Xt[0]);break;case bt.OPS.setFlatness:this.setFlatness(Xt[0]);break;case bt.OPS.setGState:this.setGState(Xt[0]);break;case bt.OPS.fill:this.fill();break;case bt.OPS.eoFill:this.eoFill();break;case bt.OPS.stroke:this.stroke();break;case bt.OPS.fillStroke:this.fillStroke();break;case bt.OPS.eoFillStroke:this.eoFillStroke();break;case bt.OPS.clip:this.clip("nonzero");break;case bt.OPS.eoClip:this.clip("evenodd");break;case bt.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case bt.OPS.paintImageXObject:this.paintImageXObject(Xt[0]);break;case bt.OPS.paintInlineImageXObject:this.paintInlineImageXObject(Xt[0]);break;case bt.OPS.paintImageMaskXObject:this.paintImageMaskXObject(Xt[0]);break;case bt.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(Xt[0],Xt[1]);break;case bt.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case bt.OPS.closePath:this.closePath();break;case bt.OPS.closeStroke:this.closeStroke();break;case bt.OPS.closeFillStroke:this.closeFillStroke();break;case bt.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case bt.OPS.nextLine:this.nextLine();break;case bt.OPS.transform:this.transform(Xt[0],Xt[1],Xt[2],Xt[3],Xt[4],Xt[5]);break;case bt.OPS.constructPath:this.constructPath(Xt[0],Xt[1]);break;case bt.OPS.endPath:this.endPath();break;case 92:this.group(Ht.items);break;default:(0,bt.warn)(`Unimplemented operator ${Vt}`);break}}}setWordSpacing(Nt){this.current.wordSpacing=Nt}setCharSpacing(Nt){this.current.charSpacing=Nt}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(Nt,Ht,Vt,jt,Xt,Jt){const Gt=this.current;Gt.textMatrix=Gt.lineMatrix=[Nt,Ht,Vt,jt,Xt,Jt],Gt.textMatrixScale=Math.hypot(Nt,Ht),Gt.x=Gt.lineX=0,Gt.y=Gt.lineY=0,Gt.xcoords=[],Gt.ycoords=[],Gt.tspan=this.svgFactory.createElement("svg:tspan"),Gt.tspan.setAttributeNS(null,"font-family",Gt.fontFamily),Gt.tspan.setAttributeNS(null,"font-size",`${Mt(Gt.fontSize)}px`),Gt.tspan.setAttributeNS(null,"y",Mt(-Gt.y)),Gt.txtElement=this.svgFactory.createElement("svg:text"),Gt.txtElement.append(Gt.tspan)}beginText(){const Nt=this.current;Nt.x=Nt.lineX=0,Nt.y=Nt.lineY=0,Nt.textMatrix=bt.IDENTITY_MATRIX,Nt.lineMatrix=bt.IDENTITY_MATRIX,Nt.textMatrixScale=1,Nt.tspan=this.svgFactory.createElement("svg:tspan"),Nt.txtElement=this.svgFactory.createElement("svg:text"),Nt.txtgrp=this.svgFactory.createElement("svg:g"),Nt.xcoords=[],Nt.ycoords=[]}moveText(Nt,Ht){const Vt=this.current;Vt.x=Vt.lineX+=Nt,Vt.y=Vt.lineY+=Ht,Vt.xcoords=[],Vt.ycoords=[],Vt.tspan=this.svgFactory.createElement("svg:tspan"),Vt.tspan.setAttributeNS(null,"font-family",Vt.fontFamily),Vt.tspan.setAttributeNS(null,"font-size",`${Mt(Vt.fontSize)}px`),Vt.tspan.setAttributeNS(null,"y",Mt(-Vt.y))}showText(Nt){const Ht=this.current,Vt=Ht.font,jt=Ht.fontSize;if(jt===0)return;const Xt=Ht.fontSizeScale,Jt=Ht.charSpacing,Gt=Ht.wordSpacing,en=Ht.fontDirection,on=Ht.textHScale*en,_n=Vt.vertical,ln=_n?1:-1,En=Vt.defaultVMetrics,un=jt*Ht.fontMatrix[0];let hn=0;for(const xn of Nt){if(xn===null){hn+=en*Gt;continue}else if(typeof xn=="number"){hn+=ln*xn*jt/1e3;continue}const rn=(xn.isSpace?Gt:0)+Jt,qt=xn.fontChar;let Yt,tn,dn=xn.width;if(_n){let fn;const Tn=xn.vmetric||En;fn=xn.vmetric?Tn[1]:dn*.5,fn=-fn*un;const Bn=Tn[2]*un;dn=Tn?-Tn[0]:dn,Yt=fn/Xt,tn=(hn+Bn)/Xt}else Yt=hn/Xt,tn=0;(xn.isInFont||Vt.missingFile)&&(Ht.xcoords.push(Ht.x+Yt),_n&&Ht.ycoords.push(-Ht.y+tn),Ht.tspan.textContent+=qt);const cn=_n?dn*un-rn*en:dn*un+rn*en;hn+=cn}Ht.tspan.setAttributeNS(null,"x",Ht.xcoords.map(Mt).join(" ")),_n?Ht.tspan.setAttributeNS(null,"y",Ht.ycoords.map(Mt).join(" ")):Ht.tspan.setAttributeNS(null,"y",Mt(-Ht.y)),_n?Ht.y-=hn:Ht.x+=hn*on,Ht.tspan.setAttributeNS(null,"font-family",Ht.fontFamily),Ht.tspan.setAttributeNS(null,"font-size",`${Mt(Ht.fontSize)}px`),Ht.fontStyle!==Et.fontStyle&&Ht.tspan.setAttributeNS(null,"font-style",Ht.fontStyle),Ht.fontWeight!==Et.fontWeight&&Ht.tspan.setAttributeNS(null,"font-weight",Ht.fontWeight);const nn=Ht.textRenderingMode&bt.TextRenderingMode.FILL_STROKE_MASK;if(nn===bt.TextRenderingMode.FILL||nn===bt.TextRenderingMode.FILL_STROKE?(Ht.fillColor!==Et.fillColor&&Ht.tspan.setAttributeNS(null,"fill",Ht.fillColor),Ht.fillAlpha<1&&Ht.tspan.setAttributeNS(null,"fill-opacity",Ht.fillAlpha)):Ht.textRenderingMode===bt.TextRenderingMode.ADD_TO_PATH?Ht.tspan.setAttributeNS(null,"fill","transparent"):Ht.tspan.setAttributeNS(null,"fill","none"),nn===bt.TextRenderingMode.STROKE||nn===bt.TextRenderingMode.FILL_STROKE){const xn=1/(Ht.textMatrixScale||1);this._setStrokeAttributes(Ht.tspan,xn)}let mn=Ht.textMatrix;Ht.textRise!==0&&(mn=mn.slice(),mn[5]+=Ht.textRise),Ht.txtElement.setAttributeNS(null,"transform",`${Lt(mn)} scale(${Mt(on)}, -1)`),Ht.txtElement.setAttributeNS(At,"xml:space","preserve"),Ht.txtElement.append(Ht.tspan),Ht.txtgrp.append(Ht.txtElement),this._ensureTransformGroup().append(Ht.txtElement)}setLeadingMoveText(Nt,Ht){this.setLeading(-Ht),this.moveText(Nt,Ht)}addFontStyle(Nt){if(!Nt.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const Ht=xt(Nt.data,Nt.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${Nt.loadedName}"; src: url(${Ht}); }
`}setFont(Nt){const Ht=this.current,Vt=this.commonObjs.get(Nt[0]);let jt=Nt[1];Ht.font=Vt,this.embedFonts&&!Vt.missingFile&&!this.embeddedFonts[Vt.loadedName]&&(this.addFontStyle(Vt),this.embeddedFonts[Vt.loadedName]=Vt),Ht.fontMatrix=Vt.fontMatrix||bt.FONT_IDENTITY_MATRIX;let Xt="normal";Vt.black?Xt="900":Vt.bold&&(Xt="bold");const Jt=Vt.italic?"italic":"normal";jt<0?(jt=-jt,Ht.fontDirection=-1):Ht.fontDirection=1,Ht.fontSize=jt,Ht.fontFamily=Vt.loadedName,Ht.fontWeight=Xt,Ht.fontStyle=Jt,Ht.tspan=this.svgFactory.createElement("svg:tspan"),Ht.tspan.setAttributeNS(null,"y",Mt(-Ht.y)),Ht.xcoords=[],Ht.ycoords=[]}endText(){var Ht;const Nt=this.current;Nt.textRenderingMode&bt.TextRenderingMode.ADD_TO_PATH_FLAG&&((Ht=Nt.txtElement)!=null&&Ht.hasChildNodes())&&(Nt.element=Nt.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(Nt){Nt>0&&(this.current.lineWidth=Nt)}setLineCap(Nt){this.current.lineCap=wt[Nt]}setLineJoin(Nt){this.current.lineJoin=Ct[Nt]}setMiterLimit(Nt){this.current.miterLimit=Nt}setStrokeAlpha(Nt){this.current.strokeAlpha=Nt}setStrokeRGBColor(Nt,Ht,Vt){this.current.strokeColor=bt.Util.makeHexColor(Nt,Ht,Vt)}setFillAlpha(Nt){this.current.fillAlpha=Nt}setFillRGBColor(Nt,Ht,Vt){this.current.fillColor=bt.Util.makeHexColor(Nt,Ht,Vt),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(Nt){this.current.strokeColor=this._makeColorN_Pattern(Nt)}setFillColorN(Nt){this.current.fillColor=this._makeColorN_Pattern(Nt)}shadingFill(Nt){const{width:Ht,height:Vt}=this.viewport,jt=bt.Util.inverseTransform(this.transformMatrix),[Xt,Jt,Gt,en]=bt.Util.getAxialAlignedBoundingBox([0,0,Ht,Vt],jt),on=this.svgFactory.createElement("svg:rect");on.setAttributeNS(null,"x",Xt),on.setAttributeNS(null,"y",Jt),on.setAttributeNS(null,"width",Gt-Xt),on.setAttributeNS(null,"height",en-Jt),on.setAttributeNS(null,"fill",this._makeShadingPattern(Nt)),this.current.fillAlpha<1&&on.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(on)}_makeColorN_Pattern(Nt){return Nt[0]==="TilingPattern"?this._makeTilingPattern(Nt):this._makeShadingPattern(Nt)}_makeTilingPattern(Nt){const Ht=Nt[1],Vt=Nt[2],jt=Nt[3]||bt.IDENTITY_MATRIX,[Xt,Jt,Gt,en]=Nt[4],on=Nt[5],_n=Nt[6],ln=Nt[7],En=`shading${Dt++}`,[un,hn,nn,mn]=bt.Util.normalizeRect([...bt.Util.applyTransform([Xt,Jt],jt),...bt.Util.applyTransform([Gt,en],jt)]),[xn,rn]=bt.Util.singularValueDecompose2dScale(jt),qt=on*xn,Yt=_n*rn,tn=this.svgFactory.createElement("svg:pattern");tn.setAttributeNS(null,"id",En),tn.setAttributeNS(null,"patternUnits","userSpaceOnUse"),tn.setAttributeNS(null,"width",qt),tn.setAttributeNS(null,"height",Yt),tn.setAttributeNS(null,"x",`${un}`),tn.setAttributeNS(null,"y",`${hn}`);const dn=this.svg,cn=this.transformMatrix,fn=this.current.fillColor,Tn=this.current.strokeColor,Bn=this.svgFactory.create(nn-un,mn-hn);if(this.svg=Bn,this.transformMatrix=jt,ln===2){const jn=bt.Util.makeHexColor(...Ht);this.current.fillColor=jn,this.current.strokeColor=jn}return this.executeOpTree(this.convertOpList(Vt)),this.svg=dn,this.transformMatrix=cn,this.current.fillColor=fn,this.current.strokeColor=Tn,tn.append(Bn.childNodes[0]),this.defs.append(tn),`url(#${En})`}_makeShadingPattern(Nt){switch(typeof Nt=="string"&&(Nt=this.objs.get(Nt)),Nt[0]){case"RadialAxial":const Ht=`shading${Dt++}`,Vt=Nt[3];let jt;switch(Nt[1]){case"axial":const Xt=Nt[4],Jt=Nt[5];jt=this.svgFactory.createElement("svg:linearGradient"),jt.setAttributeNS(null,"id",Ht),jt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),jt.setAttributeNS(null,"x1",Xt[0]),jt.setAttributeNS(null,"y1",Xt[1]),jt.setAttributeNS(null,"x2",Jt[0]),jt.setAttributeNS(null,"y2",Jt[1]);break;case"radial":const Gt=Nt[4],en=Nt[5],on=Nt[6],_n=Nt[7];jt=this.svgFactory.createElement("svg:radialGradient"),jt.setAttributeNS(null,"id",Ht),jt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),jt.setAttributeNS(null,"cx",en[0]),jt.setAttributeNS(null,"cy",en[1]),jt.setAttributeNS(null,"r",_n),jt.setAttributeNS(null,"fx",Gt[0]),jt.setAttributeNS(null,"fy",Gt[1]),jt.setAttributeNS(null,"fr",on);break;default:throw new Error(`Unknown RadialAxial type: ${Nt[1]}`)}for(const Xt of Vt){const Jt=this.svgFactory.createElement("svg:stop");Jt.setAttributeNS(null,"offset",Xt[0]),Jt.setAttributeNS(null,"stop-color",Xt[1]),jt.append(Jt)}return this.defs.append(jt),`url(#${Ht})`;case"Mesh":return(0,bt.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${Nt[0]}`)}}setDash(Nt,Ht){this.current.dashArray=Nt,this.current.dashPhase=Ht}constructPath(Nt,Ht){const Vt=this.current;let jt=Vt.x,Xt=Vt.y,Jt=[],Gt=0;for(const en of Nt)switch(en|0){case bt.OPS.rectangle:jt=Ht[Gt++],Xt=Ht[Gt++];const on=Ht[Gt++],_n=Ht[Gt++],ln=jt+on,En=Xt+_n;Jt.push("M",Mt(jt),Mt(Xt),"L",Mt(ln),Mt(Xt),"L",Mt(ln),Mt(En),"L",Mt(jt),Mt(En),"Z");break;case bt.OPS.moveTo:jt=Ht[Gt++],Xt=Ht[Gt++],Jt.push("M",Mt(jt),Mt(Xt));break;case bt.OPS.lineTo:jt=Ht[Gt++],Xt=Ht[Gt++],Jt.push("L",Mt(jt),Mt(Xt));break;case bt.OPS.curveTo:jt=Ht[Gt+4],Xt=Ht[Gt+5],Jt.push("C",Mt(Ht[Gt]),Mt(Ht[Gt+1]),Mt(Ht[Gt+2]),Mt(Ht[Gt+3]),Mt(jt),Mt(Xt)),Gt+=6;break;case bt.OPS.curveTo2:Jt.push("C",Mt(jt),Mt(Xt),Mt(Ht[Gt]),Mt(Ht[Gt+1]),Mt(Ht[Gt+2]),Mt(Ht[Gt+3])),jt=Ht[Gt+2],Xt=Ht[Gt+3],Gt+=4;break;case bt.OPS.curveTo3:jt=Ht[Gt+2],Xt=Ht[Gt+3],Jt.push("C",Mt(Ht[Gt]),Mt(Ht[Gt+1]),Mt(jt),Mt(Xt),Mt(jt),Mt(Xt)),Gt+=4;break;case bt.OPS.closePath:Jt.push("Z");break}Jt=Jt.join(" "),Vt.path&&Nt.length>0&&Nt[0]!==bt.OPS.rectangle&&Nt[0]!==bt.OPS.moveTo?Jt=Vt.path.getAttributeNS(null,"d")+Jt:(Vt.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(Vt.path)),Vt.path.setAttributeNS(null,"d",Jt),Vt.path.setAttributeNS(null,"fill","none"),Vt.element=Vt.path,Vt.setCurrentPoint(jt,Xt)}endPath(){const Nt=this.current;if(Nt.path=null,!this.pendingClip)return;if(!Nt.element){this.pendingClip=null;return}const Ht=`clippath${Ot++}`,Vt=this.svgFactory.createElement("svg:clipPath");Vt.setAttributeNS(null,"id",Ht),Vt.setAttributeNS(null,"transform",Lt(this.transformMatrix));const jt=Nt.element.cloneNode(!0);if(this.pendingClip==="evenodd"?jt.setAttributeNS(null,"clip-rule","evenodd"):jt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,Vt.append(jt),this.defs.append(Vt),Nt.activeClipUrl){Nt.clipGroup=null;for(const Xt of this.extraStack)Xt.clipGroup=null;Vt.setAttributeNS(null,"clip-path",Nt.activeClipUrl)}Nt.activeClipUrl=`url(#${Ht})`,this.tgrp=null}clip(Nt){this.pendingClip=Nt}closePath(){const Nt=this.current;if(Nt.path){const Ht=`${Nt.path.getAttributeNS(null,"d")}Z`;Nt.path.setAttributeNS(null,"d",Ht)}}setLeading(Nt){this.current.leading=-Nt}setTextRise(Nt){this.current.textRise=Nt}setTextRenderingMode(Nt){this.current.textRenderingMode=Nt}setHScale(Nt){this.current.textHScale=Nt/100}setRenderingIntent(Nt){}setFlatness(Nt){}setGState(Nt){for(const[Ht,Vt]of Nt)switch(Ht){case"LW":this.setLineWidth(Vt);break;case"LC":this.setLineCap(Vt);break;case"LJ":this.setLineJoin(Vt);break;case"ML":this.setMiterLimit(Vt);break;case"D":this.setDash(Vt[0],Vt[1]);break;case"RI":this.setRenderingIntent(Vt);break;case"FL":this.setFlatness(Vt);break;case"Font":this.setFont(Vt);break;case"CA":this.setStrokeAlpha(Vt);break;case"ca":this.setFillAlpha(Vt);break;default:(0,bt.warn)(`Unimplemented graphic state operator ${Ht}`);break}}fill(){const Nt=this.current;Nt.element&&(Nt.element.setAttributeNS(null,"fill",Nt.fillColor),Nt.element.setAttributeNS(null,"fill-opacity",Nt.fillAlpha),this.endPath())}stroke(){const Nt=this.current;Nt.element&&(this._setStrokeAttributes(Nt.element),Nt.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(Nt,Ht=1){const Vt=this.current;let jt=Vt.dashArray;Ht!==1&&jt.length>0&&(jt=jt.map(function(Xt){return Ht*Xt})),Nt.setAttributeNS(null,"stroke",Vt.strokeColor),Nt.setAttributeNS(null,"stroke-opacity",Vt.strokeAlpha),Nt.setAttributeNS(null,"stroke-miterlimit",Mt(Vt.miterLimit)),Nt.setAttributeNS(null,"stroke-linecap",Vt.lineCap),Nt.setAttributeNS(null,"stroke-linejoin",Vt.lineJoin),Nt.setAttributeNS(null,"stroke-width",Mt(Ht*Vt.lineWidth)+"px"),Nt.setAttributeNS(null,"stroke-dasharray",jt.map(Mt).join(" ")),Nt.setAttributeNS(null,"stroke-dashoffset",Mt(Ht*Vt.dashPhase)+"px")}eoFill(){var Nt;(Nt=this.current.element)==null||Nt.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var Nt;(Nt=this.current.element)==null||Nt.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const Nt=this.svgFactory.createElement("svg:rect");Nt.setAttributeNS(null,"x","0"),Nt.setAttributeNS(null,"y","0"),Nt.setAttributeNS(null,"width","1px"),Nt.setAttributeNS(null,"height","1px"),Nt.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(Nt)}paintImageXObject(Nt){const Ht=this.getObject(Nt);if(!Ht){(0,bt.warn)(`Dependent image with object ID ${Nt} is not ready yet`);return}this.paintInlineImageXObject(Ht)}paintInlineImageXObject(Nt,Ht){const Vt=Nt.width,jt=Nt.height,Xt=Pt(Nt,this.forceDataSchema,!!Ht),Jt=this.svgFactory.createElement("svg:rect");Jt.setAttributeNS(null,"x","0"),Jt.setAttributeNS(null,"y","0"),Jt.setAttributeNS(null,"width",Mt(Vt)),Jt.setAttributeNS(null,"height",Mt(jt)),this.current.element=Jt,this.clip("nonzero");const Gt=this.svgFactory.createElement("svg:image");Gt.setAttributeNS(_t,"xlink:href",Xt),Gt.setAttributeNS(null,"x","0"),Gt.setAttributeNS(null,"y",Mt(-jt)),Gt.setAttributeNS(null,"width",Mt(Vt)+"px"),Gt.setAttributeNS(null,"height",Mt(jt)+"px"),Gt.setAttributeNS(null,"transform",`scale(${Mt(1/Vt)} ${Mt(-1/jt)})`),Ht?Ht.append(Gt):this._ensureTransformGroup().append(Gt)}paintImageMaskXObject(Nt){const Ht=this.getObject(Nt.data,Nt);if(Ht.bitmap){(0,bt.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const Vt=this.current,jt=Ht.width,Xt=Ht.height,Jt=Vt.fillColor;Vt.maskId=`mask${Ft++}`;const Gt=this.svgFactory.createElement("svg:mask");Gt.setAttributeNS(null,"id",Vt.maskId);const en=this.svgFactory.createElement("svg:rect");en.setAttributeNS(null,"x","0"),en.setAttributeNS(null,"y","0"),en.setAttributeNS(null,"width",Mt(jt)),en.setAttributeNS(null,"height",Mt(Xt)),en.setAttributeNS(null,"fill",Jt),en.setAttributeNS(null,"mask",`url(#${Vt.maskId})`),this.defs.append(Gt),this._ensureTransformGroup().append(en),this.paintInlineImageXObject(Ht,Gt)}paintFormXObjectBegin(Nt,Ht){if(Array.isArray(Nt)&&Nt.length===6&&this.transform(Nt[0],Nt[1],Nt[2],Nt[3],Nt[4],Nt[5]),Ht){const Vt=Ht[2]-Ht[0],jt=Ht[3]-Ht[1],Xt=this.svgFactory.createElement("svg:rect");Xt.setAttributeNS(null,"x",Ht[0]),Xt.setAttributeNS(null,"y",Ht[1]),Xt.setAttributeNS(null,"width",Mt(Vt)),Xt.setAttributeNS(null,"height",Mt(jt)),this.current.element=Xt,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(Nt){const Ht=this.svgFactory.create(Nt.width,Nt.height),Vt=this.svgFactory.createElement("svg:defs");Ht.append(Vt),this.defs=Vt;const jt=this.svgFactory.createElement("svg:g");return jt.setAttributeNS(null,"transform",Lt(Nt.transform)),Ht.append(jt),this.svg=jt,Ht}_ensureClipGroup(){if(!this.current.clipGroup){const Nt=this.svgFactory.createElement("svg:g");Nt.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(Nt),this.current.clipGroup=Nt}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",Lt(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}$.SVGGraphics=$t},(_e,$)=>{Object.defineProperty($,"__esModule",{value:!0}),$.XfaText=void 0;class ht{static textContent(bt){const Et=[],At={items:Et,styles:Object.create(null)};function _t(wt){var Pt;if(!wt)return;let Ct=null;const xt=wt.name;if(xt==="#text")Ct=wt.value;else if(ht.shouldBuildText(xt))(Pt=wt==null?void 0:wt.attributes)!=null&&Pt.textContent?Ct=wt.attributes.textContent:wt.value&&(Ct=wt.value);else return;if(Ct!==null&&Et.push({str:Ct}),!!wt.children)for(const Rt of wt.children)_t(Rt)}return _t(bt),At}static shouldBuildText(bt){return!(bt==="textarea"||bt==="input"||bt==="option"||bt==="select")}}$.XfaText=ht},(_e,$,ht)=>{Object.defineProperty($,"__esModule",{value:!0}),$.TextLayerRenderTask=void 0,$.renderTextLayer=Lt,$.updateTextLayer=Ot;var vt=ht(1),bt=ht(6);const Et=1e5,At=30,_t=.8,wt=new Map;function Ct(Ft,Dt){let $t;if(Dt&&vt.FeatureTest.isOffscreenCanvasSupported)$t=new OffscreenCanvas(Ft,Ft).getContext("2d",{alpha:!1});else{const Bt=document.createElement("canvas");Bt.width=Bt.height=Ft,$t=Bt.getContext("2d",{alpha:!1})}return $t}function xt(Ft,Dt){const $t=wt.get(Ft);if($t)return $t;const Bt=Ct(At,Dt);Bt.font=`${At}px ${Ft}`;const Nt=Bt.measureText("");let Ht=Nt.fontBoundingBoxAscent,Vt=Math.abs(Nt.fontBoundingBoxDescent);if(Ht){const Xt=Ht/(Ht+Vt);return wt.set(Ft,Xt),Bt.canvas.width=Bt.canvas.height=0,Xt}Bt.strokeStyle="red",Bt.clearRect(0,0,At,At),Bt.strokeText("g",0,0);let jt=Bt.getImageData(0,0,At,At).data;Vt=0;for(let Xt=jt.length-1-3;Xt>=0;Xt-=4)if(jt[Xt]>0){Vt=Math.ceil(Xt/4/At);break}Bt.clearRect(0,0,At,At),Bt.strokeText("A",0,At),jt=Bt.getImageData(0,0,At,At).data,Ht=0;for(let Xt=0,Jt=jt.length;Xt<Jt;Xt+=4)if(jt[Xt]>0){Ht=At-Math.floor(Xt/4/At);break}if(Bt.canvas.width=Bt.canvas.height=0,Ht){const Xt=Ht/(Ht+Vt);return wt.set(Ft,Xt),Xt}return wt.set(Ft,_t),_t}function Pt(Ft,Dt,$t){const Bt=document.createElement("span"),Nt={angle:0,canvasWidth:0,hasText:Dt.str!=="",hasEOL:Dt.hasEOL,fontSize:0};Ft._textDivs.push(Bt);const Ht=vt.Util.transform(Ft._transform,Dt.transform);let Vt=Math.atan2(Ht[1],Ht[0]);const jt=$t[Dt.fontName];jt.vertical&&(Vt+=Math.PI/2);const Xt=Math.hypot(Ht[2],Ht[3]),Jt=Xt*xt(jt.fontFamily,Ft._isOffscreenCanvasSupported);let Gt,en;Vt===0?(Gt=Ht[4],en=Ht[5]-Jt):(Gt=Ht[4]+Jt*Math.sin(Vt),en=Ht[5]-Jt*Math.cos(Vt));const on="calc(var(--scale-factor)*",_n=Bt.style;Ft._container===Ft._rootContainer?(_n.left=`${(100*Gt/Ft._pageWidth).toFixed(2)}%`,_n.top=`${(100*en/Ft._pageHeight).toFixed(2)}%`):(_n.left=`${on}${Gt.toFixed(2)}px)`,_n.top=`${on}${en.toFixed(2)}px)`),_n.fontSize=`${on}${Xt.toFixed(2)}px)`,_n.fontFamily=jt.fontFamily,Nt.fontSize=Xt,Bt.setAttribute("role","presentation"),Bt.textContent=Dt.str,Bt.dir=Dt.dir,Ft._fontInspectorEnabled&&(Bt.dataset.fontName=Dt.fontName),Vt!==0&&(Nt.angle=Vt*(180/Math.PI));let ln=!1;if(Dt.str.length>1)ln=!0;else if(Dt.str!==" "&&Dt.transform[0]!==Dt.transform[3]){const En=Math.abs(Dt.transform[0]),un=Math.abs(Dt.transform[3]);En!==un&&Math.max(En,un)/Math.min(En,un)>1.5&&(ln=!0)}ln&&(Nt.canvasWidth=jt.vertical?Dt.height:Dt.width),Ft._textDivProperties.set(Bt,Nt),Ft._isReadableStream&&Ft._layoutText(Bt)}function Rt(Ft){const{div:Dt,scale:$t,properties:Bt,ctx:Nt,prevFontSize:Ht,prevFontFamily:Vt}=Ft,{style:jt}=Dt;let Xt="";if(Bt.canvasWidth!==0&&Bt.hasText){const{fontFamily:Jt}=jt,{canvasWidth:Gt,fontSize:en}=Bt;(Ht!==en||Vt!==Jt)&&(Nt.font=`${en*$t}px ${Jt}`,Ft.prevFontSize=en,Ft.prevFontFamily=Jt);const{width:on}=Nt.measureText(Dt.textContent);on>0&&(Xt=`scaleX(${Gt*$t/on})`)}Bt.angle!==0&&(Xt=`rotate(${Bt.angle}deg) ${Xt}`),Xt.length>0&&(jt.transform=Xt)}function kt(Ft){if(Ft._canceled)return;const Dt=Ft._textDivs,$t=Ft._capability;if(Dt.length>Et){$t.resolve();return}if(!Ft._isReadableStream)for(const Nt of Dt)Ft._layoutText(Nt);$t.resolve()}class Mt{constructor({textContentSource:Dt,container:$t,viewport:Bt,textDivs:Nt,textDivProperties:Ht,textContentItemsStr:Vt,isOffscreenCanvasSupported:jt}){var on;this._textContentSource=Dt,this._isReadableStream=Dt instanceof ReadableStream,this._container=this._rootContainer=$t,this._textDivs=Nt||[],this._textContentItemsStr=Vt||[],this._isOffscreenCanvasSupported=jt,this._fontInspectorEnabled=!!((on=globalThis.FontInspector)!=null&&on.enabled),this._reader=null,this._textDivProperties=Ht||new WeakMap,this._canceled=!1,this._capability=new vt.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:Bt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Ct(0,jt)};const{pageWidth:Xt,pageHeight:Jt,pageX:Gt,pageY:en}=Bt.rawDims;this._transform=[1,0,0,-1,-Gt,en+Jt],this._pageWidth=Xt,this._pageHeight=Jt,(0,bt.setLayerDimensions)($t,Bt),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new vt.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new vt.AbortException("TextLayer task cancelled."))}_processItems(Dt,$t){for(const Bt of Dt){if(Bt.str===void 0){if(Bt.type==="beginMarkedContentProps"||Bt.type==="beginMarkedContent"){const Nt=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),Bt.id!==null&&this._container.setAttribute("id",`${Bt.id}`),Nt.append(this._container)}else Bt.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(Bt.str),Pt(this,Bt,$t)}}_layoutText(Dt){const $t=this._layoutTextParams.properties=this._textDivProperties.get(Dt);if(this._layoutTextParams.div=Dt,Rt(this._layoutTextParams),$t.hasText&&this._container.append(Dt),$t.hasEOL){const Bt=document.createElement("br");Bt.setAttribute("role","presentation"),this._container.append(Bt)}}_render(){const Dt=new vt.PromiseCapability;let $t=Object.create(null);if(this._isReadableStream){const Bt=()=>{this._reader.read().then(({value:Nt,done:Ht})=>{if(Ht){Dt.resolve();return}Object.assign($t,Nt.styles),this._processItems(Nt.items,$t),Bt()},Dt.reject)};this._reader=this._textContentSource.getReader(),Bt()}else if(this._textContentSource){const{items:Bt,styles:Nt}=this._textContentSource;this._processItems(Bt,Nt),Dt.resolve()}else throw new Error('No "textContentSource" parameter specified.');Dt.promise.then(()=>{$t=null,kt(this)},this._capability.reject)}}$.TextLayerRenderTask=Mt;function Lt(Ft){!Ft.textContentSource&&(Ft.textContent||Ft.textContentStream)&&((0,bt.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),Ft.textContentSource=Ft.textContent||Ft.textContentStream);const{container:Dt,viewport:$t}=Ft,Bt=getComputedStyle(Dt),Nt=Bt.getPropertyValue("visibility"),Ht=parseFloat(Bt.getPropertyValue("--scale-factor"));Nt==="visible"&&(!Ht||Math.abs(Ht-$t.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const Vt=new Mt(Ft);return Vt._render(),Vt}function Ot({container:Ft,viewport:Dt,textDivs:$t,textDivProperties:Bt,isOffscreenCanvasSupported:Nt,mustRotate:Ht=!0,mustRescale:Vt=!0}){if(Ht&&(0,bt.setLayerDimensions)(Ft,{rotation:Dt.rotation}),Vt){const jt=Ct(0,Nt),Jt={prevFontSize:null,prevFontFamily:null,div:null,scale:Dt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:jt};for(const Gt of $t)Jt.properties=Bt.get(Gt),Jt.div=Gt,Rt(Jt)}}},(_e,$,ht)=>{var xt,Pt,Rt,kt,Mt,Lt,Ot,Ft,Dt,$t,Bt,BA,V0,VA,HA;Object.defineProperty($,"__esModule",{value:!0}),$.AnnotationEditorLayer=void 0;var vt=ht(1),bt=ht(4),Et=ht(28),At=ht(33),_t=ht(6),wt=ht(34);const Xt=class Xt{constructor({uiManager:Gt,pageIndex:en,div:on,accessibilityManager:_n,annotationLayer:ln,viewport:En,l10n:un}){Kt(this,Bt);Kt(this,xt);Kt(this,Pt,!1);Kt(this,Rt,null);Kt(this,kt,this.pointerup.bind(this));Kt(this,Mt,this.pointerdown.bind(this));Kt(this,Lt,new Map);Kt(this,Ot,!1);Kt(this,Ft,!1);Kt(this,Dt,!1);Kt(this,$t);const hn=[Et.FreeTextEditor,At.InkEditor,wt.StampEditor];if(!Xt._initialized){Xt._initialized=!0;for(const nn of hn)nn.initialize(un)}Gt.registerEditorTypes(hn),zt(this,$t,Gt),this.pageIndex=en,this.div=on,zt(this,xt,_n),zt(this,Rt,ln),this.viewport=En,St(this,$t).addLayer(this)}get isEmpty(){return St(this,Lt).size===0}updateToolbar(Gt){St(this,$t).updateToolbar(Gt)}updateMode(Gt=St(this,$t).getMode()){Ut(this,Bt,HA).call(this),Gt===vt.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),Gt!==vt.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",Gt===vt.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",Gt===vt.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",Gt===vt.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(Gt){if(!Gt&&St(this,$t).getMode()!==vt.AnnotationEditorType.INK)return;if(!Gt){for(const on of St(this,Lt).values())if(on.isEmpty()){on.setInBackground();return}}Ut(this,Bt,V0).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(Gt){St(this,$t).setEditingState(Gt)}addCommands(Gt){St(this,$t).addCommands(Gt)}enable(){this.div.style.pointerEvents="auto";const Gt=new Set;for(const on of St(this,Lt).values())on.enableEditing(),on.annotationElementId&&Gt.add(on.annotationElementId);if(!St(this,Rt))return;const en=St(this,Rt).getEditableAnnotations();for(const on of en){if(on.hide(),St(this,$t).isDeletedAnnotationElement(on.data.id)||Gt.has(on.data.id))continue;const _n=this.deserialize(on);_n&&(this.addOrRebuild(_n),_n.enableEditing())}}disable(){var en;zt(this,Dt,!0),this.div.style.pointerEvents="none";const Gt=new Set;for(const on of St(this,Lt).values()){if(on.disableEditing(),!on.annotationElementId||on.serialize()!==null){Gt.add(on.annotationElementId);continue}(en=this.getEditableAnnotation(on.annotationElementId))==null||en.show(),on.remove()}if(St(this,Rt)){const on=St(this,Rt).getEditableAnnotations();for(const _n of on){const{id:ln}=_n.data;Gt.has(ln)||St(this,$t).isDeletedAnnotationElement(ln)||_n.show()}}Ut(this,Bt,HA).call(this),this.isEmpty&&(this.div.hidden=!0),zt(this,Dt,!1)}getEditableAnnotation(Gt){var en;return((en=St(this,Rt))==null?void 0:en.getEditableAnnotation(Gt))||null}setActiveEditor(Gt){St(this,$t).getActive()!==Gt&&St(this,$t).setActiveEditor(Gt)}enableClick(){this.div.addEventListener("pointerdown",St(this,Mt)),this.div.addEventListener("pointerup",St(this,kt))}disableClick(){this.div.removeEventListener("pointerdown",St(this,Mt)),this.div.removeEventListener("pointerup",St(this,kt))}attach(Gt){St(this,Lt).set(Gt.id,Gt);const{annotationElementId:en}=Gt;en&&St(this,$t).isDeletedAnnotationElement(en)&&St(this,$t).removeDeletedAnnotationElement(Gt)}detach(Gt){var en;St(this,Lt).delete(Gt.id),(en=St(this,xt))==null||en.removePointerInTextLayer(Gt.contentDiv),!St(this,Dt)&&Gt.annotationElementId&&St(this,$t).addDeletedAnnotationElement(Gt)}remove(Gt){this.detach(Gt),St(this,$t).removeEditor(Gt),Gt.div.contains(document.activeElement)&&setTimeout(()=>{St(this,$t).focusMainContainer()},0),Gt.div.remove(),Gt.isAttachedToDOM=!1,St(this,Ft)||this.addInkEditorIfNeeded(!1)}changeParent(Gt){var en;Gt.parent!==this&&(Gt.annotationElementId&&(St(this,$t).addDeletedAnnotationElement(Gt.annotationElementId),bt.AnnotationEditor.deleteAnnotationElement(Gt),Gt.annotationElementId=null),this.attach(Gt),(en=Gt.parent)==null||en.detach(Gt),Gt.setParent(this),Gt.div&&Gt.isAttachedToDOM&&(Gt.div.remove(),this.div.append(Gt.div)))}add(Gt){if(this.changeParent(Gt),St(this,$t).addEditor(Gt),this.attach(Gt),!Gt.isAttachedToDOM){const en=Gt.render();this.div.append(en),Gt.isAttachedToDOM=!0}Gt.fixAndSetPosition(),Gt.onceAdded(),St(this,$t).addToAnnotationStorage(Gt)}moveEditorInDOM(Gt){var on;if(!Gt.isAttachedToDOM)return;const{activeElement:en}=document;Gt.div.contains(en)&&(Gt._focusEventsAllowed=!1,setTimeout(()=>{Gt.div.contains(document.activeElement)?Gt._focusEventsAllowed=!0:(Gt.div.addEventListener("focusin",()=>{Gt._focusEventsAllowed=!0},{once:!0}),en.focus())},0)),Gt._structTreeParentId=(on=St(this,xt))==null?void 0:on.moveElementInDOM(this.div,Gt.div,Gt.contentDiv,!0)}addOrRebuild(Gt){Gt.needsToBeRebuilt()?Gt.rebuild():this.add(Gt)}addUndoableEditor(Gt){const en=()=>Gt._uiManager.rebuild(Gt),on=()=>{Gt.remove()};this.addCommands({cmd:en,undo:on,mustExec:!1})}getNextId(){return St(this,$t).getId()}pasteEditor(Gt,en){St(this,$t).updateToolbar(Gt),St(this,$t).updateMode(Gt);const{offsetX:on,offsetY:_n}=Ut(this,Bt,VA).call(this),ln=this.getNextId(),En=Ut(this,Bt,BA).call(this,{parent:this,id:ln,x:on,y:_n,uiManager:St(this,$t),isCentered:!0,...en});En&&this.add(En)}deserialize(Gt){switch(Gt.annotationType??Gt.annotationEditorType){case vt.AnnotationEditorType.FREETEXT:return Et.FreeTextEditor.deserialize(Gt,this,St(this,$t));case vt.AnnotationEditorType.INK:return At.InkEditor.deserialize(Gt,this,St(this,$t));case vt.AnnotationEditorType.STAMP:return wt.StampEditor.deserialize(Gt,this,St(this,$t))}return null}addNewEditor(){Ut(this,Bt,V0).call(this,Ut(this,Bt,VA).call(this),!0)}setSelected(Gt){St(this,$t).setSelected(Gt)}toggleSelected(Gt){St(this,$t).toggleSelected(Gt)}isSelected(Gt){return St(this,$t).isSelected(Gt)}unselect(Gt){St(this,$t).unselect(Gt)}pointerup(Gt){const{isMac:en}=vt.FeatureTest.platform;if(!(Gt.button!==0||Gt.ctrlKey&&en)&&Gt.target===this.div&&St(this,Ot)){if(zt(this,Ot,!1),!St(this,Pt)){zt(this,Pt,!0);return}if(St(this,$t).getMode()===vt.AnnotationEditorType.STAMP){St(this,$t).unselectAll();return}Ut(this,Bt,V0).call(this,Gt,!1)}}pointerdown(Gt){if(St(this,Ot)){zt(this,Ot,!1);return}const{isMac:en}=vt.FeatureTest.platform;if(Gt.button!==0||Gt.ctrlKey&&en||Gt.target!==this.div)return;zt(this,Ot,!0);const on=St(this,$t).getActive();zt(this,Pt,!on||on.isEmpty())}findNewParent(Gt,en,on){const _n=St(this,$t).findParent(en,on);return _n===null||_n===this?!1:(_n.changeParent(Gt),!0)}destroy(){var Gt,en;((Gt=St(this,$t).getActive())==null?void 0:Gt.parent)===this&&(St(this,$t).commitOrRemove(),St(this,$t).setActiveEditor(null));for(const on of St(this,Lt).values())(en=St(this,xt))==null||en.removePointerInTextLayer(on.contentDiv),on.setParent(null),on.isAttachedToDOM=!1,on.div.remove();this.div=null,St(this,Lt).clear(),St(this,$t).removeLayer(this)}render({viewport:Gt}){this.viewport=Gt,(0,_t.setLayerDimensions)(this.div,Gt);for(const en of St(this,$t).getEditors(this.pageIndex))this.add(en);this.updateMode()}update({viewport:Gt}){St(this,$t).commitOrRemove(),this.viewport=Gt,(0,_t.setLayerDimensions)(this.div,{rotation:Gt.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:Gt,pageHeight:en}=this.viewport.rawDims;return[Gt,en]}};xt=new WeakMap,Pt=new WeakMap,Rt=new WeakMap,kt=new WeakMap,Mt=new WeakMap,Lt=new WeakMap,Ot=new WeakMap,Ft=new WeakMap,Dt=new WeakMap,$t=new WeakMap,Bt=new WeakSet,BA=function(Gt){switch(St(this,$t).getMode()){case vt.AnnotationEditorType.FREETEXT:return new Et.FreeTextEditor(Gt);case vt.AnnotationEditorType.INK:return new At.InkEditor(Gt);case vt.AnnotationEditorType.STAMP:return new wt.StampEditor(Gt)}return null},V0=function(Gt,en){const on=this.getNextId(),_n=Ut(this,Bt,BA).call(this,{parent:this,id:on,x:Gt.offsetX,y:Gt.offsetY,uiManager:St(this,$t),isCentered:en});return _n&&this.add(_n),_n},VA=function(){const{x:Gt,y:en,width:on,height:_n}=this.div.getBoundingClientRect(),ln=Math.max(0,Gt),En=Math.max(0,en),un=Math.min(window.innerWidth,Gt+on),hn=Math.min(window.innerHeight,en+_n),nn=(ln+un)/2-Gt,mn=(En+hn)/2-en,[xn,rn]=this.viewport.rotation%180===0?[nn,mn]:[mn,nn];return{offsetX:xn,offsetY:rn}},HA=function(){zt(this,Ft,!0);for(const Gt of St(this,Lt).values())Gt.isEmpty()&&Gt.remove();zt(this,Ft,!1)},Sr(Xt,"_initialized",!1);let Ct=Xt;$.AnnotationEditorLayer=Ct},(_e,$,ht)=>{var wt,Ct,xt,Pt,Rt,kt,Mt,Lt,Ot,Ft,nS,iS,rS,bv,jA,sS,UA;Object.defineProperty($,"__esModule",{value:!0}),$.FreeTextEditor=void 0;var vt=ht(1),bt=ht(5),Et=ht(4),At=ht(29);const Xt=class Xt extends Et.AnnotationEditor{constructor(en){super({...en,name:"freeTextEditor"});Kt(this,Ft);Kt(this,wt,this.editorDivBlur.bind(this));Kt(this,Ct,this.editorDivFocus.bind(this));Kt(this,xt,this.editorDivInput.bind(this));Kt(this,Pt,this.editorDivKeydown.bind(this));Kt(this,Rt);Kt(this,kt,"");Kt(this,Mt,`${this.id}-editor`);Kt(this,Lt);Kt(this,Ot,null);zt(this,Rt,en.color||Xt._defaultColor||Et.AnnotationEditor._defaultLineColor),zt(this,Lt,en.fontSize||Xt._defaultFontSize)}static get _keyboardManager(){const en=Xt.prototype,on=En=>En.isEmpty(),_n=bt.AnnotationEditorUIManager.TRANSLATE_SMALL,ln=bt.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,vt.shadow)(this,"_keyboardManager",new bt.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],en.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],en.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],en._translateEmpty,{args:[-_n,0],checker:on}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],en._translateEmpty,{args:[-ln,0],checker:on}],[["ArrowRight","mac+ArrowRight"],en._translateEmpty,{args:[_n,0],checker:on}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],en._translateEmpty,{args:[ln,0],checker:on}],[["ArrowUp","mac+ArrowUp"],en._translateEmpty,{args:[0,-_n],checker:on}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],en._translateEmpty,{args:[0,-ln],checker:on}],[["ArrowDown","mac+ArrowDown"],en._translateEmpty,{args:[0,_n],checker:on}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],en._translateEmpty,{args:[0,ln],checker:on}]]))}static initialize(en){Et.AnnotationEditor.initialize(en,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const on=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(on.getPropertyValue("--freetext-padding"))}static updateDefaultParams(en,on){switch(en){case vt.AnnotationEditorParamsType.FREETEXT_SIZE:Xt._defaultFontSize=on;break;case vt.AnnotationEditorParamsType.FREETEXT_COLOR:Xt._defaultColor=on;break}}updateParams(en,on){switch(en){case vt.AnnotationEditorParamsType.FREETEXT_SIZE:Ut(this,Ft,nS).call(this,on);break;case vt.AnnotationEditorParamsType.FREETEXT_COLOR:Ut(this,Ft,iS).call(this,on);break}}static get defaultPropertiesToUpdate(){return[[vt.AnnotationEditorParamsType.FREETEXT_SIZE,Xt._defaultFontSize],[vt.AnnotationEditorParamsType.FREETEXT_COLOR,Xt._defaultColor||Et.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[vt.AnnotationEditorParamsType.FREETEXT_SIZE,St(this,Lt)],[vt.AnnotationEditorParamsType.FREETEXT_COLOR,St(this,Rt)]]}_translateEmpty(en,on){this._uiManager.translateSelectedEditors(en,on,!0)}getInitialTranslation(){const en=this.parentScale;return[-Xt._internalPadding*en,-(Xt._internalPadding+St(this,Lt))*en]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(vt.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",St(this,Pt)),this.editorDiv.addEventListener("focus",St(this,Ct)),this.editorDiv.addEventListener("blur",St(this,wt)),this.editorDiv.addEventListener("input",St(this,xt)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",St(this,Mt)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",St(this,Pt)),this.editorDiv.removeEventListener("focus",St(this,Ct)),this.editorDiv.removeEventListener("blur",St(this,wt)),this.editorDiv.removeEventListener("input",St(this,xt)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(en){this._focusEventsAllowed&&(super.focusin(en),en.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var en;if(this.width){Ut(this,Ft,UA).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(en=this._initialOptions)!=null&&en.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const en=St(this,kt),on=zt(this,kt,Ut(this,Ft,rS).call(this).trimEnd());if(en===on)return;const _n=ln=>{if(zt(this,kt,ln),!ln){this.remove();return}Ut(this,Ft,jA).call(this),this._uiManager.rebuild(this),Ut(this,Ft,bv).call(this)};this.addCommands({cmd:()=>{_n(on)},undo:()=>{_n(en)},mustExec:!1}),Ut(this,Ft,bv).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(en){this.enterInEditMode()}keydown(en){en.target===this.div&&en.key==="Enter"&&(this.enterInEditMode(),en.preventDefault())}editorDivKeydown(en){Xt._keyboardManager.exec(this,en)}editorDivFocus(en){this.isEditing=!0}editorDivBlur(en){this.isEditing=!1}editorDivInput(en){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let en,on;this.width&&(en=this.x,on=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",St(this,Mt)),this.enableEditing(),Et.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(ln=>{var En;return(En=this.editorDiv)==null?void 0:En.setAttribute("aria-label",ln)}),Et.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(ln=>{var En;return(En=this.editorDiv)==null?void 0:En.setAttribute("default-content",ln)}),this.editorDiv.contentEditable=!0;const{style:_n}=this.editorDiv;if(_n.fontSize=`calc(${St(this,Lt)}px * var(--scale-factor))`,_n.color=St(this,Rt),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,bt.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ln,En]=this.parentDimensions;if(this.annotationElementId){const{position:un}=St(this,Ot);let[hn,nn]=this.getInitialTranslation();[hn,nn]=this.pageTranslationToScreen(hn,nn);const[mn,xn]=this.pageDimensions,[rn,qt]=this.pageTranslation;let Yt,tn;switch(this.rotation){case 0:Yt=en+(un[0]-rn)/mn,tn=on+this.height-(un[1]-qt)/xn;break;case 90:Yt=en+(un[0]-rn)/mn,tn=on-(un[1]-qt)/xn,[hn,nn]=[nn,-hn];break;case 180:Yt=en-this.width+(un[0]-rn)/mn,tn=on-(un[1]-qt)/xn,[hn,nn]=[-hn,-nn];break;case 270:Yt=en+(un[0]-rn-this.height*xn)/mn,tn=on+(un[1]-qt-this.width*mn)/xn,[hn,nn]=[-nn,hn];break}this.setAt(Yt*ln,tn*En,hn,nn)}else this.setAt(en*ln,on*En,this.width*ln,this.height*En);Ut(this,Ft,jA).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(en,on,_n){let ln=null;if(en instanceof At.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:un,fontColor:hn},rect:nn,rotation:mn,id:xn},textContent:rn,textPosition:qt,parent:{page:{pageNumber:Yt}}}=en;if(!rn||rn.length===0)return null;ln=en={annotationType:vt.AnnotationEditorType.FREETEXT,color:Array.from(hn),fontSize:un,value:rn.join(`
`),position:qt,pageIndex:Yt-1,rect:nn,rotation:mn,id:xn,deleted:!1}}const En=super.deserialize(en,on,_n);return zt(En,Lt,en.fontSize),zt(En,Rt,vt.Util.makeHexColor(...en.color)),zt(En,kt,en.value),En.annotationElementId=en.id||null,zt(En,Ot,ln),En}serialize(en=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const on=Xt._internalPadding*this.parentScale,_n=this.getRect(on,on),ln=Et.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:St(this,Rt)),En={annotationType:vt.AnnotationEditorType.FREETEXT,color:ln,fontSize:St(this,Lt),value:St(this,kt),pageIndex:this.pageIndex,rect:_n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return en?En:this.annotationElementId&&!Ut(this,Ft,sS).call(this,En)?null:(En.id=this.annotationElementId,En)}};wt=new WeakMap,Ct=new WeakMap,xt=new WeakMap,Pt=new WeakMap,Rt=new WeakMap,kt=new WeakMap,Mt=new WeakMap,Lt=new WeakMap,Ot=new WeakMap,Ft=new WeakSet,nS=function(en){const on=ln=>{this.editorDiv.style.fontSize=`calc(${ln}px * var(--scale-factor))`,this.translate(0,-(ln-St(this,Lt))*this.parentScale),zt(this,Lt,ln),Ut(this,Ft,bv).call(this)},_n=St(this,Lt);this.addCommands({cmd:()=>{on(en)},undo:()=>{on(_n)},mustExec:!0,type:vt.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},iS=function(en){const on=St(this,Rt);this.addCommands({cmd:()=>{zt(this,Rt,this.editorDiv.style.color=en)},undo:()=>{zt(this,Rt,this.editorDiv.style.color=on)},mustExec:!0,type:vt.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},rS=function(){const en=this.editorDiv.getElementsByTagName("div");if(en.length===0)return this.editorDiv.innerText;const on=[];for(const _n of en)on.push(_n.innerText.replace(/\r\n?|\n/,""));return on.join(`
`)},bv=function(){const[en,on]=this.parentDimensions;let _n;if(this.isAttachedToDOM)_n=this.div.getBoundingClientRect();else{const{currentLayer:ln,div:En}=this,un=En.style.display;En.style.display="hidden",ln.div.append(this.div),_n=En.getBoundingClientRect(),En.remove(),En.style.display=un}this.rotation%180===this.parentRotation%180?(this.width=_n.width/en,this.height=_n.height/on):(this.width=_n.height/en,this.height=_n.width/on),this.fixAndSetPosition()},jA=function(){if(this.editorDiv.replaceChildren(),!!St(this,kt))for(const en of St(this,kt).split(`
`)){const on=document.createElement("div");on.append(en?document.createTextNode(en):document.createElement("br")),this.editorDiv.append(on)}},sS=function(en){const{value:on,fontSize:_n,color:ln,rect:En,pageIndex:un}=St(this,Ot);return en.value!==on||en.fontSize!==_n||en.rect.some((hn,nn)=>Math.abs(hn-En[nn])>=1)||en.color.some((hn,nn)=>hn!==ln[nn])||en.pageIndex!==un},UA=function(en=!1){if(!this.annotationElementId)return;if(Ut(this,Ft,bv).call(this),!en&&(this.width===0||this.height===0)){setTimeout(()=>Ut(this,Ft,UA).call(this,!0),0);return}const on=Xt._internalPadding*this.parentScale;St(this,Ot).rect=this.getRect(on,on)},Sr(Xt,"_freeTextDefaultContent",""),Sr(Xt,"_internalPadding",0),Sr(Xt,"_defaultColor",null),Sr(Xt,"_defaultFontSize",10),Sr(Xt,"_type","freetext");let _t=Xt;$.FreeTextEditor=_t},(_e,$,ht)=>{var tn,cn,Yu,oS,Bn,jn,Un,Gn,Yn,Qn,Dn,On,sn,gn,Rn,$n,zn,Zn,Xn,Pn,or,nr,aS,H0,zA,WA,wr,jr,is,Kn,kn,Fn,dr,GA,Pr,vn,Wn,sr,lS,KA;Object.defineProperty($,"__esModule",{value:!0}),$.StampAnnotationElement=$.InkAnnotationElement=$.FreeTextAnnotationElement=$.AnnotationLayer=void 0;var vt=ht(1),bt=ht(6),Et=ht(3),At=ht(30),_t=ht(31),wt=ht(32);const Ct=1e3,xt=9,Pt=new WeakSet;function Rt(ur){return{width:ur[2]-ur[0],height:ur[3]-ur[1]}}class kt{static create(pn){switch(pn.data.annotationType){case vt.AnnotationType.LINK:return new Lt(pn);case vt.AnnotationType.TEXT:return new Ot(pn);case vt.AnnotationType.WIDGET:switch(pn.data.fieldType){case"Tx":return new Dt(pn);case"Btn":return pn.data.radioButton?new Nt(pn):pn.data.checkBox?new Bt(pn):new Ht(pn);case"Ch":return new Vt(pn);case"Sig":return new $t(pn)}return new Ft(pn);case vt.AnnotationType.POPUP:return new jt(pn);case vt.AnnotationType.FREETEXT:return new Jt(pn);case vt.AnnotationType.LINE:return new Gt(pn);case vt.AnnotationType.SQUARE:return new en(pn);case vt.AnnotationType.CIRCLE:return new on(pn);case vt.AnnotationType.POLYLINE:return new _n(pn);case vt.AnnotationType.CARET:return new En(pn);case vt.AnnotationType.INK:return new un(pn);case vt.AnnotationType.POLYGON:return new ln(pn);case vt.AnnotationType.HIGHLIGHT:return new hn(pn);case vt.AnnotationType.UNDERLINE:return new nn(pn);case vt.AnnotationType.SQUIGGLY:return new mn(pn);case vt.AnnotationType.STRIKEOUT:return new xn(pn);case vt.AnnotationType.STAMP:return new rn(pn);case vt.AnnotationType.FILEATTACHMENT:return new qt(pn);default:return new Mt(pn)}}}const dn=class dn{constructor(pn,{isRenderable:an=!1,ignoreBorder:Sn=!1,createQuadrilaterals:Vn=!1}={}){Kt(this,tn,!1);this.isRenderable=an,this.data=pn.data,this.layer=pn.layer,this.linkService=pn.linkService,this.downloadManager=pn.downloadManager,this.imageResourcesPath=pn.imageResourcesPath,this.renderForms=pn.renderForms,this.svgFactory=pn.svgFactory,this.annotationStorage=pn.annotationStorage,this.enableScripting=pn.enableScripting,this.hasJSActions=pn.hasJSActions,this._fieldObjects=pn.fieldObjects,this.parent=pn.parent,an&&(this.container=this._createContainer(Sn)),Vn&&this._createQuadrilaterals()}static _hasPopupData({titleObj:pn,contentsObj:an,richText:Sn}){return!!(pn!=null&&pn.str||an!=null&&an.str||Sn!=null&&Sn.str)}get hasPopupData(){return dn._hasPopupData(this.data)}_createContainer(pn){const{data:an,parent:{page:Sn,viewport:Vn}}=this,Hn=document.createElement("section");Hn.setAttribute("data-annotation-id",an.id),this instanceof Ft||(Hn.tabIndex=Ct),Hn.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Hn.setAttribute("aria-haspopup","dialog"),an.noRotate&&Hn.classList.add("norotate");const{pageWidth:qn,pageHeight:tr,pageX:vr,pageY:fr}=Vn.rawDims;if(!an.rect||this instanceof jt){const{rotation:Dr}=an;return!an.hasOwnCanvas&&Dr!==0&&this.setRotation(Dr,Hn),Hn}const{width:lr,height:Vr}=Rt(an.rect),pr=vt.Util.normalizeRect([an.rect[0],Sn.view[3]-an.rect[1]+Sn.view[1],an.rect[2],Sn.view[3]-an.rect[3]+Sn.view[1]]);if(!pn&&an.borderStyle.width>0){Hn.style.borderWidth=`${an.borderStyle.width}px`;const Dr=an.borderStyle.horizontalCornerRadius,Wr=an.borderStyle.verticalCornerRadius;if(Dr>0||Wr>0){const hs=`calc(${Dr}px * var(--scale-factor)) / calc(${Wr}px * var(--scale-factor))`;Hn.style.borderRadius=hs}else if(this instanceof Nt){const hs=`calc(${lr}px * var(--scale-factor)) / calc(${Vr}px * var(--scale-factor))`;Hn.style.borderRadius=hs}switch(an.borderStyle.style){case vt.AnnotationBorderStyleType.SOLID:Hn.style.borderStyle="solid";break;case vt.AnnotationBorderStyleType.DASHED:Hn.style.borderStyle="dashed";break;case vt.AnnotationBorderStyleType.BEVELED:(0,vt.warn)("Unimplemented border style: beveled");break;case vt.AnnotationBorderStyleType.INSET:(0,vt.warn)("Unimplemented border style: inset");break;case vt.AnnotationBorderStyleType.UNDERLINE:Hn.style.borderBottomStyle="solid";break}const es=an.borderColor||null;es?(zt(this,tn,!0),Hn.style.borderColor=vt.Util.makeHexColor(es[0]|0,es[1]|0,es[2]|0)):Hn.style.borderWidth=0}Hn.style.left=`${100*(pr[0]-vr)/qn}%`,Hn.style.top=`${100*(pr[1]-fr)/tr}%`;const{rotation:Er}=an;return an.hasOwnCanvas||Er===0?(Hn.style.width=`${100*lr/qn}%`,Hn.style.height=`${100*Vr/tr}%`):this.setRotation(Er,Hn),Hn}setRotation(pn,an=this.container){if(!this.data.rect)return;const{pageWidth:Sn,pageHeight:Vn}=this.parent.viewport.rawDims,{width:Hn,height:qn}=Rt(this.data.rect);let tr,vr;pn%180===0?(tr=100*Hn/Sn,vr=100*qn/Vn):(tr=100*qn/Sn,vr=100*Hn/Vn),an.style.width=`${tr}%`,an.style.height=`${vr}%`,an.setAttribute("data-main-rotation",(360-pn)%360)}get _commonActions(){const pn=(an,Sn,Vn)=>{const Hn=Vn.detail[an],qn=Hn[0],tr=Hn.slice(1);Vn.target.style[Sn]=At.ColorConverters[`${qn}_HTML`](tr),this.annotationStorage.setValue(this.data.id,{[Sn]:At.ColorConverters[`${qn}_rgb`](tr)})};return(0,vt.shadow)(this,"_commonActions",{display:an=>{const{display:Sn}=an.detail,Vn=Sn%2===1;this.container.style.visibility=Vn?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Vn,noPrint:Sn===1||Sn===2})},print:an=>{this.annotationStorage.setValue(this.data.id,{noPrint:!an.detail.print})},hidden:an=>{const{hidden:Sn}=an.detail;this.container.style.visibility=Sn?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Sn,noView:Sn})},focus:an=>{setTimeout(()=>an.target.focus({preventScroll:!1}),0)},userName:an=>{an.target.title=an.detail.userName},readonly:an=>{an.target.disabled=an.detail.readonly},required:an=>{this._setRequired(an.target,an.detail.required)},bgColor:an=>{pn("bgColor","backgroundColor",an)},fillColor:an=>{pn("fillColor","backgroundColor",an)},fgColor:an=>{pn("fgColor","color",an)},textColor:an=>{pn("textColor","color",an)},borderColor:an=>{pn("borderColor","borderColor",an)},strokeColor:an=>{pn("strokeColor","borderColor",an)},rotation:an=>{const Sn=an.detail.rotation;this.setRotation(Sn),this.annotationStorage.setValue(this.data.id,{rotation:Sn})}})}_dispatchEventFromSandbox(pn,an){const Sn=this._commonActions;for(const Vn of Object.keys(an.detail)){const Hn=pn[Vn]||Sn[Vn];Hn==null||Hn(an)}}_setDefaultPropertiesFromJS(pn){if(!this.enableScripting)return;const an=this.annotationStorage.getRawValue(this.data.id);if(!an)return;const Sn=this._commonActions;for(const[Vn,Hn]of Object.entries(an)){const qn=Sn[Vn];if(qn){const tr={detail:{[Vn]:Hn},target:pn};qn(tr),delete an[Vn]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:pn}=this.data;if(!pn)return;const[an,Sn,Vn,Hn]=this.data.rect;if(pn.length===1){const[,{x:Wr,y:es},{x:hs,y:Vs}]=pn[0];if(Vn===Wr&&Hn===es&&an===hs&&Sn===Vs)return}const{style:qn}=this.container;let tr;if(St(this,tn)){const{borderColor:Wr,borderWidth:es}=qn;qn.borderWidth=0,tr=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Wr}" stroke-width="${es}">`],this.container.classList.add("hasBorder")}const vr=Vn-an,fr=Hn-Sn,{svgFactory:lr}=this,Vr=lr.createElement("svg");Vr.classList.add("quadrilateralsContainer"),Vr.setAttribute("width",0),Vr.setAttribute("height",0);const pr=lr.createElement("defs");Vr.append(pr);const Er=lr.createElement("clipPath"),Dr=`clippath_${this.data.id}`;Er.setAttribute("id",Dr),Er.setAttribute("clipPathUnits","objectBoundingBox"),pr.append(Er);for(const[,{x:Wr,y:es},{x:hs,y:Vs}]of pn){const ks=lr.createElement("rect"),Bo=(hs-an)/vr,na=(Hn-es)/fr,ga=(Wr-hs)/vr,n0=(es-Vs)/fr;ks.setAttribute("x",Bo),ks.setAttribute("y",na),ks.setAttribute("width",ga),ks.setAttribute("height",n0),Er.append(ks),tr==null||tr.push(`<rect vector-effect="non-scaling-stroke" x="${Bo}" y="${na}" width="${ga}" height="${n0}"/>`)}St(this,tn)&&(tr.push("</g></svg>')"),qn.backgroundImage=tr.join("")),this.container.append(Vr),this.container.style.clipPath=`url(#${Dr})`}_createPopup(){const{container:pn,data:an}=this;pn.setAttribute("aria-haspopup","dialog");const Sn=new jt({data:{color:an.color,titleObj:an.titleObj,modificationDate:an.modificationDate,contentsObj:an.contentsObj,richText:an.richText,parentRect:an.rect,borderStyle:0,id:`popup_${an.id}`,rotation:an.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Sn.render())}render(){(0,vt.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(pn,an=null){const Sn=[];if(this._fieldObjects){const Vn=this._fieldObjects[pn];if(Vn)for(const{page:Hn,id:qn,exportValues:tr}of Vn){if(Hn===-1||qn===an)continue;const vr=typeof tr=="string"?tr:null,fr=document.querySelector(`[data-element-id="${qn}"]`);if(fr&&!Pt.has(fr)){(0,vt.warn)(`_getElementsByName - element not allowed: ${qn}`);continue}Sn.push({id:qn,exportValue:vr,domElement:fr})}return Sn}for(const Vn of document.getElementsByName(pn)){const{exportValue:Hn}=Vn,qn=Vn.getAttribute("data-element-id");qn!==an&&Pt.has(Vn)&&Sn.push({id:qn,exportValue:Hn,domElement:Vn})}return Sn}show(){var pn;this.container&&(this.container.hidden=!1),(pn=this.popup)==null||pn.maybeShow()}hide(){var pn;this.container&&(this.container.hidden=!0),(pn=this.popup)==null||pn.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const pn=this.getElementsToTriggerPopup();if(Array.isArray(pn))for(const an of pn)an.classList.add("highlightArea");else pn.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:pn,data:{id:an}}=this;this.container.addEventListener("dblclick",()=>{var Sn;(Sn=this.linkService.eventBus)==null||Sn.dispatch("switchannotationeditormode",{source:this,mode:pn,editId:an})})}};tn=new WeakMap;let Mt=dn;class Lt extends Mt{constructor(an,Sn=null){super(an,{isRenderable:!0,ignoreBorder:!!(Sn!=null&&Sn.ignoreBorder),createQuadrilaterals:!0});Kt(this,cn);this.isTooltipOnly=an.data.isTooltipOnly}render(){const{data:an,linkService:Sn}=this,Vn=document.createElement("a");Vn.setAttribute("data-element-id",an.id);let Hn=!1;return an.url?(Sn.addLinkAttributes(Vn,an.url,an.newWindow),Hn=!0):an.action?(this._bindNamedAction(Vn,an.action),Hn=!0):an.attachment?(this._bindAttachment(Vn,an.attachment),Hn=!0):an.setOCGState?(Ut(this,cn,oS).call(this,Vn,an.setOCGState),Hn=!0):an.dest?(this._bindLink(Vn,an.dest),Hn=!0):(an.actions&&(an.actions.Action||an.actions["Mouse Up"]||an.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Vn,an),Hn=!0),an.resetForm?(this._bindResetFormAction(Vn,an.resetForm),Hn=!0):this.isTooltipOnly&&!Hn&&(this._bindLink(Vn,""),Hn=!0)),this.container.classList.add("linkAnnotation"),Hn&&this.container.append(Vn),this.container}_bindLink(an,Sn){an.href=this.linkService.getDestinationHash(Sn),an.onclick=()=>(Sn&&this.linkService.goToDestination(Sn),!1),(Sn||Sn==="")&&Ut(this,cn,Yu).call(this)}_bindNamedAction(an,Sn){an.href=this.linkService.getAnchorUrl(""),an.onclick=()=>(this.linkService.executeNamedAction(Sn),!1),Ut(this,cn,Yu).call(this)}_bindAttachment(an,Sn){an.href=this.linkService.getAnchorUrl(""),an.onclick=()=>{var Vn;return(Vn=this.downloadManager)==null||Vn.openOrDownloadData(this.container,Sn.content,Sn.filename),!1},Ut(this,cn,Yu).call(this)}_bindJSAction(an,Sn){an.href=this.linkService.getAnchorUrl("");const Vn=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Hn of Object.keys(Sn.actions)){const qn=Vn.get(Hn);qn&&(an[qn]=()=>{var tr;return(tr=this.linkService.eventBus)==null||tr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Sn.id,name:Hn}}),!1})}an.onclick||(an.onclick=()=>!1),Ut(this,cn,Yu).call(this)}_bindResetFormAction(an,Sn){const Vn=an.onclick;if(Vn||(an.href=this.linkService.getAnchorUrl("")),Ut(this,cn,Yu).call(this),!this._fieldObjects){(0,vt.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Vn||(an.onclick=()=>!1);return}an.onclick=()=>{var Vr;Vn==null||Vn();const{fields:Hn,refs:qn,include:tr}=Sn,vr=[];if(Hn.length!==0||qn.length!==0){const pr=new Set(qn);for(const Er of Hn){const Dr=this._fieldObjects[Er]||[];for(const{id:Wr}of Dr)pr.add(Wr)}for(const Er of Object.values(this._fieldObjects))for(const Dr of Er)pr.has(Dr.id)===tr&&vr.push(Dr)}else for(const pr of Object.values(this._fieldObjects))vr.push(...pr);const fr=this.annotationStorage,lr=[];for(const pr of vr){const{id:Er}=pr;switch(lr.push(Er),pr.type){case"text":{const Wr=pr.defaultValue||"";fr.setValue(Er,{value:Wr});break}case"checkbox":case"radiobutton":{const Wr=pr.defaultValue===pr.exportValues;fr.setValue(Er,{value:Wr});break}case"combobox":case"listbox":{const Wr=pr.defaultValue||"";fr.setValue(Er,{value:Wr});break}default:continue}const Dr=document.querySelector(`[data-element-id="${Er}"]`);if(Dr){if(!Pt.has(Dr)){(0,vt.warn)(`_bindResetFormAction - element not allowed: ${Er}`);continue}}else continue;Dr.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Vr=this.linkService.eventBus)==null||Vr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:lr,name:"ResetForm"}})),!1}}}cn=new WeakSet,Yu=function(){this.container.setAttribute("data-internal-link","")},oS=function(an,Sn){an.href=this.linkService.getAnchorUrl(""),an.onclick=()=>(this.linkService.executeSetOCGState(Sn),!1),Ut(this,cn,Yu).call(this)};class Ot extends Mt{constructor(pn){super(pn,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const pn=document.createElement("img");return pn.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",pn.alt="[{{type}} Annotation]",pn.dataset.l10nId="text_annotation_type",pn.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(pn),this.container}}class Ft extends Mt{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(pn){var an;this.data.hasOwnCanvas&&(((an=pn.previousSibling)==null?void 0:an.nodeName)==="CANVAS"&&(pn.previousSibling.hidden=!0),pn.hidden=!1)}_getKeyModifier(pn){const{isWin:an,isMac:Sn}=vt.FeatureTest.platform;return an&&pn.ctrlKey||Sn&&pn.metaKey}_setEventListener(pn,an,Sn,Vn,Hn){Sn.includes("mouse")?pn.addEventListener(Sn,qn=>{var tr;(tr=this.linkService.eventBus)==null||tr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Vn,value:Hn(qn),shift:qn.shiftKey,modifier:this._getKeyModifier(qn)}})}):pn.addEventListener(Sn,qn=>{var tr;if(Sn==="blur"){if(!an.focused||!qn.relatedTarget)return;an.focused=!1}else if(Sn==="focus"){if(an.focused)return;an.focused=!0}Hn&&((tr=this.linkService.eventBus)==null||tr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Vn,value:Hn(qn)}}))})}_setEventListeners(pn,an,Sn,Vn){var Hn,qn,tr;for(const[vr,fr]of Sn)(fr==="Action"||(Hn=this.data.actions)!=null&&Hn[fr])&&((fr==="Focus"||fr==="Blur")&&(an||(an={focused:!1})),this._setEventListener(pn,an,vr,fr,Vn),fr==="Focus"&&!((qn=this.data.actions)!=null&&qn.Blur)?this._setEventListener(pn,an,"blur","Blur",null):fr==="Blur"&&!((tr=this.data.actions)!=null&&tr.Focus)&&this._setEventListener(pn,an,"focus","Focus",null))}_setBackgroundColor(pn){const an=this.data.backgroundColor||null;pn.style.backgroundColor=an===null?"transparent":vt.Util.makeHexColor(an[0],an[1],an[2])}_setTextStyle(pn){const an=["left","center","right"],{fontColor:Sn}=this.data.defaultAppearanceData,Vn=this.data.defaultAppearanceData.fontSize||xt,Hn=pn.style;let qn;const tr=2,vr=fr=>Math.round(10*fr)/10;if(this.data.multiLine){const fr=Math.abs(this.data.rect[3]-this.data.rect[1]-tr),lr=Math.round(fr/(vt.LINE_FACTOR*Vn))||1,Vr=fr/lr;qn=Math.min(Vn,vr(Vr/vt.LINE_FACTOR))}else{const fr=Math.abs(this.data.rect[3]-this.data.rect[1]-tr);qn=Math.min(Vn,vr(fr/vt.LINE_FACTOR))}Hn.fontSize=`calc(${qn}px * var(--scale-factor))`,Hn.color=vt.Util.makeHexColor(Sn[0],Sn[1],Sn[2]),this.data.textAlignment!==null&&(Hn.textAlign=an[this.data.textAlignment])}_setRequired(pn,an){an?pn.setAttribute("required",!0):pn.removeAttribute("required"),pn.setAttribute("aria-required",an)}}class Dt extends Ft{constructor(pn){const an=pn.renderForms||!pn.data.hasAppearance&&!!pn.data.fieldValue;super(pn,{isRenderable:an})}setPropertyOnSiblings(pn,an,Sn,Vn){const Hn=this.annotationStorage;for(const qn of this._getElementsByName(pn.name,pn.id))qn.domElement&&(qn.domElement[an]=Sn),Hn.setValue(qn.id,{[Vn]:Sn})}render(){var Vn,Hn;const pn=this.annotationStorage,an=this.data.id;this.container.classList.add("textWidgetAnnotation");let Sn=null;if(this.renderForms){const qn=pn.getValue(an,{value:this.data.fieldValue});let tr=qn.value||"";const vr=pn.getValue(an,{charLimit:this.data.maxLen}).charLimit;vr&&tr.length>vr&&(tr=tr.slice(0,vr));let fr=qn.formattedValue||((Vn=this.data.textContent)==null?void 0:Vn.join(`
`))||null;fr&&this.data.comb&&(fr=fr.replaceAll(/\s+/g,""));const lr={userValue:tr,formattedValue:fr,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Sn=document.createElement("textarea"),Sn.textContent=fr??tr,this.data.doNotScroll&&(Sn.style.overflowY="hidden")):(Sn=document.createElement("input"),Sn.type="text",Sn.setAttribute("value",fr??tr),this.data.doNotScroll&&(Sn.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Sn.hidden=!0),Pt.add(Sn),Sn.setAttribute("data-element-id",an),Sn.disabled=this.data.readOnly,Sn.name=this.data.fieldName,Sn.tabIndex=Ct,this._setRequired(Sn,this.data.required),vr&&(Sn.maxLength=vr),Sn.addEventListener("input",pr=>{pn.setValue(an,{value:pr.target.value}),this.setPropertyOnSiblings(Sn,"value",pr.target.value,"value"),lr.formattedValue=null}),Sn.addEventListener("resetform",pr=>{const Er=this.data.defaultFieldValue??"";Sn.value=lr.userValue=Er,lr.formattedValue=null});let Vr=pr=>{const{formattedValue:Er}=lr;Er!=null&&(pr.target.value=Er),pr.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Sn.addEventListener("focus",Er=>{if(lr.focused)return;const{target:Dr}=Er;lr.userValue&&(Dr.value=lr.userValue),lr.lastCommittedValue=Dr.value,lr.commitKey=1,lr.focused=!0}),Sn.addEventListener("updatefromsandbox",Er=>{this.showElementAndHideCanvas(Er.target);const Dr={value(Wr){lr.userValue=Wr.detail.value??"",pn.setValue(an,{value:lr.userValue.toString()}),Wr.target.value=lr.userValue},formattedValue(Wr){const{formattedValue:es}=Wr.detail;lr.formattedValue=es,es!=null&&Wr.target!==document.activeElement&&(Wr.target.value=es),pn.setValue(an,{formattedValue:es})},selRange(Wr){Wr.target.setSelectionRange(...Wr.detail.selRange)},charLimit:Wr=>{var ks;const{charLimit:es}=Wr.detail,{target:hs}=Wr;if(es===0){hs.removeAttribute("maxLength");return}hs.setAttribute("maxLength",es);let Vs=lr.userValue;!Vs||Vs.length<=es||(Vs=Vs.slice(0,es),hs.value=lr.userValue=Vs,pn.setValue(an,{value:Vs}),(ks=this.linkService.eventBus)==null||ks.dispatch("dispatcheventinsandbox",{source:this,detail:{id:an,name:"Keystroke",value:Vs,willCommit:!0,commitKey:1,selStart:hs.selectionStart,selEnd:hs.selectionEnd}}))}};this._dispatchEventFromSandbox(Dr,Er)}),Sn.addEventListener("keydown",Er=>{var es;lr.commitKey=1;let Dr=-1;if(Er.key==="Escape"?Dr=0:Er.key==="Enter"&&!this.data.multiLine?Dr=2:Er.key==="Tab"&&(lr.commitKey=3),Dr===-1)return;const{value:Wr}=Er.target;lr.lastCommittedValue!==Wr&&(lr.lastCommittedValue=Wr,lr.userValue=Wr,(es=this.linkService.eventBus)==null||es.dispatch("dispatcheventinsandbox",{source:this,detail:{id:an,name:"Keystroke",value:Wr,willCommit:!0,commitKey:Dr,selStart:Er.target.selectionStart,selEnd:Er.target.selectionEnd}}))});const pr=Vr;Vr=null,Sn.addEventListener("blur",Er=>{var Wr;if(!lr.focused||!Er.relatedTarget)return;lr.focused=!1;const{value:Dr}=Er.target;lr.userValue=Dr,lr.lastCommittedValue!==Dr&&((Wr=this.linkService.eventBus)==null||Wr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:an,name:"Keystroke",value:Dr,willCommit:!0,commitKey:lr.commitKey,selStart:Er.target.selectionStart,selEnd:Er.target.selectionEnd}})),pr(Er)}),(Hn=this.data.actions)!=null&&Hn.Keystroke&&Sn.addEventListener("beforeinput",Er=>{var na;lr.lastCommittedValue=null;const{data:Dr,target:Wr}=Er,{value:es,selectionStart:hs,selectionEnd:Vs}=Wr;let ks=hs,Bo=Vs;switch(Er.inputType){case"deleteWordBackward":{const ga=es.substring(0,hs).match(/\w*[^\w]*$/);ga&&(ks-=ga[0].length);break}case"deleteWordForward":{const ga=es.substring(hs).match(/^[^\w]*\w*/);ga&&(Bo+=ga[0].length);break}case"deleteContentBackward":hs===Vs&&(ks-=1);break;case"deleteContentForward":hs===Vs&&(Bo+=1);break}Er.preventDefault(),(na=this.linkService.eventBus)==null||na.dispatch("dispatcheventinsandbox",{source:this,detail:{id:an,name:"Keystroke",value:es,change:Dr||"",willCommit:!1,selStart:ks,selEnd:Bo}})}),this._setEventListeners(Sn,lr,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Er=>Er.target.value)}if(Vr&&Sn.addEventListener("blur",Vr),this.data.comb){const Er=(this.data.rect[2]-this.data.rect[0])/vr;Sn.classList.add("comb"),Sn.style.letterSpacing=`calc(${Er}px * var(--scale-factor) - 1ch)`}}else Sn=document.createElement("div"),Sn.textContent=this.data.fieldValue,Sn.style.verticalAlign="middle",Sn.style.display="table-cell";return this._setTextStyle(Sn),this._setBackgroundColor(Sn),this._setDefaultPropertiesFromJS(Sn),this.container.append(Sn),this.container}}class $t extends Ft{constructor(pn){super(pn,{isRenderable:!!pn.data.hasOwnCanvas})}}class Bt extends Ft{constructor(pn){super(pn,{isRenderable:pn.renderForms})}render(){const pn=this.annotationStorage,an=this.data,Sn=an.id;let Vn=pn.getValue(Sn,{value:an.exportValue===an.fieldValue}).value;typeof Vn=="string"&&(Vn=Vn!=="Off",pn.setValue(Sn,{value:Vn})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Hn=document.createElement("input");return Pt.add(Hn),Hn.setAttribute("data-element-id",Sn),Hn.disabled=an.readOnly,this._setRequired(Hn,this.data.required),Hn.type="checkbox",Hn.name=an.fieldName,Vn&&Hn.setAttribute("checked",!0),Hn.setAttribute("exportValue",an.exportValue),Hn.tabIndex=Ct,Hn.addEventListener("change",qn=>{const{name:tr,checked:vr}=qn.target;for(const fr of this._getElementsByName(tr,Sn)){const lr=vr&&fr.exportValue===an.exportValue;fr.domElement&&(fr.domElement.checked=lr),pn.setValue(fr.id,{value:lr})}pn.setValue(Sn,{value:vr})}),Hn.addEventListener("resetform",qn=>{const tr=an.defaultFieldValue||"Off";qn.target.checked=tr===an.exportValue}),this.enableScripting&&this.hasJSActions&&(Hn.addEventListener("updatefromsandbox",qn=>{const tr={value(vr){vr.target.checked=vr.detail.value!=="Off",pn.setValue(Sn,{value:vr.target.checked})}};this._dispatchEventFromSandbox(tr,qn)}),this._setEventListeners(Hn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],qn=>qn.target.checked)),this._setBackgroundColor(Hn),this._setDefaultPropertiesFromJS(Hn),this.container.append(Hn),this.container}}class Nt extends Ft{constructor(pn){super(pn,{isRenderable:pn.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const pn=this.annotationStorage,an=this.data,Sn=an.id;let Vn=pn.getValue(Sn,{value:an.fieldValue===an.buttonValue}).value;typeof Vn=="string"&&(Vn=Vn!==an.buttonValue,pn.setValue(Sn,{value:Vn}));const Hn=document.createElement("input");if(Pt.add(Hn),Hn.setAttribute("data-element-id",Sn),Hn.disabled=an.readOnly,this._setRequired(Hn,this.data.required),Hn.type="radio",Hn.name=an.fieldName,Vn&&Hn.setAttribute("checked",!0),Hn.tabIndex=Ct,Hn.addEventListener("change",qn=>{const{name:tr,checked:vr}=qn.target;for(const fr of this._getElementsByName(tr,Sn))pn.setValue(fr.id,{value:!1});pn.setValue(Sn,{value:vr})}),Hn.addEventListener("resetform",qn=>{const tr=an.defaultFieldValue;qn.target.checked=tr!=null&&tr===an.buttonValue}),this.enableScripting&&this.hasJSActions){const qn=an.buttonValue;Hn.addEventListener("updatefromsandbox",tr=>{const vr={value:fr=>{const lr=qn===fr.detail.value;for(const Vr of this._getElementsByName(fr.target.name)){const pr=lr&&Vr.id===Sn;Vr.domElement&&(Vr.domElement.checked=pr),pn.setValue(Vr.id,{value:pr})}}};this._dispatchEventFromSandbox(vr,tr)}),this._setEventListeners(Hn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],tr=>tr.target.checked)}return this._setBackgroundColor(Hn),this._setDefaultPropertiesFromJS(Hn),this.container.append(Hn),this.container}}class Ht extends Lt{constructor(pn){super(pn,{ignoreBorder:pn.data.hasAppearance})}render(){const pn=super.render();pn.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(pn.title=this.data.alternativeText);const an=pn.lastChild;return this.enableScripting&&this.hasJSActions&&an&&(this._setDefaultPropertiesFromJS(an),an.addEventListener("updatefromsandbox",Sn=>{this._dispatchEventFromSandbox({},Sn)})),pn}}class Vt extends Ft{constructor(pn){super(pn,{isRenderable:pn.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const pn=this.annotationStorage,an=this.data.id,Sn=pn.getValue(an,{value:this.data.fieldValue}),Vn=document.createElement("select");Pt.add(Vn),Vn.setAttribute("data-element-id",an),Vn.disabled=this.data.readOnly,this._setRequired(Vn,this.data.required),Vn.name=this.data.fieldName,Vn.tabIndex=Ct;let Hn=this.data.combo&&this.data.options.length>0;this.data.combo||(Vn.size=this.data.options.length,this.data.multiSelect&&(Vn.multiple=!0)),Vn.addEventListener("resetform",lr=>{const Vr=this.data.defaultFieldValue;for(const pr of Vn.options)pr.selected=pr.value===Vr});for(const lr of this.data.options){const Vr=document.createElement("option");Vr.textContent=lr.displayValue,Vr.value=lr.exportValue,Sn.value.includes(lr.exportValue)&&(Vr.setAttribute("selected",!0),Hn=!1),Vn.append(Vr)}let qn=null;if(Hn){const lr=document.createElement("option");lr.value=" ",lr.setAttribute("hidden",!0),lr.setAttribute("selected",!0),Vn.prepend(lr),qn=()=>{lr.remove(),Vn.removeEventListener("input",qn),qn=null},Vn.addEventListener("input",qn)}const tr=lr=>{const Vr=lr?"value":"textContent",{options:pr,multiple:Er}=Vn;return Er?Array.prototype.filter.call(pr,Dr=>Dr.selected).map(Dr=>Dr[Vr]):pr.selectedIndex===-1?null:pr[pr.selectedIndex][Vr]};let vr=tr(!1);const fr=lr=>{const Vr=lr.target.options;return Array.prototype.map.call(Vr,pr=>({displayValue:pr.textContent,exportValue:pr.value}))};return this.enableScripting&&this.hasJSActions?(Vn.addEventListener("updatefromsandbox",lr=>{const Vr={value(pr){qn==null||qn();const Er=pr.detail.value,Dr=new Set(Array.isArray(Er)?Er:[Er]);for(const Wr of Vn.options)Wr.selected=Dr.has(Wr.value);pn.setValue(an,{value:tr(!0)}),vr=tr(!1)},multipleSelection(pr){Vn.multiple=!0},remove(pr){const Er=Vn.options,Dr=pr.detail.remove;Er[Dr].selected=!1,Vn.remove(Dr),Er.length>0&&Array.prototype.findIndex.call(Er,es=>es.selected)===-1&&(Er[0].selected=!0),pn.setValue(an,{value:tr(!0),items:fr(pr)}),vr=tr(!1)},clear(pr){for(;Vn.length!==0;)Vn.remove(0);pn.setValue(an,{value:null,items:[]}),vr=tr(!1)},insert(pr){const{index:Er,displayValue:Dr,exportValue:Wr}=pr.detail.insert,es=Vn.children[Er],hs=document.createElement("option");hs.textContent=Dr,hs.value=Wr,es?es.before(hs):Vn.append(hs),pn.setValue(an,{value:tr(!0),items:fr(pr)}),vr=tr(!1)},items(pr){const{items:Er}=pr.detail;for(;Vn.length!==0;)Vn.remove(0);for(const Dr of Er){const{displayValue:Wr,exportValue:es}=Dr,hs=document.createElement("option");hs.textContent=Wr,hs.value=es,Vn.append(hs)}Vn.options.length>0&&(Vn.options[0].selected=!0),pn.setValue(an,{value:tr(!0),items:fr(pr)}),vr=tr(!1)},indices(pr){const Er=new Set(pr.detail.indices);for(const Dr of pr.target.options)Dr.selected=Er.has(Dr.index);pn.setValue(an,{value:tr(!0)}),vr=tr(!1)},editable(pr){pr.target.disabled=!pr.detail.editable}};this._dispatchEventFromSandbox(Vr,lr)}),Vn.addEventListener("input",lr=>{var pr;const Vr=tr(!0);pn.setValue(an,{value:Vr}),lr.preventDefault(),(pr=this.linkService.eventBus)==null||pr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:an,name:"Keystroke",value:vr,changeEx:Vr,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Vn,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],lr=>lr.target.value)):Vn.addEventListener("input",function(lr){pn.setValue(an,{value:tr(!0)})}),this.data.combo&&this._setTextStyle(Vn),this._setBackgroundColor(Vn),this._setDefaultPropertiesFromJS(Vn),this.container.append(Vn),this.container}}class jt extends Mt{constructor(pn){const{data:an,elements:Sn}=pn;super(pn,{isRenderable:Mt._hasPopupData(an)}),this.elements=Sn}render(){this.container.classList.add("popupAnnotation");const pn=new Xt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),an=[];for(const Sn of this.elements)Sn.popup=pn,an.push(Sn.data.id),Sn.addHighlightArea();return this.container.setAttribute("aria-controls",an.map(Sn=>`${vt.AnnotationPrefix}${Sn}`).join(",")),this.container}}class Xt{constructor({container:pn,color:an,elements:Sn,titleObj:Vn,modificationDate:Hn,contentsObj:qn,richText:tr,parent:vr,rect:fr,parentRect:lr,open:Vr}){Kt(this,nr);Kt(this,Bn,null);Kt(this,jn,Ut(this,nr,aS).bind(this));Kt(this,Un,Ut(this,nr,WA).bind(this));Kt(this,Gn,Ut(this,nr,zA).bind(this));Kt(this,Yn,Ut(this,nr,H0).bind(this));Kt(this,Qn,null);Kt(this,Dn,null);Kt(this,On,null);Kt(this,sn,null);Kt(this,gn,null);Kt(this,Rn,null);Kt(this,$n,!1);Kt(this,zn,null);Kt(this,Zn,null);Kt(this,Xn,null);Kt(this,Pn,null);Kt(this,or,!1);var Er;zt(this,Dn,pn),zt(this,Pn,Vn),zt(this,On,qn),zt(this,Xn,tr),zt(this,gn,vr),zt(this,Qn,an),zt(this,Zn,fr),zt(this,Rn,lr),zt(this,sn,Sn);const pr=bt.PDFDateString.toDateObject(Hn);pr&&zt(this,Bn,vr.l10n.get("annotation_date_string",{date:pr.toLocaleDateString(),time:pr.toLocaleTimeString()})),this.trigger=Sn.flatMap(Dr=>Dr.getElementsToTriggerPopup());for(const Dr of this.trigger)Dr.addEventListener("click",St(this,Yn)),Dr.addEventListener("mouseenter",St(this,Gn)),Dr.addEventListener("mouseleave",St(this,Un)),Dr.classList.add("popupTriggerArea");for(const Dr of Sn)(Er=Dr.container)==null||Er.addEventListener("keydown",St(this,jn));St(this,Dn).hidden=!0,Vr&&Ut(this,nr,H0).call(this)}render(){if(St(this,zn))return;const{page:{view:pn},viewport:{rawDims:{pageWidth:an,pageHeight:Sn,pageX:Vn,pageY:Hn}}}=St(this,gn),qn=zt(this,zn,document.createElement("div"));if(qn.className="popup",St(this,Qn)){const ks=qn.style.outlineColor=vt.Util.makeHexColor(...St(this,Qn));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?qn.style.backgroundColor=`color-mix(in srgb, ${ks} 30%, white)`:qn.style.backgroundColor=vt.Util.makeHexColor(...St(this,Qn).map(na=>Math.floor(.7*(255-na)+na)))}const tr=document.createElement("span");tr.className="header";const vr=document.createElement("h1");if(tr.append(vr),{dir:vr.dir,str:vr.textContent}=St(this,Pn),qn.append(tr),St(this,Bn)){const ks=document.createElement("span");ks.classList.add("popupDate"),St(this,Bn).then(Bo=>{ks.textContent=Bo}),tr.append(ks)}const fr=St(this,On),lr=St(this,Xn);if(lr!=null&&lr.str&&(!(fr!=null&&fr.str)||fr.str===lr.str))wt.XfaLayer.render({xfaHtml:lr.html,intent:"richText",div:qn}),qn.lastChild.classList.add("richText","popupContent");else{const ks=this._formatContents(fr);qn.append(ks)}let Vr=!!St(this,Rn),pr=Vr?St(this,Rn):St(this,Zn);for(const ks of St(this,sn))if(!pr||vt.Util.intersect(ks.data.rect,pr)!==null){pr=ks.data.rect,Vr=!0;break}const Er=vt.Util.normalizeRect([pr[0],pn[3]-pr[1]+pn[1],pr[2],pn[3]-pr[3]+pn[1]]),Wr=Vr?pr[2]-pr[0]+5:0,es=Er[0]+Wr,hs=Er[1],{style:Vs}=St(this,Dn);Vs.left=`${100*(es-Vn)/an}%`,Vs.top=`${100*(hs-Hn)/Sn}%`,St(this,Dn).append(qn)}_formatContents({str:pn,dir:an}){const Sn=document.createElement("p");Sn.classList.add("popupContent"),Sn.dir=an;const Vn=pn.split(/(?:\r\n?|\n)/);for(let Hn=0,qn=Vn.length;Hn<qn;++Hn){const tr=Vn[Hn];Sn.append(document.createTextNode(tr)),Hn<qn-1&&Sn.append(document.createElement("br"))}return Sn}forceHide(){zt(this,or,this.isVisible),St(this,or)&&(St(this,Dn).hidden=!0)}maybeShow(){St(this,or)&&(zt(this,or,!1),St(this,Dn).hidden=!1)}get isVisible(){return St(this,Dn).hidden===!1}}Bn=new WeakMap,jn=new WeakMap,Un=new WeakMap,Gn=new WeakMap,Yn=new WeakMap,Qn=new WeakMap,Dn=new WeakMap,On=new WeakMap,sn=new WeakMap,gn=new WeakMap,Rn=new WeakMap,$n=new WeakMap,zn=new WeakMap,Zn=new WeakMap,Xn=new WeakMap,Pn=new WeakMap,or=new WeakMap,nr=new WeakSet,aS=function(pn){pn.altKey||pn.shiftKey||pn.ctrlKey||pn.metaKey||(pn.key==="Enter"||pn.key==="Escape"&&St(this,$n))&&Ut(this,nr,H0).call(this)},H0=function(){zt(this,$n,!St(this,$n)),St(this,$n)?(Ut(this,nr,zA).call(this),St(this,Dn).addEventListener("click",St(this,Yn)),St(this,Dn).addEventListener("keydown",St(this,jn))):(Ut(this,nr,WA).call(this),St(this,Dn).removeEventListener("click",St(this,Yn)),St(this,Dn).removeEventListener("keydown",St(this,jn)))},zA=function(){St(this,zn)||this.render(),this.isVisible?St(this,$n)&&St(this,Dn).classList.add("focused"):(St(this,Dn).hidden=!1,St(this,Dn).style.zIndex=parseInt(St(this,Dn).style.zIndex)+1e3)},WA=function(){St(this,Dn).classList.remove("focused"),!(St(this,$n)||!this.isVisible)&&(St(this,Dn).hidden=!0,St(this,Dn).style.zIndex=parseInt(St(this,Dn).style.zIndex)-1e3)};class Jt extends Mt{constructor(pn){super(pn,{isRenderable:!0,ignoreBorder:!0}),this.textContent=pn.data.textContent,this.textPosition=pn.data.textPosition,this.annotationEditorType=vt.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const pn=document.createElement("div");pn.classList.add("annotationTextContent"),pn.setAttribute("role","comment");for(const an of this.textContent){const Sn=document.createElement("span");Sn.textContent=an,pn.append(Sn)}this.container.append(pn)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}$.FreeTextAnnotationElement=Jt;class Gt extends Mt{constructor(an){super(an,{isRenderable:!0,ignoreBorder:!0});Kt(this,wr,null)}render(){this.container.classList.add("lineAnnotation");const an=this.data,{width:Sn,height:Vn}=Rt(an.rect),Hn=this.svgFactory.create(Sn,Vn,!0),qn=zt(this,wr,this.svgFactory.createElement("svg:line"));return qn.setAttribute("x1",an.rect[2]-an.lineCoordinates[0]),qn.setAttribute("y1",an.rect[3]-an.lineCoordinates[1]),qn.setAttribute("x2",an.rect[2]-an.lineCoordinates[2]),qn.setAttribute("y2",an.rect[3]-an.lineCoordinates[3]),qn.setAttribute("stroke-width",an.borderStyle.width||1),qn.setAttribute("stroke","transparent"),qn.setAttribute("fill","transparent"),Hn.append(qn),this.container.append(Hn),!an.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return St(this,wr)}addHighlightArea(){this.container.classList.add("highlightArea")}}wr=new WeakMap;class en extends Mt{constructor(an){super(an,{isRenderable:!0,ignoreBorder:!0});Kt(this,jr,null)}render(){this.container.classList.add("squareAnnotation");const an=this.data,{width:Sn,height:Vn}=Rt(an.rect),Hn=this.svgFactory.create(Sn,Vn,!0),qn=an.borderStyle.width,tr=zt(this,jr,this.svgFactory.createElement("svg:rect"));return tr.setAttribute("x",qn/2),tr.setAttribute("y",qn/2),tr.setAttribute("width",Sn-qn),tr.setAttribute("height",Vn-qn),tr.setAttribute("stroke-width",qn||1),tr.setAttribute("stroke","transparent"),tr.setAttribute("fill","transparent"),Hn.append(tr),this.container.append(Hn),!an.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return St(this,jr)}addHighlightArea(){this.container.classList.add("highlightArea")}}jr=new WeakMap;class on extends Mt{constructor(an){super(an,{isRenderable:!0,ignoreBorder:!0});Kt(this,is,null)}render(){this.container.classList.add("circleAnnotation");const an=this.data,{width:Sn,height:Vn}=Rt(an.rect),Hn=this.svgFactory.create(Sn,Vn,!0),qn=an.borderStyle.width,tr=zt(this,is,this.svgFactory.createElement("svg:ellipse"));return tr.setAttribute("cx",Sn/2),tr.setAttribute("cy",Vn/2),tr.setAttribute("rx",Sn/2-qn/2),tr.setAttribute("ry",Vn/2-qn/2),tr.setAttribute("stroke-width",qn||1),tr.setAttribute("stroke","transparent"),tr.setAttribute("fill","transparent"),Hn.append(tr),this.container.append(Hn),!an.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return St(this,is)}addHighlightArea(){this.container.classList.add("highlightArea")}}is=new WeakMap;class _n extends Mt{constructor(an){super(an,{isRenderable:!0,ignoreBorder:!0});Kt(this,Kn,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const an=this.data,{width:Sn,height:Vn}=Rt(an.rect),Hn=this.svgFactory.create(Sn,Vn,!0);let qn=[];for(const vr of an.vertices){const fr=vr.x-an.rect[0],lr=an.rect[3]-vr.y;qn.push(fr+","+lr)}qn=qn.join(" ");const tr=zt(this,Kn,this.svgFactory.createElement(this.svgElementName));return tr.setAttribute("points",qn),tr.setAttribute("stroke-width",an.borderStyle.width||1),tr.setAttribute("stroke","transparent"),tr.setAttribute("fill","transparent"),Hn.append(tr),this.container.append(Hn),!an.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return St(this,Kn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kn=new WeakMap;class ln extends _n{constructor(pn){super(pn),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class En extends Mt{constructor(pn){super(pn,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class un extends Mt{constructor(an){super(an,{isRenderable:!0,ignoreBorder:!0});Kt(this,kn,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=vt.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const an=this.data,{width:Sn,height:Vn}=Rt(an.rect),Hn=this.svgFactory.create(Sn,Vn,!0);for(const qn of an.inkLists){let tr=[];for(const fr of qn){const lr=fr.x-an.rect[0],Vr=an.rect[3]-fr.y;tr.push(`${lr},${Vr}`)}tr=tr.join(" ");const vr=this.svgFactory.createElement(this.svgElementName);St(this,kn).push(vr),vr.setAttribute("points",tr),vr.setAttribute("stroke-width",an.borderStyle.width||1),vr.setAttribute("stroke","transparent"),vr.setAttribute("fill","transparent"),!an.popupRef&&this.hasPopupData&&this._createPopup(),Hn.append(vr)}return this.container.append(Hn),this.container}getElementsToTriggerPopup(){return St(this,kn)}addHighlightArea(){this.container.classList.add("highlightArea")}}kn=new WeakMap,$.InkAnnotationElement=un;class hn extends Mt{constructor(pn){super(pn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class nn extends Mt{constructor(pn){super(pn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class mn extends Mt{constructor(pn){super(pn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class xn extends Mt{constructor(pn){super(pn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class rn extends Mt{constructor(pn){super(pn,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}$.StampAnnotationElement=rn;class qt extends Mt{constructor(an){var Hn;super(an,{isRenderable:!0});Kt(this,dr);Kt(this,Fn,null);const{filename:Sn,content:Vn}=this.data.file;this.filename=(0,bt.getFilenameFromUrl)(Sn,!0),this.content=Vn,(Hn=this.linkService.eventBus)==null||Hn.dispatch("fileattachmentannotation",{source:this,filename:Sn,content:Vn})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:an,data:Sn}=this;let Vn;Sn.hasAppearance||Sn.fillAlpha===0?Vn=document.createElement("div"):(Vn=document.createElement("img"),Vn.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Sn.name)?"paperclip":"pushpin"}.svg`,Sn.fillAlpha&&Sn.fillAlpha<1&&(Vn.style=`filter: opacity(${Math.round(Sn.fillAlpha*100)}%);`)),Vn.addEventListener("dblclick",Ut(this,dr,GA).bind(this)),zt(this,Fn,Vn);const{isMac:Hn}=vt.FeatureTest.platform;return an.addEventListener("keydown",qn=>{qn.key==="Enter"&&(Hn?qn.metaKey:qn.ctrlKey)&&Ut(this,dr,GA).call(this)}),!Sn.popupRef&&this.hasPopupData?this._createPopup():Vn.classList.add("popupTriggerArea"),an.append(Vn),an}getElementsToTriggerPopup(){return St(this,Fn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fn=new WeakMap,dr=new WeakSet,GA=function(){var an;(an=this.downloadManager)==null||an.openOrDownloadData(this.container,this.content,this.filename)};class Yt{constructor({div:pn,accessibilityManager:an,annotationCanvasMap:Sn,l10n:Vn,page:Hn,viewport:qn}){Kt(this,sr);Kt(this,Pr,null);Kt(this,vn,null);Kt(this,Wn,new Map);this.div=pn,zt(this,Pr,an),zt(this,vn,Sn),this.l10n=Vn,this.page=Hn,this.viewport=qn,this.zIndex=0,this.l10n||(this.l10n=_t.NullL10n)}async render(pn){const{annotations:an}=pn,Sn=this.div;(0,bt.setLayerDimensions)(Sn,this.viewport);const Vn=new Map,Hn={data:null,layer:Sn,linkService:pn.linkService,downloadManager:pn.downloadManager,imageResourcesPath:pn.imageResourcesPath||"",renderForms:pn.renderForms!==!1,svgFactory:new bt.DOMSVGFactory,annotationStorage:pn.annotationStorage||new Et.AnnotationStorage,enableScripting:pn.enableScripting===!0,hasJSActions:pn.hasJSActions,fieldObjects:pn.fieldObjects,parent:this,elements:null};for(const qn of an){if(qn.noHTML)continue;const tr=qn.annotationType===vt.AnnotationType.POPUP;if(tr){const lr=Vn.get(qn.id);if(!lr)continue;Hn.elements=lr}else{const{width:lr,height:Vr}=Rt(qn.rect);if(lr<=0||Vr<=0)continue}Hn.data=qn;const vr=kt.create(Hn);if(!vr.isRenderable)continue;if(!tr&&qn.popupRef){const lr=Vn.get(qn.popupRef);lr?lr.push(vr):Vn.set(qn.popupRef,[vr])}vr.annotationEditorType>0&&St(this,Wn).set(vr.data.id,vr);const fr=vr.render();qn.hidden&&(fr.style.visibility="hidden"),Ut(this,sr,lS).call(this,fr,qn.id)}Ut(this,sr,KA).call(this),await this.l10n.translate(Sn)}update({viewport:pn}){const an=this.div;this.viewport=pn,(0,bt.setLayerDimensions)(an,{rotation:pn.rotation}),Ut(this,sr,KA).call(this),an.hidden=!1}getEditableAnnotations(){return Array.from(St(this,Wn).values())}getEditableAnnotation(pn){return St(this,Wn).get(pn)}}Pr=new WeakMap,vn=new WeakMap,Wn=new WeakMap,sr=new WeakSet,lS=function(pn,an){var Vn;const Sn=pn.firstChild||pn;Sn.id=`${vt.AnnotationPrefix}${an}`,this.div.append(pn),(Vn=St(this,Pr))==null||Vn.moveElementInDOM(this.div,pn,Sn,!1)},KA=function(){if(!St(this,vn))return;const pn=this.div;for(const[an,Sn]of St(this,vn)){const Vn=pn.querySelector(`[data-annotation-id="${an}"]`);if(!Vn)continue;const{firstChild:Hn}=Vn;Hn?Hn.nodeName==="CANVAS"?Hn.replaceWith(Sn):Hn.before(Sn):Vn.append(Sn)}St(this,vn).clear()},$.AnnotationLayer=Yt},(_e,$)=>{Object.defineProperty($,"__esModule",{value:!0}),$.ColorConverters=void 0;function ht(Et){return Math.floor(Math.max(0,Math.min(1,Et))*255).toString(16).padStart(2,"0")}function vt(Et){return Math.max(0,Math.min(255,255*Et))}class bt{static CMYK_G([At,_t,wt,Ct]){return["G",1-Math.min(1,.3*At+.59*wt+.11*_t+Ct)]}static G_CMYK([At]){return["CMYK",0,0,0,1-At]}static G_RGB([At]){return["RGB",At,At,At]}static G_rgb([At]){return At=vt(At),[At,At,At]}static G_HTML([At]){const _t=ht(At);return`#${_t}${_t}${_t}`}static RGB_G([At,_t,wt]){return["G",.3*At+.59*_t+.11*wt]}static RGB_rgb(At){return At.map(vt)}static RGB_HTML(At){return`#${At.map(ht).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([At,_t,wt,Ct]){return["RGB",1-Math.min(1,At+Ct),1-Math.min(1,wt+Ct),1-Math.min(1,_t+Ct)]}static CMYK_rgb([At,_t,wt,Ct]){return[vt(1-Math.min(1,At+Ct)),vt(1-Math.min(1,wt+Ct)),vt(1-Math.min(1,_t+Ct))]}static CMYK_HTML(At){const _t=this.CMYK_RGB(At).slice(1);return this.RGB_HTML(_t)}static RGB_CMYK([At,_t,wt]){const Ct=1-At,xt=1-_t,Pt=1-wt,Rt=Math.min(Ct,xt,Pt);return["CMYK",Ct,xt,Pt,Rt]}}$.ColorConverters=bt},(_e,$)=>{Object.defineProperty($,"__esModule",{value:!0}),$.NullL10n=void 0,$.getL10nFallback=vt;const ht={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};ht.print_progress_percent="{{progress}}%";function vt(At,_t){switch(At){case"find_match_count":At=`find_match_count[${_t.total===1?"one":"other"}]`;break;case"find_match_count_limit":At=`find_match_count_limit[${_t.limit===1?"one":"other"}]`;break}return ht[At]||""}function bt(At,_t){return _t?At.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(wt,Ct)=>Ct in _t?_t[Ct]:"{{"+Ct+"}}"):At}const Et={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(At,_t=null,wt=vt(At,_t)){return bt(wt,_t)},async translate(At){}};$.NullL10n=Et},(_e,$,ht)=>{Object.defineProperty($,"__esModule",{value:!0}),$.XfaLayer=void 0;var vt=ht(25);class bt{static setupStorage(At,_t,wt,Ct,xt){const Pt=Ct.getValue(_t,{value:null});switch(wt.name){case"textarea":if(Pt.value!==null&&(At.textContent=Pt.value),xt==="print")break;At.addEventListener("input",Rt=>{Ct.setValue(_t,{value:Rt.target.value})});break;case"input":if(wt.attributes.type==="radio"||wt.attributes.type==="checkbox"){if(Pt.value===wt.attributes.xfaOn?At.setAttribute("checked",!0):Pt.value===wt.attributes.xfaOff&&At.removeAttribute("checked"),xt==="print")break;At.addEventListener("change",Rt=>{Ct.setValue(_t,{value:Rt.target.checked?Rt.target.getAttribute("xfaOn"):Rt.target.getAttribute("xfaOff")})})}else{if(Pt.value!==null&&At.setAttribute("value",Pt.value),xt==="print")break;At.addEventListener("input",Rt=>{Ct.setValue(_t,{value:Rt.target.value})})}break;case"select":if(Pt.value!==null){At.setAttribute("value",Pt.value);for(const Rt of wt.children)Rt.attributes.value===Pt.value?Rt.attributes.selected=!0:Rt.attributes.hasOwnProperty("selected")&&delete Rt.attributes.selected}At.addEventListener("input",Rt=>{const kt=Rt.target.options,Mt=kt.selectedIndex===-1?"":kt[kt.selectedIndex].value;Ct.setValue(_t,{value:Mt})});break}}static setAttributes({html:At,element:_t,storage:wt=null,intent:Ct,linkService:xt}){const{attributes:Pt}=_t,Rt=At instanceof HTMLAnchorElement;Pt.type==="radio"&&(Pt.name=`${Pt.name}-${Ct}`);for(const[kt,Mt]of Object.entries(Pt))if(Mt!=null)switch(kt){case"class":Mt.length&&At.setAttribute(kt,Mt.join(" "));break;case"dataId":break;case"id":At.setAttribute("data-element-id",Mt);break;case"style":Object.assign(At.style,Mt);break;case"textContent":At.textContent=Mt;break;default:(!Rt||kt!=="href"&&kt!=="newWindow")&&At.setAttribute(kt,Mt)}Rt&&xt.addLinkAttributes(At,Pt.href,Pt.newWindow),wt&&Pt.dataId&&this.setupStorage(At,Pt.dataId,_t,wt)}static render(At){var Lt;const _t=At.annotationStorage,wt=At.linkService,Ct=At.xfaHtml,xt=At.intent||"display",Pt=document.createElement(Ct.name);Ct.attributes&&this.setAttributes({html:Pt,element:Ct,intent:xt,linkService:wt});const Rt=[[Ct,-1,Pt]],kt=At.div;if(kt.append(Pt),At.viewport){const Ot=`matrix(${At.viewport.transform.join(",")})`;kt.style.transform=Ot}xt!=="richText"&&kt.setAttribute("class","xfaLayer xfaFont");const Mt=[];for(;Rt.length>0;){const[Ot,Ft,Dt]=Rt.at(-1);if(Ft+1===Ot.children.length){Rt.pop();continue}const $t=Ot.children[++Rt.at(-1)[1]];if($t===null)continue;const{name:Bt}=$t;if(Bt==="#text"){const Ht=document.createTextNode($t.value);Mt.push(Ht),Dt.append(Ht);continue}const Nt=(Lt=$t==null?void 0:$t.attributes)!=null&&Lt.xmlns?document.createElementNS($t.attributes.xmlns,Bt):document.createElement(Bt);if(Dt.append(Nt),$t.attributes&&this.setAttributes({html:Nt,element:$t,storage:_t,intent:xt,linkService:wt}),$t.children&&$t.children.length>0)Rt.push([$t,-1,Nt]);else if($t.value){const Ht=document.createTextNode($t.value);vt.XfaText.shouldBuildText(Bt)&&Mt.push(Ht),Nt.append(Ht)}}for(const Ot of kt.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))Ot.setAttribute("readOnly",!0);return{textDivs:Mt}}static update(At){const _t=`matrix(${At.viewport.transform.join(",")})`;At.div.style.transform=_t,At.div.hidden=!1}}$.XfaLayer=bt},(_e,$,ht)=>{var Ct,xt,Pt,Rt,kt,Mt,Lt,Ot,Ft,Dt,$t,Bt,Nt,Ht,Vt,cS,uS,dS,hS,XA,fS,qA,pS,mS,gS,vS,yS,Ol,YA,j0,U0,sm,QA,z0,cn,bS,ZA,ES,AS,JA,W0,om;Object.defineProperty($,"__esModule",{value:!0}),$.InkEditor=void 0;var vt=ht(1),bt=ht(4),Et=ht(29),At=ht(6),_t=ht(5);const Qn=class Qn extends bt.AnnotationEditor{constructor(sn){super({...sn,name:"inkEditor"});Kt(this,Vt);Kt(this,Ct,0);Kt(this,xt,0);Kt(this,Pt,this.canvasPointermove.bind(this));Kt(this,Rt,this.canvasPointerleave.bind(this));Kt(this,kt,this.canvasPointerup.bind(this));Kt(this,Mt,this.canvasPointerdown.bind(this));Kt(this,Lt,new Path2D);Kt(this,Ot,!1);Kt(this,Ft,!1);Kt(this,Dt,!1);Kt(this,$t,null);Kt(this,Bt,0);Kt(this,Nt,0);Kt(this,Ht,null);this.color=sn.color||null,this.thickness=sn.thickness||null,this.opacity=sn.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(sn){bt.AnnotationEditor.initialize(sn,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(sn,gn){switch(sn){case vt.AnnotationEditorParamsType.INK_THICKNESS:Qn._defaultThickness=gn;break;case vt.AnnotationEditorParamsType.INK_COLOR:Qn._defaultColor=gn;break;case vt.AnnotationEditorParamsType.INK_OPACITY:Qn._defaultOpacity=gn/100;break}}updateParams(sn,gn){switch(sn){case vt.AnnotationEditorParamsType.INK_THICKNESS:Ut(this,Vt,cS).call(this,gn);break;case vt.AnnotationEditorParamsType.INK_COLOR:Ut(this,Vt,uS).call(this,gn);break;case vt.AnnotationEditorParamsType.INK_OPACITY:Ut(this,Vt,dS).call(this,gn);break}}static get defaultPropertiesToUpdate(){return[[vt.AnnotationEditorParamsType.INK_THICKNESS,Qn._defaultThickness],[vt.AnnotationEditorParamsType.INK_COLOR,Qn._defaultColor||bt.AnnotationEditor._defaultLineColor],[vt.AnnotationEditorParamsType.INK_OPACITY,Math.round(Qn._defaultOpacity*100)]]}get propertiesToUpdate(){return[[vt.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Qn._defaultThickness],[vt.AnnotationEditorParamsType.INK_COLOR,this.color||Qn._defaultColor||bt.AnnotationEditor._defaultLineColor],[vt.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Qn._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Ut(this,Vt,j0).call(this),Ut(this,Vt,U0).call(this)),this.isAttachedToDOM||(this.parent.add(this),Ut(this,Vt,sm).call(this)),Ut(this,Vt,om).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,St(this,$t).disconnect(),zt(this,$t,null),super.remove())}setParent(sn){!this.parent&&sn?this._uiManager.removeShouldRescale(this):this.parent&&sn===null&&this._uiManager.addShouldRescale(this),super.setParent(sn)}onScaleChanging(){const[sn,gn]=this.parentDimensions,Rn=this.width*sn,$n=this.height*gn;this.setDimensions(Rn,$n)}enableEditMode(){St(this,Ot)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",St(this,Mt)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",St(this,Mt)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){St(this,Ot)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),zt(this,Ot,!0),this.div.classList.add("disabled"),Ut(this,Vt,om).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(sn){this._focusEventsAllowed&&(super.focusin(sn),this.enableEditMode())}canvasPointerdown(sn){sn.button!==0||!this.isInEditMode()||St(this,Ot)||(this.setInForeground(),sn.preventDefault(),sn.type!=="mouse"&&this.div.focus(),Ut(this,Vt,fS).call(this,sn.offsetX,sn.offsetY))}canvasPointermove(sn){sn.preventDefault(),Ut(this,Vt,qA).call(this,sn.offsetX,sn.offsetY)}canvasPointerup(sn){sn.preventDefault(),Ut(this,Vt,YA).call(this,sn)}canvasPointerleave(sn){Ut(this,Vt,YA).call(this,sn)}get isResizable(){return!this.isEmpty()&&St(this,Ot)}render(){if(this.div)return this.div;let sn,gn;this.width&&(sn=this.x,gn=this.y),super.render(),bt.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Xn=>{var Pn;return(Pn=this.div)==null?void 0:Pn.setAttribute("aria-label",Xn)});const[Rn,$n,zn,Zn]=Ut(this,Vt,hS).call(this);if(this.setAt(Rn,$n,0,0),this.setDims(zn,Zn),Ut(this,Vt,j0).call(this),this.width){const[Xn,Pn]=this.parentDimensions;this.setAspectRatio(this.width*Xn,this.height*Pn),this.setAt(sn*Xn,gn*Pn,this.width*Xn,this.height*Pn),zt(this,Dt,!0),Ut(this,Vt,sm).call(this),this.setDims(this.width*Xn,this.height*Pn),Ut(this,Vt,Ol).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Ut(this,Vt,U0).call(this),this.div}setDimensions(sn,gn){const Rn=Math.round(sn),$n=Math.round(gn);if(St(this,Bt)===Rn&&St(this,Nt)===$n)return;zt(this,Bt,Rn),zt(this,Nt,$n),this.canvas.style.visibility="hidden";const[zn,Zn]=this.parentDimensions;this.width=sn/zn,this.height=gn/Zn,this.fixAndSetPosition(),St(this,Ot)&&Ut(this,Vt,QA).call(this,sn,gn),Ut(this,Vt,sm).call(this),Ut(this,Vt,Ol).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(sn,gn,Rn){var wr,jr,is;if(sn instanceof Et.InkAnnotationElement)return null;const $n=super.deserialize(sn,gn,Rn);$n.thickness=sn.thickness,$n.color=vt.Util.makeHexColor(...sn.color),$n.opacity=sn.opacity;const[zn,Zn]=$n.pageDimensions,Xn=$n.width*zn,Pn=$n.height*Zn,or=$n.parentScale,nr=sn.thickness/2;zt($n,Ot,!0),zt($n,Bt,Math.round(Xn)),zt($n,Nt,Math.round(Pn));const{paths:$r,rect:Rr,rotation:qr}=sn;for(let{bezier:Kn}of $r){Kn=Ut(wr=Qn,cn,ES).call(wr,Kn,Rr,qr);const kn=[];$n.paths.push(kn);let Fn=or*(Kn[0]-nr),dr=or*(Kn[1]-nr);for(let Pr=2,vn=Kn.length;Pr<vn;Pr+=6){const Wn=or*(Kn[Pr]-nr),sr=or*(Kn[Pr+1]-nr),gr=or*(Kn[Pr+2]-nr),br=or*(Kn[Pr+3]-nr),ur=or*(Kn[Pr+4]-nr),pn=or*(Kn[Pr+5]-nr);kn.push([[Fn,dr],[Wn,sr],[gr,br],[ur,pn]]),Fn=ur,dr=pn}const mr=Ut(this,cn,bS).call(this,kn);$n.bezierPath2D.push(mr)}const hr=Ut(jr=$n,Vt,JA).call(jr);return zt($n,xt,Math.max(bt.AnnotationEditor.MIN_SIZE,hr[2]-hr[0])),zt($n,Ct,Math.max(bt.AnnotationEditor.MIN_SIZE,hr[3]-hr[1])),Ut(is=$n,Vt,QA).call(is,Xn,Pn),$n}serialize(){if(this.isEmpty())return null;const sn=this.getRect(0,0),gn=bt.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:vt.AnnotationEditorType.INK,color:gn,thickness:this.thickness,opacity:this.opacity,paths:Ut(this,Vt,AS).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,sn),pageIndex:this.pageIndex,rect:sn,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Ct=new WeakMap,xt=new WeakMap,Pt=new WeakMap,Rt=new WeakMap,kt=new WeakMap,Mt=new WeakMap,Lt=new WeakMap,Ot=new WeakMap,Ft=new WeakMap,Dt=new WeakMap,$t=new WeakMap,Bt=new WeakMap,Nt=new WeakMap,Ht=new WeakMap,Vt=new WeakSet,cS=function(sn){const gn=this.thickness;this.addCommands({cmd:()=>{this.thickness=sn,Ut(this,Vt,om).call(this)},undo:()=>{this.thickness=gn,Ut(this,Vt,om).call(this)},mustExec:!0,type:vt.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},uS=function(sn){const gn=this.color;this.addCommands({cmd:()=>{this.color=sn,Ut(this,Vt,Ol).call(this)},undo:()=>{this.color=gn,Ut(this,Vt,Ol).call(this)},mustExec:!0,type:vt.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},dS=function(sn){sn/=100;const gn=this.opacity;this.addCommands({cmd:()=>{this.opacity=sn,Ut(this,Vt,Ol).call(this)},undo:()=>{this.opacity=gn,Ut(this,Vt,Ol).call(this)},mustExec:!0,type:vt.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},hS=function(){const{parentRotation:sn,parentDimensions:[gn,Rn]}=this;switch(sn){case 90:return[0,Rn,Rn,gn];case 180:return[gn,Rn,gn,Rn];case 270:return[gn,0,Rn,gn];default:return[0,0,gn,Rn]}},XA=function(){const{ctx:sn,color:gn,opacity:Rn,thickness:$n,parentScale:zn,scaleFactor:Zn}=this;sn.lineWidth=$n*zn/Zn,sn.lineCap="round",sn.lineJoin="round",sn.miterLimit=10,sn.strokeStyle=`${gn}${(0,_t.opacityToHex)(Rn)}`},fS=function(sn,gn){this.canvas.addEventListener("contextmenu",At.noContextMenu),this.canvas.addEventListener("pointerleave",St(this,Rt)),this.canvas.addEventListener("pointermove",St(this,Pt)),this.canvas.addEventListener("pointerup",St(this,kt)),this.canvas.removeEventListener("pointerdown",St(this,Mt)),this.isEditing=!0,St(this,Dt)||(zt(this,Dt,!0),Ut(this,Vt,sm).call(this),this.thickness||(this.thickness=Qn._defaultThickness),this.color||(this.color=Qn._defaultColor||bt.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Qn._defaultOpacity)),this.currentPath.push([sn,gn]),zt(this,Ft,!1),Ut(this,Vt,XA).call(this),zt(this,Ht,()=>{Ut(this,Vt,gS).call(this),St(this,Ht)&&window.requestAnimationFrame(St(this,Ht))}),window.requestAnimationFrame(St(this,Ht))},qA=function(sn,gn){const[Rn,$n]=this.currentPath.at(-1);if(this.currentPath.length>1&&sn===Rn&&gn===$n)return;const zn=this.currentPath;let Zn=St(this,Lt);if(zn.push([sn,gn]),zt(this,Ft,!0),zn.length<=2){Zn.moveTo(...zn[0]),Zn.lineTo(sn,gn);return}zn.length===3&&(zt(this,Lt,Zn=new Path2D),Zn.moveTo(...zn[0])),Ut(this,Vt,vS).call(this,Zn,...zn.at(-3),...zn.at(-2),sn,gn)},pS=function(){if(this.currentPath.length===0)return;const sn=this.currentPath.at(-1);St(this,Lt).lineTo(...sn)},mS=function(sn,gn){zt(this,Ht,null),sn=Math.min(Math.max(sn,0),this.canvas.width),gn=Math.min(Math.max(gn,0),this.canvas.height),Ut(this,Vt,qA).call(this,sn,gn),Ut(this,Vt,pS).call(this);let Rn;if(this.currentPath.length!==1)Rn=Ut(this,Vt,yS).call(this);else{const Pn=[sn,gn];Rn=[[Pn,Pn.slice(),Pn.slice(),Pn]]}const $n=St(this,Lt),zn=this.currentPath;this.currentPath=[],zt(this,Lt,new Path2D);const Zn=()=>{this.allRawPaths.push(zn),this.paths.push(Rn),this.bezierPath2D.push($n),this.rebuild()},Xn=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Ut(this,Vt,j0).call(this),Ut(this,Vt,U0).call(this)),Ut(this,Vt,om).call(this))};this.addCommands({cmd:Zn,undo:Xn,mustExec:!0})},gS=function(){if(!St(this,Ft))return;zt(this,Ft,!1);const sn=Math.ceil(this.thickness*this.parentScale),gn=this.currentPath.slice(-3),Rn=gn.map(Zn=>Zn[0]),$n=gn.map(Zn=>Zn[1]);Math.min(...Rn)-sn,Math.max(...Rn)+sn,Math.min(...$n)-sn,Math.max(...$n)+sn;const{ctx:zn}=this;zn.save(),zn.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Zn of this.bezierPath2D)zn.stroke(Zn);zn.stroke(St(this,Lt)),zn.restore()},vS=function(sn,gn,Rn,$n,zn,Zn,Xn){const Pn=(gn+$n)/2,or=(Rn+zn)/2,nr=($n+Zn)/2,$r=(zn+Xn)/2;sn.bezierCurveTo(Pn+2*($n-Pn)/3,or+2*(zn-or)/3,nr+2*($n-nr)/3,$r+2*(zn-$r)/3,nr,$r)},yS=function(){const sn=this.currentPath;if(sn.length<=2)return[[sn[0],sn[0],sn.at(-1),sn.at(-1)]];const gn=[];let Rn,[$n,zn]=sn[0];for(Rn=1;Rn<sn.length-2;Rn++){const[Rr,qr]=sn[Rn],[hr,wr]=sn[Rn+1],jr=(Rr+hr)/2,is=(qr+wr)/2,Kn=[$n+2*(Rr-$n)/3,zn+2*(qr-zn)/3],kn=[jr+2*(Rr-jr)/3,is+2*(qr-is)/3];gn.push([[$n,zn],Kn,kn,[jr,is]]),[$n,zn]=[jr,is]}const[Zn,Xn]=sn[Rn],[Pn,or]=sn[Rn+1],nr=[$n+2*(Zn-$n)/3,zn+2*(Xn-zn)/3],$r=[Pn+2*(Zn-Pn)/3,or+2*(Xn-or)/3];return gn.push([[$n,zn],nr,$r,[Pn,or]]),gn},Ol=function(){if(this.isEmpty()){Ut(this,Vt,z0).call(this);return}Ut(this,Vt,XA).call(this);const{canvas:sn,ctx:gn}=this;gn.setTransform(1,0,0,1,0,0),gn.clearRect(0,0,sn.width,sn.height),Ut(this,Vt,z0).call(this);for(const Rn of this.bezierPath2D)gn.stroke(Rn)},YA=function(sn){this.canvas.removeEventListener("pointerleave",St(this,Rt)),this.canvas.removeEventListener("pointermove",St(this,Pt)),this.canvas.removeEventListener("pointerup",St(this,kt)),this.canvas.addEventListener("pointerdown",St(this,Mt)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",At.noContextMenu)},10),Ut(this,Vt,mS).call(this,sn.offsetX,sn.offsetY),this.addToAnnotationStorage(),this.setInBackground()},j0=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",bt.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(sn=>{var gn;return(gn=this.canvas)==null?void 0:gn.setAttribute("aria-label",sn)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},U0=function(){zt(this,$t,new ResizeObserver(sn=>{const gn=sn[0].contentRect;gn.width&&gn.height&&this.setDimensions(gn.width,gn.height)})),St(this,$t).observe(this.div)},sm=function(){if(!St(this,Dt))return;const[sn,gn]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*sn),this.canvas.height=Math.ceil(this.height*gn),Ut(this,Vt,z0).call(this)},QA=function(sn,gn){const Rn=Ut(this,Vt,W0).call(this),$n=(sn-Rn)/St(this,xt),zn=(gn-Rn)/St(this,Ct);this.scaleFactor=Math.min($n,zn)},z0=function(){const sn=Ut(this,Vt,W0).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+sn,this.translationY*this.scaleFactor+sn)},cn=new WeakSet,bS=function(sn){const gn=new Path2D;for(let Rn=0,$n=sn.length;Rn<$n;Rn++){const[zn,Zn,Xn,Pn]=sn[Rn];Rn===0&&gn.moveTo(...zn),gn.bezierCurveTo(Zn[0],Zn[1],Xn[0],Xn[1],Pn[0],Pn[1])}return gn},ZA=function(sn,gn,Rn){const[$n,zn,Zn,Xn]=gn;switch(Rn){case 0:for(let Pn=0,or=sn.length;Pn<or;Pn+=2)sn[Pn]+=$n,sn[Pn+1]=Xn-sn[Pn+1];break;case 90:for(let Pn=0,or=sn.length;Pn<or;Pn+=2){const nr=sn[Pn];sn[Pn]=sn[Pn+1]+$n,sn[Pn+1]=nr+zn}break;case 180:for(let Pn=0,or=sn.length;Pn<or;Pn+=2)sn[Pn]=Zn-sn[Pn],sn[Pn+1]+=zn;break;case 270:for(let Pn=0,or=sn.length;Pn<or;Pn+=2){const nr=sn[Pn];sn[Pn]=Zn-sn[Pn+1],sn[Pn+1]=Xn-nr}break;default:throw new Error("Invalid rotation")}return sn},ES=function(sn,gn,Rn){const[$n,zn,Zn,Xn]=gn;switch(Rn){case 0:for(let Pn=0,or=sn.length;Pn<or;Pn+=2)sn[Pn]-=$n,sn[Pn+1]=Xn-sn[Pn+1];break;case 90:for(let Pn=0,or=sn.length;Pn<or;Pn+=2){const nr=sn[Pn];sn[Pn]=sn[Pn+1]-zn,sn[Pn+1]=nr-$n}break;case 180:for(let Pn=0,or=sn.length;Pn<or;Pn+=2)sn[Pn]=Zn-sn[Pn],sn[Pn+1]-=zn;break;case 270:for(let Pn=0,or=sn.length;Pn<or;Pn+=2){const nr=sn[Pn];sn[Pn]=Xn-sn[Pn+1],sn[Pn+1]=Zn-nr}break;default:throw new Error("Invalid rotation")}return sn},AS=function(sn,gn,Rn,$n){var or,nr;const zn=[],Zn=this.thickness/2,Xn=sn*gn+Zn,Pn=sn*Rn+Zn;for(const $r of this.paths){const Rr=[],qr=[];for(let hr=0,wr=$r.length;hr<wr;hr++){const[jr,is,Kn,kn]=$r[hr],Fn=sn*jr[0]+Xn,dr=sn*jr[1]+Pn,mr=sn*is[0]+Xn,Pr=sn*is[1]+Pn,vn=sn*Kn[0]+Xn,Wn=sn*Kn[1]+Pn,sr=sn*kn[0]+Xn,gr=sn*kn[1]+Pn;hr===0&&(Rr.push(Fn,dr),qr.push(Fn,dr)),Rr.push(mr,Pr,vn,Wn,sr,gr),qr.push(mr,Pr),hr===wr-1&&qr.push(sr,gr)}zn.push({bezier:Ut(or=Qn,cn,ZA).call(or,Rr,$n,this.rotation),points:Ut(nr=Qn,cn,ZA).call(nr,qr,$n,this.rotation)})}return zn},JA=function(){let sn=1/0,gn=-1/0,Rn=1/0,$n=-1/0;for(const zn of this.paths)for(const[Zn,Xn,Pn,or]of zn){const nr=vt.Util.bezierBoundingBox(...Zn,...Xn,...Pn,...or);sn=Math.min(sn,nr[0]),Rn=Math.min(Rn,nr[1]),gn=Math.max(gn,nr[2]),$n=Math.max($n,nr[3])}return[sn,Rn,gn,$n]},W0=function(){return St(this,Ot)?Math.ceil(this.thickness*this.parentScale):0},om=function(sn=!1){if(this.isEmpty())return;if(!St(this,Ot)){Ut(this,Vt,Ol).call(this);return}const gn=Ut(this,Vt,JA).call(this),Rn=Ut(this,Vt,W0).call(this);zt(this,xt,Math.max(bt.AnnotationEditor.MIN_SIZE,gn[2]-gn[0])),zt(this,Ct,Math.max(bt.AnnotationEditor.MIN_SIZE,gn[3]-gn[1]));const $n=Math.ceil(Rn+St(this,xt)*this.scaleFactor),zn=Math.ceil(Rn+St(this,Ct)*this.scaleFactor),[Zn,Xn]=this.parentDimensions;this.width=$n/Zn,this.height=zn/Xn,this.setAspectRatio($n,zn);const Pn=this.translationX,or=this.translationY;this.translationX=-gn[0],this.translationY=-gn[1],Ut(this,Vt,sm).call(this),Ut(this,Vt,Ol).call(this),zt(this,Bt,$n),zt(this,Nt,zn),this.setDims($n,zn);const nr=sn?Rn/this.scaleFactor/2:0;this.translate(Pn-this.translationX-nr,or-this.translationY-nr)},Kt(Qn,cn),Sr(Qn,"_defaultColor",null),Sr(Qn,"_defaultOpacity",1),Sr(Qn,"_defaultThickness",1),Sr(Qn,"_type","ink");let wt=Qn;$.InkEditor=wt},(_e,$,ht)=>{var wt,Ct,xt,Pt,Rt,kt,Mt,Lt,Ot,Ft,Dt,Ev,Av,G0,e_,_S,wS,t_,K0,SS;Object.defineProperty($,"__esModule",{value:!0}),$.StampEditor=void 0;var vt=ht(1),bt=ht(4),Et=ht(6),At=ht(29);const en=class en extends bt.AnnotationEditor{constructor(ln){super({...ln,name:"stampEditor"});Kt(this,Dt);Kt(this,wt,null);Kt(this,Ct,null);Kt(this,xt,null);Kt(this,Pt,null);Kt(this,Rt,null);Kt(this,kt,null);Kt(this,Mt,null);Kt(this,Lt,null);Kt(this,Ot,!1);Kt(this,Ft,!1);zt(this,Pt,ln.bitmapUrl),zt(this,Rt,ln.bitmapFile)}static initialize(ln){bt.AnnotationEditor.initialize(ln)}static get supportedTypes(){const ln=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,vt.shadow)(this,"supportedTypes",ln.map(En=>`image/${En}`))}static get supportedTypesStr(){return(0,vt.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(ln){return this.supportedTypes.includes(ln)}static paste(ln,En){En.pasteEditor(vt.AnnotationEditorType.STAMP,{bitmapFile:ln.getAsFile()})}remove(){var ln,En;St(this,Ct)&&(zt(this,wt,null),this._uiManager.imageManager.deleteId(St(this,Ct)),(ln=St(this,kt))==null||ln.remove(),zt(this,kt,null),(En=St(this,Mt))==null||En.disconnect(),zt(this,Mt,null)),super.remove()}rebuild(){if(!this.parent){St(this,Ct)&&Ut(this,Dt,G0).call(this);return}super.rebuild(),this.div!==null&&(St(this,Ct)&&Ut(this,Dt,G0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(St(this,xt)||St(this,wt)||St(this,Pt)||St(this,Rt))}get isResizable(){return!0}render(){if(this.div)return this.div;let ln,En;if(this.width&&(ln=this.x,En=this.y),super.render(),this.div.hidden=!0,St(this,wt)?Ut(this,Dt,e_).call(this):Ut(this,Dt,G0).call(this),this.width){const[un,hn]=this.parentDimensions;this.setAt(ln*un,En*hn,this.width*un,this.height*hn)}return this.div}static deserialize(ln,En,un){if(ln instanceof At.StampAnnotationElement)return null;const hn=super.deserialize(ln,En,un),{rect:nn,bitmapUrl:mn,bitmapId:xn,isSvg:rn,accessibilityData:qt}=ln;xn&&un.imageManager.isValidId(xn)?zt(hn,Ct,xn):zt(hn,Pt,mn),zt(hn,Ot,rn);const[Yt,tn]=hn.pageDimensions;return hn.width=(nn[2]-nn[0])/Yt,hn.height=(nn[3]-nn[1])/tn,qt&&(hn.altTextData=qt),hn}serialize(ln=!1,En=null){if(this.isEmpty())return null;const un={annotationType:vt.AnnotationEditorType.STAMP,bitmapId:St(this,Ct),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:St(this,Ot),structTreeParentId:this._structTreeParentId};if(ln)return un.bitmapUrl=Ut(this,Dt,K0).call(this,!0),un.accessibilityData=this.altTextData,un;const{decorative:hn,altText:nn}=this.altTextData;if(!hn&&nn&&(un.accessibilityData={type:"Figure",alt:nn}),En===null)return un;En.stamps||(En.stamps=new Map);const mn=St(this,Ot)?(un.rect[2]-un.rect[0])*(un.rect[3]-un.rect[1]):null;if(!En.stamps.has(St(this,Ct)))En.stamps.set(St(this,Ct),{area:mn,serialized:un}),un.bitmap=Ut(this,Dt,K0).call(this,!1);else if(St(this,Ot)){const xn=En.stamps.get(St(this,Ct));mn>xn.area&&(xn.area=mn,xn.serialized.bitmap.close(),xn.serialized.bitmap=Ut(this,Dt,K0).call(this,!1))}return un}};wt=new WeakMap,Ct=new WeakMap,xt=new WeakMap,Pt=new WeakMap,Rt=new WeakMap,kt=new WeakMap,Mt=new WeakMap,Lt=new WeakMap,Ot=new WeakMap,Ft=new WeakMap,Dt=new WeakSet,Ev=function(ln,En=!1){if(!ln){this.remove();return}zt(this,wt,ln.bitmap),En||(zt(this,Ct,ln.id),zt(this,Ot,ln.isSvg)),Ut(this,Dt,e_).call(this)},Av=function(){zt(this,xt,null),this._uiManager.enableWaiting(!1),St(this,kt)&&this.div.focus()},G0=function(){if(St(this,Ct)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(St(this,Ct)).then(En=>Ut(this,Dt,Ev).call(this,En,!0)).finally(()=>Ut(this,Dt,Av).call(this));return}if(St(this,Pt)){const En=St(this,Pt);zt(this,Pt,null),this._uiManager.enableWaiting(!0),zt(this,xt,this._uiManager.imageManager.getFromUrl(En).then(un=>Ut(this,Dt,Ev).call(this,un)).finally(()=>Ut(this,Dt,Av).call(this)));return}if(St(this,Rt)){const En=St(this,Rt);zt(this,Rt,null),this._uiManager.enableWaiting(!0),zt(this,xt,this._uiManager.imageManager.getFromFile(En).then(un=>Ut(this,Dt,Ev).call(this,un)).finally(()=>Ut(this,Dt,Av).call(this)));return}const ln=document.createElement("input");ln.type="file",ln.accept=en.supportedTypesStr,zt(this,xt,new Promise(En=>{ln.addEventListener("change",async()=>{if(!ln.files||ln.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const un=await this._uiManager.imageManager.getFromFile(ln.files[0]);Ut(this,Dt,Ev).call(this,un)}En()}),ln.addEventListener("cancel",()=>{this.remove(),En()})}).finally(()=>Ut(this,Dt,Av).call(this))),ln.click()},e_=function(){const{div:ln}=this;let{width:En,height:un}=St(this,wt);const[hn,nn]=this.pageDimensions,mn=.75;if(this.width)En=this.width*hn,un=this.height*nn;else if(En>mn*hn||un>mn*nn){const Yt=Math.min(mn*hn/En,mn*nn/un);En*=Yt,un*=Yt}const[xn,rn]=this.parentDimensions;this.setDims(En*xn/hn,un*rn/nn),this._uiManager.enableWaiting(!1);const qt=zt(this,kt,document.createElement("canvas"));ln.append(qt),ln.hidden=!1,Ut(this,Dt,t_).call(this,En,un),Ut(this,Dt,SS).call(this),St(this,Ft)||(this.parent.addUndoableEditor(this),zt(this,Ft,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},_S=function(ln,En){var mn;const[un,hn]=this.parentDimensions;this.width=ln/un,this.height=En/hn,this.setDims(ln,En),(mn=this._initialOptions)!=null&&mn.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,St(this,Lt)!==null&&clearTimeout(St(this,Lt)),zt(this,Lt,setTimeout(()=>{zt(this,Lt,null),Ut(this,Dt,t_).call(this,ln,En)},200))},wS=function(ln,En){const{width:un,height:hn}=St(this,wt);let nn=un,mn=hn,xn=St(this,wt);for(;nn>2*ln||mn>2*En;){const rn=nn,qt=mn;nn>2*ln&&(nn=nn>=16384?Math.floor(nn/2)-1:Math.ceil(nn/2)),mn>2*En&&(mn=mn>=16384?Math.floor(mn/2)-1:Math.ceil(mn/2));const Yt=new OffscreenCanvas(nn,mn);Yt.getContext("2d").drawImage(xn,0,0,rn,qt,0,0,nn,mn),xn=Yt.transferToImageBitmap()}return xn},t_=function(ln,En){ln=Math.ceil(ln),En=Math.ceil(En);const un=St(this,kt);if(!un||un.width===ln&&un.height===En)return;un.width=ln,un.height=En;const hn=St(this,Ot)?St(this,wt):Ut(this,Dt,wS).call(this,ln,En),nn=un.getContext("2d");nn.filter=this._uiManager.hcmFilter,nn.drawImage(hn,0,0,hn.width,hn.height,0,0,ln,En)},K0=function(ln){if(ln){if(St(this,Ot)){const hn=this._uiManager.imageManager.getSvgUrl(St(this,Ct));if(hn)return hn}const En=document.createElement("canvas");return{width:En.width,height:En.height}=St(this,wt),En.getContext("2d").drawImage(St(this,wt),0,0),En.toDataURL()}if(St(this,Ot)){const[En,un]=this.pageDimensions,hn=Math.round(this.width*En*Et.PixelsPerInch.PDF_TO_CSS_UNITS),nn=Math.round(this.height*un*Et.PixelsPerInch.PDF_TO_CSS_UNITS),mn=new OffscreenCanvas(hn,nn);return mn.getContext("2d").drawImage(St(this,wt),0,0,St(this,wt).width,St(this,wt).height,0,0,hn,nn),mn.transferToImageBitmap()}return structuredClone(St(this,wt))},SS=function(){zt(this,Mt,new ResizeObserver(ln=>{const En=ln[0].contentRect;En.width&&En.height&&Ut(this,Dt,_S).call(this,En.width,En.height)})),St(this,Mt).observe(this.div)},Sr(en,"_type","stamp");let _t=en;$.StampEditor=_t}],__webpack_module_cache__={};function __w_pdfjs_require__(_e){var $=__webpack_module_cache__[_e];if($!==void 0)return $.exports;var ht=__webpack_module_cache__[_e]={exports:{}};return __webpack_modules__[_e](ht,ht.exports,__w_pdfjs_require__),ht.exports}var __webpack_exports__={};return(()=>{var _e=__webpack_exports__;Object.defineProperty(_e,"__esModule",{value:!0}),Object.defineProperty(_e,"AbortException",{enumerable:!0,get:function(){return $.AbortException}}),Object.defineProperty(_e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return Et.AnnotationEditorLayer}}),Object.defineProperty(_e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return $.AnnotationEditorParamsType}}),Object.defineProperty(_e,"AnnotationEditorType",{enumerable:!0,get:function(){return $.AnnotationEditorType}}),Object.defineProperty(_e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return At.AnnotationEditorUIManager}}),Object.defineProperty(_e,"AnnotationLayer",{enumerable:!0,get:function(){return _t.AnnotationLayer}}),Object.defineProperty(_e,"AnnotationMode",{enumerable:!0,get:function(){return $.AnnotationMode}}),Object.defineProperty(_e,"CMapCompressionType",{enumerable:!0,get:function(){return $.CMapCompressionType}}),Object.defineProperty(_e,"DOMSVGFactory",{enumerable:!0,get:function(){return vt.DOMSVGFactory}}),Object.defineProperty(_e,"FeatureTest",{enumerable:!0,get:function(){return $.FeatureTest}}),Object.defineProperty(_e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return wt.GlobalWorkerOptions}}),Object.defineProperty(_e,"ImageKind",{enumerable:!0,get:function(){return $.ImageKind}}),Object.defineProperty(_e,"InvalidPDFException",{enumerable:!0,get:function(){return $.InvalidPDFException}}),Object.defineProperty(_e,"MissingPDFException",{enumerable:!0,get:function(){return $.MissingPDFException}}),Object.defineProperty(_e,"OPS",{enumerable:!0,get:function(){return $.OPS}}),Object.defineProperty(_e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return ht.PDFDataRangeTransport}}),Object.defineProperty(_e,"PDFDateString",{enumerable:!0,get:function(){return vt.PDFDateString}}),Object.defineProperty(_e,"PDFWorker",{enumerable:!0,get:function(){return ht.PDFWorker}}),Object.defineProperty(_e,"PasswordResponses",{enumerable:!0,get:function(){return $.PasswordResponses}}),Object.defineProperty(_e,"PermissionFlag",{enumerable:!0,get:function(){return $.PermissionFlag}}),Object.defineProperty(_e,"PixelsPerInch",{enumerable:!0,get:function(){return vt.PixelsPerInch}}),Object.defineProperty(_e,"PromiseCapability",{enumerable:!0,get:function(){return $.PromiseCapability}}),Object.defineProperty(_e,"RenderingCancelledException",{enumerable:!0,get:function(){return vt.RenderingCancelledException}}),Object.defineProperty(_e,"SVGGraphics",{enumerable:!0,get:function(){return ht.SVGGraphics}}),Object.defineProperty(_e,"UnexpectedResponseException",{enumerable:!0,get:function(){return $.UnexpectedResponseException}}),Object.defineProperty(_e,"Util",{enumerable:!0,get:function(){return $.Util}}),Object.defineProperty(_e,"VerbosityLevel",{enumerable:!0,get:function(){return $.VerbosityLevel}}),Object.defineProperty(_e,"XfaLayer",{enumerable:!0,get:function(){return Ct.XfaLayer}}),Object.defineProperty(_e,"build",{enumerable:!0,get:function(){return ht.build}}),Object.defineProperty(_e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return $.createValidAbsoluteUrl}}),Object.defineProperty(_e,"getDocument",{enumerable:!0,get:function(){return ht.getDocument}}),Object.defineProperty(_e,"getFilenameFromUrl",{enumerable:!0,get:function(){return vt.getFilenameFromUrl}}),Object.defineProperty(_e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return vt.getPdfFilenameFromUrl}}),Object.defineProperty(_e,"getXfaPageViewport",{enumerable:!0,get:function(){return vt.getXfaPageViewport}}),Object.defineProperty(_e,"isDataScheme",{enumerable:!0,get:function(){return vt.isDataScheme}}),Object.defineProperty(_e,"isPdfFile",{enumerable:!0,get:function(){return vt.isPdfFile}}),Object.defineProperty(_e,"loadScript",{enumerable:!0,get:function(){return vt.loadScript}}),Object.defineProperty(_e,"noContextMenu",{enumerable:!0,get:function(){return vt.noContextMenu}}),Object.defineProperty(_e,"normalizeUnicode",{enumerable:!0,get:function(){return $.normalizeUnicode}}),Object.defineProperty(_e,"renderTextLayer",{enumerable:!0,get:function(){return bt.renderTextLayer}}),Object.defineProperty(_e,"setLayerDimensions",{enumerable:!0,get:function(){return vt.setLayerDimensions}}),Object.defineProperty(_e,"shadow",{enumerable:!0,get:function(){return $.shadow}}),Object.defineProperty(_e,"updateTextLayer",{enumerable:!0,get:function(){return bt.updateTextLayer}}),Object.defineProperty(_e,"version",{enumerable:!0,get:function(){return ht.version}});var $=__w_pdfjs_require__(1),ht=__w_pdfjs_require__(2),vt=__w_pdfjs_require__(6),bt=__w_pdfjs_require__(26),Et=__w_pdfjs_require__(27),At=__w_pdfjs_require__(5),_t=__w_pdfjs_require__(29),wt=__w_pdfjs_require__(14),Ct=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const pdfjs=getDefaultExportFromCjs(pdfExports);var core_min={};(function(_e){var $=reactExports,ht=pdfExports;function vt(Wt){var Qt=Object.create(null);return Wt&&Object.keys(Wt).forEach(function(yn){if(yn!=="default"){var bn=Object.getOwnPropertyDescriptor(Wt,yn);Object.defineProperty(Qt,yn,bn.get?bn:{enumerable:!0,get:function(){return Wt[yn]}})}}),Qt.default=Wt,Object.freeze(Qt)}var bt,Et=vt($),At=vt(ht);_e.AnnotationType=void 0,(bt=_e.AnnotationType||(_e.AnnotationType={}))[bt.Text=1]="Text",bt[bt.Link=2]="Link",bt[bt.FreeText=3]="FreeText",bt[bt.Line=4]="Line",bt[bt.Square=5]="Square",bt[bt.Circle=6]="Circle",bt[bt.Polygon=7]="Polygon",bt[bt.Polyline=8]="Polyline",bt[bt.Highlight=9]="Highlight",bt[bt.Underline=10]="Underline",bt[bt.Squiggly=11]="Squiggly",bt[bt.StrikeOut=12]="StrikeOut",bt[bt.Stamp=13]="Stamp",bt[bt.Caret=14]="Caret",bt[bt.Ink=15]="Ink",bt[bt.Popup=16]="Popup",bt[bt.FileAttachment=17]="FileAttachment";var _t=function(Wt,Qt){return _t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(yn,bn){yn.__proto__=bn}||function(yn,bn){for(var wn in bn)Object.prototype.hasOwnProperty.call(bn,wn)&&(yn[wn]=bn[wn])},_t(Wt,Qt)};function wt(Wt,Qt){if(typeof Qt!="function"&&Qt!==null)throw new TypeError("Class extends value "+String(Qt)+" is not a constructor or null");function yn(){this.constructor=Wt}_t(Wt,Qt),Wt.prototype=Qt===null?Object.create(Qt):(yn.prototype=Qt.prototype,new yn)}var Ct,xt=function(){return xt=Object.assign||function(Wt){for(var Qt,yn=1,bn=arguments.length;yn<bn;yn++)for(var wn in Qt=arguments[yn])Object.prototype.hasOwnProperty.call(Qt,wn)&&(Wt[wn]=Qt[wn]);return Wt},xt.apply(this,arguments)};_e.TextDirection=void 0,(Ct=_e.TextDirection||(_e.TextDirection={})).RightToLeft="RTL",Ct.LeftToRight="LTR";var Pt,Rt=Et.createContext({currentTheme:"light",direction:_e.TextDirection.LeftToRight,setCurrentTheme:function(){}}),kt=function(Wt){var Qt=[];return Object.keys(Wt).forEach(function(yn){yn&&Wt[yn]&&Qt.push(yn)}),Qt.join(" ")},Mt=typeof window<"u"?Et.useLayoutEffect:Et.useEffect,Lt=function(Wt){var Qt=Et.useRef(null),yn=Wt.once,bn=Wt.threshold,wn=Wt.onVisibilityChanged;return Mt(function(){var Cn=Qt.current;if(Cn){var Nn=new IntersectionObserver(function(Mn){Mn.forEach(function(An){var In=An.isIntersecting,Ln=An.intersectionRatio;wn({isVisible:In,ratio:Ln}),In&&yn&&(Nn.unobserve(Cn),Nn.disconnect())})},{threshold:bn||0});return Nn.observe(Cn),function(){Nn.unobserve(Cn),Nn.disconnect()}}},[]),Qt},Ot=function(Wt){var Qt=Wt.children,yn=Wt.ignoreDirection,bn=yn!==void 0&&yn,wn=Wt.size,Cn=wn===void 0?24:wn,Nn=Et.useContext(Rt).direction,Mn=!bn&&Nn===_e.TextDirection.RightToLeft,An="".concat(Cn||24,"px");return Et.createElement("svg",{"aria-hidden":"true",className:kt({"rpv-core__icon":!0,"rpv-core__icon--rtl":Mn}),focusable:"false",height:An,viewBox:"0 0 24 24",width:An},Qt)},Ft=function(){return Et.createElement(Ot,{size:16},Et.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},Dt=function(Wt){var Qt=Wt.children,yn=Wt.testId,bn=Wt.onClick,wn=Et.useContext(Rt).direction===_e.TextDirection.RightToLeft,Cn=yn?{"data-testid":yn}:{};return Et.createElement("button",xt({className:kt({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":wn}),type:"button",onClick:bn},Cn),Qt)},$t=function(Wt){var Qt=Wt.size,yn=Qt===void 0?"4rem":Qt,bn=Wt.testId,wn=Et.useState(!1),Cn=wn[0],Nn=wn[1],Mn=bn?{"data-testid":bn}:{},An=Lt({onVisibilityChanged:function(In){Nn(In.isVisible)}});return Et.createElement("div",xt({},Mn,{className:kt({"rpv-core__spinner":!0,"rpv-core__spinner--animating":Cn}),ref:An,style:{height:yn,width:yn}}))},Bt=function(Wt){var Qt=Wt.ariaLabel,yn=Qt===void 0?"":Qt,bn=Wt.autoFocus,wn=bn!==void 0&&bn,Cn=Wt.placeholder,Nn=Cn===void 0?"":Cn,Mn=Wt.testId,An=Wt.type,In=An===void 0?"text":An,Ln=Wt.value,er=Ln===void 0?"":Ln,_i=Wt.onChange,Jn=Wt.onKeyDown,cr=Jn===void 0?function(){}:Jn,ar=Et.useContext(Rt).direction,rr=Et.useRef(),Zr=ar===_e.TextDirection.RightToLeft,Lr={ref:rr,"data-testid":"","aria-label":yn,className:kt({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":Zr}),placeholder:Nn,value:er,onChange:function(Ir){return _i(Ir.target.value)},onKeyDown:cr};return Mn&&(Lr["data-testid"]=Mn),Mt(function(){if(wn){var Ir=rr.current;if(Ir){var Hr=window.scrollX,xr=window.scrollY;Ir.focus(),window.scrollTo(Hr,xr)}}},[]),In==="text"?Et.createElement("input",xt({type:"text"},Lr)):Et.createElement("input",xt({type:"password"},Lr))};(function(Wt){Wt[Wt.ExitFullScreen=0]="ExitFullScreen",Wt[Wt.FullScreenChange=1]="FullScreenChange",Wt[Wt.FullScreenElement=2]="FullScreenElement",Wt[Wt.FullScreenEnabled=3]="FullScreenEnabled",Wt[Wt.RequestFullScreen=4]="RequestFullScreen"})(Pt||(Pt={}));var Nt,Ht={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},Vt={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},jt={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},Xt=typeof window<"u",Jt=Xt&&(Pt.FullScreenEnabled in document&&Ht||Vt.FullScreenEnabled in document&&Vt||jt.FullScreenEnabled in document&&jt)||Ht,Gt=function(){return Xt&&Jt.FullScreenEnabled in document&&document[Jt.FullScreenEnabled]===!0},en=function(Wt){return Xt?Wt[Jt.ExitFullScreen]():Promise.resolve({})},on=function(){return Xt?document[Jt.FullScreenElement]:null},_n=function(Wt,Qt){var yn=Et.useRef(),bn=function(){yn.current&&clearTimeout(yn.current)};return Et.useEffect(function(){return function(){return bn()}},[]),Et.useCallback(function(){for(var wn=[],Cn=0;Cn<arguments.length;Cn++)wn[Cn]=arguments[Cn];bn(),yn.current=setTimeout(function(){Wt.apply(void 0,wn)},Qt)},[Wt,Qt])},ln=function(){var Wt=Et.useRef(!1);return Et.useEffect(function(){return Wt.current=!0,function(){Wt.current=!1}},[]),Wt},En=function(Wt){var Qt=Et.useRef(Wt);return Et.useEffect(function(){Qt.current=Wt},[Wt]),Qt.current};(function(Wt){Wt.NotRenderedYet="NotRenderedYet",Wt.Rendering="Rendering",Wt.Rendered="Rendered"})(Nt||(Nt={}));var un,hn=-9999,nn=function(Wt){var Qt=Wt.doc,yn=Qt.numPages,bn=Qt.loadingTask.docId,wn=Et.useMemo(function(){return Array(yn).fill(null).map(function(Mn,An){return{pageIndex:An,renderStatus:Nt.NotRenderedYet,visibility:hn}})},[bn]),Cn=Et.useRef({currentRenderingPage:-1,startRange:0,endRange:yn-1,visibilities:wn}),Nn=function(Mn,An){Cn.current.visibilities[Mn].visibility=An};return{getHighestPriorityPage:function(){var Mn=Cn.current.visibilities.slice(Cn.current.startRange,Cn.current.endRange+1).filter(function(_i){return _i.visibility>hn});if(!Mn.length)return-1;for(var An=Mn[0].pageIndex,In=Mn[Mn.length-1].pageIndex,Ln=Mn.length,er=0;er<Ln;er++){if(Mn[er].renderStatus===Nt.Rendering)return-1;if(Mn[er].renderStatus===Nt.NotRenderedYet)return Mn[er].pageIndex}return In+1<yn&&Cn.current.visibilities[In+1].renderStatus!==Nt.Rendered?In+1:An-1>=0&&Cn.current.visibilities[An-1].renderStatus!==Nt.Rendered?An-1:-1},isInRange:function(Mn){return Mn>=Cn.current.startRange&&Mn<=Cn.current.endRange},markNotRendered:function(){for(var Mn=0;Mn<yn;Mn++)Cn.current.visibilities[Mn].renderStatus=Nt.NotRenderedYet},markRendered:function(Mn){Cn.current.visibilities[Mn].renderStatus=Nt.Rendered},markRendering:function(Mn){Cn.current.currentRenderingPage!==-1&&Cn.current.currentRenderingPage!==Mn&&Cn.current.visibilities[Cn.current.currentRenderingPage].renderStatus===Nt.Rendering&&(Cn.current.visibilities[Cn.current.currentRenderingPage].renderStatus=Nt.NotRenderedYet),Cn.current.visibilities[Mn].renderStatus=Nt.Rendering,Cn.current.currentRenderingPage=Mn},setOutOfRange:function(Mn){Nn(Mn,hn)},setRange:function(Mn,An){Cn.current.startRange=Mn,Cn.current.endRange=An;for(var In=0;In<yn;In++)(In<Mn||In>An)&&(Cn.current.visibilities[In].visibility=hn,Cn.current.visibilities[In].renderStatus=Nt.NotRenderedYet)},setVisibility:Nn}},mn={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},xn=Et.createContext({l10n:mn,setL10n:function(){}}),rn=0,qt=function(){return rn++},Yt=function(Wt,Qt,yn){var bn=function(wn){var Cn=Qt.current;if(Cn){var Nn=wn.target;if(Nn instanceof Element&&Nn.shadowRoot){var Mn=wn.composedPath();Mn.length>0&&!Cn.contains(Mn[0])&&yn()}else Cn.contains(Nn)||yn()}};Et.useEffect(function(){if(Wt){var wn={capture:!0};return document.addEventListener("click",bn,wn),function(){document.removeEventListener("click",bn,wn)}}},[])},tn=function(Wt){var Qt=function(yn){yn.key==="Escape"&&Wt()};Et.useEffect(function(){return document.addEventListener("keyup",Qt),function(){document.removeEventListener("keyup",Qt)}},[])},dn=function(Wt){var Qt=Wt.ariaControlsSuffix,yn=Wt.children,bn=Wt.closeOnClickOutside,wn=Wt.closeOnEscape,Cn=Wt.onToggle,Nn=Et.useRef(),Mn=Et.useContext(Rt).direction===_e.TextDirection.RightToLeft;return Et.useEffect(function(){var An=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=An}},[]),tn(function(){Nn.current&&wn&&Cn()}),Yt(bn,Nn,Cn),Mt(function(){var An=Nn.current;if(An){var In=.75*document.body.clientHeight;An.getBoundingClientRect().height>=In&&(An.style.overflow="auto",An.style.maxHeight="".concat(In,"px"))}},[]),Et.createElement("div",{"aria-modal":"true",className:kt({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":Mn}),id:"rpv-core__modal-body-".concat(Qt),ref:Nn,role:"dialog",tabIndex:-1},yn)},cn=function(Wt){var Qt=Wt.children;return Et.createElement("div",{className:"rpv-core__modal-overlay"},Qt)};_e.ToggleStatus=void 0,(un=_e.ToggleStatus||(_e.ToggleStatus={})).Close="Close",un.Open="Open",un.Toggle="Toggle";var fn,Tn=function(Wt){var Qt=Et.useState(Wt),yn=Qt[0],bn=Qt[1];return{opened:yn,toggle:function(wn){switch(wn){case _e.ToggleStatus.Close:bn(!1);break;case _e.ToggleStatus.Open:bn(!0);break;case _e.ToggleStatus.Toggle:default:bn(function(Cn){return!Cn})}}}},Bn=function(Wt){var Qt=Wt.content,yn=Wt.isOpened,bn=yn!==void 0&&yn,wn=Wt.target,Cn=Tn(bn),Nn=Cn.opened,Mn=Cn.toggle;return Et.createElement(Et.Fragment,null,wn&&wn(Mn,Nn),Nn&&Qt(Mn))};_e.Position=void 0,(fn=_e.Position||(_e.Position={})).TopLeft="TOP_LEFT",fn.TopCenter="TOP_CENTER",fn.TopRight="TOP_RIGHT",fn.RightTop="RIGHT_TOP",fn.RightCenter="RIGHT_CENTER",fn.RightBottom="RIGHT_BOTTOM",fn.BottomLeft="BOTTOM_LEFT",fn.BottomCenter="BOTTOM_CENTER",fn.BottomRight="BOTTOM_RIGHT",fn.LeftTop="LEFT_TOP",fn.LeftCenter="LEFT_CENTER",fn.LeftBottom="LEFT_BOTTOM";var jn,Un,Gn,Yn,Qn,Dn,On,sn,gn=function(Wt,Qt,yn,bn,wn){Mt(function(){var Cn=Qt.current,Nn=Wt.current,Mn=yn.current;if(Nn&&Cn&&Mn){var An=Mn.getBoundingClientRect(),In=function(_i,Jn,cr,ar){var rr=Jn.getBoundingClientRect(),Zr=_i.getBoundingClientRect(),Lr=Zr.height,Ir=Zr.width,Hr=0,xr=0;switch(cr){case _e.Position.TopLeft:Hr=rr.top-Lr,xr=rr.left;break;case _e.Position.TopCenter:Hr=rr.top-Lr,xr=rr.left+rr.width/2-Ir/2;break;case _e.Position.TopRight:Hr=rr.top-Lr,xr=rr.left+rr.width-Ir;break;case _e.Position.RightTop:Hr=rr.top,xr=rr.left+rr.width;break;case _e.Position.RightCenter:Hr=rr.top+rr.height/2-Lr/2,xr=rr.left+rr.width;break;case _e.Position.RightBottom:Hr=rr.top+rr.height-Lr,xr=rr.left+rr.width;break;case _e.Position.BottomLeft:Hr=rr.top+rr.height,xr=rr.left;break;case _e.Position.BottomCenter:Hr=rr.top+rr.height,xr=rr.left+rr.width/2-Ir/2;break;case _e.Position.BottomRight:Hr=rr.top+rr.height,xr=rr.left+rr.width-Ir;break;case _e.Position.LeftTop:Hr=rr.top,xr=rr.left-Ir;break;case _e.Position.LeftCenter:Hr=rr.top+rr.height/2-Lr/2,xr=rr.left-Ir;break;case _e.Position.LeftBottom:Hr=rr.top+rr.height-Lr,xr=rr.left-Ir}return{left:xr+(ar.left||0),top:Hr+(ar.top||0)}}(Nn,Cn,bn,wn),Ln=In.top,er=In.left;Nn.style.top="".concat(Ln-An.top,"px"),Nn.style.left="".concat(er-An.left,"px")}},[])},Rn=function(Wt){var Qt,yn=Wt.customClassName,bn=Wt.position;return Et.createElement("div",{className:kt((Qt={"rpv-core__arrow":!0,"rpv-core__arrow--tl":bn===_e.Position.TopLeft,"rpv-core__arrow--tc":bn===_e.Position.TopCenter,"rpv-core__arrow--tr":bn===_e.Position.TopRight,"rpv-core__arrow--rt":bn===_e.Position.RightTop,"rpv-core__arrow--rc":bn===_e.Position.RightCenter,"rpv-core__arrow--rb":bn===_e.Position.RightBottom,"rpv-core__arrow--bl":bn===_e.Position.BottomLeft,"rpv-core__arrow--bc":bn===_e.Position.BottomCenter,"rpv-core__arrow--br":bn===_e.Position.BottomRight,"rpv-core__arrow--lt":bn===_e.Position.LeftTop,"rpv-core__arrow--lc":bn===_e.Position.LeftCenter,"rpv-core__arrow--lb":bn===_e.Position.LeftBottom},Qt["".concat(yn)]=yn!=="",Qt))})},$n=function(Wt){var Qt=Wt.ariaControlsSuffix,yn=Wt.children,bn=Wt.closeOnClickOutside,wn=Wt.offset,Cn=Wt.position,Nn=Wt.targetRef,Mn=Wt.onClose,An=Et.useRef(),In=Et.useRef(),Ln=Et.useRef(),er=Et.useContext(Rt).direction===_e.TextDirection.RightToLeft;Yt(bn,An,Mn),gn(An,Nn,Ln,Cn,wn),Mt(function(){var Jn=In.current;if(Jn){var cr=.75*document.body.clientHeight;Jn.getBoundingClientRect().height>=cr&&(Jn.style.overflow="auto",Jn.style.maxHeight="".concat(cr,"px"))}},[]);var _i="rpv-core__popover-body-inner-".concat(Qt);return Et.createElement(Et.Fragment,null,Et.createElement("div",{ref:Ln,style:{left:0,position:"absolute",top:0}}),Et.createElement("div",{"aria-describedby":_i,className:kt({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":er}),id:"rpv-core__popover-body-".concat(Qt),ref:An,role:"dialog",tabIndex:-1},Et.createElement(Rn,{customClassName:"rpv-core__popover-body-arrow",position:Cn}),Et.createElement("div",{id:_i,ref:In},yn)))},zn=function(Wt){var Qt=Wt.closeOnEscape,yn=Wt.onClose,bn=Et.useRef();return tn(function(){bn.current&&Qt&&yn()}),Et.createElement("div",{className:"rpv-core__popover-overlay",ref:bn})},Zn=function(Wt){var Qt=Wt.ariaControlsSuffix,yn=Wt.children,bn=Wt.contentRef,wn=Wt.offset,Cn=Wt.position,Nn=Wt.targetRef,Mn=Et.useRef(),An=Et.useContext(Rt).direction===_e.TextDirection.RightToLeft;return gn(bn,Nn,Mn,Cn,wn),Et.createElement(Et.Fragment,null,Et.createElement("div",{ref:Mn,style:{left:0,position:"absolute",top:0}}),Et.createElement("div",{className:kt({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":An}),id:"rpv-core__tooltip-body-".concat(Qt),ref:bn,role:"tooltip"},Et.createElement(Rn,{customClassName:"rpv-core__tooltip-body-arrow",position:Cn}),Et.createElement("div",{className:"rpv-core__tooltip-body-content"},yn)))};_e.FullScreenMode=void 0,(jn=_e.FullScreenMode||(_e.FullScreenMode={})).Normal="Normal",jn.Entering="Entering",jn.Entered="Entered",jn.EnteredCompletely="EnteredCompletely",jn.Exitting="Exitting",jn.Exited="Exited",_e.LayerRenderStatus=void 0,(Un=_e.LayerRenderStatus||(_e.LayerRenderStatus={}))[Un.PreRender=0]="PreRender",Un[Un.DidRender=1]="DidRender",_e.PageMode=void 0,(Gn=_e.PageMode||(_e.PageMode={})).Attachments="UseAttachments",Gn.Bookmarks="UseOutlines",Gn.ContentGroup="UseOC",Gn.Default="UserNone",Gn.FullScreen="FullScreen",Gn.Thumbnails="UseThumbs",_e.PasswordStatus=void 0,(Yn=_e.PasswordStatus||(_e.PasswordStatus={})).RequiredPassword="RequiredPassword",Yn.WrongPassword="WrongPassword",_e.RotateDirection=void 0,(Qn=_e.RotateDirection||(_e.RotateDirection={})).Backward="Backward",Qn.Forward="Forward",_e.ScrollMode=void 0,(Dn=_e.ScrollMode||(_e.ScrollMode={})).Page="Page",Dn.Horizontal="Horizontal",Dn.Vertical="Vertical",Dn.Wrapped="Wrapped",_e.SpecialZoomLevel=void 0,(On=_e.SpecialZoomLevel||(_e.SpecialZoomLevel={})).ActualSize="ActualSize",On.PageFit="PageFit",On.PageWidth="PageWidth",_e.ViewMode=void 0,(sn=_e.ViewMode||(_e.ViewMode={})).DualPage="DualPage",sn.DualPageWithCover="DualPageWithCover",sn.SinglePage="SinglePage";var Xn,Pn=function(Wt,Qt){return Wt.reduce(function(yn,bn,wn){return wn%Qt?yn[yn.length-1].push(bn):yn.push([bn]),yn},[])},or=function(Wt,Qt){switch(Qt[1].name){case"XYZ":return{bottomOffset:function(yn,bn){return Qt[3]===null?bn:Qt[3]},leftOffset:function(yn,bn){return Qt[2]===null?0:Qt[2]},pageIndex:Wt,scaleTo:Qt[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:Wt,scaleTo:_e.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:Qt[2],leftOffset:0,pageIndex:Wt,scaleTo:_e.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:Wt,scaleTo:1}}},nr=new Map,$r=new Map,Rr=function(Wt,Qt){return"".concat(Wt.loadingTask.docId,"___").concat(Qt.num,"R").concat(Qt.gen===0?"":Qt.gen)},qr=function(Wt,Qt,yn){nr.set(Rr(Wt,Qt),yn)},hr=function(Wt,Qt){if(!Wt)return Promise.reject("The document is not loaded yet");var yn="".concat(Wt.loadingTask.docId,"___").concat(Qt),bn=$r.get(yn);return bn?Promise.resolve(bn):new Promise(function(wn,Cn){Wt.getPage(Qt+1).then(function(Nn){$r.set(yn,Nn),Nn.ref&&qr(Wt,Nn.ref,Qt),wn(Nn)})})},wr=function(Wt,Qt){return new Promise(function(yn){new Promise(function(bn){typeof Qt=="string"?Wt.getDestination(Qt).then(function(wn){bn(wn)}):bn(Qt)}).then(function(bn){if(typeof bn[0]=="object"&&bn[0]!==null){var wn=bn[0],Cn=function(Mn,An){var In=Rr(Mn,An);return nr.has(In)?nr.get(In):null}(Wt,wn);Cn===null?Wt.getPageIndex(wn).then(function(Mn){qr(Wt,wn,Mn),wr(Wt,Qt).then(function(An){return yn(An)})}):yn(or(Cn,bn))}else{var Nn=or(bn[0],bn);yn(Nn)}})})};(function(Wt){Wt[Wt.Solid=1]="Solid",Wt[Wt.Dashed=2]="Dashed",Wt[Wt.Beveled=3]="Beveled",Wt[Wt.Inset=4]="Inset",Wt[Wt.Underline=5]="Underline"})(Xn||(Xn={}));var jr,is=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),Kn=function(Wt,Qt,yn,bn){var wn=parseInt(Wt,10);return wn>=Qt&&wn<=yn?wn:bn},kn=function(Wt){return Wt.contentsObj?Wt.contentsObj.str:Wt.contents||""},Fn=function(Wt){return Wt.titleObj?Wt.titleObj.str:Wt.title||""},dr=function(Wt){var Qt=Wt.annotation,yn=Et.useContext(Rt).direction,bn=Fn(Qt),wn=kn(Qt),Cn=yn===_e.TextDirection.RightToLeft,Nn=Et.useRef(),Mn="";if(Qt.modificationDate){var An=function(In){var Ln=is.exec(In);if(!Ln)return null;var er=parseInt(Ln[1],10),_i=Kn(Ln[2],1,12,1)-1,Jn=Kn(Ln[3],1,31,1),cr=Kn(Ln[4],0,23,0),ar=Kn(Ln[5],0,59,0),rr=Kn(Ln[6],0,59,0),Zr=Ln[7]||"Z",Lr=Kn(Ln[8],0,23,0),Ir=Kn(Ln[9],0,59,0);switch(Zr){case"-":cr+=Lr,ar+=Ir;break;case"+":cr-=Lr,ar-=Ir}return new Date(Date.UTC(er,_i,Jn,cr,ar,rr))}(Qt.modificationDate);Mn=An?"".concat(An.toLocaleDateString(),", ").concat(An.toLocaleTimeString()):""}return Et.useLayoutEffect(function(){if(Nn.current){var In=document.querySelector('[data-annotation-id="'.concat(Qt.id,'"]'));if(In){var Ln=In;return Ln.style.zIndex+=1,function(){Ln.style.zIndex="".concat(parseInt(Ln.style.zIndex,10)-1)}}}},[]),Et.createElement("div",{ref:Nn,className:kt({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":Cn}),style:{top:Qt.annotationType===_e.AnnotationType.Popup?"":"100%"}},bn&&Et.createElement(Et.Fragment,null,Et.createElement("div",{className:kt({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!Cn,"rpv-core__annotation-popup-title--rtl":Cn})},bn),Et.createElement("div",{className:"rpv-core__annotation-popup-date"},Mn)),wn&&Et.createElement("div",{className:"rpv-core__annotation-popup-content"},wn.split(`
`).map(function(In,Ln){return Et.createElement(Et.Fragment,{key:Ln},In,Et.createElement("br",null))})))};(function(Wt){Wt.Click="Click",Wt.Hover="Hover"})(jr||(jr={}));var mr,Pr=function(Wt){var Qt,yn=Wt.annotation,bn=Wt.children,wn=Wt.ignoreBorder,Cn=Wt.hasPopup,Nn=Wt.isRenderable,Mn=Wt.page,An=Wt.viewport,In=yn.rect,Ln=function(){var Nr=Tn(!1),as=Nr.opened,rs=Nr.toggle,ls=Et.useState(jr.Hover),us=ls[0],fs=ls[1];return{opened:as,closeOnHover:function(){us===jr.Hover&&rs(_e.ToggleStatus.Close)},openOnHover:function(){us===jr.Hover&&rs(_e.ToggleStatus.Open)},toggleOnClick:function(){switch(us){case jr.Click:as&&fs(jr.Hover),rs(_e.ToggleStatus.Toggle);break;case jr.Hover:fs(jr.Click),rs(_e.ToggleStatus.Open)}}}}(),er=Ln.closeOnHover,_i=Ln.opened,Jn=Ln.openOnHover,cr=Ln.toggleOnClick,ar=(Qt=[In[0],Mn.view[3]+Mn.view[1]-In[1],In[2],Mn.view[3]+Mn.view[1]-In[3]],[Math.min(Qt[0],Qt[2]),Math.min(Qt[1],Qt[3]),Math.max(Qt[0],Qt[2]),Math.max(Qt[1],Qt[3])]),rr=In[2]-In[0],Zr=In[3]-In[1],Lr={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!wn&&yn.borderStyle.width>0){switch(yn.borderStyle.style){case Xn.Dashed:Lr.borderStyle="dashed";break;case Xn.Solid:Lr.borderStyle="solid";break;case Xn.Underline:Lr=Object.assign({borderBottomStyle:"solid"},Lr);case Xn.Beveled:case Xn.Inset:}var Ir=yn.borderStyle.width;Lr.borderWidth="".concat(Ir,"px"),yn.borderStyle.style!==Xn.Underline&&(rr-=2*Ir,Zr-=2*Ir);var Hr=yn.borderStyle,xr=Hr.horizontalCornerRadius,Ur=Hr.verticalCornerRadius;(xr>0||Ur>0)&&(Lr.borderRadius="".concat(xr,"px / ").concat(Ur,"px")),yn.color?Lr.borderColor="rgb(".concat(0|yn.color[0],", ").concat(0|yn.color[1],", ").concat(0|yn.color[2],")"):Lr.borderWidth="0"}return Et.createElement(Et.Fragment,null,Nn&&bn({popup:{opened:_i,closeOnHover:er,openOnHover:Jn,toggleOnClick:cr},slot:{attrs:{style:Object.assign({height:"".concat(Zr,"px"),left:"".concat(ar[0],"px"),top:"".concat(ar[1],"px"),transform:"matrix(".concat(An.transform.join(","),")"),transformOrigin:"-".concat(ar[0],"px -").concat(ar[1],"px"),width:"".concat(rr,"px")},Lr)},children:Et.createElement(Et.Fragment,null,Cn&&_i&&Et.createElement(dr,{annotation:yn}))}}))},vn=function(Wt){var Qt=Wt.annotation,yn=Wt.page,bn=Wt.viewport,wn=Qt.hasPopup===!1,Cn=Fn(Qt),Nn=kn(Qt),Mn=!!(Qt.hasPopup||Cn||Nn);return Et.createElement(Pr,{annotation:Qt,hasPopup:wn,ignoreBorder:!0,isRenderable:Mn,page:yn,viewport:bn},function(An){return Et.createElement("div",xt({},An.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":Qt.id,onClick:An.popup.toggleOnClick,onMouseEnter:An.popup.openOnHover,onMouseLeave:An.popup.closeOnHover}),An.slot.children)})},Wn=function(Wt){var Qt=Wt.annotation,yn=Wt.page,bn=Wt.viewport,wn=Qt.hasPopup===!1,Cn=Fn(Qt),Nn=kn(Qt),Mn=!!(Qt.hasPopup||Cn||Nn),An=Qt.rect,In=An[2]-An[0],Ln=An[3]-An[1],er=Qt.borderStyle.width;return Et.createElement(Pr,{annotation:Qt,hasPopup:wn,ignoreBorder:!0,isRenderable:Mn,page:yn,viewport:bn},function(_i){return Et.createElement("div",xt({},_i.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":Qt.id,onClick:_i.popup.toggleOnClick,onMouseEnter:_i.popup.openOnHover,onMouseLeave:_i.popup.closeOnHover}),Et.createElement("svg",{height:"".concat(Ln,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(In," ").concat(Ln),width:"".concat(In,"px")},Et.createElement("circle",{cy:Ln/2,fill:"none",rx:In/2-er/2,ry:Ln/2-er/2,stroke:"transparent",strokeWidth:er||1})),_i.slot.children)})},sr=function(Wt){var Qt=Wt.annotation,yn=Wt.page,bn=Wt.viewport,wn=Fn(Qt),Cn=kn(Qt),Nn=!(Qt.hasPopup!==!1||!wn&&!Cn),Mn=function(){var An,In,Ln,er,_i=Qt.file;_i&&(An=_i.filename,In=_i.content,Ln=typeof In=="string"?"":URL.createObjectURL(new Blob([In],{type:""})),(er=document.createElement("a")).style.display="none",er.href=Ln||An,er.setAttribute("download",function(Jn){var cr=Jn.split("/").pop();return cr?cr.split("#")[0].split("?")[0]:Jn}(An)),document.body.appendChild(er),er.click(),document.body.removeChild(er),Ln&&URL.revokeObjectURL(Ln))};return Et.createElement(Pr,{annotation:Qt,hasPopup:Nn,ignoreBorder:!0,isRenderable:!0,page:yn,viewport:bn},function(An){return Et.createElement("div",xt({},An.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":Qt.id,onClick:An.popup.toggleOnClick,onDoubleClick:Mn,onMouseEnter:An.popup.openOnHover,onMouseLeave:An.popup.closeOnHover}),An.slot.children)})},gr=function(Wt){var Qt=Wt.annotation,yn=Wt.page,bn=Wt.viewport,wn=Qt.hasPopup===!1,Cn=Fn(Qt),Nn=kn(Qt),Mn=!!(Qt.hasPopup||Cn||Nn);return Et.createElement(Pr,{annotation:Qt,hasPopup:wn,ignoreBorder:!0,isRenderable:Mn,page:yn,viewport:bn},function(An){return Et.createElement("div",xt({},An.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":Qt.id,onClick:An.popup.toggleOnClick,onMouseEnter:An.popup.openOnHover,onMouseLeave:An.popup.closeOnHover}),An.slot.children)})},br=function(Wt){var Qt=Wt.annotation,yn=Wt.page,bn=Wt.viewport,wn=Fn(Qt),Cn=kn(Qt),Nn=!(!wn&&!Cn),Mn=!Qt.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(Qt.parentType)!==-1;return Mt(function(){if(Qt.parentId){var An=document.querySelector('[data-annotation-id="'.concat(Qt.parentId,'"]')),In=document.querySelector('[data-annotation-id="'.concat(Qt.id,'"]'));if(An&&In){var Ln=parseFloat(An.style.left),er=parseFloat(An.style.top)+parseFloat(An.style.height);In.style.left="".concat(Ln,"px"),In.style.top="".concat(er,"px"),In.style.transformOrigin="-".concat(Ln,"px -").concat(er,"px")}}},[]),Et.createElement(Pr,{annotation:Qt,hasPopup:Mn,ignoreBorder:!1,isRenderable:Nn,page:yn,viewport:bn},function(An){return Et.createElement("div",xt({},An.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":Qt.id}),Et.createElement(dr,{annotation:Qt}))})},ur=function(Wt){var Qt=Wt.annotation,yn=Wt.childAnnotation,bn=Wt.page,wn=Wt.viewport,Cn=Qt.hasPopup===!1,Nn=Fn(Qt),Mn=kn(Qt),An=!!(Qt.hasPopup||Nn||Mn);if(Qt.quadPoints&&Qt.quadPoints.length>0){var In=Qt.quadPoints.map(function(Ln){return Object.assign({},Qt,{rect:[Ln[2].x,Ln[2].y,Ln[1].x,Ln[1].y],quadPoints:[]})});return Et.createElement(Et.Fragment,null,In.map(function(Ln,er){return Et.createElement(ur,{key:er,annotation:Ln,childAnnotation:yn,page:bn,viewport:wn})}))}return Et.createElement(Pr,{annotation:Qt,hasPopup:Cn,ignoreBorder:!0,isRenderable:An,page:bn,viewport:wn},function(Ln){return Et.createElement(Et.Fragment,null,Et.createElement("div",xt({},Ln.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":Qt.id,onClick:Ln.popup.toggleOnClick,onMouseEnter:Ln.popup.openOnHover,onMouseLeave:Ln.popup.closeOnHover}),Ln.slot.children),yn&&yn.annotationType===_e.AnnotationType.Popup&&Ln.popup.opened&&Et.createElement(br,{annotation:yn,page:bn,viewport:wn}))})},pn=function(Wt){var Qt=Wt.annotation,yn=Wt.page,bn=Wt.viewport,wn=Qt.hasPopup===!1,Cn=Fn(Qt),Nn=kn(Qt),Mn=!!(Qt.hasPopup||Cn||Nn),An=Qt.rect,In=An[2]-An[0],Ln=An[3]-An[1],er=Qt.borderStyle.width;return Et.createElement(Pr,{annotation:Qt,hasPopup:wn,ignoreBorder:!0,isRenderable:Mn,page:yn,viewport:bn},function(_i){return Et.createElement("div",xt({},_i.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":Qt.id,onClick:_i.popup.toggleOnClick,onMouseEnter:_i.popup.openOnHover,onMouseLeave:_i.popup.closeOnHover}),Qt.inkLists&&Qt.inkLists.length&&Et.createElement("svg",{height:"".concat(Ln,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(In," ").concat(Ln),width:"".concat(In,"px")},Qt.inkLists.map(function(Jn,cr){return Et.createElement("polyline",{key:cr,fill:"none",stroke:"transparent",strokeWidth:er||1,points:Jn.map(function(ar){return"".concat(ar.x-An[0],",").concat(An[3]-ar.y)}).join(" ")})})),_i.slot.children)})},an=function(Wt){var Qt=Wt.annotation,yn=Wt.page,bn=Wt.viewport,wn=Qt.hasPopup===!1,Cn=Fn(Qt),Nn=kn(Qt),Mn=!!(Qt.hasPopup||Cn||Nn),An=Qt.rect,In=An[2]-An[0],Ln=An[3]-An[1],er=Qt.borderStyle.width;return Et.createElement(Pr,{annotation:Qt,hasPopup:wn,ignoreBorder:!0,isRenderable:Mn,page:yn,viewport:bn},function(_i){return Et.createElement("div",xt({},_i.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":Qt.id,onClick:_i.popup.toggleOnClick,onMouseEnter:_i.popup.openOnHover,onMouseLeave:_i.popup.closeOnHover}),Et.createElement("svg",{height:"".concat(Ln,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(In," ").concat(Ln),width:"".concat(In,"px")},Et.createElement("line",{stroke:"transparent",strokeWidth:er||1,x1:An[2]-Qt.lineCoordinates[0],x2:An[2]-Qt.lineCoordinates[2],y1:An[3]-Qt.lineCoordinates[1],y2:An[3]-Qt.lineCoordinates[3]})),_i.slot.children)})},Sn=/^([^\w]*)(javascript|data|vbscript)/im,Vn=/&#(\w+)(^\w|;)?/g,Hn=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,qn=/^([^:]+):/gm,tr=function(Wt,Qt){var yn,bn=(yn=Wt||"",yn.replace(Vn,function(Mn,An){return String.fromCharCode(An)})).replace(Hn,"").trim();if(!bn)return Qt;var wn=bn[0];if(wn==="."||wn==="/")return bn;var Cn=bn.match(qn);if(!Cn)return bn;var Nn=Cn[0];return Sn.test(Nn)?Qt:bn},vr=function(Wt){var Qt,yn=Wt.annotation,bn=Wt.annotationContainerRef,wn=Wt.doc,Cn=Wt.outlines,Nn=Wt.page,Mn=Wt.pageIndex,An=Wt.scale,In=Wt.viewport,Ln=Wt.onExecuteNamedAction,er=Wt.onJumpFromLinkAnnotation,_i=Wt.onJumpToDest,Jn=Et.useRef(),cr=Cn&&Cn.length&&yn.dest&&typeof yn.dest=="string"?(Qt=Cn.find(function(Lr){return Lr.dest===yn.dest}))===null||Qt===void 0?void 0:Qt.title:"",ar=!!(yn.url||yn.dest||yn.action||yn.unsafeUrl),rr={};if(yn.url||yn.unsafeUrl){var Zr=tr(yn.url||yn.unsafeUrl,"");Zr?rr={"data-target":"external",href:Zr,rel:"noopener noreferrer nofollow",target:yn.newWindow?"_blank":"",title:Zr}:ar=!1}else rr={href:"","data-annotation-link":yn.id,onClick:function(Lr){Lr.preventDefault(),yn.action?Ln(yn.action):wr(wn,yn.dest).then(function(Ir){var Hr=Jn.current,xr=bn.current;if(Hr&&xr){var Ur=Hr.getBoundingClientRect();xr.style.setProperty("height","100%"),xr.style.setProperty("width","100%");var Nr=xr.getBoundingClientRect();xr.style.removeProperty("height"),xr.style.removeProperty("width");var as=(Ur.left-Nr.left)/An,rs=(Nr.bottom-Ur.bottom+Ur.height)/An;er({bottomOffset:rs,label:cr,leftOffset:as,pageIndex:Mn})}_i(Ir)})}};return cr&&(rr=Object.assign({},rr,{title:cr,"aria-label":cr})),Et.createElement(Pr,{annotation:yn,hasPopup:!1,ignoreBorder:!1,isRenderable:ar,page:Nn,viewport:In},function(Lr){return Et.createElement("div",xt({},Lr.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":yn.id,"data-testid":"core__annotation--link-".concat(yn.id)}),Et.createElement("a",xt({ref:Jn},rr)))})},fr=function(Wt){var Qt=Wt.annotation,yn=Wt.page,bn=Wt.viewport,wn=Qt.hasPopup===!1,Cn=Fn(Qt),Nn=kn(Qt),Mn=!!(Qt.hasPopup||Cn||Nn),An=Qt.rect,In=An[2]-An[0],Ln=An[3]-An[1],er=Qt.borderStyle.width;return Et.createElement(Pr,{annotation:Qt,hasPopup:wn,ignoreBorder:!0,isRenderable:Mn,page:yn,viewport:bn},function(_i){return Et.createElement("div",xt({},_i.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":Qt.id,onClick:_i.popup.toggleOnClick,onMouseEnter:_i.popup.openOnHover,onMouseLeave:_i.popup.closeOnHover}),Qt.vertices&&Qt.vertices.length&&Et.createElement("svg",{height:"".concat(Ln,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(In," ").concat(Ln),width:"".concat(In,"px")},Et.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:er||1,points:Qt.vertices.map(function(Jn){return"".concat(Jn.x-An[0],",").concat(An[3]-Jn.y)}).join(" ")})),_i.slot.children)})},lr=function(Wt){var Qt=Wt.annotation,yn=Wt.page,bn=Wt.viewport,wn=Qt.hasPopup===!1,Cn=Fn(Qt),Nn=kn(Qt),Mn=!!(Qt.hasPopup||Cn||Nn),An=Qt.rect,In=An[2]-An[0],Ln=An[3]-An[1],er=Qt.borderStyle.width;return Et.createElement(Pr,{annotation:Qt,hasPopup:wn,ignoreBorder:!0,isRenderable:Mn,page:yn,viewport:bn},function(_i){return Et.createElement("div",xt({},_i.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":Qt.id,onClick:_i.popup.toggleOnClick,onMouseEnter:_i.popup.openOnHover,onMouseLeave:_i.popup.closeOnHover}),Qt.vertices&&Qt.vertices.length&&Et.createElement("svg",{height:"".concat(Ln,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(In," ").concat(Ln),width:"".concat(In,"px")},Et.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:er||1,points:Qt.vertices.map(function(Jn){return"".concat(Jn.x-An[0],",").concat(An[3]-Jn.y)}).join(" ")})),_i.slot.children)})},Vr=function(Wt){var Qt=Wt.annotation,yn=Wt.page,bn=Wt.viewport,wn=Qt.hasPopup===!1,Cn=Fn(Qt),Nn=kn(Qt),Mn=!!(Qt.hasPopup||Cn||Nn),An=Qt.rect,In=An[2]-An[0],Ln=An[3]-An[1],er=Qt.borderStyle.width;return Et.createElement(Pr,{annotation:Qt,hasPopup:wn,ignoreBorder:!0,isRenderable:Mn,page:yn,viewport:bn},function(_i){return Et.createElement("div",xt({},_i.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":Qt.id,onClick:_i.popup.toggleOnClick,onMouseEnter:_i.popup.openOnHover,onMouseLeave:_i.popup.closeOnHover}),Et.createElement("svg",{height:"".concat(Ln,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(In," ").concat(Ln),width:"".concat(In,"px")},Et.createElement("rect",{height:Ln-er,fill:"none",stroke:"transparent",strokeWidth:er||1,x:er/2,y:er/2,width:In-er})),_i.slot.children)})},pr=function(Wt){var Qt=Wt.annotation,yn=Wt.page,bn=Wt.viewport,wn=Qt.hasPopup===!1,Cn=Fn(Qt),Nn=kn(Qt),Mn=!!(Qt.hasPopup||Cn||Nn);return Et.createElement(Pr,{annotation:Qt,hasPopup:wn,ignoreBorder:!0,isRenderable:Mn,page:yn,viewport:bn},function(An){return Et.createElement("div",xt({},An.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":Qt.id,onClick:An.popup.toggleOnClick,onMouseEnter:An.popup.openOnHover,onMouseLeave:An.popup.closeOnHover}),An.slot.children)})},Er=function(Wt){var Qt=Wt.annotation,yn=Wt.page,bn=Wt.viewport,wn=Qt.hasPopup===!1,Cn=Fn(Qt),Nn=kn(Qt),Mn=!!(Qt.hasPopup||Cn||Nn);return Et.createElement(Pr,{annotation:Qt,hasPopup:wn,ignoreBorder:!0,isRenderable:Mn,page:yn,viewport:bn},function(An){return Et.createElement("div",xt({},An.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":Qt.id,onClick:An.popup.toggleOnClick,onMouseEnter:An.popup.openOnHover,onMouseLeave:An.popup.closeOnHover}),An.slot.children)})},Dr=function(Wt){var Qt=Wt.annotation,yn=Wt.page,bn=Wt.viewport,wn=Qt.hasPopup===!1,Cn=Fn(Qt),Nn=kn(Qt),Mn=!!(Qt.hasPopup||Cn||Nn);return Et.createElement(Pr,{annotation:Qt,hasPopup:wn,ignoreBorder:!0,isRenderable:Mn,page:yn,viewport:bn},function(An){return Et.createElement("div",xt({},An.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":Qt.id,onClick:An.popup.toggleOnClick,onMouseEnter:An.popup.openOnHover,onMouseLeave:An.popup.closeOnHover}),An.slot.children)})},Wr=function(){return Et.createElement(Ot,{size:16},Et.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),Et.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),Et.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),Et.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},es=function(){return Et.createElement(Ot,{size:16},Et.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),Et.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),Et.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),Et.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),Et.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),Et.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),Et.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),Et.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),Et.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),Et.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},hs=function(){return Et.createElement(Ot,{size:16},Et.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),Et.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},Vs=function(){return Et.createElement(Ot,{size:16},Et.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),Et.createElement("path",{d:"M6 4.5L6 0.5"}),Et.createElement("path",{d:"M18 4.5L18 0.5"}),Et.createElement("path",{d:"M10 4.5L10 0.5"}),Et.createElement("path",{d:"M14 4.5L14 0.5"}))},ks=function(){return Et.createElement(Ot,{size:16},Et.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),Et.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),Et.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},Bo=function(){return Et.createElement(Ot,{size:16},Et.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},na=function(Wt){var Qt=Wt.annotation,yn=Wt.childAnnotation,bn=Wt.page,wn=Wt.viewport,Cn=Qt.hasPopup===!1,Nn=Fn(Qt),Mn=kn(Qt),An=!!(Qt.hasPopup||Nn||Mn),In=Qt.name?Qt.name.toLowerCase():"";return Et.createElement(Pr,{annotation:Qt,hasPopup:Cn,ignoreBorder:!1,isRenderable:An,page:bn,viewport:wn},function(Ln){return Et.createElement(Et.Fragment,null,Et.createElement("div",xt({},Ln.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":Qt.id,onClick:Ln.popup.toggleOnClick,onMouseEnter:Ln.popup.openOnHover,onMouseLeave:Ln.popup.closeOnHover}),In&&Et.createElement("div",{className:"rpv-core__annotation-text-icon"},In==="check"&&Et.createElement(Ft,null),In==="comment"&&Et.createElement(Wr,null),In==="help"&&Et.createElement(es,null),In==="insert"&&Et.createElement(Bo,null),In==="key"&&Et.createElement(hs,null),In==="note"&&Et.createElement(Vs,null),(In==="newparagraph"||In==="paragraph")&&Et.createElement(ks,null)),Ln.slot.children),yn&&yn.annotationType===_e.AnnotationType.Popup&&Ln.popup.opened&&Et.createElement(br,{annotation:yn,page:bn,viewport:wn}))})},ga=function(Wt){var Qt=Wt.annotation,yn=Wt.page,bn=Wt.viewport,wn=Qt.hasPopup===!1,Cn=Fn(Qt),Nn=kn(Qt),Mn=!!(Qt.hasPopup||Cn||Nn);return Et.createElement(Pr,{annotation:Qt,hasPopup:wn,ignoreBorder:!0,isRenderable:Mn,page:yn,viewport:bn},function(An){return Et.createElement("div",xt({},An.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":Qt.id,onClick:An.popup.toggleOnClick,onMouseEnter:An.popup.openOnHover,onMouseLeave:An.popup.closeOnHover}),An.slot.children)})},n0=function(Wt){var Qt=Wt.annotations,yn=Wt.doc,bn=Wt.outlines,wn=Wt.page,Cn=Wt.pageIndex,Nn=Wt.plugins,Mn=Wt.rotation,An=Wt.scale,In=Wt.onExecuteNamedAction,Ln=Wt.onJumpFromLinkAnnotation,er=Wt.onJumpToDest,_i=Et.useRef(),Jn=wn.getViewport({rotation:Mn,scale:An}).clone({dontFlip:!0}),cr=Qt.filter(function(ar){return!ar.parentId});return Mt(function(){var ar=_i.current;ar&&Nn.forEach(function(rr){rr.onAnnotationLayerRender&&rr.onAnnotationLayerRender({annotations:cr,container:ar,pageIndex:Cn,rotation:Mn,scale:An})})},[]),Et.createElement("div",{ref:_i,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(Cn)},cr.map(function(ar){var rr=Qt.find(function(Zr){return Zr.parentId===ar.id});switch(ar.annotationType){case _e.AnnotationType.Caret:return Et.createElement(vn,{key:ar.id,annotation:ar,page:wn,viewport:Jn});case _e.AnnotationType.Circle:return Et.createElement(Wn,{key:ar.id,annotation:ar,page:wn,viewport:Jn});case _e.AnnotationType.FileAttachment:return Et.createElement(sr,{key:ar.id,annotation:ar,page:wn,viewport:Jn});case _e.AnnotationType.FreeText:return Et.createElement(gr,{key:ar.id,annotation:ar,page:wn,viewport:Jn});case _e.AnnotationType.Highlight:return Et.createElement(ur,{key:ar.id,annotation:ar,childAnnotation:rr,page:wn,viewport:Jn});case _e.AnnotationType.Ink:return Et.createElement(pn,{key:ar.id,annotation:ar,page:wn,viewport:Jn});case _e.AnnotationType.Line:return Et.createElement(an,{key:ar.id,annotation:ar,page:wn,viewport:Jn});case _e.AnnotationType.Link:return Et.createElement(vr,{key:ar.id,annotation:ar,annotationContainerRef:_i,doc:yn,outlines:bn,page:wn,pageIndex:Cn,scale:An,viewport:Jn,onExecuteNamedAction:In,onJumpFromLinkAnnotation:Ln,onJumpToDest:er});case _e.AnnotationType.Polygon:return Et.createElement(fr,{key:ar.id,annotation:ar,page:wn,viewport:Jn});case _e.AnnotationType.Polyline:return Et.createElement(lr,{key:ar.id,annotation:ar,page:wn,viewport:Jn});case _e.AnnotationType.Popup:return Et.createElement(br,{key:ar.id,annotation:ar,page:wn,viewport:Jn});case _e.AnnotationType.Square:return Et.createElement(Vr,{key:ar.id,annotation:ar,page:wn,viewport:Jn});case _e.AnnotationType.Squiggly:return Et.createElement(pr,{key:ar.id,annotation:ar,page:wn,viewport:Jn});case _e.AnnotationType.Stamp:return Et.createElement(Er,{key:ar.id,annotation:ar,page:wn,viewport:Jn});case _e.AnnotationType.StrikeOut:return Et.createElement(Dr,{key:ar.id,annotation:ar,page:wn,viewport:Jn});case _e.AnnotationType.Text:return Et.createElement(na,{key:ar.id,annotation:ar,childAnnotation:rr,page:wn,viewport:Jn});case _e.AnnotationType.Underline:return Et.createElement(ga,{key:ar.id,annotation:ar,page:wn,viewport:Jn});default:return Et.createElement(Et.Fragment,{key:ar.id})}}))},xS=function(Wt){var Qt=Wt.page,yn=Wt.renderAnnotations,bn=ln(),wn=Et.useState({loading:!0,annotations:[]}),Cn=wn[0],Nn=wn[1];return Et.useEffect(function(){Qt.getAnnotations({intent:"display"}).then(function(Mn){bn.current&&Nn({loading:!1,annotations:Mn})})},[]),Cn.loading?Et.createElement(Et.Fragment,null):yn(Cn.annotations)},CS=function(Wt){var Qt=Wt.doc,yn=Wt.outlines,bn=Wt.page,wn=Wt.pageIndex,Cn=Wt.plugins,Nn=Wt.rotation,Mn=Wt.scale,An=Wt.onExecuteNamedAction,In=Wt.onJumpFromLinkAnnotation,Ln=Wt.onJumpToDest;return Et.createElement(xS,{page:bn,renderAnnotations:function(er){return Et.createElement(n0,{annotations:er,doc:Qt,outlines:yn,page:bn,pageIndex:wn,plugins:Cn,rotation:Nn,scale:Mn,onExecuteNamedAction:An,onJumpFromLinkAnnotation:In,onJumpToDest:Ln})}})},i0=function(Wt,Qt){var yn=Wt%Qt;return yn===0?Wt:Math.floor(Wt-yn)},TS=function(Wt){var Qt=Wt.canvasLayerRef,yn=Wt.height,bn=Wt.page,wn=Wt.pageIndex,Cn=Wt.plugins,Nn=Wt.rotation,Mn=Wt.scale,An=Wt.width,In=Wt.onRenderCanvasCompleted,Ln=Et.useRef();return Mt(function(){var er=Ln.current;er&&er.cancel();var _i=Qt.current;_i.removeAttribute("data-testid"),Cn.forEach(function(Nr){Nr.onCanvasLayerRender&&Nr.onCanvasLayerRender({ele:_i,pageIndex:wn,rotation:Nn,scale:Mn,status:_e.LayerRenderStatus.PreRender})});var Jn=bn.getViewport({rotation:Nn,scale:Mn}),cr=window.devicePixelRatio||1,ar=Math.sqrt(16777216/(Jn.width*Jn.height)),rr=cr>ar;rr?_i.style.transform="scale(1, 1)":_i.style.removeProperty("transform");var Zr=Math.min(ar,cr),Lr=function(Nr,as){var rs,ls;if(Math.floor(Nr)===Nr)return[Nr,1];var us=1/Nr;if(us>as)return[1,as];if(Math.floor(us)===us)return[1,us];for(var fs=Nr>1?us:Nr,Os=0,xs=1,Ns=1,Ms=1;;){var Ls=Os+Ns,Ds=xs+Ms;if(Ds>as)break;fs<=Ls/Ds?(Ns=(rs=[Ls,Ds])[0],Ms=rs[1]):(Os=(ls=[Ls,Ds])[0],xs=ls[1])}return fs<(Os/xs+Ns/Ms)/2?fs===Nr?[Os,xs]:[xs,Os]:fs===Nr?[Ns,Ms]:[Ms,Ns]}(Zr,8),Ir=Lr[0],Hr=Lr[1];_i.width=i0(Jn.width*Zr,Ir),_i.height=i0(Jn.height*Zr,Ir),_i.style.width="".concat(i0(Jn.width,Hr),"px"),_i.style.height="".concat(i0(Jn.height,Hr),"px"),_i.hidden=!0;var xr=_i.getContext("2d",{alpha:!1}),Ur=rr||cr!==1?[Zr,0,0,Zr,0,0]:null;return Ln.current=bn.render({canvasContext:xr,transform:Ur,viewport:Jn}),Ln.current.promise.then(function(){_i.hidden=!1,_i.setAttribute("data-testid","core__canvas-layer-".concat(wn)),Cn.forEach(function(Nr){Nr.onCanvasLayerRender&&Nr.onCanvasLayerRender({ele:_i,pageIndex:wn,rotation:Nn,scale:Mn,status:_e.LayerRenderStatus.DidRender})}),In()},function(){In()}),function(){_i&&(_i.width=0,_i.height=0)}},[]),Et.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(yn,"px"),width:"".concat(An,"px")}},Et.createElement("canvas",{ref:Qt}))},PS=function(Wt){var Qt=Wt.height,yn=Wt.page,bn=Wt.rotation,wn=Wt.scale,Cn=Wt.width,Nn=Et.useRef();return Mt(function(){var Mn=Nn.current,An=yn.getViewport({rotation:bn,scale:wn});yn.getOperatorList().then(function(In){(function(){var Ln=Nn.current;Ln&&(Ln.innerHTML="")})(),new At.SVGGraphics(yn.commonObjs,yn.objs).getSVG(In,An).then(function(Ln){Ln.style.height="".concat(Qt,"px"),Ln.style.width="".concat(Cn,"px"),Mn.appendChild(Ln)})})},[]),Et.createElement("div",{className:"rpv-core__svg-layer",ref:Nn})},RS=function(Wt){var Qt=Wt.containerRef,yn=Wt.page,bn=Wt.pageIndex,wn=Wt.plugins,Cn=Wt.rotation,Nn=Wt.scale,Mn=Wt.onRenderTextCompleted,An=Et.useRef(),In=function(){var Ln=Qt.current;Ln&&([].slice.call(Ln.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(er){return Ln.removeChild(er)}),[].slice.call(Ln.querySelectorAll('br[role="presentation"]')).forEach(function(er){return Ln.removeChild(er)}))};return Mt(function(){var Ln=An.current;Ln&&Ln.cancel();var er=Qt.current;if(er){er.removeAttribute("data-testid");var _i=yn.getViewport({rotation:Cn,scale:Nn});return wn.forEach(function(Jn){Jn.onTextLayerRender&&Jn.onTextLayerRender({ele:er,pageIndex:bn,scale:Nn,status:_e.LayerRenderStatus.PreRender})}),yn.getTextContent().then(function(Jn){In(),An.current=At.renderTextLayer({container:er,textContent:Jn,textContentSource:Jn,viewport:_i}),An.current.promise.then(function(){er.setAttribute("data-testid","core__text-layer-".concat(bn)),[].slice.call(er.children).forEach(function(cr){cr.classList.contains("rpv-core__text-layer-text--not")||cr.classList.add("rpv-core__text-layer-text")}),wn.forEach(function(cr){cr.onTextLayerRender&&cr.onTextLayerRender({ele:er,pageIndex:bn,scale:Nn,status:_e.LayerRenderStatus.DidRender})}),Mn()},function(){er.removeAttribute("data-testid"),Mn()})}),function(){var Jn;In(),(Jn=An.current)===null||Jn===void 0||Jn.cancel()}}},[]),Et.createElement("div",{className:"rpv-core__text-layer",ref:Qt})},kS=function(Wt){var Qt=Wt.doc,yn=Wt.measureRef,bn=Wt.outlines,wn=Wt.pageIndex,Cn=Wt.pageRotation,Nn=Wt.pageSize,Mn=Wt.plugins,An=Wt.renderPage,In=Wt.renderQueueKey,Ln=Wt.rotation,er=Wt.scale,_i=Wt.shouldRender,Jn=Wt.viewMode,cr=Wt.onExecuteNamedAction,ar=Wt.onJumpFromLinkAnnotation,rr=Wt.onJumpToDest,Zr=Wt.onRenderCompleted,Lr=Wt.onRotatePage,Ir=ln(),Hr=Et.useState(null),xr=Hr[0],Ur=Hr[1],Nr=Et.useState(!1),as=Nr[0],rs=Nr[1],ls=Et.useState(!1),us=ls[0],fs=ls[1],Os=Et.useRef(),xs=Et.useRef(),Ns=Math.abs(Ln+Cn)%180==0,Ms=Nn.pageWidth*er,Ls=Nn.pageHeight*er,Ds=Ns?Ms:Ls,Fs=Ns?Ls:Ms,Js=(Nn.rotation+Ln+Cn)%360,ba=Et.useRef(0),Vo=An||function(zs){return Et.createElement(Et.Fragment,null,zs.canvasLayer.children,zs.textLayer.children,zs.annotationLayer.children)};return Et.useEffect(function(){Ur(null),rs(!1),fs(!1)},[Cn,Ln,er]),Et.useEffect(function(){_i&&Ir.current&&!xr&&hr(Qt,wn).then(function(zs){Ir.current&&(ba.current=In,Ur(zs))})},[_i,xr]),Et.useEffect(function(){as&&us&&(In!==ba.current?(Ur(null),rs(!1),fs(!1)):Zr(wn))},[as,us]),Et.createElement("div",{className:kt({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":Jn===_e.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":Jn===_e.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":Jn===_e.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(wn),ref:yn,style:{height:"".concat(Fs,"px"),width:"".concat(Ds,"px")}},xr?Et.createElement(Et.Fragment,null,Vo({annotationLayer:{attrs:{},children:Et.createElement(CS,{doc:Qt,outlines:bn,page:xr,pageIndex:wn,plugins:Mn,rotation:Js,scale:er,onExecuteNamedAction:cr,onJumpFromLinkAnnotation:ar,onJumpToDest:rr})},canvasLayer:{attrs:{},children:Et.createElement(TS,{canvasLayerRef:Os,height:Fs,page:xr,pageIndex:wn,plugins:Mn,rotation:Js,scale:er,width:Ds,onRenderCanvasCompleted:function(){Ir.current&&rs(!0)}})},canvasLayerRendered:as,doc:Qt,height:Fs,pageIndex:wn,rotation:Js,scale:er,svgLayer:{attrs:{},children:Et.createElement(PS,{height:Fs,page:xr,rotation:Js,scale:er,width:Ds})},textLayer:{attrs:{},children:Et.createElement(RS,{containerRef:xs,page:xr,pageIndex:wn,plugins:Mn,rotation:Js,scale:er,onRenderTextCompleted:function(){Ir.current&&fs(!0)}})},textLayerRendered:us,width:Ds,markRendered:Zr,onRotatePage:function(zs){return Lr(wn,zs)}}),Mn.map(function(zs,yo){return zs.renderPageLayer?Et.createElement(Et.Fragment,{key:yo},zs.renderPageLayer({canvasLayerRef:Os,canvasLayerRendered:as,doc:Qt,height:Fs,pageIndex:wn,rotation:Js,scale:er,textLayerRef:xs,textLayerRendered:us,width:Ds})):Et.createElement(Et.Fragment,{key:yo})})):Et.createElement($t,{testId:"core__page-layer-loading-".concat(wn)}))},MS=function(Wt,Qt){var yn=Qt.rect;return Wt.height!==yn.height||Wt.width!==yn.width?yn:Wt};(function(Wt){Wt.Horizontal="Horizontal",Wt.Vertical="Vertical",Wt.Both="Both"})(mr||(mr={}));var FS=function(Wt){return 1-Math.pow(1-Wt,4)},r0=1e-4,s_={left:0,top:0},o_={capture:!1,passive:!0},LS=function(Wt){var Qt=Wt.elementRef,yn=Wt.enableSmoothScroll,bn=Wt.isRtl,wn=Wt.scrollDirection,Cn=Wt.onSmoothScroll,Nn=Et.useState(s_),Mn=Nn[0],An=Nn[1],In=Et.useState(Qt.current),Ln=In[0],er=In[1],_i=bn?-1:1,Jn=Et.useRef(wn);Jn.current=wn;var cr=Et.useRef(s_),ar=Et.useRef(!0),rr=Et.useCallback(function(){ar.current=!0,yn&&An(cr.current),Cn(!1)},[]),Zr=Et.useCallback(function(){if(Ln){switch(Jn.current){case mr.Horizontal:cr.current={left:_i*Ln.scrollLeft,top:0};break;case mr.Both:cr.current={left:_i*Ln.scrollLeft,top:Ln.scrollTop};break;case mr.Vertical:default:cr.current={left:0,top:Ln.scrollTop}}yn&&!ar.current||An(cr.current)}},[Ln]);Mt(function(){er(Qt.current)}),Mt(function(){if(Ln)return Ln.addEventListener("scroll",Zr,o_),function(){Ln.removeEventListener("scroll",Zr,o_)}},[Ln]);var Lr=Et.useCallback(function(Ir,Hr){var xr=Qt.current;if(!xr)return Promise.resolve();var Ur={left:0,top:0};switch(Jn.current){case mr.Horizontal:Ur.left=_i*Ir.left;break;case mr.Both:Ur.left=_i*Ir.left,Ur.top=Ir.top;break;case mr.Vertical:default:Ur.top=Ir.top}return Hr?(ar.current=!1,Cn(!0),new Promise(function(Nr,as){(function(rs,ls,us,fs,Os,xs){Os===void 0&&(Os=function(yo){return yo}),xs===void 0&&(xs=function(){});var Ns=0,Ms=0,Ls=!1;switch(ls){case mr.Horizontal:Ms=rs.scrollLeft,Ns=0;case mr.Both:Ms=rs.scrollLeft,Ns=rs.scrollTop;break;case mr.Vertical:default:Ms=0,Ns=rs.scrollTop}var Ds=function(){Ls||(Ls=!0,rs.scrollLeft=us.left,rs.scrollTop=us.top,xs())};if(Math.abs(Ns-us.top)<=r0&&ls===mr.Vertical)Ds();else if(Math.abs(Ms-us.left)<=r0&&ls===mr.Horizontal)Ds();else{var Fs,Js=-1,ba=Ms-us.left,Vo=Ns-us.top,zs=function(yo){Js===-1&&(Js=yo);var Il=yo-Js,Br=Math.min(Il/fs,1),Or=Os(Br),Cr={left:Ms-ba*Or,top:Ns-Vo*Or};switch(ls){case mr.Horizontal:rs.scrollLeft=Cr.left;break;case mr.Both:rs.scrollLeft=Cr.left,rs.scrollTop=Cr.top;break;case mr.Vertical:default:rs.scrollTop=Cr.top}Math.abs(Cr.top-us.top)<=r0&&Math.abs(Cr.left-us.left)<=r0&&!Ls&&(window.cancelAnimationFrame(Fs),Ds()),Il<fs?Fs=window.requestAnimationFrame(zs):window.cancelAnimationFrame(Fs)};Fs=window.requestAnimationFrame(zs)}})(xr,Jn.current,Ur,400,FS,function(){rr(),Nr()})})):new Promise(function(Nr,as){switch(Jn.current){case mr.Horizontal:xr.scrollLeft=Ur.left;break;case mr.Both:xr.scrollLeft=Ur.left,xr.scrollTop=Ur.top;break;case mr.Vertical:default:xr.scrollTop=Ur.top}Nr()})},[Qt]);return{scrollOffset:Mn,scrollTo:Lr}},ev=function(Wt,Qt,yn){return Math.max(Wt,Math.min(yn,Qt))},DS=function(Wt,Qt){if(Qt!==_e.ViewMode.DualPageWithCover)return 0;if(!function(wn){var Cn=wn.length;if(Cn===1)return!1;for(var Nn=1;Nn<Cn;Nn++)if(wn[Nn].height!==wn[0].height||wn[Nn].width!==wn[0].width)return!0;return!1}(Wt))return 2*Wt[0].width;var yn=Pn(Wt.slice(1),2).map(function(wn){return wn.length===2?wn[0].width+wn[1].width:wn[0].width}),bn=[Wt[0].width].concat(yn);return Math.max.apply(Math,bn)},IS={left:0,top:0},OS={left:0,top:0},hE={left:0,top:0},$S={left:0,top:0},NS={height:0,width:0},a_={left:0,top:0},l_="data-virtual-index",BS=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],VS=function(Wt){var Qt=Wt.enableSmoothScroll,yn=Wt.isRtl,bn=Wt.numberOfItems,wn=Wt.parentRef,Cn=Wt.setRenderRange,Nn=Wt.sizes,Mn=Wt.scrollMode,An=Wt.viewMode,In=Et.useState(!1),Ln=In[0],er=In[1],_i=Et.useCallback(function(Br){return er(Br)},[]),Jn=Et.useRef(Mn);Jn.current=Mn;var cr=Et.useRef(An);cr.current=An;var ar=Mn===_e.ScrollMode.Wrapped||An===_e.ViewMode.DualPageWithCover||An===_e.ViewMode.DualPage?mr.Both:Mn===_e.ScrollMode.Horizontal?mr.Horizontal:mr.Vertical,rr=LS({elementRef:wn,enableSmoothScroll:Qt,isRtl:yn,scrollDirection:ar,onSmoothScroll:_i}),Zr=rr.scrollOffset,Lr=rr.scrollTo,Ir=function(Br){var Or=Br.elementRef,Cr=Et.useState(Or.current),kr=Cr[0],Tr=Cr[1],zr=Et.useRef(!1),Gr=Et.useReducer(MS,{height:0,width:0}),Mr=Gr[0],yr=Gr[1];return Mt(function(){Or.current!==kr&&Tr(Or.current)}),Mt(function(){if(kr&&!zr.current){zr.current=!0;var Yr=kr.getBoundingClientRect(),Jr=Yr.height,As=Yr.width;yr({rect:{height:Jr,width:As}})}},[kr]),Et.useEffect(function(){if(kr){var Yr=new ResizeObserver(function(Jr,As){Jr.forEach(function(ys){if(ys.target===kr){var qs=ys.contentRect,_o=qs.height,Qr=qs.width;yr({rect:{height:_o,width:Qr}})}})});return Yr.observe(kr),function(){Yr.unobserve(kr)}}},[kr]),Mr}({elementRef:wn}),Hr=Et.useRef({scrollOffset:a_,measurements:[]});Hr.current.scrollOffset=Zr;var xr=Et.useMemo(function(){return Array(bn).fill(-1)},[]),Ur=Et.useState(xr),Nr=Ur[0],as=Ur[1],rs=Et.useMemo(function(){var Br=new IntersectionObserver(function(Or){Or.forEach(function(Cr){var kr=Cr.isIntersecting?Cr.intersectionRatio:-1,Tr=Cr.target.getAttribute(l_);if(Tr){var zr=parseInt(Tr,10);0<=zr&&zr<bn&&as(function(Gr){return Gr[zr]=kr,function(Mr,yr,Yr){for(var Jr,As=0,ys=yr.length;As<ys;As++)!Jr&&As in yr||(Jr||(Jr=Array.prototype.slice.call(yr,0,As)),Jr[As]=yr[As]);return Mr.concat(Jr||Array.prototype.slice.call(yr))}([],Gr)})}})},{threshold:BS});return Br},[]),ls=Et.useMemo(function(){return Mn===_e.ScrollMode.Page&&An===_e.ViewMode.SinglePage?function(Br,Or,Cr){for(var kr=[],Tr=0;Tr<Br;Tr++){var zr={height:Math.max(Or.height,Cr[Tr].height),width:Math.max(Or.width,Cr[Tr].width)},Gr=Tr===0?$S:kr[Tr-1].end,Mr={left:Gr.left+zr.width,top:Gr.top+zr.height};kr[Tr]={index:Tr,start:Gr,size:zr,end:Mr,visibility:-1}}return kr}(bn,Ir,Nn):An===_e.ViewMode.DualPageWithCover?function(Br,Or,Cr,kr){for(var Tr=[],zr=0,Gr=0,Mr=hE,yr=0;yr<Br;yr++){var Yr=yr===0?{height:kr===_e.ScrollMode.Page?Math.max(Or.height,Cr[yr].height):Cr[yr].height,width:kr===_e.ScrollMode.Page?Math.max(Or.width,Cr[yr].width):Cr[yr].width}:{height:kr===_e.ScrollMode.Page?Math.max(Or.height,Cr[yr].height):Cr[yr].height,width:Math.max(Or.width/2,Cr[yr].width)};kr===_e.ScrollMode.Page?Mr=yr===0?hE:{left:yr%2==0?Yr.width:0,top:Math.floor((yr-1)/2)*Yr.height+Tr[0].end.top}:yr===0?(Mr=hE,zr=Cr[0].height,Gr=0):yr%2==1?(Mr={left:0,top:zr+=Gr},Gr=yr===Br-1?Cr[yr].height:Math.max(Cr[yr].height,Cr[yr+1].height)):Mr={left:Tr[yr-1].end.left,top:zr};var Jr={left:Mr.left+Yr.width,top:Mr.top+Yr.height};Tr[yr]={index:yr,start:Mr,size:Yr,end:Jr,visibility:-1}}return Tr}(bn,Ir,Nn,Mn):An===_e.ViewMode.DualPage?function(Br,Or,Cr,kr){for(var Tr=[],zr=0,Gr=0,Mr=OS,yr=0;yr<Br;yr++){var Yr={height:kr===_e.ScrollMode.Page?Math.max(Or.height,Cr[yr].height):Cr[yr].height,width:Math.max(Or.width/2,Cr[yr].width)};kr===_e.ScrollMode.Page?Mr={left:yr%2==0?0:Yr.width,top:Math.floor(yr/2)*Yr.height}:yr%2==0?(Mr={left:0,top:zr+=Gr},Gr=yr===Br-1?Cr[yr].height:Math.max(Cr[yr].height,Cr[yr+1].height)):Mr={left:Tr[yr-1].end.left,top:zr};var Jr={left:Mr.left+Yr.width,top:Mr.top+Yr.height};Tr[yr]={index:yr,start:Mr,size:Yr,end:Jr,visibility:-1}}return Tr}(bn,Ir,Nn,Mn):function(Br,Or,Cr,kr){for(var Tr=[],zr=0,Gr={left:0,top:0},Mr=0,yr=IS,Yr=0;Yr<Br;Yr++){var Jr=Cr[Yr];if(Yr===0)zr=Jr.width,Gr={left:0,top:0},Mr=Jr.height;else switch(kr){case _e.ScrollMode.Wrapped:(zr+=Jr.width)<Or.width?(yr={left:Tr[Yr-1].end.left,top:Gr.top},Mr=Math.max(Mr,Jr.height)):(zr=Jr.width,Gr={left:(yr={left:Gr.left,top:Gr.top+Mr}).left,top:yr.top},Mr=Jr.height);break;case _e.ScrollMode.Horizontal:case _e.ScrollMode.Vertical:default:yr=Tr[Yr-1].end}var As={left:yr.left+Jr.width,top:yr.top+Jr.height};Tr[Yr]={index:Yr,start:yr,size:Jr,end:As,visibility:-1}}return Tr}(bn,Ir,Nn,Mn)},[Mn,Nn,An,Ir]),us=ls[bn-1]?{height:ls[bn-1].end.top,width:ls[bn-1].end.left}:NS;Hr.current.measurements=ls;var fs=Et.useMemo(function(){var Br=function(Yr,Jr,As,ys){var qs=0;switch(Yr){case mr.Horizontal:qs=ys.left;break;case mr.Vertical:default:qs=ys.top}var _o=Jr.length-1,Qr=function(gs,mu,Xp,o0){for(;gs<=mu;){var Wu=(gs+mu)/2|0,tv=o0(Wu);if(tv<Xp)gs=Wu+1;else{if(!(tv>Xp))return Wu;mu=Wu-1}}return gs>0?gs-1:0}(0,_o,qs,function(gs){switch(Yr){case mr.Horizontal:return Jr[gs].start.left;case mr.Both:case mr.Vertical:default:return Jr[gs].start.top}});if(Yr===mr.Both)for(var Ys=Jr[Qr].start.top;Qr-1>=0&&Jr[Qr-1].start.top===Ys&&Jr[Qr-1].start.left>=ys.left;)Qr--;for(var _s=Qr;_s<=_o;){var Cs={top:Jr[_s].start.top-ys.top,left:Jr[_s].start.left-ys.left},Hs={height:As.height-Cs.top,width:As.width-Cs.left};if(Yr===mr.Horizontal&&Hs.width<0||Yr===mr.Vertical&&Hs.height<0||Yr===mr.Both&&(Hs.width<0||Hs.height<0))break;_s++}return{start:Qr,end:_s}}(ar,ls,Ir,Zr),Or=Br.start,Cr=Br.end,kr=Nr.slice(ev(0,bn,Or),ev(0,bn,Cr)),Tr=Or+kr.reduce(function(Yr,Jr,As,ys){return Jr>ys[Yr]?As:Yr},0),zr=Tr=ev(0,bn-1,Tr),Gr=Cn({endPage:Cr,numPages:bn,startPage:Or}),Mr=Gr.startPage,yr=Gr.endPage;switch(Mr=Math.max(Mr,0),yr=Math.min(yr,bn-1),An){case _e.ViewMode.DualPageWithCover:Tr>0&&(zr=Tr%2==1?Tr:Tr-1),Mr=Mr===0?0:Mr%2==1?Mr:Mr-1,bn-(yr=yr%2==1?yr-1:yr)<=2&&(yr=bn-1);break;case _e.ViewMode.DualPage:zr=Tr%2==0?Tr:Tr-1,Mr=Mr%2==0?Mr:Mr-1,yr=yr%2==1?yr:yr-1;break;case _e.ViewMode.SinglePage:default:zr=Tr}return{startPage:Mr,endPage:yr,maxVisbilityIndex:zr}},[ls,Ir,Zr,An,Nr]),Os=fs.startPage,xs=fs.endPage,Ns=fs.maxVisbilityIndex,Ms=Et.useMemo(function(){for(var Br=[],Or=function(kr){var Tr=ls[kr],zr=xt(xt({},Tr),{visibility:Nr[kr]!==void 0?Nr[kr]:-1,measureRef:function(Gr){Gr&&(Gr.setAttribute(l_,"".concat(kr)),rs.observe(Gr))}});Br.push(zr)},Cr=Os;Cr<=xs;Cr++)Or(Cr);return Br},[Os,xs,Nr,ls]),Ls=Et.useCallback(function(Br,Or){var Cr=Hr.current.measurements[ev(0,bn-1,Br)],kr=Jn.current===_e.ScrollMode.Page?a_:Or;return Cr?Lr({left:kr.left+Cr.start.left,top:kr.top+Cr.start.top},Qt):Promise.resolve()},[Lr,Qt]),Ds=Et.useCallback(function(Br,Or){var Cr=Hr.current.measurements,kr=Cr[Br].start,Tr=Cr.find(function(Gr){return Gr.start.top-kr.top>1e-12});if(!Tr)return Promise.resolve();var zr=Tr.index;switch(cr.current){case _e.ViewMode.DualPage:zr=zr%2==0?zr:zr+1;break;case _e.ViewMode.DualPageWithCover:zr=zr%2==1?zr:zr+1}return Ls(zr,Or)},[]),Fs=Et.useCallback(function(Br,Or){for(var Cr=Hr.current.measurements,kr=Cr[Br].start,Tr=Br,zr=!1,Gr=bn-1;Gr>=0;Gr--)if(kr.top-Cr[Gr].start.top>1e-12){zr=!0,Tr=Cr[Gr].index;break}if(!zr)return Promise.resolve();switch(cr.current){case _e.ViewMode.DualPage:Tr=Tr%2==0?Tr:Tr-1;break;case _e.ViewMode.DualPageWithCover:Tr=Tr%2==0?Tr-1:Tr}return Tr===Br&&(Tr=Br-1),Ls(Tr,Or)},[]),Js=Et.useCallback(function(Br,Or){if(cr.current===_e.ViewMode.DualPageWithCover||cr.current===_e.ViewMode.DualPage)return Ds(Br,Or);switch(Jn.current){case _e.ScrollMode.Wrapped:return Ds(Br,Or);case _e.ScrollMode.Horizontal:case _e.ScrollMode.Vertical:default:return Ls(Br+1,Or)}},[]),ba=Et.useCallback(function(Br,Or){if(cr.current===_e.ViewMode.DualPageWithCover||cr.current===_e.ViewMode.DualPage)return Fs(Br,Or);switch(Jn.current){case _e.ScrollMode.Wrapped:return Fs(Br,Or);case _e.ScrollMode.Horizontal:case _e.ScrollMode.Vertical:default:return Ls(Br-1,Or)}},[]),Vo=Et.useCallback(function(){return function(Br,Or){switch(Or){case _e.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(Br.width,"px")};case _e.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(Br.height,"px"),width:"100%"}}}(us,Jn.current)},[us]),zs=Et.useCallback(function(Br){return function(Or,Cr,kr){return kr!==_e.ScrollMode.Page?{}:{height:"".concat(Cr.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(Or.start.top,"px)")}}(Br,Ir,Jn.current)},[Ir]),yo=Et.useCallback(function(Br){return function(Or,Cr,kr,Tr,zr){var Gr,Mr,yr,Yr,Jr,As,ys,qs=Cr?"right":"left",_o=Cr?-1:1,Qr=kr.length,Ys=Or.start.left*_o,_s=Or.size,Cs=_s.height,Hs=_s.width;if(Tr===_e.ViewMode.DualPageWithCover){var gs=zr===_e.ScrollMode.Page?0:Or.start.top;return Or.index===0||Qr%2==0&&Or.index===Qr-1?((Gr={height:"".concat(Cs,"px"),minWidth:"".concat(DS(kr,Tr),"px"),width:"100%"})[qs]=0,Gr.position="absolute",Gr.top=0,Gr.transform="translate(".concat(Ys,"px, ").concat(gs,"px)"),Gr):((Mr={height:"".concat(Cs,"px"),width:"".concat(Hs,"px")})[qs]=0,Mr.position="absolute",Mr.top=0,Mr.transform="translate(".concat(Ys,"px, ").concat(gs,"px)"),Mr)}if(Tr===_e.ViewMode.DualPage)return(yr={height:"".concat(Cs,"px"),width:"".concat(Hs,"px")})[qs]=0,yr.position="absolute",yr.top=0,yr.transform="translate(".concat(Ys,"px, ").concat(zr===_e.ScrollMode.Page?0:Or.start.top,"px)"),yr;switch(zr){case _e.ScrollMode.Horizontal:return(Yr={height:"100%",width:"".concat(Hs,"px")})[qs]=0,Yr.position="absolute",Yr.top=0,Yr.transform="translateX(".concat(Ys,"px)"),Yr;case _e.ScrollMode.Page:return(Jr={height:"".concat(Cs,"px"),width:"".concat(Hs,"px")})[qs]=0,Jr.position="absolute",Jr.top=0,Jr;case _e.ScrollMode.Wrapped:return(As={height:"".concat(Cs,"px"),width:"".concat(Hs,"px")})[qs]=0,As.position="absolute",As.top=0,As.transform="translate(".concat(Ys,"px, ").concat(Or.start.top,"px)"),As;case _e.ScrollMode.Vertical:default:return(ys={height:"".concat(Cs,"px"),width:"100%"})[qs]=0,ys.position="absolute",ys.top=0,ys.transform="translateY(".concat(Or.start.top,"px)"),ys}}(Br,yn,Nn,cr.current,Jn.current)},[yn,Nn]),Il=Et.useCallback(function(Br,Or){var Cr=Hr.current,kr=Cr.measurements,Tr=Cr.scrollOffset,zr=kr[ev(0,bn-1,Or)];if(zr){var Gr=Jn.current===_e.ScrollMode.Page?{left:zr.start.left,top:zr.start.top}:{left:Tr.left*Br,top:Tr.top*Br};return Lr(Gr,!1)}return Promise.resolve()},[]);return Et.useEffect(function(){return function(){rs.disconnect()}},[]),{boundingClientRect:Ir,isSmoothScrolling:Ln,startPage:Os,endPage:xs,maxVisbilityIndex:Ns,virtualItems:Ms,getContainerStyles:Vo,getItemContainerStyles:zs,getItemStyles:yo,scrollToItem:Ls,scrollToNextItem:Js,scrollToPreviousItem:ba,zoom:Il}},fE=function(Wt,Qt,yn,bn,wn,Cn){var Nn=yn;switch(!0){case(wn===_e.ViewMode.DualPageWithCover&&Cn>=3):case(wn===_e.ViewMode.DualPage&&Cn>=3):Nn=2*yn;break;default:Nn=yn}switch(bn){case _e.SpecialZoomLevel.ActualSize:return 1;case _e.SpecialZoomLevel.PageFit:return Math.min((Wt.clientWidth-17)/Nn,(Wt.clientHeight-16)/Qt);case _e.SpecialZoomLevel.PageWidth:return(Wt.clientWidth-17)/Nn}},HS=function(Wt){var Qt,yn,bn=Wt.getCurrentPage,wn=(Qt=50,yn=Et.useRef([]),Et.useEffect(function(){return function(){yn.current=[]}},[]),{push:function(In){var Ln=yn.current;Ln.length+1>Qt&&Ln.shift(),Ln.push(In),yn.current=Ln},map:function(In){return yn.current.map(function(Ln){return In(Ln)})},pop:function(){var In=yn.current;if(In.length===0)return null;var Ln=In.pop();return yn.current=In,Ln}}),Cn=function(In){var Ln=Et.useRef([]);return Et.useEffect(function(){return function(){Ln.current=[]}},[]),{dequeue:function(){var er=Ln.current;if(er.length===0)return null;var _i=er.shift();return Ln.current=er,_i||null},enqueue:function(er){var _i=Ln.current;_i.length+1>In&&_i.pop(),Ln.current=[er].concat(_i)},map:function(er){return Ln.current.map(function(_i){return er(_i)})}}}(50),Nn=function(){var In=Cn.dequeue();return In&&wn.push(In),In&&In.pageIndex===bn()?Nn():In},Mn=function(){var In=wn.pop();return In&&Cn.enqueue(In),In&&In.pageIndex===bn()?Mn():In},An=Et.useCallback(function(In){wn.push(In)},[]);return{getNextDestination:Nn,getPreviousDestination:Mn,markVisitedDestination:An}},c_=function(Wt){var Qt=[];return Wt.map(function(yn){Qt=Qt.concat(yn).concat(function(bn){var wn=[];return bn.items&&bn.items.length>0&&(wn=wn.concat(c_(bn.items))),wn}(yn))}),Qt},u_={capture:!1,passive:!0},jS={height:0,width:0},pE={height:0,width:0},US=function(Wt){var Qt=Wt.getCurrentPage,yn=Wt.getCurrentScrollMode,bn=Wt.jumpToPage,wn=Wt.targetRef,Cn=Et.useState(_e.FullScreenMode.Normal),Nn=Cn[0],Mn=Cn[1],An=function(){var Nr=Et.useState(jS),as=Nr[0],rs=Nr[1],ls=_n(function(){rs({height:window.innerHeight,width:window.innerWidth})},100);return Mt(function(){return window.addEventListener("resize",ls,u_),function(){window.removeEventListener("resize",ls,u_)}},[]),as}(),In=Et.useState(pE),Ln=In[0],er=In[1],_i=Et.useRef(pE),Jn=Et.useRef(Qt()),cr=Et.useRef(pE),ar=Et.useState(wn.current),rr=ar[0],Zr=ar[1],Lr=Et.useRef();Mt(function(){wn.current!==rr&&Zr(wn.current)},[]),Mt(function(){if(rr){var Nr=new ResizeObserver(function(as){as.forEach(function(rs){var ls=rs.target.getBoundingClientRect(),us=ls.height,fs=ls.width;er({height:us,width:fs})})});return Nr.observe(rr),function(){Nr.unobserve(rr),Nr.disconnect()}}},[rr]);var Ir=Et.useCallback(function(Nr){var as=on();return as&&as!==Nr?(Mn(_e.FullScreenMode.Normal),en(as)):Promise.resolve()},[]),Hr=Et.useCallback(function(Nr){Nr&&Gt()&&(Zr(Nr),Ir(Nr).then(function(){Lr.current=Nr,Mn(_e.FullScreenMode.Entering),function(as){Xt&&as[Jt.RequestFullScreen]()}(Nr)}))},[]),xr=Et.useCallback(function(){on()&&(Mn(_e.FullScreenMode.Exitting),en(document))},[]),Ur=Et.useCallback(function(){rr&&on()!==rr&&Mn(_e.FullScreenMode.Exitting)},[rr]);return Et.useEffect(function(){switch(Nn){case _e.FullScreenMode.Entering:Lr.current&&(Lr.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),Jn.current=Qt(),_i.current={height:window.innerHeight,width:window.innerWidth};break;case _e.FullScreenMode.Entered:yn()===_e.ScrollMode.Page?bn(Jn.current).then(function(){Mn(_e.FullScreenMode.EnteredCompletely)}):Mn(_e.FullScreenMode.EnteredCompletely);break;case _e.FullScreenMode.Exitting:Lr.current&&(Lr.current.style.backgroundColor="",Lr.current=null),Jn.current=Qt();break;case _e.FullScreenMode.Exited:Mn(_e.FullScreenMode.Normal),yn()===_e.ScrollMode.Page&&bn(Jn.current)}},[Nn]),Et.useEffect(function(){if(Nn!==_e.FullScreenMode.Normal)return Nn===_e.FullScreenMode.Entering&&An.height===Ln.height&&An.width===Ln.width&&An.height>0&&An.width>0&&(cr.current.height===0||An.height==cr.current.height)?(cr.current={height:window.innerHeight,width:window.innerWidth},void Mn(_e.FullScreenMode.Entered)):void(Nn===_e.FullScreenMode.Exitting&&_i.current.height===An.height&&_i.current.width===An.width&&An.height>0&&An.width>0&&Mn(_e.FullScreenMode.Exited))},[Nn,An,Ln]),Et.useEffect(function(){var Nr;return Nr=Ur,Xt&&document.addEventListener(Jt.FullScreenChange,Nr),function(){(function(as){Xt&&document.removeEventListener(Jt.FullScreenChange,as)})(Ur)}},[rr]),{enterFullScreenMode:Hr,exitFullScreenMode:xr,fullScreenMode:Nn}},zS={buildPageStyles:function(){return{}},transformSize:function(Wt){return Wt.size}},Kp={left:0,top:0},WS=function(Wt){var Qt=Wt.currentFile,yn=Wt.defaultScale,bn=Wt.doc,wn=Wt.enableSmoothScroll,Cn=Wt.initialPage,Nn=Wt.initialRotation,Mn=Wt.initialScale,An=Wt.pageLayout,In=Wt.pageSizes,Ln=Wt.plugins,er=Wt.renderPage,_i=Wt.scrollMode,Jn=Wt.setRenderRange,cr=Wt.viewMode,ar=Wt.viewerState,rr=Wt.onDocumentLoad,Zr=Wt.onOpenFile,Lr=Wt.onPageChange,Ir=Wt.onRotate,Hr=Wt.onRotatePage,xr=Wt.onZoom,Ur=bn.numPages,Nr=bn.loadingTask.docId,as=Et.useContext(xn).l10n,rs=Et.useContext(Rt),ls=rs.direction===_e.TextDirection.RightToLeft,us=Et.useRef(),fs=Et.useRef(),Os=Et.useState(Cn),xs=Os[0],Ns=Os[1],Ms=Et.useRef(null),Ls=HS({getCurrentPage:function(){return Qr.current.pageIndex}}),Ds=Et.useState(Nn),Fs=Ds[0],Js=Ds[1],ba=En(Fs),Vo=Et.useState(!1),zs=Vo[0],yo=Vo[1],Il=Et.useState(new Map),Br=Il[0],Or=Il[1],Cr=Et.useState(_i),kr=Cr[0],Tr=Cr[1],zr=En(kr),Gr=Et.useState(cr),Mr=Gr[0],yr=Gr[1],Yr=En(Mr),Jr=function(ir){var Xr=ln(),ts=Et.useState([]),ps=ts[0],ds=ts[1];return Et.useEffect(function(){ir.getOutline().then(function(ns){if(Xr.current&&ns!==null){var js=c_(ns);ds(js)}})},[]),ps}(bn),As=Et.useState(Mn),ys=As[0],qs=As[1],_o=En(ys),Qr=Et.useRef(ar),Ys=Et.useRef(typeof yn=="string"?yn:null),_s=Et.useRef(-1),Cs=Et.useRef(-1),Hs=Et.useRef(Cn),gs=US({getCurrentPage:function(){return Qr.current.pageIndex},getCurrentScrollMode:function(){return Qr.current.scrollMode},jumpToPage:function(ir){return vu(ir)},targetRef:fs}),mu=Et.useState(-1),Xp=mu[0],o0=mu[1],Wu=Et.useState(0),tv=Wu[0],QS=Wu[1],wo=nn({doc:bn});Et.useEffect(function(){return function(){nr.clear(),$r.clear()}},[Nr]);var p_=Et.useMemo(function(){return Object.assign({},zS,An)},[]),ZS=Et.useMemo(function(){return Array(Ur).fill(0).map(function(ir,Xr){var ts=[In[Xr].pageHeight,In[Xr].pageWidth],ps=Math.abs(Fs)%180==0?{height:ts[0],width:ts[1]}:{height:ts[1],width:ts[0]},ds={height:ps.height*ys,width:ps.width*ys};return p_.transformSize({numPages:Ur,pageIndex:Xr,size:ds})})},[Fs,ys]),bs=VS({enableSmoothScroll:wn,isRtl:ls,numberOfItems:Ur,parentRef:fs,scrollMode:kr,setRenderRange:Jn,sizes:ZS,viewMode:Mr}),JS=_n(function(){!Ys.current||Qr.current.fullScreenMode!==_e.FullScreenMode.Normal||Cn>0&&Hs.current===Cn||Gu(Ys.current)},200);(function(ir){var Xr=ir.targetRef,ts=ir.onResize;Mt(function(){var ps=new ResizeObserver(function(ns){ns.forEach(function(js){ts(js.target)})}),ds=Xr.current;if(ds)return ps.observe(ds),function(){ps.unobserve(ds)}},[])})({targetRef:fs,onResize:JS});var gu=function(ir){var Xr=ir;Ln.forEach(function(ts){ts.onViewerStateChange&&(Xr=ts.onViewerStateChange(Xr))}),Qr.current=Xr},e1=function(){return fs.current},t1=function(){return Qr.current},n1=Et.useCallback(function(ir){Ls.markVisitedDestination(ir)},[]),vE=Et.useCallback(function(ir){var Xr=ir.pageIndex,ts=ir.bottomOffset,ps=ir.leftOffset,ds=ir.scaleTo,ns=fs.current,js=Qr.current;return ns&&js?new Promise(function(yu,wE){hr(bn,Xr).then(function(a0){var bu=a0.getViewport({scale:1}),l0=0,__=(typeof ts=="function"?ts(bu.width,bu.height):ts)||0,c0=(typeof ps=="function"?ps(bu.width,bu.height):ps)||0,qp=js.scale;switch(ds){case _e.SpecialZoomLevel.PageFit:l0=0,c0=0,Gu(_e.SpecialZoomLevel.PageFit);break;case _e.SpecialZoomLevel.PageWidth:qp=fE(ns,In[Xr].pageHeight,In[Xr].pageWidth,_e.SpecialZoomLevel.PageWidth,cr,Ur),l0=(bu.height-__)*qp,c0*=qp,Gu(qp);break;default:l0=(bu.height-__)*qp,c0*=qp}switch(js.scrollMode){case _e.ScrollMode.Horizontal:bs.scrollToItem(Xr,{left:c0,top:0}).then(function(){yu()});break;case _e.ScrollMode.Vertical:default:bs.scrollToItem(Xr,{left:0,top:l0}).then(function(){yu()})}})}):Promise.resolve()},[]),m_=Et.useCallback(function(ir){return Ls.markVisitedDestination(ir),vE(ir)},[]),i1=Et.useCallback(function(){var ir=Ls.getNextDestination();return ir?vE(ir):Promise.resolve()},[]),r1=Et.useCallback(function(){var ir=Ls.getPreviousDestination();return ir?vE(ir):Promise.resolve()},[]),s1=Et.useCallback(function(){return bs.scrollToNextItem(Qr.current.pageIndex,Kp)},[]),vu=Et.useCallback(function(ir){return 0<=ir&&ir<Ur?bs.scrollToItem(ir,Kp):Promise.resolve()},[]),o1=Et.useCallback(function(){return bs.scrollToPreviousItem(Qr.current.pageIndex,Kp)},[]),g_=Et.useCallback(function(ir){var Xr,ts;(Xr=ir.name,ts=Xr.split(/\./).pop(),ts?ts.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(ps){var ds=new FileReader;ds.readAsArrayBuffer(ir),ds.onload=function(){var ns=new Uint8Array(ds.result);ps(ns)}}).then(function(ps){Zr(ir.name,ps)})},[Zr]),v_=Et.useCallback(function(ir){var Xr=ir===_e.RotateDirection.Backward?-90:90,ts=Qr.current.rotation,ps=ts===360||ts===-360?Xr:ts+Xr;wo.markNotRendered(),Js(ps),gu(xt(xt({},Qr.current),{rotation:ps})),Ir({direction:ir,doc:bn,rotation:ps})},[]),yE=Et.useCallback(function(ir,Xr){var ts=Xr===_e.RotateDirection.Backward?-90:90,ps=Qr.current.pagesRotation,ds=(ps.has(ir)?ps.get(ir):Nn)+ts,ns=ps.set(ir,ds);Or(ns),yo(function(js){return!js}),gu(xt(xt({},Qr.current),{pagesRotation:ns,rotatedPage:ir})),Hr({direction:Xr,doc:bn,pageIndex:ir,rotation:ds}),wo.markRendering(ir),o0(ir)},[]),y_=Et.useCallback(function(ir){gu(xt(xt({},Qr.current),{scrollMode:ir})),Tr(ir)},[]),b_=Et.useCallback(function(ir){gu(xt(xt({},Qr.current),{viewMode:ir})),yr(ir)},[]),Gu=Et.useCallback(function(ir){var Xr=fs.current,ts=Qr.current.pageIndex;if(!(ts<0||ts>=Ur)){var ps=In[ts].pageHeight,ds=In[ts].pageWidth,ns=Xr?typeof ir=="string"?fE(Xr,ps,ds,ir,Qr.current.viewMode,Ur):ir:1;Ys.current=typeof ir=="string"?ir:null,ns!==Qr.current.scale&&(QS(function(js){return js+1}),wo.markNotRendered(),qs(ns),xr({doc:bn,scale:ns}),gu(xt(xt({},Qr.current),{scale:ns})))}},[]),a1=Et.useCallback(function(ir){gs.enterFullScreenMode(ir)},[]),l1=Et.useCallback(function(){gs.exitFullScreenMode()},[]);Et.useEffect(function(){gu(xt(xt({},Qr.current),{fullScreenMode:gs.fullScreenMode}))},[gs.fullScreenMode]),Et.useEffect(function(){var ir={enterFullScreenMode:a1,exitFullScreenMode:l1,getPagesContainer:e1,getViewerState:t1,jumpToDestination:m_,jumpToNextDestination:i1,jumpToPreviousDestination:r1,jumpToNextPage:s1,jumpToPreviousPage:o1,jumpToPage:vu,openFile:g_,rotate:v_,rotatePage:yE,setViewerState:gu,switchScrollMode:y_,switchViewMode:b_,zoom:Gu};return Ln.forEach(function(Xr){Xr.install&&Xr.install(ir)}),function(){Ln.forEach(function(Xr){Xr.uninstall&&Xr.uninstall(ir)})}},[Nr]),Et.useEffect(function(){rr({doc:bn,file:Qt}),Ln.forEach(function(ir){ir.onDocumentLoad&&ir.onDocumentLoad({doc:bn,file:Qt})})},[Nr]);var bE,EE,AE,E_=bs.boundingClientRect;bE=function(){Cn&&vu(Cn)},EE=E_.height>0&&E_.width>0,AE=Et.useRef(!1),Mt(function(){EE&&!AE.current&&(AE.current=!0,bE())},[bE,EE]),Mt(function(){var ir=Qr.current.pageIndex;ir>-1&&zr!==kr&&bs.scrollToItem(ir,Kp).then(function(){gs.fullScreenMode===_e.FullScreenMode.EnteredCompletely&&(wn||wo.markNotRendered(),_s.current=-1)})},[kr]),Mt(function(){var ir=Qr.current.pageIndex;ir>-1&&ba!==Fs&&bs.scrollToItem(ir,Kp)},[Fs]),Mt(function(){_o!=0&&_o!=Qr.current.scale&&bs.zoom(Qr.current.scale/_o,Qr.current.pageIndex).then(function(){gs.fullScreenMode===_e.FullScreenMode.EnteredCompletely&&(Cs.current=-1)})},[ys]),Mt(function(){if(Yr!==Qr.current.viewMode){var ir=bs.startPage,Xr=bs.endPage,ts=bs.virtualItems;wo.markNotRendered(),wo.setRange(ir,Xr);for(var ps=function(ns){var js=ts.find(function(yu){return yu.index===ns});js&&wo.setVisibility(ns,js.visibility)},ds=ir;ds<=Xr;ds++)ps(ds);_E()}},[Mr]),Mt(function(){var ir=Qr.current.pageIndex;ir>-1&&Yr!==Mr&&bs.scrollToItem(ir,Kp)},[Mr]),Mt(function(){var ir=Qr.current.pageIndex;ir>0&&ir===Cn&&Hs.current===Cn&&Ys.current&&(Hs.current=-1,Gu(Ys.current))},[xs]),Et.useEffect(function(){bs.isSmoothScrolling||Ms.current!==null&&Ms.current===xs||(Ms.current=xs,Lr({currentPage:xs,doc:bn}))},[xs,bs.isSmoothScrolling]),Et.useEffect(function(){gs.fullScreenMode===_e.FullScreenMode.Entering&&Qr.current.scrollMode===_e.ScrollMode.Page&&(_s.current=Qr.current.pageIndex),gs.fullScreenMode===_e.FullScreenMode.EnteredCompletely&&Qr.current.scrollMode===_e.ScrollMode.Page&&wn&&(_s.current=-1),gs.fullScreenMode===_e.FullScreenMode.EnteredCompletely&&Ys.current&&(Cs.current=Qr.current.pageIndex,Gu(Ys.current))},[gs.fullScreenMode]),Et.useEffect(function(){if(gs.fullScreenMode!==_e.FullScreenMode.Entering&&gs.fullScreenMode!==_e.FullScreenMode.Exitting&&!bs.isSmoothScrolling){var ir=bs.startPage,Xr=bs.endPage,ts=bs.maxVisbilityIndex,ps=bs.virtualItems,ds=ts,ns=gs.fullScreenMode===_e.FullScreenMode.Entered||gs.fullScreenMode===_e.FullScreenMode.EnteredCompletely;if(!(ns&&ds!==_s.current&&_s.current>-1||ns&&ds!==Cs.current&&Cs.current>-1)){Ns(ds),gu(xt(xt({},Qr.current),{pageIndex:ds})),wo.setRange(ir,Xr);for(var js=function(wE){var a0=ps.find(function(bu){return bu.index===wE});a0&&wo.setVisibility(wE,a0.visibility)},yu=ir;yu<=Xr;yu++)js(yu);_E()}}},[bs.startPage,bs.endPage,bs.isSmoothScrolling,bs.maxVisbilityIndex,gs.fullScreenMode,zs,Fs,ys]);var c1=Et.useCallback(function(ir){wo.markRendered(ir),_E()},[tv]),_E=function(){var ir=wo.getHighestPriorityPage();ir>-1&&wo.isInRange(ir)&&(wo.markRendering(ir),o0(ir))},u1=function(ir){var Xr=xs-1,ts=xs+1;switch(ir){case"FirstPage":vu(0);break;case"LastPage":vu(Ur-1);break;case"NextPage":ts<Ur&&vu(ts);break;case"PrevPage":Xr>=0&&vu(Xr)}},d1=Et.useCallback(function(){var ir=bs.virtualItems,Xr=[];switch(Mr){case _e.ViewMode.DualPage:Xr=Pn(ir,2);break;case _e.ViewMode.DualPageWithCover:ir.length&&(Xr=ir[0].index===0?[[ir[0]]].concat(Pn(ir.slice(1),2)):Pn(ir,2));break;case _e.ViewMode.SinglePage:default:Xr=Pn(ir,1)}var ts=as&&as.core?as.core.pageLabel:"Page {{pageIndex}}",ps={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:us,style:{height:"100%"}},children:Et.createElement(Et.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:kt({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":kr===_e.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":ls,"rpv-core__inner-pages--single":kr===_e.ScrollMode.Page,"rpv-core__inner-pages--vertical":kr===_e.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":kr===_e.ScrollMode.Wrapped}),ref:fs,style:{height:"100%",position:"relative"}},children:Et.createElement("div",{"data-testid":"core__inner-current-page-".concat(xs),style:Object.assign({"--scale-factor":ys},bs.getContainerStyles())},Xr.map(function(ds){return Et.createElement("div",{className:kt({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":kr===_e.ScrollMode.Page}),style:bs.getItemContainerStyles(ds[0]),key:"".concat(ds[0].index,"-").concat(Mr)},ds.map(function(ns){var js=Mr===_e.ViewMode.DualPageWithCover&&(ns.index===0||Ur%2==0&&ns.index===Ur-1);return Et.createElement("div",{"aria-label":ts.replace("{{pageIndex}}","".concat(ns.index+1)),className:kt({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":Mr===_e.ViewMode.DualPage&&ns.index%2==0,"rpv-core__inner-page--dual-odd":Mr===_e.ViewMode.DualPage&&ns.index%2==1,"rpv-core__inner-page--dual-cover":js,"rpv-core__inner-page--dual-cover-even":Mr===_e.ViewMode.DualPageWithCover&&!js&&ns.index%2==0,"rpv-core__inner-page--dual-cover-odd":Mr===_e.ViewMode.DualPageWithCover&&!js&&ns.index%2==1,"rpv-core__inner-page--single":Mr===_e.ViewMode.SinglePage&&kr===_e.ScrollMode.Page}),role:"region",key:"".concat(ns.index,"-").concat(Mr),style:Object.assign({},bs.getItemStyles(ns),p_.buildPageStyles({numPages:Ur,pageIndex:ns.index,scrollMode:kr,viewMode:Mr}))},Et.createElement(kS,{doc:bn,measureRef:ns.measureRef,outlines:Jr,pageIndex:ns.index,pageRotation:Br.has(ns.index)?Br.get(ns.index):0,pageSize:In[ns.index],plugins:Ln,renderPage:er,renderQueueKey:tv,rotation:Fs,scale:ys,shouldRender:Xp===ns.index,viewMode:Mr,onExecuteNamedAction:u1,onJumpFromLinkAnnotation:n1,onJumpToDest:m_,onRenderCompleted:c1,onRotatePage:yE}))}))}))}};return Ln.forEach(function(ds){ds.renderViewer&&(ps=ds.renderViewer({containerRef:us,doc:bn,pagesContainerRef:fs,pagesRotation:Br,pageSizes:In,rotation:Fs,slot:ps,themeContext:rs,jumpToPage:vu,openFile:g_,rotate:v_,rotatePage:yE,switchScrollMode:y_,switchViewMode:b_,zoom:Gu}))}),ps},[Ln,bs]),A_=Et.useCallback(function(ir){return Et.createElement("div",xt({},ir.attrs,{style:ir.attrs&&ir.attrs.style?ir.attrs.style:{}}),ir.children,ir.subSlot&&A_(ir.subSlot))},[]);return A_(d1())},d_=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],GS=function(Wt){var Qt=Wt.defaultScale,yn=Wt.doc,bn=Wt.render,wn=Wt.scrollMode,Cn=Wt.viewMode,Nn=Et.useRef(),Mn=Et.useState({pageSizes:[],scale:0}),An=Mn[0],In=Mn[1];return Et.useLayoutEffect(function(){var Ln=Array(yn.numPages).fill(0).map(function(er,_i){return new Promise(function(Jn,cr){hr(yn,_i).then(function(ar){var rr=ar.getViewport({scale:1});Jn({pageHeight:rr.height,pageWidth:rr.width,rotation:rr.rotation})})})});Promise.all(Ln).then(function(er){var _i=Nn.current;if(_i&&er.length!==0){var Jn=er[0].pageWidth,cr=er[0].pageHeight,ar=_i.parentElement,rr=(ar.clientWidth-45)/Jn,Zr=(ar.clientHeight-45)/cr,Lr=rr;switch(wn){case _e.ScrollMode.Horizontal:Lr=Math.min(rr,Zr);break;case _e.ScrollMode.Vertical:default:Lr=rr}var Ir,Hr,xr=Qt?typeof Qt=="string"?fE(ar,cr,Jn,Qt,Cn,yn.numPages):Qt:(Ir=Lr,(Hr=d_.findIndex(function(Ur){return Ur>=Ir}))===-1||Hr===0?Ir:d_[Hr-1]);In({pageSizes:er,scale:xr})}})},[yn.loadingTask.docId]),An.pageSizes.length===0||An.scale===0?Et.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:Nn},Et.createElement($t,null)):bn(An.pageSizes,An.scale)},s0=function(){},mE=function(Wt){function Qt(yn,bn){var wn=Wt.call(this)||this;return wn.verifyPassword=yn,wn.passwordStatus=bn,wn}return wt(Qt,Wt),Qt}(s0),KS=function(Wt){var Qt=Wt.passwordStatus,yn=Wt.renderProtectedView,bn=Wt.verifyPassword,wn=Wt.onDocumentAskPassword,Cn=Et.useContext(xn).l10n,Nn=Et.useState(""),Mn=Nn[0],An=Nn[1],In=Et.useContext(Rt).direction===_e.TextDirection.RightToLeft,Ln=function(){return bn(Mn)};return Et.useEffect(function(){wn&&wn({verifyPassword:bn})},[]),yn?yn({passwordStatus:Qt,verifyPassword:bn}):Et.createElement("div",{className:"rpv-core__asking-password-wrapper"},Et.createElement("div",{className:kt({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":In})},Et.createElement("div",{className:"rpv-core__asking-password-message"},Qt===_e.PasswordStatus.RequiredPassword&&Cn.core.askingPassword.requirePasswordToOpen,Qt===_e.PasswordStatus.WrongPassword&&Cn.core.wrongPassword.tryAgain),Et.createElement("div",{className:"rpv-core__asking-password-body"},Et.createElement("div",{className:kt({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!In,"rpv-core__asking-password-input--rtl":In})},Et.createElement(Bt,{testId:"core__asking-password-input",type:"password",value:Mn,onChange:An,onKeyDown:function(er){er.key==="Enter"&&Ln()}})),Et.createElement(Dt,{onClick:Ln},Cn.core.askingPassword.submit))))},h_=function(Wt){function Qt(yn){var bn=Wt.call(this)||this;return bn.doc=yn,bn}return wt(Qt,Wt),Qt}(s0),f_=function(Wt){function Qt(yn){var bn=Wt.call(this)||this;return bn.error=yn,bn}return wt(Qt,Wt),Qt}(s0),gE=function(Wt){function Qt(yn){var bn=Wt.call(this)||this;return bn.percentages=yn,bn}return wt(Qt,Wt),Qt}(s0),XS=function(Wt){var Qt=Wt.characterMap,yn=Wt.file,bn=Wt.httpHeaders,wn=Wt.render,Cn=Wt.renderError,Nn=Wt.renderLoader,Mn=Wt.renderProtectedView,An=Wt.transformGetDocumentParams,In=Wt.withCredentials,Ln=Wt.onDocumentAskPassword,er=Et.useContext(Rt).direction===_e.TextDirection.RightToLeft,_i=Et.useState(new gE(0)),Jn=_i[0],cr=_i[1],ar=Et.useRef(""),rr=ln();return Et.useEffect(function(){ar.current="",cr(new gE(0));var Zr=new At.PDFWorker({name:"PDFWorker_".concat(Date.now())}),Lr=Object.assign({httpHeaders:bn,withCredentials:In,worker:Zr},typeof yn=="string"?{url:yn}:{data:yn},Qt?{cMapUrl:Qt.url,cMapPacked:Qt.isCompressed}:{}),Ir=An?An(Lr):Lr,Hr=At.getDocument(Ir);return Hr.onPassword=function(xr,Ur){switch(Ur){case At.PasswordResponses.NEED_PASSWORD:rr.current&&cr(new mE(xr,_e.PasswordStatus.RequiredPassword));break;case At.PasswordResponses.INCORRECT_PASSWORD:rr.current&&cr(new mE(xr,_e.PasswordStatus.WrongPassword))}},Hr.onProgress=function(xr){var Ur=xr.total>0?Math.min(100,100*xr.loaded/xr.total):100;rr.current&&ar.current===""&&cr(new gE(Ur))},Hr.promise.then(function(xr){ar.current=xr.loadingTask.docId,rr.current&&cr(new h_(xr))},function(xr){return rr.current&&!Zr.destroyed&&cr(new f_({message:xr.message||"Cannot load document",name:xr.name}))}),function(){Hr.destroy(),Zr.destroy()}},[yn]),Jn instanceof mE?Et.createElement(KS,{passwordStatus:Jn.passwordStatus,renderProtectedView:Mn,verifyPassword:Jn.verifyPassword,onDocumentAskPassword:Ln}):Jn instanceof h_?wn(Jn.doc):Jn instanceof f_?Cn?Cn(Jn.error):Et.createElement("div",{className:kt({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":er})},Et.createElement("div",{className:"rpv-core__doc-error-text"},Jn.error.message)):Et.createElement("div",{"data-testid":"core__doc-loading",className:kt({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":er})},Nn?Nn(Jn.percentages):Et.createElement($t,null))},qS=function(Wt,Qt){var yn=Et.useMemo(function(){return Wt==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":Wt},[]),bn=Et.useState(yn),wn=bn[0],Cn=bn[1],Nn=En(wn);return Et.useEffect(function(){if(Wt==="auto"){var Mn=window.matchMedia("(prefers-color-scheme: dark)"),An=function(In){Cn(In.matches?"dark":"light")};return Mn.addEventListener("change",An),function(){return Mn.removeEventListener("change",An)}}},[]),Et.useEffect(function(){wn!==Nn&&Qt&&Qt(wn)},[wn]),Et.useEffect(function(){Wt!==wn&&Cn(Wt)},[Wt]),{currentTheme:wn,setCurrentTheme:Cn}},YS=function(Wt){return{startPage:Wt.startPage-3,endPage:Wt.endPage+3}};_e.Button=function(Wt){var Qt=Wt.children,yn=Wt.testId,bn=Wt.onClick,wn=Et.useContext(Rt).direction===_e.TextDirection.RightToLeft,Cn=yn?{"data-testid":yn}:{};return Et.createElement("button",xt({className:kt({"rpv-core__button":!0,"rpv-core__button--rtl":wn}),type:"button",onClick:bn},Cn),Qt)},_e.Icon=Ot,_e.LazyRender=function(Wt){var Qt=Wt.attrs,yn=Wt.children,bn=Wt.testId,wn=Et.useState(!1),Cn=wn[0],Nn=wn[1],Mn=bn?xt(xt({},Qt),{"data-testid":bn}):Qt,An=Lt({once:!0,onVisibilityChanged:function(In){In.isVisible&&Nn(!0)}});return Et.createElement("div",xt({ref:An},Mn),Cn&&yn)},_e.LocalizationContext=xn,_e.Menu=function(Wt){var Qt=Wt.children,yn=Et.useRef(),bn=Et.useRef([]),wn=Et.useContext(Rt).direction===_e.TextDirection.RightToLeft,Cn=function(Mn){if(yn.current)switch(Mn.key){case"Tab":Mn.preventDefault();break;case"ArrowDown":Mn.preventDefault(),Nn(function(An,In){return In+1});break;case"ArrowUp":Mn.preventDefault(),Nn(function(An,In){return In-1});break;case"End":Mn.preventDefault(),Nn(function(An,In){return An.length-1});break;case"Home":Mn.preventDefault(),Nn(function(An,In){return 0})}},Nn=function(Mn){if(yn.current){var An=bn.current,In=An.findIndex(function(er){return er.getAttribute("tabindex")==="0"}),Ln=Math.min(An.length-1,Math.max(0,Mn(An,In)));In>=0&&In<=An.length-1&&An[In].setAttribute("tabindex","-1"),An[Ln].setAttribute("tabindex","0"),An[Ln].focus()}};return Mt(function(){var Mn=yn.current;if(Mn){var An=function(In){var Ln=[];return In.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(er){if(er instanceof HTMLElement){var _i=er.parentElement;(_i===In||window.getComputedStyle(_i).display!=="none")&&Ln.push(er)}}),Ln}(Mn);bn.current=An}},[]),Mt(function(){return document.addEventListener("keydown",Cn),function(){document.removeEventListener("keydown",Cn)}},[]),Et.createElement("div",{ref:yn,"aria-orientation":"vertical",className:kt({"rpv-core__menu":!0,"rpv-core__menu--rtl":wn}),role:"menu",tabIndex:0},Qt)},_e.MenuDivider=function(){return Et.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},_e.MenuItem=function(Wt){var Qt=Wt.checked,yn=Qt!==void 0&&Qt,bn=Wt.children,wn=Wt.icon,Cn=wn===void 0?null:wn,Nn=Wt.isDisabled,Mn=Nn!==void 0&&Nn,An=Wt.testId,In=Wt.onClick,Ln=Et.useContext(Rt).direction===_e.TextDirection.RightToLeft,er=An?{"data-testid":An}:{};return Et.createElement("button",xt({className:kt({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":Mn,"rpv-core__menu-item--ltr":!Ln,"rpv-core__menu-item--rtl":Ln}),role:"menuitem",tabIndex:-1,type:"button",onClick:In},er),Et.createElement("div",{className:kt({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!Ln,"rpv-core__menu-item-icon--rtl":Ln})},Cn),Et.createElement("div",{className:kt({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!Ln,"rpv-core__menu-item-label--rtl":Ln})},bn),Et.createElement("div",{className:kt({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!Ln,"rpv-core__menu-item-check--rtl":Ln})},yn&&Et.createElement(Ft,null)))},_e.MinimalButton=function(Wt){var Qt=Wt.ariaLabel,yn=Qt===void 0?"":Qt,bn=Wt.ariaKeyShortcuts,wn=bn===void 0?"":bn,Cn=Wt.children,Nn=Wt.isDisabled,Mn=Nn!==void 0&&Nn,An=Wt.isSelected,In=An!==void 0&&An,Ln=Wt.testId,er=Wt.onClick,_i=Et.useContext(Rt).direction===_e.TextDirection.RightToLeft,Jn=Ln?{"data-testid":Ln}:{};return Et.createElement("button",xt({"aria-label":yn},wn&&{"aria-keyshortcuts":wn},Mn&&{"aria-disabled":!0},{className:kt({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":Mn,"rpv-core__minimal-button--rtl":_i,"rpv-core__minimal-button--selected":In}),type:"button",onClick:er},Jn),Cn)},_e.Modal=function(Wt){var Qt=Wt.ariaControlsSuffix,yn=Wt.closeOnClickOutside,bn=Wt.closeOnEscape,wn=Wt.content,Cn=Wt.isOpened,Nn=Cn!==void 0&&Cn,Mn=Wt.target,An=Qt||"".concat(qt());return Et.createElement(Bn,{target:Mn?function(In,Ln){return Et.createElement("div",{"aria-expanded":Ln?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(An)},Mn(In,Ln))}:null,content:function(In){return Et.createElement(cn,null,Et.createElement(dn,{ariaControlsSuffix:An,closeOnClickOutside:yn,closeOnEscape:bn,onToggle:In},wn(In)))},isOpened:Nn})},_e.Popover=function(Wt){var Qt=Wt.ariaHasPopup,yn=Qt===void 0?"dialog":Qt,bn=Wt.ariaControlsSuffix,wn=Wt.closeOnClickOutside,Cn=Wt.closeOnEscape,Nn=Wt.content,Mn=Wt.lockScroll,An=Mn===void 0||Mn,In=Wt.offset,Ln=Wt.position,er=Wt.target,_i=Tn(!1),Jn=_i.opened,cr=_i.toggle,ar=Et.useRef(),rr=Et.useMemo(function(){return bn||"".concat(qt())},[]);return Et.createElement("div",{ref:ar,"aria-expanded":Jn?"true":"false","aria-haspopup":yn,"aria-controls":"rpv-core__popver-body-".concat(rr)},er(cr,Jn),Jn&&Et.createElement(Et.Fragment,null,An&&Et.createElement(zn,{closeOnEscape:Cn,onClose:cr}),Et.createElement($n,{ariaControlsSuffix:rr,closeOnClickOutside:wn,offset:In,position:Ln,targetRef:ar,onClose:cr},Nn(cr))))},_e.PrimaryButton=Dt,_e.ProgressBar=function(Wt){var Qt=Wt.progress,yn=Et.useContext(Rt).direction===_e.TextDirection.RightToLeft;return Et.createElement("div",{className:kt({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":yn})},Et.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(Qt,"%")}},Qt,"%"))},_e.Separator=function(){return Et.createElement("div",{className:"rpv-core__separator"})},_e.Spinner=$t,_e.Splitter=function(Wt){var Qt=Wt.constrain,yn=Et.useContext(Rt).direction===_e.TextDirection.RightToLeft,bn=Et.useRef(),wn=Et.useRef(),Cn=Et.useRef(),Nn=Et.useRef(0),Mn=Et.useRef(0),An=Et.useRef(0),In=Et.useRef(0),Ln={capture:!0},er=function(Jn){var cr=bn.current,ar=wn.current,rr=Cn.current;if(cr&&ar&&rr){var Zr=In.current,Lr=Jn.clientX-Nn.current,Ir=An.current+(yn?-Lr:Lr),Hr=cr.parentElement.getBoundingClientRect().width,xr=100*Ir/Hr;if(cr.classList.add("rpv-core__splitter--resizing"),Qt){var Ur=Hr-Ir-Zr;if(!Qt({firstHalfPercentage:xr,firstHalfSize:Ir,secondHalfPercentage:100*Ur/Hr,secondHalfSize:Ur}))return}ar.style.width="".concat(xr,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),ar.classList.add("rpv-core__splitter-sibling--resizing"),rr.classList.add("rpv-core__splitter-sibling--resizing")}},_i=function(Jn){var cr=bn.current,ar=wn.current,rr=Cn.current;cr&&ar&&rr&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),cr.classList.remove("rpv-core__splitter--resizing"),ar.classList.remove("rpv-core__splitter-sibling--resizing"),rr.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",er,Ln),document.removeEventListener("mouseup",_i,Ln))};return Et.useEffect(function(){var Jn=bn.current;Jn&&(In.current=Jn.getBoundingClientRect().width,wn.current=Jn.previousElementSibling,Cn.current=Jn.nextElementSibling)},[]),Et.createElement("div",{ref:bn,className:"rpv-core__splitter",onMouseDown:function(Jn){var cr=wn.current;cr&&(Nn.current=Jn.clientX,Mn.current=Jn.clientY,An.current=cr.getBoundingClientRect().width,document.addEventListener("mousemove",er,Ln),document.addEventListener("mouseup",_i,Ln))}})},_e.TextBox=Bt,_e.ThemeContext=Rt,_e.Tooltip=function(Wt){var Qt=Wt.ariaControlsSuffix,yn=Wt.content,bn=Wt.offset,wn=Wt.position,Cn=Wt.target,Nn=Tn(!1),Mn=Nn.opened,An=Nn.toggle,In=Et.useRef(),Ln=Et.useRef(),er=Et.useMemo(function(){return Qt||"".concat(qt())},[]);tn(function(){In.current&&document.activeElement&&In.current.contains(document.activeElement)&&Jn()});var _i=function(){An(_e.ToggleStatus.Open)},Jn=function(){An(_e.ToggleStatus.Close)};return Et.createElement(Et.Fragment,null,Et.createElement("div",{ref:In,"aria-describedby":"rpv-core__tooltip-body-".concat(er),onBlur:function(cr){cr.relatedTarget instanceof HTMLElement&&cr.currentTarget.parentElement&&cr.currentTarget.parentElement.contains(cr.relatedTarget)?Ln.current&&(Ln.current.style.display="none"):Jn()},onFocus:_i,onMouseEnter:_i,onMouseLeave:Jn},Cn),Mn&&Et.createElement(Zn,{ariaControlsSuffix:er,contentRef:Ln,offset:bn,position:wn,targetRef:In},yn()))},_e.Viewer=function(Wt){var Qt=Wt.characterMap,yn=Wt.defaultScale,bn=Wt.enableSmoothScroll,wn=bn===void 0||bn,Cn=Wt.fileUrl,Nn=Wt.httpHeaders,Mn=Nn===void 0?{}:Nn,An=Wt.initialPage,In=An===void 0?0:An,Ln=Wt.pageLayout,er=Wt.initialRotation,_i=er===void 0?0:er,Jn=Wt.localization,cr=Wt.plugins,ar=cr===void 0?[]:cr,rr=Wt.renderError,Zr=Wt.renderLoader,Lr=Wt.renderPage,Ir=Wt.renderProtectedView,Hr=Wt.scrollMode,xr=Hr===void 0?_e.ScrollMode.Vertical:Hr,Ur=Wt.setRenderRange,Nr=Ur===void 0?YS:Ur,as=Wt.transformGetDocumentParams,rs=Wt.theme,ls=rs===void 0?{direction:_e.TextDirection.LeftToRight,theme:"light"}:rs,us=Wt.viewMode,fs=us===void 0?_e.ViewMode.SinglePage:us,Os=Wt.withCredentials,xs=Os!==void 0&&Os,Ns=Wt.onDocumentAskPassword,Ms=Wt.onDocumentLoad,Ls=Ms===void 0?function(){}:Ms,Ds=Wt.onPageChange,Fs=Ds===void 0?function(){}:Ds,Js=Wt.onRotate,ba=Js===void 0?function(){}:Js,Vo=Wt.onRotatePage,zs=Vo===void 0?function(){}:Vo,yo=Wt.onSwitchTheme,Il=yo===void 0?function(){}:yo,Br=Wt.onZoom,Or=Br===void 0?function(){}:Br,Cr=Et.useState({data:Cn,name:typeof Cn=="string"?Cn:"",shouldLoad:!1}),kr=Cr[0],Tr=Cr[1],zr=function(_s,Cs){Tr({data:Cs,name:_s,shouldLoad:!0})},Gr=Et.useState(!1),Mr=Gr[0],yr=Gr[1],Yr=En(kr);Et.useEffect(function(){var _s,Cs,Hs,gs;_s=Yr.data,gs=typeof(Cs=Cn),(Hs=typeof _s)=="string"&&gs==="string"&&_s===Cs||Hs==="object"&&gs==="object"&&_s.length===Cs.length&&_s.every(function(mu,Xp){return mu===Cs[Xp]})||Tr({data:Cn,name:typeof Cn=="string"?Cn:"",shouldLoad:Mr})},[Cn,Mr]);var Jr=Lt({onVisibilityChanged:function(_s){yr(_s.isVisible),_s.isVisible&&Tr(function(Cs){return Object.assign({},Cs,{shouldLoad:!0})})}}),As=typeof ls=="string"?{direction:_e.TextDirection.LeftToRight,theme:ls}:ls,ys=Et.useState(Jn||mn),qs=ys[0],_o=ys[1],Qr={l10n:qs,setL10n:_o},Ys=Object.assign({},{direction:As.direction},qS(As.theme||"light",Il));return Et.useEffect(function(){Jn&&_o(Jn)},[Jn]),Et.createElement(xn.Provider,{value:Qr},Et.createElement(Rt.Provider,{value:Ys},Et.createElement("div",{ref:Jr,className:"rpv-core__viewer rpv-core__viewer--".concat(Ys.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},kr.shouldLoad&&Et.createElement(XS,{characterMap:Qt,file:kr.data,httpHeaders:Mn,render:function(_s){return Et.createElement(GS,{defaultScale:yn,doc:_s,render:function(Cs,Hs){return Et.createElement(WS,{currentFile:{data:kr.data,name:kr.name},defaultScale:yn,doc:_s,enableSmoothScroll:wn,initialPage:In,initialRotation:_i,initialScale:Hs,pageLayout:Ln,pageSizes:Cs,plugins:ar,renderPage:Lr,scrollMode:xr,setRenderRange:Nr,viewMode:fs,viewerState:{file:kr,fullScreenMode:_e.FullScreenMode.Normal,pageIndex:-1,pageHeight:Cs[0].pageHeight,pageWidth:Cs[0].pageWidth,pagesRotation:new Map,rotation:_i,scale:Hs,scrollMode:xr,viewMode:fs},onDocumentLoad:Ls,onOpenFile:zr,onPageChange:Fs,onRotate:ba,onRotatePage:zs,onZoom:Or})},scrollMode:xr,viewMode:fs})},renderError:rr,renderLoader:Zr,renderProtectedView:Ir,transformGetDocumentParams:as,withCredentials:xs,onDocumentAskPassword:Ns}))))},_e.Worker=function(Wt){var Qt=Wt.children,yn=Wt.workerUrl;return At.GlobalWorkerOptions.workerSrc=yn,Et.createElement(Et.Fragment,null,Qt)},_e.chunk=Pn,_e.classNames=kt,_e.createStore=function(Wt){var Qt=Wt||{},yn={},bn=function(Cn,Nn){var Mn;Qt=xt(xt({},Qt),((Mn={})[Cn]=Nn,Mn)),(yn[Cn]||[]).forEach(function(An){return An(Qt[Cn])})},wn=function(Cn){return Qt[Cn]};return{subscribe:function(Cn,Nn){yn[Cn]=(yn[Cn]||[]).concat(Nn)},unsubscribe:function(Cn,Nn){yn[Cn]=(yn[Cn]||[]).filter(function(Mn){return Mn!==Nn})},update:function(Cn,Nn){bn(Cn,Nn)},updateCurrentValue:function(Cn,Nn){var Mn=wn(Cn);Mn!==void 0&&bn(Cn,Nn(Mn))},get:function(Cn){return wn(Cn)}}},_e.getDestination=wr,_e.getPage=hr,_e.isFullScreenEnabled=Gt,_e.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},_e.useDebounceCallback=_n,_e.useIntersectionObserver=Lt,_e.useIsMounted=ln,_e.useIsomorphicLayoutEffect=Mt,_e.usePrevious=En,_e.useRenderQueue=nn})(core_min);export{AnimatePresence as A,BrowserRouter as B,CircleCheckBig as C,ForwardRef as F,Loader as L,MessageCircle as M,Routes as R,Send as S,Tt as T,User as U,X,Zt as Z,__webpack_exports__GlobalWorkerOptions as _,axios as a,LoaderCircle as b,ct as c,FileText as d,TriangleAlert as e,ft as f,LineChart as g,CircleX as h,FaEdit as i,jsxRuntimeExports as j,useLocation as k,Route as l,motion as m,client as n,React as o,pdfjs as p,reactExports as r,useNavigate as u};
